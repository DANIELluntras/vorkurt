(self.webpackChunkvorkurt=self.webpackChunkvorkurt||[]).push([[179],{1879:($t,$e,x)=>{"use strict";x.d($e,{rt:()=>De,$s:()=>Zt,Em:()=>ar,tE:()=>xt,qm:()=>Qe,X6:()=>ce,yG:()=>be});var g=x(9808),E=x(5e3),B=x(8929),ne=x(2654),he=x(591),q=x(1086),se=x(9909),X=x(2868),ie=x(13),Q=x(2198),oe=x(4850),Me=(x(2986),x(1307)),Ve=x(5778),xe=x(7625),Oe=x(4865),ee=x(4565),Te=x(3263);function ft(ve,Ce){return(ve.getAttribute(Ce)||"").match(/\S+/g)||[]}const we="cdk-describedby-message-container",Pe="cdk-describedby-message",qe="cdk-describedby-host";let et=0;const At=new Map;let Ut=null,Zt=(()=>{class ve{constructor(ye){this._document=ye}describe(ye,Ke,bt){if(!this._canBeDescribed(ye,Ke))return;const ze=jt(Ke,bt);"string"!=typeof Ke?(tn(Ke),At.set(ze,{messageElement:Ke,referenceCount:0})):At.has(ze)||this._createMessageElement(Ke,bt),this._isElementDescribedByMessage(ye,ze)||this._addMessageReference(ye,ze)}removeDescription(ye,Ke,bt){if(!Ke||!this._isElementNode(ye))return;const ze=jt(Ke,bt);if(this._isElementDescribedByMessage(ye,ze)&&this._removeMessageReference(ye,ze),"string"==typeof Ke){const Ue=At.get(ze);Ue&&0===Ue.referenceCount&&this._deleteMessageElement(ze)}Ut&&0===Ut.childNodes.length&&this._deleteMessagesContainer()}ngOnDestroy(){const ye=this._document.querySelectorAll(`[${qe}]`);for(let Ke=0;Ke<ye.length;Ke++)this._removeCdkDescribedByReferenceIds(ye[Ke]),ye[Ke].removeAttribute(qe);Ut&&this._deleteMessagesContainer(),At.clear()}_createMessageElement(ye,Ke){const bt=this._document.createElement("div");tn(bt),bt.textContent=ye,Ke&&bt.setAttribute("role",Ke),this._createMessagesContainer(),Ut.appendChild(bt),At.set(jt(ye,Ke),{messageElement:bt,referenceCount:0})}_deleteMessageElement(ye){const Ke=At.get(ye),bt=Ke&&Ke.messageElement;Ut&&bt&&Ut.removeChild(bt),At.delete(ye)}_createMessagesContainer(){if(!Ut){const ye=this._document.getElementById(we);ye&&ye.parentNode&&ye.parentNode.removeChild(ye),Ut=this._document.createElement("div"),Ut.id=we,Ut.style.visibility="hidden",Ut.classList.add("cdk-visually-hidden"),this._document.body.appendChild(Ut)}}_deleteMessagesContainer(){Ut&&Ut.parentNode&&(Ut.parentNode.removeChild(Ut),Ut=null)}_removeCdkDescribedByReferenceIds(ye){const Ke=ft(ye,"aria-describedby").filter(bt=>0!=bt.indexOf(Pe));ye.setAttribute("aria-describedby",Ke.join(" "))}_addMessageReference(ye,Ke){const bt=At.get(Ke);(function(ve,Ce,ye){const Ke=ft(ve,Ce);Ke.some(bt=>bt.trim()==ye.trim())||(Ke.push(ye.trim()),ve.setAttribute(Ce,Ke.join(" ")))})(ye,"aria-describedby",bt.messageElement.id),ye.setAttribute(qe,""),bt.referenceCount++}_removeMessageReference(ye,Ke){const bt=At.get(Ke);bt.referenceCount--,function(ve,Ce,ye){const bt=ft(ve,Ce).filter(ze=>ze!=ye.trim());bt.length?ve.setAttribute(Ce,bt.join(" ")):ve.removeAttribute(Ce)}(ye,"aria-describedby",bt.messageElement.id),ye.removeAttribute(qe)}_isElementDescribedByMessage(ye,Ke){const bt=ft(ye,"aria-describedby"),ze=At.get(Ke),Ue=ze&&ze.messageElement.id;return!!Ue&&-1!=bt.indexOf(Ue)}_canBeDescribed(ye,Ke){if(!this._isElementNode(ye))return!1;if(Ke&&"object"==typeof Ke)return!0;const bt=null==Ke?"":`${Ke}`.trim(),ze=ye.getAttribute("aria-label");return!(!bt||ze&&ze.trim()===bt)}_isElementNode(ye){return ye.nodeType===this._document.ELEMENT_NODE}}return ve.\u0275fac=function(ye){return new(ye||ve)(E.LFG(g.K0))},ve.\u0275prov=E.Yz7({factory:function(){return new ve(E.LFG(g.K0))},token:ve,providedIn:"root"}),ve})();function jt(ve,Ce){return"string"==typeof ve?`${Ce||""}/${ve}`:ve}function tn(ve){ve.id||(ve.id=`${Pe}-${et++}`)}class ar extends class{constructor(Ce){this._items=Ce,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new B.xQ,this._typeaheadSubscription=ne.w.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._skipPredicateFn=ye=>ye.disabled,this._pressedLetters=[],this.tabOut=new B.xQ,this.change=new B.xQ,Ce instanceof E.n_E&&Ce.changes.subscribe(ye=>{if(this._activeItem){const bt=ye.toArray().indexOf(this._activeItem);bt>-1&&bt!==this._activeItemIndex&&(this._activeItemIndex=bt)}})}skipPredicate(Ce){return this._skipPredicateFn=Ce,this}withWrap(Ce=!0){return this._wrap=Ce,this}withVerticalOrientation(Ce=!0){return this._vertical=Ce,this}withHorizontalOrientation(Ce){return this._horizontal=Ce,this}withAllowedModifierKeys(Ce){return this._allowedModifierKeys=Ce,this}withTypeAhead(Ce=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe((0,X.b)(ye=>this._pressedLetters.push(ye)),(0,ie.b)(Ce),(0,Q.h)(()=>this._pressedLetters.length>0),(0,oe.U)(()=>this._pressedLetters.join(""))).subscribe(ye=>{const Ke=this._getItemsArray();for(let bt=1;bt<Ke.length+1;bt++){const ze=(this._activeItemIndex+bt)%Ke.length,Ue=Ke[ze];if(!this._skipPredicateFn(Ue)&&0===Ue.getLabel().toUpperCase().trim().indexOf(ye)){this.setActiveItem(ze);break}}this._pressedLetters=[]}),this}withHomeAndEnd(Ce=!0){return this._homeAndEnd=Ce,this}setActiveItem(Ce){const ye=this._activeItem;this.updateActiveItem(Ce),this._activeItem!==ye&&this.change.next(this._activeItemIndex)}onKeydown(Ce){const ye=Ce.keyCode,bt=["altKey","ctrlKey","metaKey","shiftKey"].every(ze=>!Ce[ze]||this._allowedModifierKeys.indexOf(ze)>-1);switch(ye){case se.Mf:return void this.tabOut.next();case se.JH:if(this._vertical&&bt){this.setNextItemActive();break}return;case se.LH:if(this._vertical&&bt){this.setPreviousItemActive();break}return;case se.SV:if(this._horizontal&&bt){"rtl"===this._horizontal?this.setPreviousItemActive():this.setNextItemActive();break}return;case se.oh:if(this._horizontal&&bt){"rtl"===this._horizontal?this.setNextItemActive():this.setPreviousItemActive();break}return;case se.Sd:if(this._homeAndEnd&&bt){this.setFirstItemActive();break}return;case se.uR:if(this._homeAndEnd&&bt){this.setLastItemActive();break}return;default:return void((bt||(0,se.Vb)(Ce,"shiftKey"))&&(Ce.key&&1===Ce.key.length?this._letterKeyStream.next(Ce.key.toLocaleUpperCase()):(ye>=se.A&&ye<=se.Z||ye>=se.xE&&ye<=se.aO)&&this._letterKeyStream.next(String.fromCharCode(ye))))}this._pressedLetters=[],Ce.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._items.length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(Ce){const ye=this._getItemsArray(),Ke="number"==typeof Ce?Ce:ye.indexOf(Ce),bt=ye[Ke];this._activeItem=null==bt?null:bt,this._activeItemIndex=Ke}_setActiveItemByDelta(Ce){this._wrap?this._setActiveInWrapMode(Ce):this._setActiveInDefaultMode(Ce)}_setActiveInWrapMode(Ce){const ye=this._getItemsArray();for(let Ke=1;Ke<=ye.length;Ke++){const bt=(this._activeItemIndex+Ce*Ke+ye.length)%ye.length;if(!this._skipPredicateFn(ye[bt]))return void this.setActiveItem(bt)}}_setActiveInDefaultMode(Ce){this._setActiveItemByIndex(this._activeItemIndex+Ce,Ce)}_setActiveItemByIndex(Ce,ye){const Ke=this._getItemsArray();if(Ke[Ce]){for(;this._skipPredicateFn(Ke[Ce]);)if(!Ke[Ce+=ye])return;this.setActiveItem(Ce)}}_getItemsArray(){return this._items instanceof E.n_E?this._items.toArray():this._items}}{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(Ce){return this._origin=Ce,this}setActiveItem(Ce){super.setActiveItem(Ce),this.activeItem&&this.activeItem.focus(this._origin)}}function ce(ve){return 0===ve.offsetX&&0===ve.offsetY}function be(ve){const Ce=ve.touches&&ve.touches[0]||ve.changedTouches&&ve.changedTouches[0];return!(!Ce||-1!==Ce.identifier||null!=Ce.radiusX&&1!==Ce.radiusX||null!=Ce.radiusY&&1!==Ce.radiusY)}"undefined"!=typeof Element&&Element;const N=new E.OlP("cdk-input-modality-detector-options"),Ie={ignoreKeys:[se.zL,se.jx,se.b2,se.MW,se.JU]},Pt=(0,ee.i$)({passive:!0,capture:!0});let zt=(()=>{class ve{constructor(ye,Ke,bt,ze){this._platform=ye,this._mostRecentTarget=null,this._modality=new he.X(null),this._lastTouchMs=0,this._onKeydown=Ue=>{var Se,ut;(null===(ut=null===(Se=this._options)||void 0===Se?void 0:Se.ignoreKeys)||void 0===ut?void 0:ut.some(St=>St===Ue.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=(0,ee.sA)(Ue))},this._onMousedown=Ue=>{Date.now()-this._lastTouchMs<650||(this._modality.next(ce(Ue)?"keyboard":"mouse"),this._mostRecentTarget=(0,ee.sA)(Ue))},this._onTouchstart=Ue=>{be(Ue)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=(0,ee.sA)(Ue))},this._options=Object.assign(Object.assign({},Ie),ze),this.modalityDetected=this._modality.pipe((0,Me.T)(1)),this.modalityChanged=this.modalityDetected.pipe((0,Ve.x)()),ye.isBrowser&&Ke.runOutsideAngular(()=>{bt.addEventListener("keydown",this._onKeydown,Pt),bt.addEventListener("mousedown",this._onMousedown,Pt),bt.addEventListener("touchstart",this._onTouchstart,Pt)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Pt),document.removeEventListener("mousedown",this._onMousedown,Pt),document.removeEventListener("touchstart",this._onTouchstart,Pt))}}return ve.\u0275fac=function(ye){return new(ye||ve)(E.LFG(ee.t4),E.LFG(E.R0b),E.LFG(g.K0),E.LFG(N,8))},ve.\u0275prov=E.Yz7({factory:function(){return new ve(E.LFG(ee.t4),E.LFG(E.R0b),E.LFG(g.K0),E.LFG(N,8))},token:ve,providedIn:"root"}),ve})();const Le=new E.OlP("cdk-focus-monitor-default-options"),Xe=(0,ee.i$)({passive:!0,capture:!0});let xt=(()=>{class ve{constructor(ye,Ke,bt,ze,Ue){this._ngZone=ye,this._platform=Ke,this._inputModalityDetector=bt,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new B.xQ,this._rootNodeFocusAndBlurListener=Se=>{const ut=(0,ee.sA)(Se),St="focus"===Se.type?this._onFocus:this._onBlur;for(let Dn=ut;Dn;Dn=Dn.parentElement)St.call(this,Se,Dn)},this._document=ze,this._detectionMode=(null==Ue?void 0:Ue.detectionMode)||0}monitor(ye,Ke=!1){const bt=(0,Oe.fI)(ye);if(!this._platform.isBrowser||1!==bt.nodeType)return(0,q.of)(null);const ze=(0,ee.kV)(bt)||this._getDocument(),Ue=this._elementInfo.get(bt);if(Ue)return Ke&&(Ue.checkChildren=!0),Ue.subject;const Se={checkChildren:Ke,subject:new B.xQ,rootNode:ze};return this._elementInfo.set(bt,Se),this._registerGlobalListeners(Se),Se.subject}stopMonitoring(ye){const Ke=(0,Oe.fI)(ye),bt=this._elementInfo.get(Ke);bt&&(bt.subject.complete(),this._setClasses(Ke),this._elementInfo.delete(Ke),this._removeGlobalListeners(bt))}focusVia(ye,Ke,bt){const ze=(0,Oe.fI)(ye);ze===this._getDocument().activeElement?this._getClosestElementsInfo(ze).forEach(([Se,ut])=>this._originChanged(Se,Ke,ut)):(this._setOrigin(Ke),"function"==typeof ze.focus&&ze.focus(bt))}ngOnDestroy(){this._elementInfo.forEach((ye,Ke)=>this.stopMonitoring(Ke))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_toggleClass(ye,Ke,bt){bt?ye.classList.add(Ke):ye.classList.remove(Ke)}_getFocusOrigin(ye){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(ye)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(ye){return 1===this._detectionMode||!!(null==ye?void 0:ye.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(ye,Ke){this._toggleClass(ye,"cdk-focused",!!Ke),this._toggleClass(ye,"cdk-touch-focused","touch"===Ke),this._toggleClass(ye,"cdk-keyboard-focused","keyboard"===Ke),this._toggleClass(ye,"cdk-mouse-focused","mouse"===Ke),this._toggleClass(ye,"cdk-program-focused","program"===Ke)}_setOrigin(ye,Ke=!1){this._ngZone.runOutsideAngular(()=>{this._origin=ye,this._originFromTouchInteraction="touch"===ye&&Ke,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(ye,Ke){const bt=this._elementInfo.get(Ke),ze=(0,ee.sA)(ye);!bt||!bt.checkChildren&&Ke!==ze||this._originChanged(Ke,this._getFocusOrigin(ze),bt)}_onBlur(ye,Ke){const bt=this._elementInfo.get(Ke);!bt||bt.checkChildren&&ye.relatedTarget instanceof Node&&Ke.contains(ye.relatedTarget)||(this._setClasses(Ke),this._emitOrigin(bt.subject,null))}_emitOrigin(ye,Ke){this._ngZone.run(()=>ye.next(Ke))}_registerGlobalListeners(ye){if(!this._platform.isBrowser)return;const Ke=ye.rootNode,bt=this._rootNodeFocusListenerCount.get(Ke)||0;bt||this._ngZone.runOutsideAngular(()=>{Ke.addEventListener("focus",this._rootNodeFocusAndBlurListener,Xe),Ke.addEventListener("blur",this._rootNodeFocusAndBlurListener,Xe)}),this._rootNodeFocusListenerCount.set(Ke,bt+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe((0,xe.R)(this._stopInputModalityDetector)).subscribe(ze=>{this._setOrigin(ze,!0)}))}_removeGlobalListeners(ye){const Ke=ye.rootNode;if(this._rootNodeFocusListenerCount.has(Ke)){const bt=this._rootNodeFocusListenerCount.get(Ke);bt>1?this._rootNodeFocusListenerCount.set(Ke,bt-1):(Ke.removeEventListener("focus",this._rootNodeFocusAndBlurListener,Xe),Ke.removeEventListener("blur",this._rootNodeFocusAndBlurListener,Xe),this._rootNodeFocusListenerCount.delete(Ke))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(ye,Ke,bt){this._setClasses(ye,Ke),this._emitOrigin(bt.subject,Ke),this._lastFocusOrigin=Ke}_getClosestElementsInfo(ye){const Ke=[];return this._elementInfo.forEach((bt,ze)=>{(ze===ye||bt.checkChildren&&ze.contains(ye))&&Ke.push([ze,bt])}),Ke}}return ve.\u0275fac=function(ye){return new(ye||ve)(E.LFG(E.R0b),E.LFG(ee.t4),E.LFG(zt),E.LFG(g.K0,8),E.LFG(Le,8))},ve.\u0275prov=E.Yz7({factory:function(){return new ve(E.LFG(E.R0b),E.LFG(ee.t4),E.LFG(zt),E.LFG(g.K0,8),E.LFG(Le,8))},token:ve,providedIn:"root"}),ve})();const pn="cdk-high-contrast-black-on-white",In="cdk-high-contrast-white-on-black",it="cdk-high-contrast-active";let Qe=(()=>{class ve{constructor(ye,Ke){this._platform=ye,this._document=Ke}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const ye=this._document.createElement("div");ye.style.backgroundColor="rgb(1,2,3)",ye.style.position="absolute",this._document.body.appendChild(ye);const Ke=this._document.defaultView||window,bt=Ke&&Ke.getComputedStyle?Ke.getComputedStyle(ye):null,ze=(bt&&bt.backgroundColor||"").replace(/ /g,"");switch(this._document.body.removeChild(ye),ze){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const ye=this._document.body.classList;ye.remove(it),ye.remove(pn),ye.remove(In),this._hasCheckedHighContrastMode=!0;const Ke=this.getHighContrastMode();1===Ke?(ye.add(it),ye.add(pn)):2===Ke&&(ye.add(it),ye.add(In))}}}return ve.\u0275fac=function(ye){return new(ye||ve)(E.LFG(ee.t4),E.LFG(g.K0))},ve.\u0275prov=E.Yz7({factory:function(){return new ve(E.LFG(ee.t4),E.LFG(g.K0))},token:ve,providedIn:"root"}),ve})(),De=(()=>{class ve{constructor(ye){ye._applyBodyHighContrastModeCssClasses()}}return ve.\u0275fac=function(ye){return new(ye||ve)(E.LFG(Qe))},ve.\u0275mod=E.oAB({type:ve}),ve.\u0275inj=E.cJS({imports:[[ee.ud,Te.Q8]]}),ve})()},3887:($t,$e,x)=>{"use strict";x.d($e,{vT:()=>se,Is:()=>he});var g=x(5e3),E=x(9808);const B=new g.OlP("cdk-dir-doc",{providedIn:"root",factory:function(){return(0,g.f3M)(E.K0)}});let he=(()=>{class X{constructor(Q){if(this.value="ltr",this.change=new g.vpe,Q){const ae=Q.documentElement?Q.documentElement.dir:null,Me=(Q.body?Q.body.dir:null)||ae;this.value="ltr"===Me||"rtl"===Me?Me:"ltr"}}ngOnDestroy(){this.change.complete()}}return X.\u0275fac=function(Q){return new(Q||X)(g.LFG(B,8))},X.\u0275prov=g.Yz7({factory:function(){return new X(g.LFG(B,8))},token:X,providedIn:"root"}),X})(),se=(()=>{class X{}return X.\u0275fac=function(Q){return new(Q||X)},X.\u0275mod=g.oAB({type:X}),X.\u0275inj=g.cJS({}),X})()},29:($t,$e,x)=>{"use strict";x.d($e,{P3:()=>se,Ov:()=>Q,yy:()=>X,eX:()=>ie,k:()=>Me,Z9:()=>q});var g=x(4715),E=x(1086),B=x(8929),ne=x(5e3);function q(Ve){return Ve&&"function"==typeof Ve.connect}class se extends class{}{constructor(xe){super(),this._data=xe}connect(){return(0,g.b)(this._data)?this._data:(0,E.of)(this._data)}disconnect(){}}class X{applyChanges(xe,Oe,ee,Te,He){xe.forEachOperation((yt,rt,ft)=>{let we,Pe;if(null==yt.previousIndex){const qe=ee(yt,rt,ft);we=Oe.createEmbeddedView(qe.templateRef,qe.context,qe.index),Pe=1}else null==ft?(Oe.remove(rt),Pe=3):(we=Oe.get(rt),Oe.move(we,ft),Pe=2);He&&He({context:null==we?void 0:we.context,operation:Pe,record:yt})})}detach(){}}class ie{constructor(){this.viewCacheSize=20,this._viewCache=[]}applyChanges(xe,Oe,ee,Te,He){xe.forEachOperation((yt,rt,ft)=>{let we,Pe;null==yt.previousIndex?(we=this._insertView(()=>ee(yt,rt,ft),ft,Oe,Te(yt)),Pe=we?1:0):null==ft?(this._detachAndCacheView(rt,Oe),Pe=3):(we=this._moveView(rt,ft,Oe,Te(yt)),Pe=2),He&&He({context:null==we?void 0:we.context,operation:Pe,record:yt})})}detach(){for(const xe of this._viewCache)xe.destroy();this._viewCache=[]}_insertView(xe,Oe,ee,Te){const He=this._insertViewFromCache(Oe,ee);if(He)return void(He.context.$implicit=Te);const yt=xe();return ee.createEmbeddedView(yt.templateRef,yt.context,yt.index)}_detachAndCacheView(xe,Oe){const ee=Oe.detach(xe);this._maybeCacheView(ee,Oe)}_moveView(xe,Oe,ee,Te){const He=ee.get(xe);return ee.move(He,Oe),He.context.$implicit=Te,He}_maybeCacheView(xe,Oe){if(this._viewCache.length<this.viewCacheSize)this._viewCache.push(xe);else{const ee=Oe.indexOf(xe);-1===ee?xe.destroy():Oe.remove(ee)}}_insertViewFromCache(xe,Oe){const ee=this._viewCache.pop();return ee&&Oe.insert(ee,xe),ee||null}}class Q{constructor(xe=!1,Oe,ee=!0){this._multiple=xe,this._emitChanges=ee,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new B.xQ,Oe&&Oe.length&&(xe?Oe.forEach(Te=>this._markSelected(Te)):this._markSelected(Oe[0]),this._selectedToEmit.length=0)}get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}select(...xe){this._verifyValueAssignment(xe),xe.forEach(Oe=>this._markSelected(Oe)),this._emitChangeEvent()}deselect(...xe){this._verifyValueAssignment(xe),xe.forEach(Oe=>this._unmarkSelected(Oe)),this._emitChangeEvent()}toggle(xe){this.isSelected(xe)?this.deselect(xe):this.select(xe)}clear(){this._unmarkAll(),this._emitChangeEvent()}isSelected(xe){return this._selection.has(xe)}isEmpty(){return 0===this._selection.size}hasValue(){return!this.isEmpty()}sort(xe){this._multiple&&this.selected&&this._selected.sort(xe)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(xe){this.isSelected(xe)||(this._multiple||this._unmarkAll(),this._selection.add(xe),this._emitChanges&&this._selectedToEmit.push(xe))}_unmarkSelected(xe){this.isSelected(xe)&&(this._selection.delete(xe),this._emitChanges&&this._deselectedToEmit.push(xe))}_unmarkAll(){this.isEmpty()||this._selection.forEach(xe=>this._unmarkSelected(xe))}_verifyValueAssignment(xe){}}const Me=new ne.OlP("_ViewRepeater")},9909:($t,$e,x)=>{"use strict";x.d($e,{A:()=>kn,zL:()=>X,jx:()=>se,JH:()=>yt,uR:()=>xe,K5:()=>he,hY:()=>oe,Sd:()=>Oe,oh:()=>ee,b2:()=>ni,MW:()=>at,aO:()=>ar,SV:()=>He,JU:()=>q,L_:()=>ae,Mf:()=>B,LH:()=>Te,Z:()=>Ie,xE:()=>qe,Vb:()=>mi});const B=9,he=13,q=16,se=17,X=18,oe=27,ae=32,xe=35,Oe=36,ee=37,Te=38,He=39,yt=40,qe=48,ar=57,kn=65,Ie=90,at=91,ni=224;function mi(ri,...tr){return tr.length?tr.some(Xi=>ri[Xi]):ri.altKey||ri.shiftKey||ri.ctrlKey||ri.metaKey}},5278:($t,$e,x)=>{"use strict";x.d($e,{Yg:()=>yt,u3:()=>ft,xu:()=>Ve});var g=x(5e3),E=x(4865),B=x(8929),ne=x(6053),he=x(1221),q=x(2916),se=x(2986),X=x(1307),ie=x(13),Q=x(4850),oe=x(1059),ae=x(7625),Me=x(4565);let Ve=(()=>{class we{}return we.\u0275fac=function(qe){return new(qe||we)},we.\u0275mod=g.oAB({type:we}),we.\u0275inj=g.cJS({}),we})();const xe=new Set;let Oe,ee=(()=>{class we{constructor(qe){this._platform=qe,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):He}matchMedia(qe){return(this._platform.WEBKIT||this._platform.BLINK)&&function(we){if(!xe.has(we))try{Oe||(Oe=document.createElement("style"),Oe.setAttribute("type","text/css"),document.head.appendChild(Oe)),Oe.sheet&&(Oe.sheet.insertRule(`@media ${we} {body{ }}`,0),xe.add(we))}catch(Pe){console.error(Pe)}}(qe),this._matchMedia(qe)}}return we.\u0275fac=function(qe){return new(qe||we)(g.LFG(Me.t4))},we.\u0275prov=g.Yz7({factory:function(){return new we(g.LFG(Me.t4))},token:we,providedIn:"root"}),we})();function He(we){return{matches:"all"===we||""===we,media:we,addListener:()=>{},removeListener:()=>{}}}let yt=(()=>{class we{constructor(qe,et){this._mediaMatcher=qe,this._zone=et,this._queries=new Map,this._destroySubject=new B.xQ}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(qe){return rt((0,E.Eq)(qe)).some(At=>this._registerQuery(At).mql.matches)}observe(qe){const At=rt((0,E.Eq)(qe)).map(Zt=>this._registerQuery(Zt).observable);let Ut=(0,ne.aj)(At);return Ut=(0,he.z)(Ut.pipe((0,se.q)(1)),Ut.pipe((0,X.T)(1),(0,ie.b)(0))),Ut.pipe((0,Q.U)(Zt=>{const jt={matches:!1,breakpoints:{}};return Zt.forEach(({matches:tn,query:qt})=>{jt.matches=jt.matches||tn,jt.breakpoints[qt]=tn}),jt}))}_registerQuery(qe){if(this._queries.has(qe))return this._queries.get(qe);const et=this._mediaMatcher.matchMedia(qe),Ut={observable:new q.y(Zt=>{const jt=tn=>this._zone.run(()=>Zt.next(tn));return et.addListener(jt),()=>{et.removeListener(jt)}}).pipe((0,oe.O)(et),(0,Q.U)(({matches:Zt})=>({query:qe,matches:Zt})),(0,ae.R)(this._destroySubject)),mql:et};return this._queries.set(qe,Ut),Ut}}return we.\u0275fac=function(qe){return new(qe||we)(g.LFG(ee),g.LFG(g.R0b))},we.\u0275prov=g.Yz7({factory:function(){return new we(g.LFG(ee),g.LFG(g.R0b))},token:we,providedIn:"root"}),we})();function rt(we){return we.map(Pe=>Pe.split(",")).reduce((Pe,qe)=>Pe.concat(qe)).map(Pe=>Pe.trim())}const ft={XSmall:"(max-width: 599.98px)",Small:"(min-width: 600px) and (max-width: 959.98px)",Medium:"(min-width: 960px) and (max-width: 1279.98px)",Large:"(min-width: 1280px) and (max-width: 1919.98px)",XLarge:"(min-width: 1920px)",Handset:"(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)",Tablet:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait), (min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",Web:"(min-width: 840px) and (orientation: portrait), (min-width: 1280px) and (orientation: landscape)",HandsetPortrait:"(max-width: 599.98px) and (orientation: portrait)",TabletPortrait:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait)",WebPortrait:"(min-width: 840px) and (orientation: portrait)",HandsetLandscape:"(max-width: 959.98px) and (orientation: landscape)",TabletLandscape:"(min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",WebLandscape:"(min-width: 1280px) and (orientation: landscape)"}},3263:($t,$e,x)=>{"use strict";x.d($e,{wD:()=>X,yq:()=>se,Q8:()=>ie});var g=x(4865),E=x(5e3),B=x(2916),ne=x(8929),he=x(13);let q=(()=>{class Q{create(ae){return"undefined"==typeof MutationObserver?null:new MutationObserver(ae)}}return Q.\u0275fac=function(ae){return new(ae||Q)},Q.\u0275prov=E.Yz7({factory:function(){return new Q},token:Q,providedIn:"root"}),Q})(),se=(()=>{class Q{constructor(ae){this._mutationObserverFactory=ae,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((ae,Me)=>this._cleanupObserver(Me))}observe(ae){const Me=(0,g.fI)(ae);return new B.y(Ve=>{const Oe=this._observeElement(Me).subscribe(Ve);return()=>{Oe.unsubscribe(),this._unobserveElement(Me)}})}_observeElement(ae){if(this._observedElements.has(ae))this._observedElements.get(ae).count++;else{const Me=new ne.xQ,Ve=this._mutationObserverFactory.create(xe=>Me.next(xe));Ve&&Ve.observe(ae,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(ae,{observer:Ve,stream:Me,count:1})}return this._observedElements.get(ae).stream}_unobserveElement(ae){this._observedElements.has(ae)&&(this._observedElements.get(ae).count--,this._observedElements.get(ae).count||this._cleanupObserver(ae))}_cleanupObserver(ae){if(this._observedElements.has(ae)){const{observer:Me,stream:Ve}=this._observedElements.get(ae);Me&&Me.disconnect(),Ve.complete(),this._observedElements.delete(ae)}}}return Q.\u0275fac=function(ae){return new(ae||Q)(E.LFG(q))},Q.\u0275prov=E.Yz7({factory:function(){return new Q(E.LFG(q))},token:Q,providedIn:"root"}),Q})(),X=(()=>{class Q{constructor(ae,Me,Ve){this._contentObserver=ae,this._elementRef=Me,this._ngZone=Ve,this.event=new E.vpe,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(ae){this._disabled=(0,g.Ig)(ae),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(ae){this._debounce=(0,g.su)(ae),this._subscribe()}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const ae=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?ae.pipe((0,he.b)(this.debounce)):ae).subscribe(this.event)})}_unsubscribe(){var ae;null===(ae=this._currentSubscription)||void 0===ae||ae.unsubscribe()}}return Q.\u0275fac=function(ae){return new(ae||Q)(E.Y36(se),E.Y36(E.SBq),E.Y36(E.R0b))},Q.\u0275dir=E.lG2({type:Q,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),Q})(),ie=(()=>{class Q{}return Q.\u0275fac=function(ae){return new(ae||Q)},Q.\u0275mod=E.oAB({type:Q}),Q.\u0275inj=E.cJS({providers:[q]}),Q})()},3586:($t,$e,x)=>{"use strict";x.d($e,{aV:()=>bn,X_:()=>At,U8:()=>yr,Iu:()=>dn});var g=x(4854),E=x(5e3),B=x(4565),ne=x(3887),he=x(9808),q=x(4865),se=x(8),X=x(8929),ie=x(2654),Q=x(6787);x(3489);var xe=x(2986),Oe=x(7625);x(9909);const Te=(0,B.Mq)();class He{constructor(L,J){this._viewportRuler=L,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=J}attach(){}enable(){if(this._canBeEnabled()){const L=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=L.style.left||"",this._previousHTMLStyles.top=L.style.top||"",L.style.left=(0,q.HM)(-this._previousScrollPosition.left),L.style.top=(0,q.HM)(-this._previousScrollPosition.top),L.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){const L=this._document.documentElement,ce=L.style,be=this._document.body.style,N=ce.scrollBehavior||"",Ie=be.scrollBehavior||"";this._isEnabled=!1,ce.left=this._previousHTMLStyles.left,ce.top=this._previousHTMLStyles.top,L.classList.remove("cdk-global-scrollblock"),Te&&(ce.scrollBehavior=be.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),Te&&(ce.scrollBehavior=N,be.scrollBehavior=Ie)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;const J=this._document.body,ce=this._viewportRuler.getViewportSize();return J.scrollHeight>ce.height||J.scrollWidth>ce.width}}class rt{constructor(L,J,ce,be){this._scrollDispatcher=L,this._ngZone=J,this._viewportRuler=ce,this._config=be,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(L){this._overlayRef=L}enable(){if(this._scrollSubscription)return;const L=this._scrollDispatcher.scrolled(0);this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=L.subscribe(()=>{const J=this._viewportRuler.getViewportScrollPosition().top;Math.abs(J-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=L.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}class ft{enable(){}disable(){}attach(){}}function we(Re,L){return L.some(J=>Re.bottom<J.top||Re.top>J.bottom||Re.right<J.left||Re.left>J.right)}function Pe(Re,L){return L.some(J=>Re.top<J.top||Re.bottom>J.bottom||Re.left<J.left||Re.right>J.right)}class qe{constructor(L,J,ce,be){this._scrollDispatcher=L,this._viewportRuler=J,this._ngZone=ce,this._config=be,this._scrollSubscription=null}attach(L){this._overlayRef=L}enable(){this._scrollSubscription||(this._scrollSubscription=this._scrollDispatcher.scrolled(this._config?this._config.scrollThrottle:0).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){const J=this._overlayRef.overlayElement.getBoundingClientRect(),{width:ce,height:be}=this._viewportRuler.getViewportSize();we(J,[{width:ce,height:be,bottom:be,right:ce,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}}))}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}}let et=(()=>{class Re{constructor(J,ce,be,N){this._scrollDispatcher=J,this._viewportRuler=ce,this._ngZone=be,this.noop=()=>new ft,this.close=Ie=>new rt(this._scrollDispatcher,this._ngZone,this._viewportRuler,Ie),this.block=()=>new He(this._viewportRuler,this._document),this.reposition=Ie=>new qe(this._scrollDispatcher,this._viewportRuler,this._ngZone,Ie),this._document=N}}return Re.\u0275fac=function(J){return new(J||Re)(E.LFG(g.mF),E.LFG(g.rL),E.LFG(E.R0b),E.LFG(he.K0))},Re.\u0275prov=E.Yz7({factory:function(){return new Re(E.LFG(g.mF),E.LFG(g.rL),E.LFG(E.R0b),E.LFG(he.K0))},token:Re,providedIn:"root"}),Re})();class At{constructor(L){if(this.scrollStrategy=new ft,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,L){const J=Object.keys(L);for(const ce of J)void 0!==L[ce]&&(this[ce]=L[ce])}}}class Ut{constructor(L,J,ce,be,N){this.offsetX=ce,this.offsetY=be,this.panelClass=N,this.originX=L.originX,this.originY=L.originY,this.overlayX=J.overlayX,this.overlayY=J.overlayY}}class jt{constructor(L,J){this.connectionPair=L,this.scrollableViewProperties=J}}let wr=(()=>{class Re{constructor(J){this._attachedOverlays=[],this._document=J}ngOnDestroy(){this.detach()}add(J){this.remove(J),this._attachedOverlays.push(J)}remove(J){const ce=this._attachedOverlays.indexOf(J);ce>-1&&this._attachedOverlays.splice(ce,1),0===this._attachedOverlays.length&&this.detach()}}return Re.\u0275fac=function(J){return new(J||Re)(E.LFG(he.K0))},Re.\u0275prov=E.Yz7({factory:function(){return new Re(E.LFG(he.K0))},token:Re,providedIn:"root"}),Re})(),ar=(()=>{class Re extends wr{constructor(J){super(J),this._keydownListener=ce=>{const be=this._attachedOverlays;for(let N=be.length-1;N>-1;N--)if(be[N]._keydownEvents.observers.length>0){be[N]._keydownEvents.next(ce);break}}}add(J){super.add(J),this._isAttached||(this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}}return Re.\u0275fac=function(J){return new(J||Re)(E.LFG(he.K0))},Re.\u0275prov=E.Yz7({factory:function(){return new Re(E.LFG(he.K0))},token:Re,providedIn:"root"}),Re})(),Nn=(()=>{class Re extends wr{constructor(J,ce){super(J),this._platform=ce,this._cursorStyleIsSet=!1,this._pointerDownListener=be=>{this._pointerDownEventTarget=(0,B.sA)(be)},this._clickListener=be=>{const N=(0,B.sA)(be),Ie="click"===be.type&&this._pointerDownEventTarget?this._pointerDownEventTarget:N;this._pointerDownEventTarget=null;const at=this._attachedOverlays.slice();for(let Pt=at.length-1;Pt>-1;Pt--){const zt=at[Pt];if(!(zt._outsidePointerEvents.observers.length<1)&&zt.hasAttached()){if(zt.overlayElement.contains(N)||zt.overlayElement.contains(Ie))break;zt._outsidePointerEvents.next(be)}}}}add(J){if(super.add(J),!this._isAttached){const ce=this._document.body;ce.addEventListener("pointerdown",this._pointerDownListener,!0),ce.addEventListener("click",this._clickListener,!0),ce.addEventListener("auxclick",this._clickListener,!0),ce.addEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=ce.style.cursor,ce.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){const J=this._document.body;J.removeEventListener("pointerdown",this._pointerDownListener,!0),J.removeEventListener("click",this._clickListener,!0),J.removeEventListener("auxclick",this._clickListener,!0),J.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(J.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}}return Re.\u0275fac=function(J){return new(J||Re)(E.LFG(he.K0),E.LFG(B.t4))},Re.\u0275prov=E.Yz7({factory:function(){return new Re(E.LFG(he.K0),E.LFG(B.t4))},token:Re,providedIn:"root"}),Re})(),Qn=(()=>{class Re{constructor(J,ce){this._platform=ce,this._document=J}ngOnDestroy(){const J=this._containerElement;J&&J.parentNode&&J.parentNode.removeChild(J)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){const J="cdk-overlay-container";if(this._platform.isBrowser||(0,B.Oy)()){const be=this._document.querySelectorAll(`.${J}[platform="server"], .${J}[platform="test"]`);for(let N=0;N<be.length;N++)be[N].parentNode.removeChild(be[N])}const ce=this._document.createElement("div");ce.classList.add(J),(0,B.Oy)()?ce.setAttribute("platform","test"):this._platform.isBrowser||ce.setAttribute("platform","server"),this._document.body.appendChild(ce),this._containerElement=ce}}return Re.\u0275fac=function(J){return new(J||Re)(E.LFG(he.K0),E.LFG(B.t4))},Re.\u0275prov=E.Yz7({factory:function(){return new Re(E.LFG(he.K0),E.LFG(B.t4))},token:Re,providedIn:"root"}),Re})();class dn{constructor(L,J,ce,be,N,Ie,at,Pt,zt){this._portalOutlet=L,this._host=J,this._pane=ce,this._config=be,this._ngZone=N,this._keyboardDispatcher=Ie,this._document=at,this._location=Pt,this._outsideClickDispatcher=zt,this._backdropElement=null,this._backdropClick=new X.xQ,this._attachments=new X.xQ,this._detachments=new X.xQ,this._locationChanges=ie.w.EMPTY,this._backdropClickHandler=sn=>this._backdropClick.next(sn),this._keydownEvents=new X.xQ,this._outsidePointerEvents=new X.xQ,be.scrollStrategy&&(this._scrollStrategy=be.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=be.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(L){let J=this._portalOutlet.attach(L);return!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host),this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe((0,xe.q)(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),J}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();const L=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),L}dispose(){const L=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host&&this._host.parentNode&&(this._host.parentNode.removeChild(this._host),this._host=null),this._previousHostParent=this._pane=null,L&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(L){L!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=L,this.hasAttached()&&(L.attach(this),this.updatePosition()))}updateSize(L){this._config=Object.assign(Object.assign({},this._config),L),this._updateElementSize()}setDirection(L){this._config=Object.assign(Object.assign({},this._config),{direction:L}),this._updateElementDirection()}addPanelClass(L){this._pane&&this._toggleClasses(this._pane,L,!0)}removePanelClass(L){this._pane&&this._toggleClasses(this._pane,L,!1)}getDirection(){const L=this._config.direction;return L?"string"==typeof L?L:L.value:"ltr"}updateScrollStrategy(L){L!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=L,this.hasAttached()&&(L.attach(this),L.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;const L=this._pane.style;L.width=(0,q.HM)(this._config.width),L.height=(0,q.HM)(this._config.height),L.minWidth=(0,q.HM)(this._config.minWidth),L.minHeight=(0,q.HM)(this._config.minHeight),L.maxWidth=(0,q.HM)(this._config.maxWidth),L.maxHeight=(0,q.HM)(this._config.maxHeight)}_togglePointerEvents(L){this._pane.style.pointerEvents=L?"":"none"}_attachBackdrop(){const L="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),"undefined"!=typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(L)})}):this._backdropElement.classList.add(L)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){const L=this._backdropElement;if(!L)return;let J;const ce=()=>{L&&(L.removeEventListener("click",this._backdropClickHandler),L.removeEventListener("transitionend",ce),this._disposeBackdrop(L)),this._config.backdropClass&&this._toggleClasses(L,this._config.backdropClass,!1),clearTimeout(J)};L.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{L.addEventListener("transitionend",ce)}),L.style.pointerEvents="none",J=this._ngZone.runOutsideAngular(()=>setTimeout(ce,500))}_toggleClasses(L,J,ce){const be=L.classList;(0,q.Eq)(J).forEach(N=>{N&&(ce?be.add(N):be.remove(N))})}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{const L=this._ngZone.onStable.pipe((0,Oe.R)((0,Q.T)(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||0===this._pane.children.length)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._previousHostParent.removeChild(this._host)),L.unsubscribe())})})}_disposeScrollStrategy(){const L=this._scrollStrategy;L&&(L.disable(),L.detach&&L.detach())}_disposeBackdrop(L){L&&(L.parentNode&&L.parentNode.removeChild(L),this._backdropElement===L&&(this._backdropElement=null))}}const Wt="cdk-overlay-connected-position-bounding-box",kn=/([A-Za-z%]+)$/;class gt{constructor(L,J,ce,be,N){this._viewportRuler=J,this._document=ce,this._platform=be,this._overlayContainer=N,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new X.xQ,this._resizeSubscription=ie.w.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(L)}get positions(){return this._preferredPositions}attach(L){this._validatePositions(),L.hostElement.classList.add(Wt),this._overlayRef=L,this._boundingBox=L.hostElement,this._pane=L.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition)return void this.reapplyLastPosition();this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect();const L=this._originRect,J=this._overlayRect,ce=this._viewportRect,be=[];let N;for(let Ie of this._preferredPositions){let at=this._getOriginPoint(L,Ie),Pt=this._getOverlayPoint(at,J,Ie),zt=this._getOverlayFit(Pt,J,ce,Ie);if(zt.isCompletelyWithinViewport)return this._isPushed=!1,void this._applyPosition(Ie,at);this._canFitWithFlexibleDimensions(zt,Pt,ce)?be.push({position:Ie,origin:at,overlayRect:J,boundingBoxRect:this._calculateBoundingBoxRect(at,Ie)}):(!N||N.overlayFit.visibleArea<zt.visibleArea)&&(N={overlayFit:zt,overlayPoint:Pt,originPoint:at,position:Ie,overlayRect:J})}if(be.length){let Ie=null,at=-1;for(const Pt of be){const zt=Pt.boundingBoxRect.width*Pt.boundingBoxRect.height*(Pt.position.weight||1);zt>at&&(at=zt,Ie=Pt)}return this._isPushed=!1,void this._applyPosition(Ie.position,Ie.origin)}if(this._canPush)return this._isPushed=!0,void this._applyPosition(N.position,N.originPoint);this._applyPosition(N.position,N.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Ye(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(Wt),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(!this._isDisposed&&(!this._platform||this._platform.isBrowser)){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect();const L=this._lastPosition||this._preferredPositions[0],J=this._getOriginPoint(this._originRect,L);this._applyPosition(L,J)}}withScrollableContainers(L){return this._scrollables=L,this}withPositions(L){return this._preferredPositions=L,-1===L.indexOf(this._lastPosition)&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(L){return this._viewportMargin=L,this}withFlexibleDimensions(L=!0){return this._hasFlexibleDimensions=L,this}withGrowAfterOpen(L=!0){return this._growAfterOpen=L,this}withPush(L=!0){return this._canPush=L,this}withLockedPosition(L=!0){return this._positionLocked=L,this}setOrigin(L){return this._origin=L,this}withDefaultOffsetX(L){return this._offsetX=L,this}withDefaultOffsetY(L){return this._offsetY=L,this}withTransformOriginOn(L){return this._transformOriginSelector=L,this}_getOriginPoint(L,J){let ce,be;if("center"==J.originX)ce=L.left+L.width/2;else{const N=this._isRtl()?L.right:L.left,Ie=this._isRtl()?L.left:L.right;ce="start"==J.originX?N:Ie}return be="center"==J.originY?L.top+L.height/2:"top"==J.originY?L.top:L.bottom,{x:ce,y:be}}_getOverlayPoint(L,J,ce){let be,N;return be="center"==ce.overlayX?-J.width/2:"start"===ce.overlayX?this._isRtl()?-J.width:0:this._isRtl()?0:-J.width,N="center"==ce.overlayY?-J.height/2:"top"==ce.overlayY?0:-J.height,{x:L.x+be,y:L.y+N}}_getOverlayFit(L,J,ce,be){const N=Ee(J);let{x:Ie,y:at}=L,Pt=this._getOffset(be,"x"),zt=this._getOffset(be,"y");Pt&&(Ie+=Pt),zt&&(at+=zt);let Jn=0-at,Fn=at+N.height-ce.height,Fe=this._subtractOverflows(N.width,0-Ie,Ie+N.width-ce.width),Le=this._subtractOverflows(N.height,Jn,Fn),Xe=Fe*Le;return{visibleArea:Xe,isCompletelyWithinViewport:N.width*N.height===Xe,fitsInViewportVertically:Le===N.height,fitsInViewportHorizontally:Fe==N.width}}_canFitWithFlexibleDimensions(L,J,ce){if(this._hasFlexibleDimensions){const be=ce.bottom-J.y,N=ce.right-J.x,Ie=Ct(this._overlayRef.getConfig().minHeight),at=Ct(this._overlayRef.getConfig().minWidth),zt=L.fitsInViewportHorizontally||null!=at&&at<=N;return(L.fitsInViewportVertically||null!=Ie&&Ie<=be)&&zt}return!1}_pushOverlayOnScreen(L,J,ce){if(this._previousPushAmount&&this._positionLocked)return{x:L.x+this._previousPushAmount.x,y:L.y+this._previousPushAmount.y};const be=Ee(J),N=this._viewportRect,Ie=Math.max(L.x+be.width-N.width,0),at=Math.max(L.y+be.height-N.height,0),Pt=Math.max(N.top-ce.top-L.y,0),zt=Math.max(N.left-ce.left-L.x,0);let sn=0,fn=0;return sn=be.width<=N.width?zt||-Ie:L.x<this._viewportMargin?N.left-ce.left-L.x:0,fn=be.height<=N.height?Pt||-at:L.y<this._viewportMargin?N.top-ce.top-L.y:0,this._previousPushAmount={x:sn,y:fn},{x:L.x+sn,y:L.y+fn}}_applyPosition(L,J){if(this._setTransformOrigin(L),this._setOverlayElementStyles(J,L),this._setBoundingBoxStyles(J,L),L.panelClass&&this._addPanelClasses(L.panelClass),this._lastPosition=L,this._positionChanges.observers.length){const ce=this._getScrollVisibility(),be=new jt(L,ce);this._positionChanges.next(be)}this._isInitialRender=!1}_setTransformOrigin(L){if(!this._transformOriginSelector)return;const J=this._boundingBox.querySelectorAll(this._transformOriginSelector);let ce,be=L.overlayY;ce="center"===L.overlayX?"center":this._isRtl()?"start"===L.overlayX?"right":"left":"start"===L.overlayX?"left":"right";for(let N=0;N<J.length;N++)J[N].style.transformOrigin=`${ce} ${be}`}_calculateBoundingBoxRect(L,J){const ce=this._viewportRect,be=this._isRtl();let N,Ie,at,sn,fn,Jn;if("top"===J.overlayY)Ie=L.y,N=ce.height-Ie+this._viewportMargin;else if("bottom"===J.overlayY)at=ce.height-L.y+2*this._viewportMargin,N=ce.height-at+this._viewportMargin;else{const Fn=Math.min(ce.bottom-L.y+ce.top,L.y),Fe=this._lastBoundingBoxSize.height;N=2*Fn,Ie=L.y-Fn,N>Fe&&!this._isInitialRender&&!this._growAfterOpen&&(Ie=L.y-Fe/2)}if("end"===J.overlayX&&!be||"start"===J.overlayX&&be)Jn=ce.width-L.x+this._viewportMargin,sn=L.x-this._viewportMargin;else if("start"===J.overlayX&&!be||"end"===J.overlayX&&be)fn=L.x,sn=ce.right-L.x;else{const Fn=Math.min(ce.right-L.x+ce.left,L.x),Fe=this._lastBoundingBoxSize.width;sn=2*Fn,fn=L.x-Fn,sn>Fe&&!this._isInitialRender&&!this._growAfterOpen&&(fn=L.x-Fe/2)}return{top:Ie,left:fn,bottom:at,right:Jn,width:sn,height:N}}_setBoundingBoxStyles(L,J){const ce=this._calculateBoundingBoxRect(L,J);!this._isInitialRender&&!this._growAfterOpen&&(ce.height=Math.min(ce.height,this._lastBoundingBoxSize.height),ce.width=Math.min(ce.width,this._lastBoundingBoxSize.width));const be={};if(this._hasExactPosition())be.top=be.left="0",be.bottom=be.right=be.maxHeight=be.maxWidth="",be.width=be.height="100%";else{const N=this._overlayRef.getConfig().maxHeight,Ie=this._overlayRef.getConfig().maxWidth;be.height=(0,q.HM)(ce.height),be.top=(0,q.HM)(ce.top),be.bottom=(0,q.HM)(ce.bottom),be.width=(0,q.HM)(ce.width),be.left=(0,q.HM)(ce.left),be.right=(0,q.HM)(ce.right),be.alignItems="center"===J.overlayX?"center":"end"===J.overlayX?"flex-end":"flex-start",be.justifyContent="center"===J.overlayY?"center":"bottom"===J.overlayY?"flex-end":"flex-start",N&&(be.maxHeight=(0,q.HM)(N)),Ie&&(be.maxWidth=(0,q.HM)(Ie))}this._lastBoundingBoxSize=ce,Ye(this._boundingBox.style,be)}_resetBoundingBoxStyles(){Ye(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Ye(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(L,J){const ce={},be=this._hasExactPosition(),N=this._hasFlexibleDimensions,Ie=this._overlayRef.getConfig();if(be){const sn=this._viewportRuler.getViewportScrollPosition();Ye(ce,this._getExactOverlayY(J,L,sn)),Ye(ce,this._getExactOverlayX(J,L,sn))}else ce.position="static";let at="",Pt=this._getOffset(J,"x"),zt=this._getOffset(J,"y");Pt&&(at+=`translateX(${Pt}px) `),zt&&(at+=`translateY(${zt}px)`),ce.transform=at.trim(),Ie.maxHeight&&(be?ce.maxHeight=(0,q.HM)(Ie.maxHeight):N&&(ce.maxHeight="")),Ie.maxWidth&&(be?ce.maxWidth=(0,q.HM)(Ie.maxWidth):N&&(ce.maxWidth="")),Ye(this._pane.style,ce)}_getExactOverlayY(L,J,ce){let be={top:"",bottom:""},N=this._getOverlayPoint(J,this._overlayRect,L);this._isPushed&&(N=this._pushOverlayOnScreen(N,this._overlayRect,ce));let Ie=this._overlayContainer.getContainerElement().getBoundingClientRect().top;return N.y-=Ie,"bottom"===L.overlayY?be.bottom=this._document.documentElement.clientHeight-(N.y+this._overlayRect.height)+"px":be.top=(0,q.HM)(N.y),be}_getExactOverlayX(L,J,ce){let Ie,be={left:"",right:""},N=this._getOverlayPoint(J,this._overlayRect,L);return this._isPushed&&(N=this._pushOverlayOnScreen(N,this._overlayRect,ce)),Ie=this._isRtl()?"end"===L.overlayX?"left":"right":"end"===L.overlayX?"right":"left","right"===Ie?be.right=this._document.documentElement.clientWidth-(N.x+this._overlayRect.width)+"px":be.left=(0,q.HM)(N.x),be}_getScrollVisibility(){const L=this._getOriginRect(),J=this._pane.getBoundingClientRect(),ce=this._scrollables.map(be=>be.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:Pe(L,ce),isOriginOutsideView:we(L,ce),isOverlayClipped:Pe(J,ce),isOverlayOutsideView:we(J,ce)}}_subtractOverflows(L,...J){return J.reduce((ce,be)=>ce-Math.max(be,0),L)}_getNarrowedViewportRect(){const L=this._document.documentElement.clientWidth,J=this._document.documentElement.clientHeight,ce=this._viewportRuler.getViewportScrollPosition();return{top:ce.top+this._viewportMargin,left:ce.left+this._viewportMargin,right:ce.left+L-this._viewportMargin,bottom:ce.top+J-this._viewportMargin,width:L-2*this._viewportMargin,height:J-2*this._viewportMargin}}_isRtl(){return"rtl"===this._overlayRef.getDirection()}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(L,J){return"x"===J?null==L.offsetX?this._offsetX:L.offsetX:null==L.offsetY?this._offsetY:L.offsetY}_validatePositions(){}_addPanelClasses(L){this._pane&&(0,q.Eq)(L).forEach(J=>{""!==J&&-1===this._appliedPanelClasses.indexOf(J)&&(this._appliedPanelClasses.push(J),this._pane.classList.add(J))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(L=>{this._pane.classList.remove(L)}),this._appliedPanelClasses=[])}_getOriginRect(){const L=this._origin;if(L instanceof E.SBq)return L.nativeElement.getBoundingClientRect();if(L instanceof Element)return L.getBoundingClientRect();const J=L.width||0,ce=L.height||0;return{top:L.y,bottom:L.y+ce,left:L.x,right:L.x+J,height:ce,width:J}}}function Ye(Re,L){for(let J in L)L.hasOwnProperty(J)&&(Re[J]=L[J]);return Re}function Ct(Re){if("number"!=typeof Re&&null!=Re){const[L,J]=Re.split(kn);return J&&"px"!==J?null:parseFloat(L)}return Re||null}function Ee(Re){return{top:Math.floor(Re.top),right:Math.floor(Re.right),bottom:Math.floor(Re.bottom),left:Math.floor(Re.left),width:Math.floor(Re.width),height:Math.floor(Re.height)}}class mt{constructor(L,J,ce,be,N,Ie,at){this._preferredPositions=[],this._positionStrategy=new gt(ce,be,N,Ie,at).withFlexibleDimensions(!1).withPush(!1).withViewportMargin(0),this.withFallbackPosition(L,J),this.onPositionChange=this._positionStrategy.positionChanges}get positions(){return this._preferredPositions}attach(L){this._overlayRef=L,this._positionStrategy.attach(L),this._direction&&(L.setDirection(this._direction),this._direction=null)}dispose(){this._positionStrategy.dispose()}detach(){this._positionStrategy.detach()}apply(){this._positionStrategy.apply()}recalculateLastPosition(){this._positionStrategy.reapplyLastPosition()}withScrollableContainers(L){this._positionStrategy.withScrollableContainers(L)}withFallbackPosition(L,J,ce,be){const N=new Ut(L,J,ce,be);return this._preferredPositions.push(N),this._positionStrategy.withPositions(this._preferredPositions),this}withDirection(L){return this._overlayRef?this._overlayRef.setDirection(L):this._direction=L,this}withOffsetX(L){return this._positionStrategy.withDefaultOffsetX(L),this}withOffsetY(L){return this._positionStrategy.withDefaultOffsetY(L),this}withLockedPosition(L){return this._positionStrategy.withLockedPosition(L),this}withPositions(L){return this._preferredPositions=L.slice(),this._positionStrategy.withPositions(this._preferredPositions),this}setOrigin(L){return this._positionStrategy.setOrigin(L),this}}const Nt="cdk-global-overlay-wrapper";class Mt{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._leftOffset="",this._rightOffset="",this._alignItems="",this._justifyContent="",this._width="",this._height=""}attach(L){const J=L.getConfig();this._overlayRef=L,this._width&&!J.width&&L.updateSize({width:this._width}),this._height&&!J.height&&L.updateSize({height:this._height}),L.hostElement.classList.add(Nt),this._isDisposed=!1}top(L=""){return this._bottomOffset="",this._topOffset=L,this._alignItems="flex-start",this}left(L=""){return this._rightOffset="",this._leftOffset=L,this._justifyContent="flex-start",this}bottom(L=""){return this._topOffset="",this._bottomOffset=L,this._alignItems="flex-end",this}right(L=""){return this._leftOffset="",this._rightOffset=L,this._justifyContent="flex-end",this}width(L=""){return this._overlayRef?this._overlayRef.updateSize({width:L}):this._width=L,this}height(L=""){return this._overlayRef?this._overlayRef.updateSize({height:L}):this._height=L,this}centerHorizontally(L=""){return this.left(L),this._justifyContent="center",this}centerVertically(L=""){return this.top(L),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;const L=this._overlayRef.overlayElement.style,J=this._overlayRef.hostElement.style,ce=this._overlayRef.getConfig(),{width:be,height:N,maxWidth:Ie,maxHeight:at}=ce,Pt=!("100%"!==be&&"100vw"!==be||Ie&&"100%"!==Ie&&"100vw"!==Ie),zt=!("100%"!==N&&"100vh"!==N||at&&"100%"!==at&&"100vh"!==at);L.position=this._cssPosition,L.marginLeft=Pt?"0":this._leftOffset,L.marginTop=zt?"0":this._topOffset,L.marginBottom=this._bottomOffset,L.marginRight=this._rightOffset,Pt?J.justifyContent="flex-start":"center"===this._justifyContent?J.justifyContent="center":"rtl"===this._overlayRef.getConfig().direction?"flex-start"===this._justifyContent?J.justifyContent="flex-end":"flex-end"===this._justifyContent&&(J.justifyContent="flex-start"):J.justifyContent=this._justifyContent,J.alignItems=zt?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;const L=this._overlayRef.overlayElement.style,J=this._overlayRef.hostElement,ce=J.style;J.classList.remove(Nt),ce.justifyContent=ce.alignItems=L.marginTop=L.marginBottom=L.marginLeft=L.marginRight=L.position="",this._overlayRef=null,this._isDisposed=!0}}let rn=(()=>{class Re{constructor(J,ce,be,N){this._viewportRuler=J,this._document=ce,this._platform=be,this._overlayContainer=N}global(){return new Mt}connectedTo(J,ce,be){return new mt(ce,be,J,this._viewportRuler,this._document,this._platform,this._overlayContainer)}flexibleConnectedTo(J){return new gt(J,this._viewportRuler,this._document,this._platform,this._overlayContainer)}}return Re.\u0275fac=function(J){return new(J||Re)(E.LFG(g.rL),E.LFG(he.K0),E.LFG(B.t4),E.LFG(Qn))},Re.\u0275prov=E.Yz7({factory:function(){return new Re(E.LFG(g.rL),E.LFG(he.K0),E.LFG(B.t4),E.LFG(Qn))},token:Re,providedIn:"root"}),Re})(),En=0,bn=(()=>{class Re{constructor(J,ce,be,N,Ie,at,Pt,zt,sn,fn,Jn){this.scrollStrategies=J,this._overlayContainer=ce,this._componentFactoryResolver=be,this._positionBuilder=N,this._keyboardDispatcher=Ie,this._injector=at,this._ngZone=Pt,this._document=zt,this._directionality=sn,this._location=fn,this._outsideClickDispatcher=Jn}create(J){const ce=this._createHostElement(),be=this._createPaneElement(ce),N=this._createPortalOutlet(be),Ie=new At(J);return Ie.direction=Ie.direction||this._directionality.value,new dn(N,ce,be,Ie,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher)}position(){return this._positionBuilder}_createPaneElement(J){const ce=this._document.createElement("div");return ce.id="cdk-overlay-"+En++,ce.classList.add("cdk-overlay-pane"),J.appendChild(ce),ce}_createHostElement(){const J=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(J),J}_createPortalOutlet(J){return this._appRef||(this._appRef=this._injector.get(E.z2F)),new se.u0(J,this._componentFactoryResolver,this._appRef,this._injector,this._document)}}return Re.\u0275fac=function(J){return new(J||Re)(E.LFG(et),E.LFG(Qn),E.LFG(E._Vd),E.LFG(rn),E.LFG(ar),E.LFG(E.zs3),E.LFG(E.R0b),E.LFG(he.K0),E.LFG(ne.Is),E.LFG(he.Ye),E.LFG(Nn))},Re.\u0275prov=E.Yz7({token:Re,factory:Re.\u0275fac}),Re})();const Yn={provide:new E.OlP("cdk-connected-overlay-scroll-strategy"),deps:[bn],useFactory:function(Re){return()=>Re.scrollStrategies.reposition()}};let yr=(()=>{class Re{}return Re.\u0275fac=function(J){return new(J||Re)},Re.\u0275mod=E.oAB({type:Re}),Re.\u0275inj=E.cJS({providers:[bn,Yn],imports:[[ne.vT,se.eL,g.Cl],g.Cl]}),Re})()},4565:($t,$e,x)=>{"use strict";x.d($e,{t4:()=>ne,ud:()=>he,sA:()=>yt,ht:()=>He,kV:()=>Te,Oy:()=>ft,_i:()=>xe,qK:()=>X,i$:()=>oe,Mq:()=>Ve});var g=x(5e3),E=x(9808);let B;try{B="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(we){B=!1}let q,ne=(()=>{class we{constructor(qe){this._platformId=qe,this.isBrowser=this._platformId?(0,E.NF)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!B)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return we.\u0275fac=function(qe){return new(qe||we)(g.LFG(g.Lbi))},we.\u0275prov=g.Yz7({factory:function(){return new we(g.LFG(g.Lbi))},token:we,providedIn:"root"}),we})(),he=(()=>{class we{}return we.\u0275fac=function(qe){return new(qe||we)},we.\u0275mod=g.oAB({type:we}),we.\u0275inj=g.cJS({}),we})();const se=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function X(){if(q)return q;if("object"!=typeof document||!document)return q=new Set(se),q;let we=document.createElement("input");return q=new Set(se.filter(Pe=>(we.setAttribute("type",Pe),we.type===Pe))),q}let ie,ae,Me,Oe,rt;function oe(we){return function(){if(null==ie&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>ie=!0}))}finally{ie=ie||!1}return ie}()?we:!!we.capture}function Ve(){if(null==Me){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return Me=!1,Me;if("scrollBehavior"in document.documentElement.style)Me=!0;else{const we=Element.prototype.scrollTo;Me=!!we&&!/\{\s*\[native code\]\s*\}/.test(we.toString())}}return Me}function xe(){if("object"!=typeof document||!document)return 0;if(null==ae){const we=document.createElement("div"),Pe=we.style;we.dir="rtl",Pe.width="1px",Pe.overflow="auto",Pe.visibility="hidden",Pe.pointerEvents="none",Pe.position="absolute";const qe=document.createElement("div"),et=qe.style;et.width="2px",et.height="1px",we.appendChild(qe),document.body.appendChild(we),ae=0,0===we.scrollLeft&&(we.scrollLeft=1,ae=0===we.scrollLeft?1:2),we.parentNode.removeChild(we)}return ae}function Te(we){if(function(){if(null==Oe){const we="undefined"!=typeof document?document.head:null;Oe=!(!we||!we.createShadowRoot&&!we.attachShadow)}return Oe}()){const Pe=we.getRootNode?we.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&Pe instanceof ShadowRoot)return Pe}return null}function He(){let we="undefined"!=typeof document&&document?document.activeElement:null;for(;we&&we.shadowRoot;){const Pe=we.shadowRoot.activeElement;if(Pe===we)break;we=Pe}return we}function yt(we){return we.composedPath?we.composedPath()[0]:we.target}function ft(){return void 0!==rt.__karma__&&!!rt.__karma__||void 0!==rt.jasmine&&!!rt.jasmine||void 0!==rt.jest&&!!rt.jest||void 0!==rt.Mocha&&!!rt.Mocha}rt="undefined"!=typeof global?global:"undefined"!=typeof window?window:{}},8:($t,$e,x)=>{"use strict";x.d($e,{C5:()=>Q,u0:()=>xe,eL:()=>rt,UE:()=>oe});var g=x(5e3);x(9808);class ie{attach(Pe){return this._attachedHost=Pe,Pe.attach(this)}detach(){let Pe=this._attachedHost;null!=Pe&&(this._attachedHost=null,Pe.detach())}get isAttached(){return null!=this._attachedHost}setAttachedHost(Pe){this._attachedHost=Pe}}class Q extends ie{constructor(Pe,qe,et,At){super(),this.component=Pe,this.viewContainerRef=qe,this.injector=et,this.componentFactoryResolver=At}}class oe extends ie{constructor(Pe,qe,et){super(),this.templateRef=Pe,this.viewContainerRef=qe,this.context=et}get origin(){return this.templateRef.elementRef}attach(Pe,qe=this.context){return this.context=qe,super.attach(Pe)}detach(){return this.context=void 0,super.detach()}}class ae extends ie{constructor(Pe){super(),this.element=Pe instanceof g.SBq?Pe.nativeElement:Pe}}class xe extends class{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(Pe){return Pe instanceof Q?(this._attachedPortal=Pe,this.attachComponentPortal(Pe)):Pe instanceof oe?(this._attachedPortal=Pe,this.attachTemplatePortal(Pe)):this.attachDomPortal&&Pe instanceof ae?(this._attachedPortal=Pe,this.attachDomPortal(Pe)):void 0}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(Pe){this._disposeFn=Pe}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}}{constructor(Pe,qe,et,At,Ut){super(),this.outletElement=Pe,this._componentFactoryResolver=qe,this._appRef=et,this._defaultInjector=At,this.attachDomPortal=Zt=>{const jt=Zt.element,tn=this._document.createComment("dom-portal");jt.parentNode.insertBefore(tn,jt),this.outletElement.appendChild(jt),this._attachedPortal=Zt,super.setDisposeFn(()=>{tn.parentNode&&tn.parentNode.replaceChild(jt,tn)})},this._document=Ut}attachComponentPortal(Pe){const et=(Pe.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(Pe.component);let At;return Pe.viewContainerRef?(At=Pe.viewContainerRef.createComponent(et,Pe.viewContainerRef.length,Pe.injector||Pe.viewContainerRef.injector),this.setDisposeFn(()=>At.destroy())):(At=et.create(Pe.injector||this._defaultInjector),this._appRef.attachView(At.hostView),this.setDisposeFn(()=>{this._appRef.detachView(At.hostView),At.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(At)),this._attachedPortal=Pe,At}attachTemplatePortal(Pe){let qe=Pe.viewContainerRef,et=qe.createEmbeddedView(Pe.templateRef,Pe.context);return et.rootNodes.forEach(At=>this.outletElement.appendChild(At)),et.detectChanges(),this.setDisposeFn(()=>{let At=qe.indexOf(et);-1!==At&&qe.remove(At)}),this._attachedPortal=Pe,et}dispose(){super.dispose(),null!=this.outletElement.parentNode&&this.outletElement.parentNode.removeChild(this.outletElement)}_getComponentRootNode(Pe){return Pe.hostView.rootNodes[0]}}let rt=(()=>{class we{}return we.\u0275fac=function(qe){return new(qe||we)},we.\u0275mod=g.oAB({type:we}),we.\u0275inj=g.cJS({}),we})()},4854:($t,$e,x)=>{"use strict";x.d($e,{ZD:()=>kn,mF:()=>jt,Cl:()=>gt,rL:()=>wr});var g=x(4865),E=x(5e3),B=x(8929),ne=x(1086),he=x(2916),q=x(3753),ae=(x(352),x(8139),x(2654),x(4715),x(5778),x(6926)),Me=x(2198),He=(x(7625),x(1059),x(519),x(7545),x(96),x(4565)),yt=x(9808),rt=x(3887);x(29);let jt=(()=>{class Ye{constructor(Ee,mt,Nt){this._ngZone=Ee,this._platform=mt,this._scrolled=new B.xQ,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=Nt}register(Ee){this.scrollContainers.has(Ee)||this.scrollContainers.set(Ee,Ee.elementScrolled().subscribe(()=>this._scrolled.next(Ee)))}deregister(Ee){const mt=this.scrollContainers.get(Ee);mt&&(mt.unsubscribe(),this.scrollContainers.delete(Ee))}scrolled(Ee=20){return this._platform.isBrowser?new he.y(mt=>{this._globalSubscription||this._addGlobalListener();const Nt=Ee>0?this._scrolled.pipe((0,ae.e)(Ee)).subscribe(mt):this._scrolled.subscribe(mt);return this._scrolledCount++,()=>{Nt.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):(0,ne.of)()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((Ee,mt)=>this.deregister(mt)),this._scrolled.complete()}ancestorScrolled(Ee,mt){const Nt=this.getAncestorScrollContainers(Ee);return this.scrolled(mt).pipe((0,Me.h)(Mt=>!Mt||Nt.indexOf(Mt)>-1))}getAncestorScrollContainers(Ee){const mt=[];return this.scrollContainers.forEach((Nt,Mt)=>{this._scrollableContainsElement(Mt,Ee)&&mt.push(Mt)}),mt}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(Ee,mt){let Nt=(0,g.fI)(mt),Mt=Ee.getElementRef().nativeElement;do{if(Nt==Mt)return!0}while(Nt=Nt.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{const Ee=this._getWindow();return(0,q.R)(Ee.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return Ye.\u0275fac=function(Ee){return new(Ee||Ye)(E.LFG(E.R0b),E.LFG(He.t4),E.LFG(yt.K0,8))},Ye.\u0275prov=E.Yz7({factory:function(){return new Ye(E.LFG(E.R0b),E.LFG(He.t4),E.LFG(yt.K0,8))},token:Ye,providedIn:"root"}),Ye})(),wr=(()=>{class Ye{constructor(Ee,mt,Nt){this._platform=Ee,this._change=new B.xQ,this._changeListener=Mt=>{this._change.next(Mt)},this._document=Nt,mt.runOutsideAngular(()=>{if(Ee.isBrowser){const Mt=this._getWindow();Mt.addEventListener("resize",this._changeListener),Mt.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const Ee=this._getWindow();Ee.removeEventListener("resize",this._changeListener),Ee.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const Ee={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),Ee}getViewportRect(){const Ee=this.getViewportScrollPosition(),{width:mt,height:Nt}=this.getViewportSize();return{top:Ee.top,left:Ee.left,bottom:Ee.top+Nt,right:Ee.left+mt,height:Nt,width:mt}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const Ee=this._document,mt=this._getWindow(),Nt=Ee.documentElement,Mt=Nt.getBoundingClientRect();return{top:-Mt.top||Ee.body.scrollTop||mt.scrollY||Nt.scrollTop||0,left:-Mt.left||Ee.body.scrollLeft||mt.scrollX||Nt.scrollLeft||0}}change(Ee=20){return Ee>0?this._change.pipe((0,ae.e)(Ee)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const Ee=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:Ee.innerWidth,height:Ee.innerHeight}:{width:0,height:0}}}return Ye.\u0275fac=function(Ee){return new(Ee||Ye)(E.LFG(He.t4),E.LFG(E.R0b),E.LFG(yt.K0,8))},Ye.\u0275prov=E.Yz7({factory:function(){return new Ye(E.LFG(He.t4),E.LFG(E.R0b),E.LFG(yt.K0,8))},token:Ye,providedIn:"root"}),Ye})(),kn=(()=>{class Ye{}return Ye.\u0275fac=function(Ee){return new(Ee||Ye)},Ye.\u0275mod=E.oAB({type:Ye}),Ye.\u0275inj=E.cJS({}),Ye})(),gt=(()=>{class Ye{}return Ye.\u0275fac=function(Ee){return new(Ee||Ye)},Ye.\u0275mod=E.oAB({type:Ye}),Ye.\u0275inj=E.cJS({imports:[[rt.vT,He.ud,kn],rt.vT,kn]}),Ye})()},4865:($t,$e,x)=>{"use strict";x.d($e,{Eq:()=>he,Ig:()=>E,HM:()=>q,fI:()=>se,su:()=>B});var g=x(5e3);function E(ie){return null!=ie&&"false"!=`${ie}`}function B(ie,Q=0){return function(ie){return!isNaN(parseFloat(ie))&&!isNaN(Number(ie))}(ie)?Number(ie):Q}function he(ie){return Array.isArray(ie)?ie:[ie]}function q(ie){return null==ie?"":"string"==typeof ie?ie:`${ie}px`}function se(ie){return ie instanceof g.SBq?ie.nativeElement:ie}},440:($t,$e,x)=>{"use strict";x.d($e,{nm:()=>mi});var g=x(6351);x(5e3),x(5867);var rt=x(5861),ft=x(9681),we=x(4859),Pe=x(2090),qe=x(1877);const et=new Map,At={activated:!1,tokenObservers:[]},Ut={initialized:!1,enabled:!1};function Zt(lt){return et.get(lt)||At}function jt(lt,ot){et.set(lt,ot)}function tn(){return Ut}class Wt{constructor(ot,It,Kt,cn,Mn){if(this.operation=ot,this.retryPolicy=It,this.getWaitDuration=Kt,this.lowerBound=cn,this.upperBound=Mn,this.pending=null,this.nextErrorWaitInterval=cn,cn>Mn)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(ot){var It=this;return(0,rt.Z)(function*(){It.stop();try{It.pending=new Pe.BH,yield(lt=It.getNextRun(ot),new Promise(ot=>{setTimeout(ot,lt)})),It.pending.resolve(),yield It.pending.promise,It.pending=new Pe.BH,yield It.operation(),It.pending.resolve(),yield It.pending.promise,It.process(!0).catch(()=>{})}catch(Kt){It.retryPolicy(Kt)?It.process(!1).catch(()=>{}):It.stop()}var lt})()}getNextRun(ot){if(ot)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const It=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),It}}}const Ye=new Pe.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Ee(lt){if(!Zt(lt).activated)throw Ye.create("use-before-activation",{appName:lt.name})}function rn(lt,ot){return En.apply(this,arguments)}function En(){return(En=(0,rt.Z)(function*({url:lt,body:ot},It){const Kt={"Content-Type":"application/json"},cn=It.getImmediate({optional:!0});cn&&(Kt["X-Firebase-Client"]=cn.getPlatformInfoString());const Mn={method:"POST",body:JSON.stringify(ot),headers:Kt};let Nr,Pr;try{Nr=yield fetch(lt,Mn)}catch(yo){throw Ye.create("fetch-network-error",{originalErrorMessage:yo.message})}if(200!==Nr.status)throw Ye.create("fetch-status-error",{httpStatus:Nr.status});try{Pr=yield Nr.json()}catch(yo){throw Ye.create("fetch-parse-error",{originalErrorMessage:yo.message})}const Cr=Pr.ttl.match(/^([\d.]+)(s)$/);if(!Cr||!Cr[2]||isNaN(Number(Cr[1])))throw Ye.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${Pr.ttl}`});const zs=1e3*Number(Cr[1]),Is=Date.now();return{token:Pr.attestationToken,expireTimeMillis:Is+zs,issuedAtTimeMillis:Is}})).apply(this,arguments)}function Rt(lt,ot){const{projectId:It,appId:Kt,apiKey:cn}=lt.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${It}/apps/${Kt}:exchangeDebugToken?key=${cn}`,body:{debug_token:ot}}}const Qt="firebase-app-check-store";let yr=null;function hr(){return yr||(yr=new Promise((lt,ot)=>{try{const It=indexedDB.open("firebase-app-check-database",1);It.onsuccess=Kt=>{lt(Kt.target.result)},It.onerror=Kt=>{var cn;ot(Ye.create("storage-open",{originalErrorMessage:null===(cn=Kt.target.error)||void 0===cn?void 0:cn.message}))},It.onupgradeneeded=Kt=>{0===Kt.oldVersion&&Kt.target.result.createObjectStore(Qt,{keyPath:"compositeKey"})}}catch(It){ot(Ye.create("storage-open",{originalErrorMessage:It.message}))}}),yr)}function N(){return(N=(0,rt.Z)(function*(lt,ot){const Kt=(yield hr()).transaction(Qt,"readwrite"),Mn=Kt.objectStore(Qt).put({compositeKey:lt,value:ot});return new Promise((Nr,Pr)=>{Mn.onsuccess=Cr=>{Nr()},Kt.onerror=Cr=>{var zs;Pr(Ye.create("storage-set",{originalErrorMessage:null===(zs=Cr.target.error)||void 0===zs?void 0:zs.message}))}})})).apply(this,arguments)}const zt=new qe.Yd("@firebase/app-check");function Jn(lt,ot){return(0,Pe.hl)()?function(lt,ot){return function(lt,ot){return N.apply(this,arguments)}(function(lt){return`${lt.options.appId}-${lt.name}`}(lt),ot)}(lt,ot).catch(It=>{zt.warn(`Failed to write token to IndexedDB. Error: ${It}`)}):Promise.resolve()}function Le(){return tn().enabled}function Xe(){return xt.apply(this,arguments)}function xt(){return(xt=(0,rt.Z)(function*(){const lt=tn();if(lt.enabled&&lt.token)return lt.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const pn={error:"UNKNOWN_ERROR"};function In(lt){return Pe.US.encodeString(JSON.stringify(lt),!1)}function it(lt){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,rt.Z)(function*(lt,ot=!1){const It=lt.app;Ee(It);const Kt=Zt(It);let Mn,cn=Kt.token;if(!cn){const Cr=yield Kt.cachedTokenPromise;Cr&&bt(Cr)&&(cn=Cr)}if(!ot&&cn&&bt(cn))return{token:cn.token};let Pr,Nr=!1;if(Le()){Kt.exchangeTokenPromise||(Kt.exchangeTokenPromise=rn(Rt(It,yield Xe()),lt.platformLoggerProvider).then(zs=>(Kt.exchangeTokenPromise=void 0,zs)),Nr=!0);const Cr=yield Kt.exchangeTokenPromise;return yield Jn(It,Cr),jt(It,Object.assign(Object.assign({},Kt),{token:Cr})),{token:Cr.token}}try{Kt.exchangeTokenPromise||(Kt.exchangeTokenPromise=Kt.provider.getToken().then(Cr=>(Kt.exchangeTokenPromise=void 0,Cr)),Nr=!0),cn=yield Kt.exchangeTokenPromise}catch(Cr){"appCheck/throttled"===Cr.code?zt.warn(Cr.message):zt.error(Cr),Mn=Cr}return cn?(Pr={token:cn.token},jt(It,Object.assign(Object.assign({},Kt),{token:cn})),yield Jn(It,cn)):Pr=ze(Mn),Nr&&Ke(It,Pr),Pr})).apply(this,arguments)}function ve(lt,ot){const It=Zt(lt),Kt=It.tokenObservers.filter(cn=>cn.next!==ot);0===Kt.length&&It.tokenRefresher&&It.tokenRefresher.isRunning()&&It.tokenRefresher.stop(),jt(lt,Object.assign(Object.assign({},It),{tokenObservers:Kt}))}function Ce(lt){const{app:ot}=lt,It=Zt(ot);let Kt=It.tokenRefresher;Kt||(Kt=function(lt){const{app:ot}=lt;return new Wt((0,rt.Z)(function*(){let Kt;if(Kt=Zt(ot).token?yield it(lt,!0):yield it(lt),Kt.error)throw Kt.error}),()=>!0,()=>{const It=Zt(ot);if(It.token){let Kt=It.token.issuedAtTimeMillis+.5*(It.token.expireTimeMillis-It.token.issuedAtTimeMillis)+3e5;return Kt=Math.min(Kt,It.token.expireTimeMillis-3e5),Math.max(0,Kt-Date.now())}return 0},3e4,96e4)}(lt),jt(ot,Object.assign(Object.assign({},It),{tokenRefresher:Kt}))),!Kt.isRunning()&&It.isTokenAutoRefreshEnabled&&Kt.start()}function Ke(lt,ot){const It=Zt(lt).tokenObservers;for(const Kt of It)try{"EXTERNAL"===Kt.type&&null!=ot.error?Kt.error(ot.error):Kt.next(ot)}catch(cn){}}function bt(lt){return lt.expireTimeMillis-Date.now()>0}function ze(lt){return{token:In(pn),error:lt}}class Ue{constructor(ot,It){this.app=ot,this.platformLoggerProvider=It}_delete(){const{tokenObservers:ot}=Zt(this.app);for(const It of ot)ve(this.app,It.next);return Promise.resolve()}}const Ji="app-check-internal";(0,ft._registerComponent)(new we.wA("app-check",lt=>function(lt,ot){return new Ue(lt,ot)}(lt.getProvider("app").getImmediate(),lt.getProvider("platform-logger")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((lt,ot,It)=>{lt.getProvider(Ji).initialize()})),(0,ft._registerComponent)(new we.wA(Ji,lt=>function(lt){return{getToken:ot=>it(lt,ot),addTokenListener:ot=>function(lt,ot,It,Kt){const{app:cn}=lt,Mn=Zt(cn),Nr={next:It,error:Kt,type:ot};if(jt(cn,Object.assign(Object.assign({},Mn),{tokenObservers:[...Mn.tokenObservers,Nr]})),Mn.token&&bt(Mn.token)){const Pr=Mn.token;Promise.resolve().then(()=>{It({token:Pr.token}),Ce(lt)}).catch(()=>{})}Mn.cachedTokenPromise.then(()=>Ce(lt))}(lt,"INTERNAL",ot),removeTokenListener:ot=>ve(lt.app,ot)}}(lt.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,ft.registerVersion)("@firebase/app-check","0.5.2");class mi{constructor(){return(0,g.vb)("app-check")}}"undefined"!=typeof window&&window},7451:($t,$e,x)=>{"use strict";x.d($e,{zQ:()=>Ut,rT:()=>Pe,f7:()=>et,L6:()=>ft,_Q:()=>we,lh:()=>qe,Qv:()=>rt,nw:()=>At});var g=x(5e3),E=x(8929),B=x(1086),ne=x(2916),he=x(5254),q=x(6787),se=x(7545);function X(jt,tn){return tn?(0,se.w)(()=>jt,tn):(0,se.w)(()=>jt)}var ie=x(7770),Q=x(4850),oe=x(96),ae=x(7224),Me=x(3334),Ve=x(2198),xe=x(6351),Oe=x(2011),ee=x(9808),Te=x(440);x(127);const rt=new g.OlP("angularfire2.auth.use-emulator"),ft=new g.OlP("angularfire2.auth.settings"),we=new g.OlP("angularfire2.auth.tenant-id"),Pe=new g.OlP("angularfire2.auth.langugage-code"),qe=new g.OlP("angularfire2.auth.use-device-language"),et=new g.OlP("angularfire.auth.persistence"),At=(jt,tn,qt,wr,ar,Nn,Qn,dn)=>(0,Oe.cc)(`${jt.name}.auth`,"AngularFireAuth",jt.name,()=>{const Wt=tn.runOutsideAngular(()=>jt.auth());if(qt&&Wt.useEmulator(...qt),wr&&(Wt.tenantId=wr),Wt.languageCode=ar,Nn&&Wt.useDeviceLanguage(),Qn)for(const[kn,gt]of Object.entries(Qn))Wt.settings[kn]=gt;return dn&&Wt.setPersistence(dn),Wt},[qt,wr,ar,Nn,Qn,dn]);let Ut=(()=>{class jt{constructor(qt,wr,ar,Nn,Qn,dn,Wt,kn,gt,Ye,Ct,Ee){const mt=new E.xQ,Nt=(0,B.of)(void 0).pipe((0,ie.QV)(Qn.outsideAngular),(0,se.w)(()=>Nn.runOutsideAngular(()=>Promise.resolve().then(x.bind(x,9259)))),(0,Q.U)(()=>(0,Oe.on)(qt,Nn,wr)),(0,Q.U)(Mt=>At(Mt,Nn,dn,kn,gt,Ye,Wt,Ct)),(0,oe.d)({bufferSize:1,refCount:!1}));if((0,ee.PM)(ar))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,B.of)(null);else{Nt.pipe((0,ae.P)()).subscribe();const rn=Nt.pipe((0,se.w)(mn=>mn.getRedirectResult().then(Rt=>Rt,()=>null)),xe.iC,(0,oe.d)({bufferSize:1,refCount:!1})),En=Nt.pipe((0,se.w)(mn=>new ne.y(Rt=>({unsubscribe:Nn.runOutsideAngular(()=>mn.onAuthStateChanged(br=>Rt.next(br),br=>Rt.error(br),()=>Rt.complete()))})))),bn=Nt.pipe((0,se.w)(mn=>new ne.y(Rt=>({unsubscribe:Nn.runOutsideAngular(()=>mn.onIdTokenChanged(br=>Rt.next(br),br=>Rt.error(br),()=>Rt.complete()))}))));this.authState=rn.pipe(X(En),(0,Me.R)(Qn.outsideAngular),(0,ie.QV)(Qn.insideAngular)),this.user=rn.pipe(X(bn),(0,Me.R)(Qn.outsideAngular),(0,ie.QV)(Qn.insideAngular)),this.idToken=this.user.pipe((0,se.w)(mn=>mn?(0,he.D)(mn.getIdToken()):(0,B.of)(null))),this.idTokenResult=this.user.pipe((0,se.w)(mn=>mn?(0,he.D)(mn.getIdTokenResult()):(0,B.of)(null))),this.credential=(0,q.T)(rn,mt,this.authState.pipe((0,Ve.h)(mn=>!mn))).pipe((0,Q.U)(mn=>(null==mn?void 0:mn.user)?mn:null),(0,Me.R)(Qn.outsideAngular),(0,ie.QV)(Qn.insideAngular))}return(0,Oe.pX)(this,Nt,Nn,{spy:{apply:(Mt,rn,En)=>{(Mt.startsWith("signIn")||Mt.startsWith("createUser"))&&En.then(bn=>mt.next(bn))}}})}}return jt.\u0275fac=function(qt){return new(qt||jt)(g.LFG(Oe.Dh),g.LFG(Oe.xv,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(xe.HU),g.LFG(rt,8),g.LFG(ft,8),g.LFG(we,8),g.LFG(Pe,8),g.LFG(qe,8),g.LFG(et,8),g.LFG(Te.nm,8))},jt.\u0275prov=g.Yz7({token:jt,factory:jt.\u0275fac,providedIn:"any"}),jt})()},1995:($t,$e,x)=>{"use strict";x.d($e,{ST:()=>n_});var Pe,g=x(5e3),E=x(353),B=x(2916),ne=x(5254),he=x(1086),q=x(6351),se=x(1059),X=x(519),ie=x(4850),Q=x(2014),oe=x(5778),ae=x(2198),Me=x(2011),Ve=x(9808),Oe=(x(9259),x(3942)),ee=x(5861),Te=x(9681),He=x(4859),yt=x(1877),rt=x(2090),ft="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},we={},qe=qe||{},et=ft||self;function At(){}function Ut(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function Zt(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var tn="closure_uid_"+(1e9*Math.random()>>>0),qt=0;function wr(i,e,r){return i.call.apply(i.bind,arguments)}function ar(i,e,r){if(!i)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var d=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(d,o),i.apply(e,d)}}return function(){return i.apply(e,arguments)}}function Nn(i,e,r){return(Nn=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?wr:ar).apply(null,arguments)}function Qn(i,e){var r=Array.prototype.slice.call(arguments,1);return function(){var o=r.slice();return o.push.apply(o,arguments),i.apply(this,o)}}function dn(i,e){function r(){}r.prototype=e.prototype,i.Z=e.prototype,i.prototype=new r,i.prototype.constructor=i,i.Vb=function(o,d,v){for(var O=Array(arguments.length-2),$=2;$<arguments.length;$++)O[$-2]=arguments[$];return e.prototype[d].apply(o,O)}}function Wt(){this.s=this.s,this.o=this.o}var gt={};Wt.prototype.s=!1,Wt.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var i=function(i){return Object.prototype.hasOwnProperty.call(i,tn)&&i[tn]||(i[tn]=++qt)}(this);delete gt[i]}},Wt.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Ye=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let r=0;r<i.length;r++)if(r in i&&i[r]===e)return r;return-1},Ct=Array.prototype.forEach?function(i,e,r){Array.prototype.forEach.call(i,e,r)}:function(i,e,r){const o=i.length,d="string"==typeof i?i.split(""):i;for(let v=0;v<o;v++)v in d&&e.call(r,d[v],v,i)};function mt(i){return Array.prototype.concat.apply([],arguments)}function Nt(i){const e=i.length;if(0<e){const r=Array(e);for(let o=0;o<e;o++)r[o]=i[o];return r}return[]}function Mt(i){return/^[\s\xa0]*$/.test(i)}var mn,rn=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]};function En(i,e){return-1!=i.indexOf(e)}function bn(i,e){return i<e?-1:i>e?1:0}e:{var Rt=et.navigator;if(Rt){var br=Rt.userAgent;if(br){mn=br;break e}}mn=""}function gr(i,e,r){for(const o in i)e.call(r,i[o],o,i)}function Qt(i){const e={};for(const r in i)e[r]=i[r];return e}var Yn="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function yr(i,e){let r,o;for(let d=1;d<arguments.length;d++){for(r in o=arguments[d],o)i[r]=o[r];for(let v=0;v<Yn.length;v++)r=Yn[v],Object.prototype.hasOwnProperty.call(o,r)&&(i[r]=o[r])}}function hr(i){return hr[" "](i),i}hr[" "]=At;var Pt,i,L=En(mn,"Opera"),J=En(mn,"Trident")||En(mn,"MSIE"),ce=En(mn,"Edge"),be=ce||J,N=En(mn,"Gecko")&&!(En(mn.toLowerCase(),"webkit")&&!En(mn,"Edge"))&&!(En(mn,"Trident")||En(mn,"MSIE"))&&!En(mn,"Edge"),Ie=En(mn.toLowerCase(),"webkit")&&!En(mn,"Edge");function at(){var i=et.document;return i?i.documentMode:void 0}e:{var zt="",sn=(i=mn,N?/rv:([^\);]+)(\)|;)/.exec(i):ce?/Edge\/([\d\.]+)/.exec(i):J?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):Ie?/WebKit\/(\S+)/.exec(i):L?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(sn&&(zt=sn?sn[1]:""),J){var fn=at();if(null!=fn&&fn>parseFloat(zt)){Pt=String(fn);break e}}Pt=zt}var Jn={};function Fn(){return e=Jn,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){let i=0;const e=rn(String(Pt)).split("."),r=rn("9").split("."),o=Math.max(e.length,r.length);for(let O=0;0==i&&O<o;O++){var d=e[O]||"",v=r[O]||"";do{if(d=/(\d*)(\D*)(.*)/.exec(d)||["","","",""],v=/(\d*)(\D*)(.*)/.exec(v)||["","","",""],0==d[0].length&&0==v[0].length)break;i=bn(0==d[1].length?0:parseInt(d[1],10),0==v[1].length?0:parseInt(v[1],10))||bn(0==d[2].length,0==v[2].length)||bn(d[2],v[2]),d=d[3],v=v[3]}while(0==i)}return 0<=i}();var e}var Xe=et.document&&J&&(at()||parseInt(Pt,10))||void 0,xt=function(){if(!et.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{et.addEventListener("test",At,e),et.removeEventListener("test",At,e)}catch(r){}return i}();function pt(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}function pn(i,e){if(pt.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var r=this.type=i.type,o=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(N){e:{try{hr(e.nodeName);var d=!0;break e}catch(v){}d=!1}d||(e=null)}}else"mouseover"==r?e=i.fromElement:"mouseout"==r&&(e=i.toElement);this.relatedTarget=e,o?(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:In[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&pn.Z.h.call(this)}}pt.prototype.h=function(){this.defaultPrevented=!0},dn(pn,pt);var In={2:"touch",3:"pen",4:"mouse"};pn.prototype.h=function(){pn.Z.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var it="closure_listenable_"+(1e6*Math.random()|0),Qe=0;function De(i,e,r,o,d){this.listener=i,this.proxy=null,this.src=e,this.type=r,this.capture=!!o,this.ia=d,this.key=++Qe,this.ca=this.fa=!1}function ve(i){i.ca=!0,i.listener=null,i.proxy=null,i.src=null,i.ia=null}function Ce(i){this.src=i,this.g={},this.h=0}function ye(i,e){var r=e.type;if(r in i.g){var v,o=i.g[r],d=Ye(o,e);(v=0<=d)&&Array.prototype.splice.call(o,d,1),v&&(ve(e),0==i.g[r].length&&(delete i.g[r],i.h--))}}function Ke(i,e,r,o){for(var d=0;d<i.length;++d){var v=i[d];if(!v.ca&&v.listener==e&&v.capture==!!r&&v.ia==o)return d}return-1}Ce.prototype.add=function(i,e,r,o,d){var v=i.toString();(i=this.g[v])||(i=this.g[v]=[],this.h++);var O=Ke(i,e,o,d);return-1<O?(e=i[O],r||(e.fa=!1)):((e=new De(e,this.src,v,!!o,d)).fa=r,i.push(e)),e};var bt="closure_lm_"+(1e6*Math.random()|0),ze={};function Ue(i,e,r,o,d){if(o&&o.once)return St(i,e,r,o,d);if(Array.isArray(e)){for(var v=0;v<e.length;v++)Ue(i,e[v],r,o,d);return null}return r=ws(r),i&&i[it]?i.N(e,r,Zt(o)?!!o.capture:!!o,d):Se(i,e,r,!1,o,d)}function Se(i,e,r,o,d,v){if(!e)throw Error("Invalid event type");var O=Zt(d)?!!d.capture:!!d,$=Sr(i);if($||(i[bt]=$=new Ce(i)),(r=$.add(e,r,o,O,v)).proxy)return r;if(o=function(){var e=Zr;return function i(r){return e.call(i.src,i.listener,r)}}(),r.proxy=o,o.src=i,o.listener=r,i.addEventListener)xt||(d=O),void 0===d&&(d=!1),i.addEventListener(e.toString(),o,d);else if(i.attachEvent)i.attachEvent(fr(e.toString()),o);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(o)}return r}function St(i,e,r,o,d){if(Array.isArray(e)){for(var v=0;v<e.length;v++)St(i,e[v],r,o,d);return null}return r=ws(r),i&&i[it]?i.O(e,r,Zt(o)?!!o.capture:!!o,d):Se(i,e,r,!0,o,d)}function Dn(i,e,r,o,d){if(Array.isArray(e))for(var v=0;v<e.length;v++)Dn(i,e[v],r,o,d);else o=Zt(o)?!!o.capture:!!o,r=ws(r),i&&i[it]?(i=i.i,(e=String(e).toString())in i.g&&-1<(r=Ke(v=i.g[e],r,o,d))&&(ve(v[r]),Array.prototype.splice.call(v,r,1),0==v.length&&(delete i.g[e],i.h--))):i&&(i=Sr(i))&&(e=i.g[e.toString()],i=-1,e&&(i=Ke(e,r,o,d)),(r=-1<i?e[i]:null)&&Wn(r))}function Wn(i){if("number"!=typeof i&&i&&!i.ca){var e=i.src;if(e&&e[it])ye(e.i,i);else{var r=i.type,o=i.proxy;e.removeEventListener?e.removeEventListener(r,o,i.capture):e.detachEvent?e.detachEvent(fr(r),o):e.addListener&&e.removeListener&&e.removeListener(o),(r=Sr(e))?(ye(r,i),0==r.h&&(r.src=null,e[bt]=null)):ve(i)}}}function fr(i){return i in ze?ze[i]:ze[i]="on"+i}function Zr(i,e){if(i.ca)i=!0;else{e=new pn(e,this);var r=i.listener,o=i.ia||i.src;i.fa&&Wn(i),i=r.call(o,e)}return i}function Sr(i){return(i=i[bt])instanceof Ce?i:null}var si="__closure_events_fn_"+(1e9*Math.random()>>>0);function ws(i){return"function"==typeof i?i:(i[si]||(i[si]=function(e){return i.handleEvent(e)}),i[si])}function Mr(){Wt.call(this),this.i=new Ce(this),this.P=this,this.I=null}function or(i,e){var r,o=i.I;if(o)for(r=[];o;o=o.I)r.push(o);if(i=i.P,o=e.type||e,"string"==typeof e)e=new pt(e,i);else if(e instanceof pt)e.target=e.target||i;else{var d=e;yr(e=new pt(o,i),d)}if(d=!0,r)for(var v=r.length-1;0<=v;v--){var O=e.g=r[v];d=to(O,o,!0,e)&&d}if(d=to(O=e.g=i,o,!0,e)&&d,d=to(O,o,!1,e)&&d,r)for(v=0;v<r.length;v++)d=to(O=e.g=r[v],o,!1,e)&&d}function to(i,e,r,o){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var d=!0,v=0;v<e.length;++v){var O=e[v];if(O&&!O.ca&&O.capture==r){var $=O.listener,ue=O.ia||O.src;O.fa&&ye(i.i,O),d=!1!==$.call(ue,o)&&d}}return d&&!o.defaultPrevented}dn(Mr,Wt),Mr.prototype[it]=!0,Mr.prototype.removeEventListener=function(i,e,r,o){Dn(this,i,e,r,o)},Mr.prototype.M=function(){if(Mr.Z.M.call(this),this.i){var e,i=this.i;for(e in i.g){for(var r=i.g[e],o=0;o<r.length;o++)ve(r[o]);delete i.g[e],i.h--}}this.I=null},Mr.prototype.N=function(i,e,r,o){return this.i.add(String(i),e,!1,r,o)},Mr.prototype.O=function(i,e,r,o){return this.i.add(String(i),e,!0,r,o)};var pi=et.JSON.stringify;function yn(){var i=Cs;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var Br,ur=new class{constructor(i,e){this.i=i,this.j=e,this.h=0,this.g=null}get(){let i;return 0<this.h?(this.h--,i=this.g,this.g=i.next,i.next=null):i=this.i(),i}}(()=>new Gr,i=>i.reset());class Gr{constructor(){this.next=this.g=this.h=null}set(e,r){this.h=e,this.g=r,this.next=null}reset(){this.next=this.g=this.h=null}}function ji(i){et.setTimeout(()=>{throw i},0)}function Rr(i,e){Br||function(){var i=et.Promise.resolve(void 0);Br=function(){i.then(er)}}(),Vr||(Br(),Vr=!0),Cs.add(i,e)}var Vr=!1,Cs=new class{constructor(){this.h=this.g=null}add(e,r){const o=ur.get();o.set(e,r),this.h?this.h.next=o:this.g=o,this.h=o}};function er(){for(var i;i=yn();){try{i.h.call(i.g)}catch(r){ji(r)}var e=ur;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}Vr=!1}function li(i,e){Mr.call(this),this.h=i||1,this.g=e||et,this.j=Nn(this.kb,this),this.l=Date.now()}function Di(i){i.da=!1,i.S&&(i.g.clearTimeout(i.S),i.S=null)}function Ji(i,e,r){if("function"==typeof i)r&&(i=Nn(i,r));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=Nn(i.handleEvent,i)}return 2147483647<Number(e)?-1:et.setTimeout(i,e||0)}function gi(i){i.g=Ji(()=>{i.g=null,i.i&&(i.i=!1,gi(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}dn(li,Mr),(Pe=li.prototype).da=!1,Pe.S=null,Pe.kb=function(){if(this.da){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-i):(this.S&&(this.g.clearTimeout(this.S),this.S=null),or(this,"tick"),this.da&&(Di(this),this.start()))}},Pe.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Pe.M=function(){li.Z.M.call(this),Di(this),delete this.g};class ci extends Wt{constructor(e,r){super(),this.m=e,this.j=r,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:gi(this)}M(){super.M(),this.g&&(et.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ni(i){Wt.call(this),this.h=i,this.g={}}dn(ni,Wt);var mi=[];function ri(i,e,r,o){Array.isArray(r)||(r&&(mi[0]=r.toString()),r=mi);for(var d=0;d<r.length;d++){var v=Ue(e,r[d],o||i.handleEvent,!1,i.h||i);if(!v)break;i.g[v.key]=v}}function tr(i){gr(i.g,function(e,r){this.g.hasOwnProperty(r)&&Wn(e)},i),i.g={}}function Xi(){this.g=!0}function _i(i,e,r,o){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(i,e){if(!i.g)return e;if(!e)return null;try{var r=JSON.parse(e);if(r)for(i=0;i<r.length;i++)if(Array.isArray(r[i])){var o=r[i];if(!(2>o.length)){var d=o[1];if(Array.isArray(d)&&!(1>d.length)){var v=d[0];if("noop"!=v&&"stop"!=v&&"close"!=v)for(var O=1;O<d.length;O++)d[O]=""}}}return pi(r)}catch($){return e}}(i,r)+(o?" "+o:"")})}ni.prototype.M=function(){ni.Z.M.call(this),tr(this)},ni.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Xi.prototype.Aa=function(){this.g=!1},Xi.prototype.info=function(){};var Pi={},Ti=null;function ps(){return Ti=Ti||new Mr}function qo(i){pt.call(this,Pi.Ma,i)}function yi(i){const e=ps();or(e,new qo(e,i))}function gs(i,e){pt.call(this,Pi.STAT_EVENT,i),this.stat=e}function Si(i){const e=ps();or(e,new gs(e,i))}function lt(i,e){pt.call(this,Pi.Na,i),this.size=e}function ot(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return et.setTimeout(function(){i()},e)}Pi.Ma="serverreachability",dn(qo,pt),Pi.STAT_EVENT="statevent",dn(gs,pt),Pi.Na="timingevent",dn(lt,pt);var It={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Kt={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function cn(){}function Nr(){}cn.prototype.h=null;var Is,Pr={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Cr(){pt.call(this,"d")}function zs(){pt.call(this,"c")}function yo(){}function cs(i,e,r,o){this.l=i,this.j=e,this.m=r,this.X=o||1,this.V=new ni(this),this.P=Ks,this.W=new li(i=be?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Gi}function Gi(){this.i=null,this.g="",this.h=!1}dn(Cr,pt),dn(zs,pt),dn(yo,cn),yo.prototype.g=function(){return new XMLHttpRequest},yo.prototype.i=function(){return{}},Is=new yo;var Ks=45e3,Ds={},Ts={};function vo(i,e,r){i.K=1,i.v=C(_r(e)),i.s=r,i.U=!0,es(i,null)}function es(i,e){i.F=Date.now(),Zi(i),i.A=_r(i.v);var r=i.A,o=i.X;Array.isArray(o)||(o=[String(o)]),Ys(r.h,"t",o),i.C=0,r=i.l.H,i.h=new Gi,i.g=Es(i.l,r?e:null,!i.s),0<i.O&&(i.L=new ci(Nn(i.Ia,i,i.g),i.O)),ri(i.V,i.g,"readystatechange",i.gb),e=i.H?Qt(i.H):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.ea(i.A,i.u,i.s,e)):(i.u="GET",i.g.ea(i.A,i.u,null,e)),yi(1),function(i,e,r,o,d,v){i.info(function(){if(i.g)if(v)for(var O="",$=v.split("&"),ue=0;ue<$.length;ue++){var Ae=$[ue].split("=");if(1<Ae.length){var Ze=Ae[0];Ae=Ae[1];var dt=Ze.split("_");O=2<=dt.length&&"type"==dt[1]?O+(Ze+"=")+Ae+"&":O+(Ze+"=redacted&")}}else O=null;else O=v;return"XMLHTTP REQ ("+o+") [attempt "+d+"]: "+e+"\n"+r+"\n"+O})}(i.j,i.u,i.A,i.m,i.X,i.s)}function Go(i){return!!i.g&&"GET"==i.u&&2!=i.K&&i.l.Ba}function ts(i,e,r){let d,o=!0;for(;!i.I&&i.C<r.length;){if(d=Yi(i,r),d==Ts){4==e&&(i.o=4,Si(14),o=!1),_i(i.j,i.m,null,"[Incomplete Response]");break}if(d==Ds){i.o=4,Si(15),_i(i.j,i.m,r,"[Invalid Chunk]"),o=!1;break}_i(i.j,i.m,d,null),no(i,d)}Go(i)&&d!=Ts&&d!=Ds&&(i.h.g="",i.C=0),4!=e||0!=r.length||i.h.h||(i.o=1,Si(16),o=!1),i.i=i.i&&o,o?0<r.length&&!i.aa&&(i.aa=!0,(e=i.l).g==i&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+r.length),vs(e),e.L=!0,Si(11))):(_i(i.j,i.m,r,"[Invalid Chunked Response]"),vi(i),ui(i))}function Yi(i,e){var r=i.C,o=e.indexOf("\n",r);return-1==o?Ts:(r=Number(e.substring(r,o)),isNaN(r)?Ds:(o+=1)+r>e.length?Ts:(e=e.substr(o,r),i.C=o+r,e))}function Zi(i){i.Y=Date.now()+i.P,us(i,i.P)}function us(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=ot(Nn(i.eb,i),e)}function Ss(i){i.B&&(et.clearTimeout(i.B),i.B=null)}function ui(i){0==i.l.G||i.I||dl(i.l,i)}function vi(i){Ss(i);var e=i.L;e&&"function"==typeof e.na&&e.na(),i.L=null,Di(i.W),tr(i.V),i.g&&(e=i.g,i.g=null,e.abort(),e.na())}function no(i,e){try{var r=i.l;if(0!=r.G&&(r.g==i||w(r.i,i)))if(r.I=i.N,!i.J&&w(r.i,i)&&3==r.G){try{var o=r.Ca.g.parse(e)}catch(Ae){o=null}if(Array.isArray(o)&&3==o.length){var d=o;if(0==d[0])e:if(r.u)r.ta=d[1],0<r.ta-r.U&&37500>d[2]&&r.N&&0==r.A&&!r.v&&(r.v=ot(Nn(r.ab,r),6e3));else{if(r.g){if(!(r.g.F+3e3<i.F))break e;oa(r),vn(r)}ys(r),Si(18)}if(1>=de(r.i)&&r.ka){try{r.ka()}catch(Ae){}r.ka=void 0}}else oo(r,11)}else if((i.J||r.g==i)&&oa(r),!Mt(e))for(d=r.Ca.g.parse(e),e=0;e<d.length;e++){let Ae=d[e];if(r.U=Ae[0],Ae=Ae[1],2==r.G)if("c"==Ae[0]){r.J=Ae[1],r.la=Ae[2];const Ze=Ae[3];null!=Ze&&(r.ma=Ze,r.h.info("VER="+r.ma));const dt=Ae[4];null!=dt&&(r.za=dt,r.h.info("SVER="+r.za));const Gt=Ae[5];null!=Gt&&"number"==typeof Gt&&0<Gt&&(r.K=o=1.5*Gt,r.h.info("backChannelRequestTimeoutMs_="+o)),o=r;const on=i.g;if(on){const wn=on.g?on.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(wn){var v=o.i;!v.g&&(En(wn,"spdy")||En(wn,"quic")||En(wn,"h2"))&&(v.j=v.l,v.g=new Set,v.h&&(D(v,v.h),v.h=null))}if(o.D){const lr=on.g?on.g.getResponseHeader("X-HTTP-Session-Id"):null;lr&&(o.sa=lr,y(o.F,o.D,lr))}}r.G=3,r.j&&r.j.xa(),r.$&&(r.O=Date.now()-i.F,r.h.info("Handshake RTT: "+r.O+"ms"));var O=i;if((o=r).oa=Ra(o,o.H?o.la:null,o.W),O.J){V(o.i,O);var $=O,ue=o.K;ue&&$.setTimeout(ue),$.B&&(Ss($),Zi($)),o.g=O}else Ai(o);0<r.l.length&&Ps(r)}else"stop"!=Ae[0]&&"close"!=Ae[0]||oo(r,7);else 3==r.G&&("stop"==Ae[0]||"close"==Ae[0]?"stop"==Ae[0]?oo(r,7):xn(r):"noop"!=Ae[0]&&r.j&&r.j.wa(Ae),r.A=0)}yi(4)}catch(Ae){}}function ki(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(Ut(i)||"string"==typeof i)Ct(i,e,void 0);else{if(i.T&&"function"==typeof i.T)var r=i.T();else if(i.R&&"function"==typeof i.R)r=void 0;else if(Ut(i)||"string"==typeof i){r=[];for(var o=i.length,d=0;d<o;d++)r.push(d)}else for(d in r=[],o=0,i)r[o++]=d;o=function(i){if(i.R&&"function"==typeof i.R)return i.R();if("string"==typeof i)return i.split("");if(Ut(i)){for(var e=[],r=i.length,o=0;o<r;o++)e.push(i[o]);return e}for(o in e=[],r=0,i)e[r++]=i[o];return e}(i),d=o.length;for(var v=0;v<d;v++)e.call(void 0,o[v],r&&r[v],i)}}function As(i,e){this.h={},this.g=[],this.i=0;var r=arguments.length;if(1<r){if(r%2)throw Error("Uneven number of arguments");for(var o=0;o<r;o+=2)this.set(arguments[o],arguments[o+1])}else if(i)if(i instanceof As)for(r=i.T(),o=0;o<r.length;o++)this.set(r[o],i.get(r[o]));else for(o in i)this.set(o,i[o])}function Ni(i){if(i.i!=i.g.length){for(var e=0,r=0;e<i.g.length;){var o=i.g[e];Ms(i.h,o)&&(i.g[r++]=o),e++}i.g.length=r}if(i.i!=i.g.length){var d={};for(r=e=0;e<i.g.length;)Ms(d,o=i.g[e])||(i.g[r++]=o,d[o]=1),e++;i.g.length=r}}function Ms(i,e){return Object.prototype.hasOwnProperty.call(i,e)}(Pe=cs.prototype).setTimeout=function(i){this.P=i},Pe.gb=function(i){i=i.target;const e=this.L;e&&3==Rs(i)?e.l():this.Ia(i)},Pe.Ia=function(i){try{if(i==this.g)e:{const Ze=Rs(this.g);var e=this.g.Da();const dt=this.g.ba();if(!(3>Ze)&&(3!=Ze||be||this.g&&(this.h.h||this.g.ga()||io(this.g)))){this.I||4!=Ze||7==e||yi(8==e||0>=dt?3:2),Ss(this);var r=this.g.ba();this.N=r;t:if(Go(this)){var o=io(this.g);i="";var d=o.length,v=4==Rs(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){vi(this),ui(this);var O="";break t}this.h.i=new et.TextDecoder}for(e=0;e<d;e++)this.h.h=!0,i+=this.h.i.decode(o[e],{stream:v&&e==d-1});o.splice(0,d),this.h.g+=i,this.C=0,O=this.h.g}else O=this.g.ga();if(this.i=200==r,function(i,e,r,o,d,v,O){i.info(function(){return"XMLHTTP RESP ("+o+") [ attempt "+d+"]: "+e+"\n"+r+"\n"+v+" "+O})}(this.j,this.u,this.A,this.m,this.X,Ze,r),this.i){if(this.$&&!this.J){t:{if(this.g){var $,ue=this.g;if(($=ue.g?ue.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Mt($)){var Ae=$;break t}}Ae=null}if(!(r=Ae)){this.i=!1,this.o=3,Si(12),vi(this),ui(this);break e}_i(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,no(this,r)}this.U?(ts(this,Ze,O),be&&this.i&&3==Ze&&(ri(this.V,this.W,"tick",this.fb),this.W.start())):(_i(this.j,this.m,O,null),no(this,O)),4==Ze&&vi(this),this.i&&!this.I&&(4==Ze?dl(this.l,this):(this.i=!1,Zi(this)))}else 400==r&&0<O.indexOf("Unknown SID")?(this.o=3,Si(12)):(this.o=0,Si(13)),vi(this),ui(this)}}}catch(Ze){}},Pe.fb=function(){if(this.g){var i=Rs(this.g),e=this.g.ga();this.C<e.length&&(Ss(this),ts(this,i,e),this.i&&4!=i&&Zi(this))}},Pe.cancel=function(){this.I=!0,vi(this)},Pe.eb=function(){this.B=null;const i=Date.now();0<=i-this.Y?(function(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(yi(3),Si(17)),vi(this),this.o=2,ui(this)):us(this,this.Y-i)},(Pe=As.prototype).R=function(){Ni(this);for(var i=[],e=0;e<this.g.length;e++)i.push(this.h[this.g[e]]);return i},Pe.T=function(){return Ni(this),this.g.concat()},Pe.get=function(i,e){return Ms(this.h,i)?this.h[i]:e},Pe.set=function(i,e){Ms(this.h,i)||(this.i++,this.g.push(i)),this.h[i]=e},Pe.forEach=function(i,e){for(var r=this.T(),o=0;o<r.length;o++){var d=r[o],v=this.get(d);i.call(e,v,d,this)}};var Qo=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Fi(i,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,i instanceof Fi){this.g=void 0!==e?e:i.g,ko(this,i.j),this.s=i.s,xs(this,i.i),G(this,i.m),this.l=i.l,e=i.h;var r=new xr;r.i=e.i,e.g&&(r.g=new As(e.g),r.h=e.h),S(this,r),this.o=i.o}else i&&(r=String(i).match(Qo))?(this.g=!!e,ko(this,r[1]||"",!0),this.s=wt(r[2]||""),xs(this,r[3]||"",!0),G(this,r[4]),this.l=wt(r[5]||"",!0),S(this,r[6]||"",!0),this.o=wt(r[7]||"")):(this.g=!!e,this.h=new xr(null,this.g))}function _r(i){return new Fi(i)}function ko(i,e,r){i.j=r?wt(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function xs(i,e,r){i.i=r?wt(e,!0):e}function G(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function S(i,e,r){e instanceof xr?(i.h=e,function(i,e){e&&!i.j&&(Tn(i),i.i=null,i.g.forEach(function(r,o){var d=o.toLowerCase();o!=d&&(Os(this,o),Ys(this,d,r))},i)),i.j=e}(i.h,i.g)):(r||(e=hn(e,Wr)),i.h=new xr(e,i.g))}function y(i,e,r){i.h.set(e,r)}function C(i){return y(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function wt(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function hn(i,e,r){return"string"==typeof i?(i=encodeURI(i).replace(e,Pn),r&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function Pn(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}Fi.prototype.toString=function(){var i=[],e=this.j;e&&i.push(hn(e,Gn,!0),":");var r=this.i;return(r||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(hn(e,Gn,!0),"@"),i.push(encodeURIComponent(String(r)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(r=this.m)&&i.push(":",String(r))),(r=this.l)&&(this.i&&"/"!=r.charAt(0)&&i.push("/"),i.push(hn(r,"/"==r.charAt(0)?rr:Sn,!0))),(r=this.h.toString())&&i.push("?",r),(r=this.o)&&i.push("#",hn(r,Ur)),i.join("")};var Gn=/[#\/\?@]/g,Sn=/[#\?:]/g,rr=/[#\?]/g,Wr=/[#\?@]/g,Ur=/#/g;function xr(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function Tn(i){i.g||(i.g=new As,i.h=0,i.i&&function(i,e){if(i){i=i.split("&");for(var r=0;r<i.length;r++){var o=i[r].indexOf("="),d=null;if(0<=o){var v=i[r].substring(0,o);d=i[r].substring(o+1)}else v=i[r];e(v,d?decodeURIComponent(d.replace(/\+/g," ")):"")}}}(i.i,function(e,r){i.add(decodeURIComponent(e.replace(/\+/g," ")),r)}))}function Os(i,e){Tn(i),e=Ei(i,e),Ms(i.g.h,e)&&(i.i=null,i.h-=i.g.get(e).length,Ms((i=i.g).h,e)&&(delete i.h[e],i.i--,i.g.length>2*i.i&&Ni(i)))}function No(i,e){return Tn(i),e=Ei(i,e),Ms(i.g.h,e)}function Ys(i,e,r){Os(i,e),0<r.length&&(i.i=null,i.g.set(Ei(i,e),Nt(r)),i.h+=r.length)}function Ei(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function Za(i){this.l=i||en,i=et.PerformanceNavigationTiming?0<(i=et.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(et.g&&et.g.Ea&&et.g.Ea()&&et.g.Ea().Zb),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Pe=xr.prototype).add=function(i,e){Tn(this),this.i=null,i=Ei(this,i);var r=this.g.get(i);return r||this.g.set(i,r=[]),r.push(e),this.h+=1,this},Pe.forEach=function(i,e){Tn(this),this.g.forEach(function(r,o){Ct(r,function(d){i.call(e,d,o,this)},this)},this)},Pe.T=function(){Tn(this);for(var i=this.g.R(),e=this.g.T(),r=[],o=0;o<e.length;o++)for(var d=i[o],v=0;v<d.length;v++)r.push(e[o]);return r},Pe.R=function(i){Tn(this);var e=[];if("string"==typeof i)No(this,i)&&(e=mt(e,this.g.get(Ei(this,i))));else{i=this.g.R();for(var r=0;r<i.length;r++)e=mt(e,i[r])}return e},Pe.set=function(i,e){return Tn(this),this.i=null,No(this,i=Ei(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},Pe.get=function(i,e){return i&&0<(i=this.R(i)).length?String(i[0]):e},Pe.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var i=[],e=this.g.T(),r=0;r<e.length;r++){var o=e[r],d=encodeURIComponent(String(o));o=this.R(o);for(var v=0;v<o.length;v++){var O=d;""!==o[v]&&(O+="="+encodeURIComponent(String(o[v]))),i.push(O)}}return this.i=i.join("&")};var en=10;function Ir(i){return!!i.h||!!i.g&&i.g.size>=i.j}function de(i){return i.h?1:i.g?i.g.size:0}function w(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function D(i,e){i.g?i.g.add(e):i.h=e}function V(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function re(i){if(null!=i.h)return i.i.concat(i.h.D);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const r of i.g.values())e=e.concat(r.D);return e}return Nt(i.i)}function me(){}function We(){this.g=new me}function nt(i,e,r){const o=r||"";try{ki(i,function(d,v){let O=d;Zt(d)&&(O=pi(d)),e.push(o+v+"="+encodeURIComponent(O))})}catch(d){throw e.push(o+"type="+encodeURIComponent("_badmap")),d}}function Ft(i,e,r,o,d){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,d(o)}catch(v){}}function un(i){this.l=i.$b||null,this.j=i.ib||!1}function _n(i,e){Mr.call(this),this.D=i,this.u=e,this.m=void 0,this.readyState=Xn,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Za.prototype.cancel=function(){if(this.i=re(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}},me.prototype.stringify=function(i){return et.JSON.stringify(i,void 0)},me.prototype.parse=function(i){return et.JSON.parse(i,void 0)},dn(un,cn),un.prototype.g=function(){return new _n(this.l,this.j)},un.prototype.i=function(i){return function(){return i}}({}),dn(_n,Mr);var Xn=0;function ir(i){i.j.read().then(i.Sa.bind(i)).catch(i.ha.bind(i))}function Ln(i){i.readyState=4,i.l=null,i.j=null,i.A=null,zn(i)}function zn(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(Pe=_n.prototype).open=function(i,e){if(this.readyState!=Xn)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,zn(this)},Pe.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.D||et).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Pe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ln(this)),this.readyState=Xn},Pe.Va=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,zn(this)),this.g&&(this.readyState=3,zn(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==et.ReadableStream&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;ir(this)}else i.text().then(this.Ua.bind(this),this.ha.bind(this))},Pe.Sa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?Ln(this):zn(this),3==this.readyState&&ir(this)}},Pe.Ua=function(i){this.g&&(this.response=this.responseText=i,Ln(this))},Pe.Ta=function(i){this.g&&(this.response=i,Ln(this))},Pe.ha=function(){this.g&&Ln(this)},Pe.setRequestHeader=function(i,e){this.v.append(i,e)},Pe.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},Pe.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var r=e.next();!r.done;)i.push((r=r.value)[0]+": "+r[1]),r=e.next();return i.join("\r\n")},Object.defineProperty(_n.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var Dr=et.JSON.parse;function dr(i){Mr.call(this),this.headers=new As,this.u=i||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=zr,this.K=this.L=!1}dn(dr,Mr);var zr="",$i=/^https?$/i,bi=["POST","PUT"];function Bs(i){return"content-type"==i.toLowerCase()}function Li(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,ro(i),ns(i)}function ro(i){i.D||(i.D=!0,or(i,"complete"),or(i,"error"))}function Zs(i){if(i.h&&void 0!==qe&&(!i.C[1]||4!=Rs(i)||2!=i.ba()))if(i.v&&4==Rs(i))Ji(i.Fa,0,i);else if(or(i,"readystatechange"),4==Rs(i)){i.h=!1;try{const $=i.ba();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var r;if(!(r=e)){var o;if(o=0===$){var d=String(i.H).match(Qo)[1]||null;if(!d&&et.self&&et.self.location){var v=et.self.location.protocol;d=v.substr(0,v.length-1)}o=!$i.test(d?d.toLowerCase():"")}r=o}if(r)or(i,"complete"),or(i,"success");else{i.m=6;try{var O=2<Rs(i)?i.g.statusText:""}catch(ue){O=""}i.j=O+" ["+i.ba()+"]",ro(i)}}finally{ns(i)}}}function ns(i,e){if(i.g){Fr(i);const r=i.g,o=i.C[0]?At:null;i.g=null,i.C=null,e||or(i,"ready");try{r.onreadystatechange=o}catch(d){}}}function Fr(i){i.g&&i.K&&(i.g.ontimeout=null),i.A&&(et.clearTimeout(i.A),i.A=null)}function Rs(i){return i.g?i.g.readyState:0}function io(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.J){case zr:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch(e){return null}}function so(i,e,r){e:{for(o in r){var o=!1;break e}o=!0}o||(r=function(i){let e="";return gr(i,function(r,o){e+=o,e+=":",e+=r,e+="\r\n"}),e}(r),"string"==typeof i?null!=r&&encodeURIComponent(String(r)):y(i,e,r))}function An(i,e,r){return r&&r.internalChannelParams&&r.internalChannelParams[i]||e}function Bn(i){this.za=0,this.l=[],this.h=new Xi,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=An("failFast",!1,i),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=An("baseRetryDelayMs",5e3,i),this.$a=An("retryDelaySeedMs",1e4,i),this.Ya=An("forwardChannelMaxRetries",2,i),this.ra=An("forwardChannelRequestTimeoutMs",2e4,i),this.qa=i&&i.xmlHttpFactory||void 0,this.Ba=i&&i.Yb||!1,this.K=void 0,this.H=i&&i.supportsCrossDomainXhr||!1,this.J="",this.i=new Za(i&&i.concurrentRequestLimit),this.Ca=new We,this.ja=i&&i.fastHandshake||!1,this.Ra=i&&i.Wb||!1,i&&i.Aa&&this.h.Aa(),i&&i.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&i&&i.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!i||!1!==i.Xb}function xn(i){if(vr(i),3==i.G){var e=i.V++,r=_r(i.F);y(r,"SID",i.J),y(r,"RID",e),y(r,"TYPE","terminate"),Fo(i,r),(e=new cs(i,i.h,e,void 0)).K=2,e.v=C(_r(r)),r=!1,et.navigator&&et.navigator.sendBeacon&&(r=et.navigator.sendBeacon(e.v.toString(),"")),!r&&et.Image&&((new Image).src=e.v,r=!0),r||(e.g=Es(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Zi(e)}Xo(i)}function vn(i){i.g&&(vs(i),i.g.cancel(),i.g=null)}function vr(i){vn(i),i.u&&(et.clearTimeout(i.u),i.u=null),oa(i),i.i.cancel(),i.m&&("number"==typeof i.m&&et.clearTimeout(i.m),i.m=null)}function qi(i,e){i.l.push(new class{constructor(i,e){this.h=i,this.g=e}}(i.Za++,e)),3==i.G&&Ps(i)}function Ps(i){Ir(i.i)||i.m||(i.m=!0,Rr(i.Ha,i),i.C=0)}function Qr(i,e){var r;r=e?e.m:i.V++;const o=_r(i.F);y(o,"SID",i.J),y(o,"RID",r),y(o,"AID",i.U),Fo(i,o),i.o&&i.s&&so(o,i.o,i.s),r=new cs(i,i.h,r,i.C+1),null===i.o&&(r.H=i.s),e&&(i.l=e.D.concat(i.l)),e=ks(i,r,1e3),r.setTimeout(Math.round(.5*i.ra)+Math.round(.5*i.ra*Math.random())),D(i.i,r),vo(r,o,e)}function Fo(i,e){i.j&&ki({},function(r,o){y(e,o,r)})}function ks(i,e,r){r=Math.min(i.l.length,r);var o=i.j?Nn(i.j.Oa,i.j,i):null;e:{var d=i.l;let v=-1;for(;;){const O=["count="+r];-1==v?0<r?(v=d[0].h,O.push("ofs="+v)):v=0:O.push("ofs="+v);let $=!0;for(let ue=0;ue<r;ue++){let Ae=d[ue].h;const Ze=d[ue].g;if(Ae-=v,0>Ae)v=Math.max(0,d[ue].h-100),$=!1;else try{nt(Ze,O,"req"+Ae+"_")}catch(dt){o&&o(Ze)}}if($){o=O.join("&");break e}}}return i=i.l.splice(0,r),e.D=i,o}function Ai(i){i.g||i.u||(i.Y=1,Rr(i.Ga,i),i.A=0)}function ys(i){return!(i.g||i.u||3<=i.A||(i.Y++,i.u=ot(Nn(i.Ga,i),Jr(i,i.A)),i.A++,0))}function vs(i){null!=i.B&&(et.clearTimeout(i.B),i.B=null)}function Jo(i){i.g=new cs(i,i.h,"rpc",i.Y),null===i.o&&(i.g.H=i.s),i.g.O=0;var e=_r(i.oa);y(e,"RID","rpc"),y(e,"SID",i.J),y(e,"CI",i.N?"0":"1"),y(e,"AID",i.U),Fo(i,e),y(e,"TYPE","xmlhttp"),i.o&&i.s&&so(e,i.o,i.s),i.K&&i.g.setTimeout(i.K);var r=i.g;i=i.la,r.K=1,r.v=C(_r(e)),r.s=null,r.U=!0,es(r,i)}function oa(i){null!=i.v&&(et.clearTimeout(i.v),i.v=null)}function dl(i,e){var r=null;if(i.g==e){oa(i),vs(i),i.g=null;var o=2}else{if(!w(i.i,e))return;r=e.D,V(i.i,e),o=1}if(i.I=e.N,0!=i.G)if(e.i)if(1==o){r=e.s?e.s.length:0,e=Date.now()-e.F;var d=i.C;or(o=ps(),new lt(o,r,e,d)),Ps(i)}else Ai(i);else if(3==(d=e.o)||0==d&&0<i.I||!(1==o&&function(i,e){return!(de(i.i)>=i.i.j-(i.m?1:0)||(i.m?(i.l=e.D.concat(i.l),0):1==i.G||2==i.G||i.C>=(i.Xa?0:i.Ya)||(i.m=ot(Nn(i.Ha,i,e),Jr(i,i.C)),i.C++,0)))}(i,e)||2==o&&ys(i)))switch(r&&0<r.length&&(e=i.i,e.i=e.i.concat(r)),d){case 1:oo(i,5);break;case 4:oo(i,10);break;case 3:oo(i,6);break;default:oo(i,2)}}function Jr(i,e){let r=i.Pa+Math.floor(Math.random()*i.$a);return i.j||(r*=2),r*e}function oo(i,e){if(i.h.info("Error code "+e),2==e){var r=null;i.j&&(r=null);var o=Nn(i.jb,i);r||(r=new Fi("//www.google.com/images/cleardot.gif"),et.location&&"http"==et.location.protocol||ko(r,"https"),C(r)),function(i,e){const r=new Xi;if(et.Image){const o=new Image;o.onload=Qn(Ft,r,o,"TestLoadImage: loaded",!0,e),o.onerror=Qn(Ft,r,o,"TestLoadImage: error",!1,e),o.onabort=Qn(Ft,r,o,"TestLoadImage: abort",!1,e),o.ontimeout=Qn(Ft,r,o,"TestLoadImage: timeout",!1,e),et.setTimeout(function(){o.ontimeout&&o.ontimeout()},1e4),o.src=i}else e(!1)}(r.toString(),o)}else Si(2);i.G=0,i.j&&i.j.va(e),Xo(i),vr(i)}function Xo(i){i.G=0,i.I=-1,i.j&&((0!=re(i.i).length||0!=i.l.length)&&(i.i.i.length=0,Nt(i.l),i.l.length=0),i.j.ua())}function Ra(i,e,r){let o=function(i){return i instanceof Fi?_r(i):new Fi(i,void 0)}(r);if(""!=o.i)e&&xs(o,e+"."+o.i),G(o,o.m);else{const d=et.location;o=function(i,e,r,o){var d=new Fi(null,void 0);return i&&ko(d,i),e&&xs(d,e),r&&G(d,r),o&&(d.l=o),d}(d.protocol,e?e+"."+d.hostname:d.hostname,+d.port,r)}return i.aa&&gr(i.aa,function(d,v){y(o,v,d)}),r=i.sa,(e=i.D)&&r&&y(o,e,r),y(o,"VER",i.ma),Fo(i,o),o}function Es(i,e,r){if(e&&!i.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new dr(r&&i.Ba&&!i.qa?new un({ib:!0}):i.qa)).L=i.H,e}function ga(){}function Lo(){if(J&&!(10<=Number(Xe)))throw Error("Environmental error: no available transport.")}function rs(i,e){Mr.call(this),this.g=new Bn(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(i?i["X-WebChannel-Client-Profile"]=e.ya:i={"X-WebChannel-Client-Profile":e.ya}),this.g.P=i,(i=e&&e.httpHeadersOverwriteParam)&&!Mt(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Mt(e)&&(this.g.D=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new ea(this)}function qc(i){Cr.call(this);var e=i.__sm__;if(e){e:{for(const r in e){i=r;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function hl(){zs.call(this),this.status=1}function ea(i){this.g=i}(Pe=dr.prototype).ea=function(i,e,r,o){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+i);e=e?e.toUpperCase():"GET",this.H=i,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Is.g(),this.C=function(i){return i.h||(i.h=i.i())}(this.u?this.u:Is),this.g.onreadystatechange=Nn(this.Fa,this);try{this.F=!0,this.g.open(e,String(i),!0),this.F=!1}catch(v){return void Li(this,v)}i=r||"";const d=new As(this.headers);o&&ki(o,function(v,O){d.set(O,v)}),o=function(i){e:{var e=Bs;const r=i.length,o="string"==typeof i?i.split(""):i;for(let d=0;d<r;d++)if(d in o&&e.call(void 0,o[d],d,i)){e=d;break e}e=-1}return 0>e?null:"string"==typeof i?i.charAt(e):i[e]}(d.T()),r=et.FormData&&i instanceof et.FormData,!(0<=Ye(bi,e))||o||r||d.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),d.forEach(function(v,O){this.g.setRequestHeader(O,v)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Fr(this),0<this.B&&((this.K=function(i){return J&&Fn()&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Nn(this.pa,this)):this.A=Ji(this.pa,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(v){Li(this,v)}},Pe.pa=function(){void 0!==qe&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,or(this,"timeout"),this.abort(8))},Pe.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,or(this,"complete"),or(this,"abort"),ns(this))},Pe.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ns(this,!0)),dr.Z.M.call(this)},Pe.Fa=function(){this.s||(this.F||this.v||this.l?Zs(this):this.cb())},Pe.cb=function(){Zs(this)},Pe.ba=function(){try{return 2<Rs(this)?this.g.status:-1}catch(i){return-1}},Pe.ga=function(){try{return this.g?this.g.responseText:""}catch(i){return""}},Pe.Qa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),Dr(e)}},Pe.Da=function(){return this.m},Pe.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Pe=Bn.prototype).ma=8,Pe.G=1,Pe.hb=function(i){try{this.h.info("Origin Trials invoked: "+i)}catch(e){}},Pe.Ha=function(i){if(this.m)if(this.m=null,1==this.G){if(!i){this.V=Math.floor(1e5*Math.random()),i=this.V++;const d=new cs(this,this.h,i,void 0);let v=this.s;if(this.P&&(v?(v=Qt(v),yr(v,this.P)):v=this.P),null===this.o&&(d.H=v),this.ja)e:{for(var e=0,r=0;r<this.l.length;r++){var o=this.l[r];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=r;break e}if(4096===e||r===this.l.length-1){e=r+1;break e}}e=1e3}else e=1e3;e=ks(this,d,e),y(r=_r(this.F),"RID",i),y(r,"CVER",22),this.D&&y(r,"X-HTTP-Session-Id",this.D),Fo(this,r),this.o&&v&&so(r,this.o,v),D(this.i,d),this.Ra&&y(r,"TYPE","init"),this.ja?(y(r,"$req",e),y(r,"SID","null"),d.$=!0,vo(d,r,null)):vo(d,r,e),this.G=2}}else 3==this.G&&(i?Qr(this,i):0==this.l.length||Ir(this.i)||Qr(this))},Pe.Ga=function(){if(this.u=null,Jo(this),this.$&&!(this.L||null==this.g||0>=this.O)){var i=2*this.O;this.h.info("BP detection timer enabled: "+i),this.B=ot(Nn(this.bb,this),i)}},Pe.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Si(10),vn(this),Jo(this))},Pe.ab=function(){null!=this.v&&(this.v=null,vn(this),ys(this),Si(19))},Pe.jb=function(i){i?(this.h.info("Successfully pinged google.com"),Si(2)):(this.h.info("Failed to ping google.com"),Si(1))},(Pe=ga.prototype).xa=function(){},Pe.wa=function(){},Pe.va=function(){},Pe.ua=function(){},Pe.Oa=function(){},Lo.prototype.g=function(i,e){return new rs(i,e)},dn(rs,Mr),rs.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var i=this.g,e=this.l,r=this.h||void 0;i.Wa&&(i.h.info("Origin Trials enabled."),Rr(Nn(i.hb,i,e))),Si(0),i.W=e,i.aa=r||{},i.N=i.X,i.F=Ra(i,null,i.W),Ps(i)},rs.prototype.close=function(){xn(this.g)},rs.prototype.u=function(i){if("string"==typeof i){var e={};e.__data__=i,qi(this.g,e)}else this.v?((e={}).__data__=pi(i),qi(this.g,e)):qi(this.g,i)},rs.prototype.M=function(){this.g.j=null,delete this.j,xn(this.g),delete this.g,rs.Z.M.call(this)},dn(qc,Cr),dn(hl,zs),dn(ea,ga),ea.prototype.xa=function(){or(this.g,"a")},ea.prototype.wa=function(i){or(this.g,new qc(i))},ea.prototype.va=function(i){or(this.g,new hl(i))},ea.prototype.ua=function(){or(this.g,"b")},Lo.prototype.createWebChannel=Lo.prototype.g,rs.prototype.send=rs.prototype.u,rs.prototype.open=rs.prototype.m,rs.prototype.close=rs.prototype.close,It.NO_ERROR=0,It.TIMEOUT=8,It.HTTP_ERROR=6,Kt.COMPLETE="complete",Nr.EventType=Pr,Pr.OPEN="a",Pr.CLOSE="b",Pr.ERROR="c",Pr.MESSAGE="d",Mr.prototype.listen=Mr.prototype.N,dr.prototype.listenOnce=dr.prototype.O,dr.prototype.getLastError=dr.prototype.La,dr.prototype.getLastErrorCode=dr.prototype.Da,dr.prototype.getStatus=dr.prototype.ba,dr.prototype.getResponseJson=dr.prototype.Qa,dr.prototype.getResponseText=dr.prototype.ga,dr.prototype.send=dr.prototype.ea;var pc=we.createWebChannelTransport=function(){return new Lo},Vs=we.getStatEventTarget=function(){return ps()},ma=we.ErrorCode=It,Qc=we.EventType=Kt,Hl=we.Event=Pi,ta=we.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Gl=we.FetchXmlHttpFactory=un,na=we.WebChannel=Nr,Pa=we.XhrIo=dr;const Wo="@firebase/firestore";class Bi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Bi.UNAUTHENTICATED=new Bi(null),Bi.GOOGLE_CREDENTIALS=new Bi("google-credentials-uid"),Bi.FIRST_PARTY=new Bi("first-party-uid"),Bi.MOCK_USER=new Bi("mock-user");let F="9.6.1";const R=new yt.Yd("@firebase/firestore");function M(){return R.logLevel}function W(i,...e){if(R.logLevel<=yt.in.DEBUG){const r=e.map(st);R.debug(`Firestore (${F}): ${i}`,...r)}}function pe(i,...e){if(R.logLevel<=yt.in.ERROR){const r=e.map(st);R.error(`Firestore (${F}): ${i}`,...r)}}function Be(i,...e){if(R.logLevel<=yt.in.WARN){const r=e.map(st);R.warn(`Firestore (${F}): ${i}`,...r)}}function st(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch(r){return i}}function ht(i="Unexpected state"){const e=`FIRESTORE (${F}) INTERNAL ASSERTION FAILED: `+i;throw pe(e),new Error(e)}function Jt(i,e){i||ht()}function Vt(i,e){return i}const Et={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Bt extends Error{constructor(e,r){super(r),this.code=e,this.message=r,this.name="FirebaseError",this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Xr{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}class ao{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ei{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(Bi.UNAUTHENTICATED))}shutdown(){}}class ds{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class zo{constructor(e){this.t=e,this.currentUser=Bi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){var o=this;let d=this.i;const v=Ae=>this.i!==d?(d=this.i,r(Ae)):Promise.resolve();let O=new Xr;this.o=()=>{this.i++,this.currentUser=this.u(),O.resolve(),O=new Xr,e.enqueueRetryable(()=>v(this.currentUser))};const $=()=>{const Ae=O;e.enqueueRetryable((0,ee.Z)(function*(){yield Ae.promise,yield v(o.currentUser)}))},ue=Ae=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=Ae,this.auth.addAuthTokenListener(this.o),$()};this.t.onInit(Ae=>ue(Ae)),setTimeout(()=>{if(!this.auth){const Ae=this.t.getImmediate({optional:!0});Ae?ue(Ae):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),O.resolve(),O=new Xr)}},0),$()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(o=>this.i!==e?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(Jt("string"==typeof o.accessToken),new ao(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Jt(null===e||"string"==typeof e),new Bi(e)}}class lo{constructor(e,r,o){this.type="FirstParty",this.user=Bi.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",r);const d=e.auth.getAuthHeaderValueForFirstParty([]);d&&this.headers.set("Authorization",d),o&&this.headers.set("X-Goog-Iam-Authorization-Token",o)}}class _a{constructor(e,r,o){this.h=e,this.l=r,this.m=o}getToken(){return Promise.resolve(new lo(this.h,this.l,this.m))}start(e,r){e.enqueueRetryable(()=>r(Bi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ti{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class gc{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null}start(e,r){this.o=d=>{e.enqueueRetryable(()=>{return null!=(v=d).error&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${v.error.message}`),r(v.token);var v})};const o=d=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=d,this.appCheck.addTokenListener(this.o)};this.g.onInit(d=>o(d)),setTimeout(()=>{if(!this.appCheck){const d=this.g.getImmediate({optional:!0});d?o(d):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(Jt("string"==typeof r.token),new ti(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class bs{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=o=>this.p(o),this.T=o=>r.writeSequenceNumber(o))}p(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function Ko(i){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),r=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(r);else for(let o=0;o<i;o++)r[o]=Math.floor(256*Math.random());return r}bs.I=-1;class aa{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let o="";for(;o.length<20;){const d=Ko(40);for(let v=0;v<d.length;++v)o.length<20&&d[v]<r&&(o+=e.charAt(d[v]%e.length))}return o}}function Tr(i,e){return i<e?-1:i>e?1:0}function co(i,e,r){return i.length===e.length&&i.every((o,d)=>r(o,e[d]))}function fl(i){return i+"\0"}class di{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new Bt(Et.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Bt(Et.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new Bt(Et.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Bt(Et.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return di.fromMillis(Date.now())}static fromDate(e){return di.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),o=Math.floor(1e6*(e-1e3*r));return new di(r,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Tr(this.nanoseconds,e.nanoseconds):Tr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class $n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new $n(e)}static min(){return new $n(new di(0,0))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function uo(i){let e=0;for(const r in i)Object.prototype.hasOwnProperty.call(i,r)&&e++;return e}function jr(i,e){for(const r in i)Object.prototype.hasOwnProperty.call(i,r)&&e(r,i[r])}function pl(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class gl{constructor(e,r,o){void 0===r?r=0:r>e.length&&ht(),void 0===o?o=e.length-r:o>e.length-r&&ht(),this.segments=e,this.offset=r,this.len=o}get length(){return this.len}isEqual(e){return 0===gl.comparator(this,e)}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof gl?e.forEach(o=>{r.push(o)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,o=this.limit();r<o;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const o=Math.min(e.length,r.length);for(let d=0;d<o;d++){const v=e.get(d),O=r.get(d);if(v<O)return-1;if(v>O)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class Kr extends gl{construct(e,r,o){return new Kr(e,r,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const r=[];for(const o of e){if(o.indexOf("//")>=0)throw new Bt(Et.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);r.push(...o.split("/").filter(d=>d.length>0))}return new Kr(r)}static emptyPath(){return new Kr([])}}const qa=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ho extends gl{construct(e,r,o){return new ho(e,r,o)}static isValidIdentifier(e){return qa.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ho.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ho(["__name__"])}static fromServerFormat(e){const r=[];let o="",d=0;const v=()=>{if(0===o.length)throw new Bt(Et.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(o),o=""};let O=!1;for(;d<e.length;){const $=e[d];if("\\"===$){if(d+1===e.length)throw new Bt(Et.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const ue=e[d+1];if("\\"!==ue&&"."!==ue&&"`"!==ue)throw new Bt(Et.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=ue,d+=2}else"`"===$?(O=!O,d++):"."!==$||O?(o+=$,d++):(v(),d++)}if(v(),O)throw new Bt(Et.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ho(r)}static emptyPath(){return new ho([])}}class So{constructor(e){this.fields=e,e.sort(ho.comparator)}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return co(this.fields,e.fields,(r,o)=>r.isEqual(o))}}class hi{constructor(e){this.binaryString=e}static fromBase64String(e){const r=atob(e);return new hi(r)}static fromUint8Array(e){const r=function(o){let d="";for(let v=0;v<o.length;++v)d+=String.fromCharCode(o[v]);return d}(e);return new hi(r)}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const r=new Uint8Array(e.length);for(let o=0;o<e.length;o++)r[o]=e.charCodeAt(o);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Tr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}hi.EMPTY_BYTE_STRING=new hi("");const fd=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function fi(i){if(Jt(!!i),"string"==typeof i){let e=0;const r=fd.exec(i);if(Jt(!!r),r[1]){let d=r[1];d=(d+"000000000").substr(0,9),e=Number(d)}const o=new Date(i);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:Mi(i.seconds),nanos:Mi(i.nanos)}}function Mi(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function la(i){return"string"==typeof i?hi.fromBase64String(i):hi.fromUint8Array(i)}function Nu(i){var e,r;return"server_timestamp"===(null===(r=((null===(e=null==i?void 0:i.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===r?void 0:r.stringValue)}function Fu(i){const e=i.mapValue.fields.__previous_value__;return Nu(e)?Fu(e):e}function Us(i){const e=fi(i.mapValue.fields.__local_write_time__.timestampValue);return new di(e.seconds,e.nanos)}function qs(i){return null==i}function ka(i){return 0===i&&1/i==-1/0}function Na(i){return"number"==typeof i&&Number.isInteger(i)&&!ka(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}class Vn{constructor(e){this.path=e}static fromPath(e){return new Vn(Kr.fromString(e))}static fromName(e){return new Vn(Kr.fromString(e).popFirst(5))}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}isEqual(e){return null!==e&&0===Kr.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,r){return Kr.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Vn(new Kr(e.slice()))}}function ya(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Nu(i)?4:10:ht()}function Eo(i,e){const r=ya(i);if(r!==ya(e))return!1;switch(r){case 0:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Us(i).isEqual(Us(e));case 3:return function(o,d){if("string"==typeof o.timestampValue&&"string"==typeof d.timestampValue&&o.timestampValue.length===d.timestampValue.length)return o.timestampValue===d.timestampValue;const v=fi(o.timestampValue),O=fi(d.timestampValue);return v.seconds===O.seconds&&v.nanos===O.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return d=e,la(i.bytesValue).isEqual(la(d.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(o,d){return Mi(o.geoPointValue.latitude)===Mi(d.geoPointValue.latitude)&&Mi(o.geoPointValue.longitude)===Mi(d.geoPointValue.longitude)}(i,e);case 2:return function(o,d){if("integerValue"in o&&"integerValue"in d)return Mi(o.integerValue)===Mi(d.integerValue);if("doubleValue"in o&&"doubleValue"in d){const v=Mi(o.doubleValue),O=Mi(d.doubleValue);return v===O?ka(v)===ka(O):isNaN(v)&&isNaN(O)}return!1}(i,e);case 9:return co(i.arrayValue.values||[],e.arrayValue.values||[],Eo);case 10:return function(o,d){const v=o.mapValue.fields||{},O=d.mapValue.fields||{};if(uo(v)!==uo(O))return!1;for(const $ in v)if(v.hasOwnProperty($)&&(void 0===O[$]||!Eo(v[$],O[$])))return!1;return!0}(i,e);default:return ht()}var d}function Qa(i,e){return void 0!==(i.values||[]).find(r=>Eo(r,e))}function yc(i,e){const r=ya(i),o=ya(e);if(r!==o)return Tr(r,o);switch(r){case 0:return 0;case 1:return Tr(i.booleanValue,e.booleanValue);case 2:return function(d,v){const O=Mi(d.integerValue||d.doubleValue),$=Mi(v.integerValue||v.doubleValue);return O<$?-1:O>$?1:O===$?0:isNaN(O)?isNaN($)?0:-1:1}(i,e);case 3:return ih(i.timestampValue,e.timestampValue);case 4:return ih(Us(i),Us(e));case 5:return Tr(i.stringValue,e.stringValue);case 6:return function(d,v){const O=la(d),$=la(v);return O.compareTo($)}(i.bytesValue,e.bytesValue);case 7:return function(d,v){const O=d.split("/"),$=v.split("/");for(let ue=0;ue<O.length&&ue<$.length;ue++){const Ae=Tr(O[ue],$[ue]);if(0!==Ae)return Ae}return Tr(O.length,$.length)}(i.referenceValue,e.referenceValue);case 8:return function(d,v){const O=Tr(Mi(d.latitude),Mi(v.latitude));return 0!==O?O:Tr(Mi(d.longitude),Mi(v.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(d,v){const O=d.values||[],$=v.values||[];for(let ue=0;ue<O.length&&ue<$.length;++ue){const Ae=yc(O[ue],$[ue]);if(Ae)return Ae}return Tr(O.length,$.length)}(i.arrayValue,e.arrayValue);case 10:return function(d,v){const O=d.fields||{},$=Object.keys(O),ue=v.fields||{},Ae=Object.keys(ue);$.sort(),Ae.sort();for(let Ze=0;Ze<$.length&&Ze<Ae.length;++Ze){const dt=Tr($[Ze],Ae[Ze]);if(0!==dt)return dt;const Gt=yc(O[$[Ze]],ue[Ae[Ze]]);if(0!==Gt)return Gt}return Tr($.length,Ae.length)}(i.mapValue,e.mapValue);default:throw ht()}}function ih(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return Tr(i,e);const r=fi(i),o=fi(e),d=Tr(r.seconds,o.seconds);return 0!==d?d:Tr(r.nanos,o.nanos)}function $l(i){return js(i)}function js(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(o){const d=fi(o);return`time(${d.seconds},${d.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?la(i.bytesValue).toBase64():"referenceValue"in i?Vn.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(e=i.geoPointValue).latitude},${e.longitude})`:"arrayValue"in i?function(o){let d="[",v=!0;for(const O of o.values||[])v?v=!1:d+=",",d+=js(O);return d+"]"}(i.arrayValue):"mapValue"in i?function(o){const d=Object.keys(o.fields||{}).sort();let v="{",O=!0;for(const $ of d)O?O=!1:v+=",",v+=`${$}:${js(o.fields[$])}`;return v+"}"}(i.mapValue):ht();var e}function Fa(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function Ao(i){return!!i&&"integerValue"in i}function ml(i){return!!i&&"arrayValue"in i}function Jc(i){return!!i&&"nullValue"in i}function Wl(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function ra(i){return!!i&&"mapValue"in i}function _l(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return jr(i.mapValue.fields,(r,o)=>e.mapValue.fields[r]=_l(o)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(i.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=_l(i.arrayValue.values[r]);return e}return Object.assign({},i)}class is{constructor(e){this.value=e}static empty(){return new is({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let o=0;o<e.length-1;++o)if(r=(r.mapValue.fields||{})[e.get(o)],!ra(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=_l(r)}setAll(e){let r=ho.emptyPath(),o={},d=[];e.forEach((O,$)=>{if(!r.isImmediateParentOf($)){const ue=this.getFieldsMap(r);this.applyChanges(ue,o,d),o={},d=[],r=$.popLast()}O?o[$.lastSegment()]=_l(O):d.push($.lastSegment())});const v=this.getFieldsMap(r);this.applyChanges(v,o,d)}delete(e){const r=this.field(e.popLast());ra(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Eo(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let o=0;o<e.length;++o){let d=r.mapValue.fields[e.get(o)];ra(d)&&d.mapValue.fields||(d={mapValue:{fields:{}}},r.mapValue.fields[e.get(o)]=d),r=d}return r.mapValue.fields}applyChanges(e,r,o){jr(r,(d,v)=>e[d]=v);for(const d of o)delete e[d]}clone(){return new is(_l(this.value))}}function Xc(i){const e=[];return jr(i.fields,(r,o)=>{const d=new ho([r]);if(ra(o)){const v=Xc(o.mapValue).fields;if(0===v.length)e.push(d);else for(const O of v)e.push(d.child(O))}else e.push(d)}),new So(e)}class Vi{constructor(e,r,o,d,v){this.key=e,this.documentType=r,this.version=o,this.data=d,this.documentState=v}static newInvalidDocument(e){return new Vi(e,0,$n.min(),is.empty(),0)}static newFoundDocument(e,r,o){return new Vi(e,1,r,o,0)}static newNoDocument(e,r){return new Vi(e,2,r,is.empty(),0)}static newUnknownDocument(e,r){return new Vi(e,3,r,is.empty(),2)}convertToFoundDocument(e,r){return this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=is.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=is.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Vi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}clone(){return new Vi(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class La{constructor(e,r=null,o=[],d=[],v=null,O=null,$=null){this.path=e,this.collectionGroup=r,this.orderBy=o,this.filters=d,this.limit=v,this.startAt=O,this.endAt=$,this.R=null}}function zl(i,e=null,r=[],o=[],d=null,v=null,O=null){return new La(i,e,r,o,d,v,O)}function yl(i){const e=Vt(i);if(null===e.R){let r=e.path.canonicalString();null!==e.collectionGroup&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(o=>function(i){return i.field.canonicalString()+i.op.toString()+$l(i.value)}(o)).join(","),r+="|ob:",r+=e.orderBy.map(o=>{return(d=o).field.canonicalString()+d.dir;var d}).join(","),qs(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=ss(e.startAt)),e.endAt&&(r+="|ub:",r+=ss(e.endAt)),e.R=r}return e.R}function j(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let d=0;d<i.orderBy.length;d++)if(!vl(i.orderBy[d],e.orderBy[d]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let d=0;d<i.filters.length;d++)if((r=i.filters[d]).op!==(o=e.filters[d]).op||!r.field.isEqual(o.field)||!Eo(r.value,o.value))return!1;var r,o;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!ia(i.startAt,e.startAt)&&ia(i.endAt,e.endAt)}function Z(i){return Vn.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}class ge extends class{}{constructor(e,r,o){super(),this.field=e,this.op=r,this.value=o}static create(e,r,o){return e.isKeyField()?"in"===r||"not-in"===r?this.P(e,r,o):new _t(e,r,o):"array-contains"===r?new Un(e,o):"in"===r?new Yr(e,o):"not-in"===r?new Ar(e,o):"array-contains-any"===r?new fo(e,o):new ge(e,r,o)}static P(e,r,o){return"in"===r?new Lt(e,o):new nn(e,o)}matches(e){const r=e.data.field(this.field);return"!="===this.op?null!==r&&this.v(yc(r,this.value)):null!==r&&ya(this.value)===ya(r)&&this.v(yc(r,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ht()}}V(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class _t extends ge{constructor(e,r,o){super(e,r,o),this.key=Vn.fromName(o.referenceValue)}matches(e){const r=Vn.comparator(e.key,this.key);return this.v(r)}}class Lt extends ge{constructor(e,r){super(e,"in",r),this.keys=On(0,r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class nn extends ge{constructor(e,r){super(e,"not-in",r),this.keys=On(0,r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function On(i,e){var r;return((null===(r=e.arrayValue)||void 0===r?void 0:r.values)||[]).map(o=>Vn.fromName(o.referenceValue))}class Un extends ge{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return ml(r)&&Qa(r.arrayValue,this.value)}}class Yr extends ge{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return null!==r&&Qa(this.value.arrayValue,r)}}class Ar extends ge{constructor(e,r){super(e,"not-in",r)}matches(e){if(Qa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return null!==r&&!Qa(this.value.arrayValue,r)}}class fo extends ge{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!ml(r)||!r.arrayValue.values)&&r.arrayValue.values.some(o=>Qa(this.value.arrayValue,o))}}class Qs{constructor(e,r){this.position=e,this.before=r}}function ss(i){return`${i.before?"b":"a"}:${i.position.map(e=>$l(e)).join(",")}`}class Bo{constructor(e,r="asc"){this.field=e,this.dir=r}}function vl(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}function El(i,e,r){let o=0;for(let d=0;d<i.position.length;d++){const v=e[d],O=i.position[d];if(o=v.field.isKeyField()?Vn.comparator(Vn.fromName(O.referenceValue),r.key):yc(O,r.data.field(v.field)),"desc"===v.dir&&(o*=-1),0!==o)break}return i.before?o<=0:o<0}function ia(i,e){if(null===i)return null===e;if(null===e||i.before!==e.before||i.position.length!==e.position.length)return!1;for(let r=0;r<i.position.length;r++)if(!Eo(i.position[r],e.position[r]))return!1;return!0}class Ns{constructor(e,r=null,o=[],d=[],v=null,O="F",$=null,ue=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=o,this.filters=d,this.limit=v,this.limitType=O,this.startAt=$,this.endAt=ue,this.S=null,this.D=null}}function sa(i,e,r,o,d,v,O,$){return new Ns(i,e,r,o,d,v,O,$)}function Ba(i){return new Ns(i)}function ca(i){return!qs(i.limit)&&"F"===i.limitType}function bl(i){return!qs(i.limit)&&"L"===i.limitType}function Lu(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function eu(i){for(const e of i.filters)if(e.V())return e.field;return null}function wl(i){return null!==i.collectionGroup}function va(i){const e=Vt(i);if(null===e.S){e.S=[];const r=eu(e),o=Lu(e);if(null!==r&&null===o)r.isKeyField()||e.S.push(new Bo(r)),e.S.push(new Bo(ho.keyField(),"asc"));else{let d=!1;for(const v of e.explicitOrderBy)e.S.push(v),v.field.isKeyField()&&(d=!0);if(!d){const v=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.S.push(new Bo(ho.keyField(),v))}}}return e.S}function Vo(i){const e=Vt(i);if(!e.D)if("F"===e.limitType)e.D=zl(e.path,e.collectionGroup,va(e),e.filters,e.limit,e.startAt,e.endAt);else{const r=[];for(const v of va(e))r.push(new Bo(v.field,"desc"===v.dir?"asc":"desc"));const o=e.endAt?new Qs(e.endAt.position,!e.endAt.before):null,d=e.startAt?new Qs(e.startAt.position,!e.startAt.before):null;e.D=zl(e.path,e.collectionGroup,r,e.filters,e.limit,o,d)}return e.D}function sh(i,e,r){return new Ns(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,r,i.startAt,i.endAt)}function Ea(i,e){return j(Vo(i),Vo(e))&&i.limitType===e.limitType}function Cl(i){return`${yl(Vo(i))}|lt:${i.limitType}`}function Va(i){return`Query(target=${function(i){let e=i.path.canonicalString();return null!==i.collectionGroup&&(e+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(e+=`, filters: [${i.filters.map(r=>{return`${(o=r).field.canonicalString()} ${o.op} ${$l(o.value)}`;var o}).join(", ")}]`),qs(i.limit)||(e+=", limit: "+i.limit),i.orderBy.length>0&&(e+=`, orderBy: [${i.orderBy.map(r=>{return`${(o=r).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),i.startAt&&(e+=", startAt: "+ss(i.startAt)),i.endAt&&(e+=", endAt: "+ss(i.endAt)),`Target(${e})`}(Vo(i))}; limitType=${i.limitType})`}function tu(i,e){return e.isFoundDocument()&&function(r,o){const d=o.key.path;return null!==r.collectionGroup?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(d):Vn.isDocumentKey(r.path)?r.path.isEqual(d):r.path.isImmediateParentOf(d)}(i,e)&&function(r,o){for(const d of r.explicitOrderBy)if(!d.field.isKeyField()&&null===o.data.field(d.field))return!1;return!0}(i,e)&&function(r,o){for(const d of r.filters)if(!d.matches(o))return!1;return!0}(i,e)&&(o=e,!((r=i).startAt&&!El(r.startAt,va(r),o)||r.endAt&&El(r.endAt,va(r),o)));var r,o}function Ec(i){return(e,r)=>{let o=!1;for(const d of va(i)){const v=Il(d,e,r);if(0!==v)return v;o=o||d.field.isKeyField()}return 0}}function Il(i,e,r){const o=i.field.isKeyField()?Vn.comparator(e.key,r.key):function(d,v,O){const $=v.data.field(d),ue=O.data.field(d);return null!==$&&null!==ue?yc($,ue):ht()}(i.field,e,r);switch(i.dir){case"asc":return o;case"desc":return-1*o;default:return ht()}}function Bu(i,e){if(i.C){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ka(e)?"-0":e}}function Kl(i){return{integerValue:""+i}}function oh(i,e){return Na(e)?Kl(e):Bu(i,e)}class Vu{constructor(){this._=void 0}}function bc(i,e,r){return i instanceof Ja?function(o,d){const v={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return d&&(v.fields.__previous_value__=d),{mapValue:v}}(r,e):i instanceof Mo?wc(i,e):i instanceof ua?ju(i,e):function(o,d){const v=ba(o,d),O=Cc(v)+Cc(o.N);return Ao(v)&&Ao(o.N)?Kl(O):Bu(o.k,O)}(i,e)}function Uu(i,e,r){return i instanceof Mo?wc(i,e):i instanceof ua?ju(i,e):r}function ba(i,e){return i instanceof Dl?Ao(r=e)||(o=r)&&"doubleValue"in o?e:{integerValue:0}:null;var o,r}class Ja extends Vu{}class Mo extends Vu{constructor(e){super(),this.elements=e}}function wc(i,e){const r=Hu(e);for(const o of i.elements)r.some(d=>Eo(d,o))||r.push(o);return{arrayValue:{values:r}}}class ua extends Vu{constructor(e){super(),this.elements=e}}function ju(i,e){let r=Hu(e);for(const o of i.elements)r=r.filter(d=>!Eo(d,o));return{arrayValue:{values:r}}}class Dl extends Vu{constructor(e,r){super(),this.k=e,this.N=r}}function Cc(i){return Mi(i.integerValue||i.doubleValue)}function Hu(i){return ml(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class wa{constructor(e,r){this.field=e,this.transform=r}}class Ic{constructor(e,r){this.version=e,this.transformResults=r}}class Hs{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Hs}static exists(e){return new Hs(void 0,e)}static updateTime(e){return new Hs(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Xa(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class nu{}function da(i,e,r){i instanceof Ua?function(o,d,v){const O=o.value.clone(),$=Yl(o.fieldTransforms,d,v.transformResults);O.setAll($),d.convertToFoundDocument(v.version,O).setHasCommittedMutations()}(i,e,r):i instanceof ja?function(o,d,v){if(!Xa(o.precondition,d))return void d.convertToUnknownDocument(v.version);const O=Yl(o.fieldTransforms,d,v.transformResults),$=d.data;$.setAll(ah(o)),$.setAll(O),d.convertToFoundDocument(v.version,$).setHasCommittedMutations()}(i,e,r):e.convertToNoDocument(r.version).setHasCommittedMutations()}function el(i,e,r){var d;i instanceof Ua?function(o,d,v){if(!Xa(o.precondition,d))return;const O=o.value.clone(),$=lh(o.fieldTransforms,v,d);O.setAll($),d.convertToFoundDocument(Gu(d),O).setHasLocalMutations()}(i,e,r):i instanceof ja?function(o,d,v){if(!Xa(o.precondition,d))return;const O=lh(o.fieldTransforms,v,d),$=d.data;$.setAll(ah(o)),$.setAll(O),d.convertToFoundDocument(Gu(d),$).setHasLocalMutations()}(i,e,r):Xa(i.precondition,d=e)&&d.convertToNoDocument($n.min())}function ru(i,e){let r=null;for(const o of i.fieldTransforms){const d=e.data.field(o.field),v=ba(o.transform,d||null);null!=v&&(null==r&&(r=is.empty()),r.set(o.field,v))}return r||null}function Dc(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(o=e.fieldTransforms,!!(void 0===(r=i.fieldTransforms)&&void 0===o||r&&o&&co(r,o,(d,v)=>function(i,e){return i.field.isEqual(e.field)&&(o=e.transform,(r=i.transform)instanceof Mo&&o instanceof Mo||r instanceof ua&&o instanceof ua?co(r.elements,o.elements,Eo):r instanceof Dl&&o instanceof Dl?Eo(r.N,o.N):r instanceof Ja&&o instanceof Ja);var r,o}(d,v))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var r,o}function Gu(i){return i.isFoundDocument()?i.version:$n.min()}class Ua extends nu{constructor(e,r,o,d=[]){super(),this.key=e,this.value=r,this.precondition=o,this.fieldTransforms=d,this.type=0}}class ja extends nu{constructor(e,r,o,d,v=[]){super(),this.key=e,this.data=r,this.fieldMask=o,this.precondition=d,this.fieldTransforms=v,this.type=1}}function ah(i){const e=new Map;return i.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const o=i.data.field(r);e.set(r,o)}}),e}function Yl(i,e,r){const o=new Map;Jt(i.length===r.length);for(let d=0;d<r.length;d++){const v=i[d],O=v.transform,$=e.data.field(v.field);o.set(v.field,Uu(O,$,r[d]))}return o}function lh(i,e,r){const o=new Map;for(const d of i){const v=d.transform,O=r.data.field(d.field);o.set(d.field,bc(v,O,e))}return o}class iu extends nu{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}}class gd extends nu{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}}class md{constructor(e){this.count=e}}var Fs,Hr;function Zl(i){switch(i){default:return ht();case Et.CANCELLED:case Et.UNKNOWN:case Et.DEADLINE_EXCEEDED:case Et.RESOURCE_EXHAUSTED:case Et.INTERNAL:case Et.UNAVAILABLE:case Et.UNAUTHENTICATED:return!1;case Et.INVALID_ARGUMENT:case Et.NOT_FOUND:case Et.ALREADY_EXISTS:case Et.PERMISSION_DENIED:case Et.FAILED_PRECONDITION:case Et.ABORTED:case Et.OUT_OF_RANGE:case Et.UNIMPLEMENTED:case Et.DATA_LOSS:return!0}}function _d(i){if(void 0===i)return pe("GRPC error has no .code"),Et.UNKNOWN;switch(i){case Fs.OK:return Et.OK;case Fs.CANCELLED:return Et.CANCELLED;case Fs.UNKNOWN:return Et.UNKNOWN;case Fs.DEADLINE_EXCEEDED:return Et.DEADLINE_EXCEEDED;case Fs.RESOURCE_EXHAUSTED:return Et.RESOURCE_EXHAUSTED;case Fs.INTERNAL:return Et.INTERNAL;case Fs.UNAVAILABLE:return Et.UNAVAILABLE;case Fs.UNAUTHENTICATED:return Et.UNAUTHENTICATED;case Fs.INVALID_ARGUMENT:return Et.INVALID_ARGUMENT;case Fs.NOT_FOUND:return Et.NOT_FOUND;case Fs.ALREADY_EXISTS:return Et.ALREADY_EXISTS;case Fs.PERMISSION_DENIED:return Et.PERMISSION_DENIED;case Fs.FAILED_PRECONDITION:return Et.FAILED_PRECONDITION;case Fs.ABORTED:return Et.ABORTED;case Fs.OUT_OF_RANGE:return Et.OUT_OF_RANGE;case Fs.UNIMPLEMENTED:return Et.UNIMPLEMENTED;case Fs.DATA_LOSS:return Et.DATA_LOSS;default:return ht()}}(Hr=Fs||(Fs={}))[Hr.OK=0]="OK",Hr[Hr.CANCELLED=1]="CANCELLED",Hr[Hr.UNKNOWN=2]="UNKNOWN",Hr[Hr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Hr[Hr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Hr[Hr.NOT_FOUND=5]="NOT_FOUND",Hr[Hr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Hr[Hr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Hr[Hr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Hr[Hr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Hr[Hr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Hr[Hr.ABORTED=10]="ABORTED",Hr[Hr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Hr[Hr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Hr[Hr.INTERNAL=13]="INTERNAL",Hr[Hr.UNAVAILABLE=14]="UNAVAILABLE",Hr[Hr.DATA_LOSS=15]="DATA_LOSS";class xi{constructor(e,r){this.comparator=e,this.root=r||Gs.EMPTY}insert(e,r){return new xi(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,Gs.BLACK,null,null))}remove(e){return new xi(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Gs.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return r.value;o<0?r=r.left:o>0&&(r=r.right)}return null}indexOf(e){let r=0,o=this.root;for(;!o.isEmpty();){const d=this.comparator(e,o.key);if(0===d)return r+o.left.size;d<0?o=o.left:(r+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,o)=>(e(r,o),!1))}toString(){const e=[];return this.inorderTraversal((r,o)=>(e.push(`${r}:${o}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new tl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new tl(this.root,e,this.comparator,!1)}getReverseIterator(){return new tl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new tl(this.root,e,this.comparator,!0)}}class tl{constructor(e,r,o,d){this.isReverse=d,this.nodeStack=[];let v=1;for(;!e.isEmpty();)if(v=r?o(e.key,r):1,d&&(v*=-1),v<0)e=this.isReverse?e.left:e.right;else{if(0===v){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Gs{constructor(e,r,o,d,v){this.key=e,this.value=r,this.color=null!=o?o:Gs.RED,this.left=null!=d?d:Gs.EMPTY,this.right=null!=v?v:Gs.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,o,d,v){return new Gs(null!=e?e:this.key,null!=r?r:this.value,null!=o?o:this.color,null!=d?d:this.left,null!=v?v:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,o){let d=this;const v=o(e,d.key);return d=v<0?d.copy(null,null,null,d.left.insert(e,r,o),null):0===v?d.copy(null,r,null,null,null):d.copy(null,null,null,null,d.right.insert(e,r,o)),d.fixUp()}removeMin(){if(this.left.isEmpty())return Gs.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let o,d=this;if(r(e,d.key)<0)d.left.isEmpty()||d.left.isRed()||d.left.left.isRed()||(d=d.moveRedLeft()),d=d.copy(null,null,null,d.left.remove(e,r),null);else{if(d.left.isRed()&&(d=d.rotateRight()),d.right.isEmpty()||d.right.isRed()||d.right.left.isRed()||(d=d.moveRedRight()),0===r(e,d.key)){if(d.right.isEmpty())return Gs.EMPTY;o=d.right.min(),d=d.copy(o.key,o.value,null,null,d.right.removeMin())}d=d.copy(null,null,null,null,d.right.remove(e,r))}return d.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Gs.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Gs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ht();const e=this.left.check();if(e!==this.right.check())throw ht();return e+(this.isRed()?0:1)}}Gs.EMPTY=null,Gs.RED=!0,Gs.BLACK=!1,Gs.EMPTY=new class{constructor(){this.size=0}get key(){throw ht()}get value(){throw ht()}get color(){throw ht()}get left(){throw ht()}get right(){throw ht()}copy(i,e,r,o,d){return this}insert(i,e,r){return new Gs(i,e)}remove(i,e){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Wi{constructor(e){this.comparator=e,this.data=new xi(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,o)=>(e(r),!1))}forEachInRange(e,r){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const d=o.getNext();if(this.comparator(d.key,e[1])>=0)return;r(d.key)}}forEachWhile(e,r){let o;for(o=void 0!==r?this.data.getIteratorFrom(r):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new su(this.data.getIterator())}getIteratorFrom(e){return new su(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(o=>{r=r.add(o)}),r}isEqual(e){if(!(e instanceof Wi)||this.size!==e.size)return!1;const r=this.data.getIterator(),o=e.data.getIterator();for(;r.hasNext();){const d=r.getNext().key,v=o.getNext().key;if(0!==this.comparator(d,v))return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new Wi(this.comparator);return r.data=e,r}}class su{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}const yd=new xi(Vn.comparator);function bo(){return yd}const ch=new xi(Vn.comparator);function Tl(){return ch}const vd=new xi(Vn.comparator);function nl(){return vd}const Vh=new Wi(Vn.comparator);function wi(...i){let e=Vh;for(const r of i)e=e.add(r);return e}const Tc=new Wi(Tr);function Sl(){return Tc}class ou{constructor(e,r,o,d,v){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=o,this.documentUpdates=d,this.resolvedLimboDocuments=v}static createSynthesizedRemoteEventForCurrentChange(e,r){const o=new Map;return o.set(e,Sc.createSynthesizedTargetChangeForCurrentChange(e,r)),new ou($n.min(),o,Sl(),bo(),wi())}}class Sc{constructor(e,r,o,d,v){this.resumeToken=e,this.current=r,this.addedDocuments=o,this.modifiedDocuments=d,this.removedDocuments=v}static createSynthesizedTargetChangeForCurrentChange(e,r){return new Sc(hi.EMPTY_BYTE_STRING,r,wi(),wi(),wi())}}class au{constructor(e,r,o,d){this.$=e,this.removedTargetIds=r,this.key=o,this.F=d}}class lu{constructor(e,r){this.targetId=e,this.O=r}}class Al{constructor(e,r,o=hi.EMPTY_BYTE_STRING,d=null){this.state=e,this.targetIds=r,this.resumeToken=o,this.cause=d}}class $u{constructor(){this.M=0,this.L=oi(),this.B=hi.EMPTY_BYTE_STRING,this.U=!1,this.q=!0}get current(){return this.U}get resumeToken(){return this.B}get K(){return 0!==this.M}get j(){return this.q}W(e){e.approximateByteSize()>0&&(this.q=!0,this.B=e)}G(){let e=wi(),r=wi(),o=wi();return this.L.forEach((d,v)=>{switch(v){case 0:e=e.add(d);break;case 2:r=r.add(d);break;case 1:o=o.add(d);break;default:ht()}}),new Sc(this.B,this.U,e,r,o)}H(){this.q=!1,this.L=oi()}J(e,r){this.q=!0,this.L=this.L.insert(e,r)}Y(e){this.q=!0,this.L=this.L.remove(e)}X(){this.M+=1}Z(){this.M-=1}tt(){this.q=!0,this.U=!0}}class uh{constructor(e){this.et=e,this.nt=new Map,this.st=bo(),this.it=ha(),this.rt=new Wi(Tr)}ot(e){for(const r of e.$)e.F&&e.F.isFoundDocument()?this.at(r,e.F):this.ct(r,e.key,e.F);for(const r of e.removedTargetIds)this.ct(r,e.key,e.F)}ut(e){this.forEachTarget(e,r=>{const o=this.ht(r);switch(e.state){case 0:this.lt(r)&&o.W(e.resumeToken);break;case 1:o.Z(),o.K||o.H(),o.W(e.resumeToken);break;case 2:o.Z(),o.K||this.removeTarget(r);break;case 3:this.lt(r)&&(o.tt(),o.W(e.resumeToken));break;case 4:this.lt(r)&&(this.ft(r),o.W(e.resumeToken));break;default:ht()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.nt.forEach((o,d)=>{this.lt(d)&&r(d)})}dt(e){const r=e.targetId,o=e.O.count,d=this.wt(r);if(d){const v=d.target;if(Z(v))if(0===o){const O=new Vn(v.path);this.ct(r,O,Vi.newNoDocument(O,$n.min()))}else Jt(1===o);else this._t(r)!==o&&(this.ft(r),this.rt=this.rt.add(r))}}gt(e){const r=new Map;this.nt.forEach((v,O)=>{const $=this.wt(O);if($){if(v.current&&Z($.target)){const ue=new Vn($.target.path);null!==this.st.get(ue)||this.yt(O,ue)||this.ct(O,ue,Vi.newNoDocument(ue,e))}v.j&&(r.set(O,v.G()),v.H())}});let o=wi();this.it.forEach((v,O)=>{let $=!0;O.forEachWhile(ue=>{const Ae=this.wt(ue);return!Ae||2===Ae.purpose||($=!1,!1)}),$&&(o=o.add(v))});const d=new ou(e,r,this.rt,this.st,o);return this.st=bo(),this.it=ha(),this.rt=new Wi(Tr),d}at(e,r){if(!this.lt(e))return;const o=this.yt(e,r.key)?2:0;this.ht(e).J(r.key,o),this.st=this.st.insert(r.key,r),this.it=this.it.insert(r.key,this.Tt(r.key).add(e))}ct(e,r,o){if(!this.lt(e))return;const d=this.ht(e);this.yt(e,r)?d.J(r,1):d.Y(r),this.it=this.it.insert(r,this.Tt(r).delete(e)),o&&(this.st=this.st.insert(r,o))}removeTarget(e){this.nt.delete(e)}_t(e){const r=this.ht(e).G();return this.et.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}X(e){this.ht(e).X()}ht(e){let r=this.nt.get(e);return r||(r=new $u,this.nt.set(e,r)),r}Tt(e){let r=this.it.get(e);return r||(r=new Wi(Tr),this.it=this.it.insert(e,r)),r}lt(e){const r=null!==this.wt(e);return r||W("WatchChangeAggregator","Detected inactive target",e),r}wt(e){const r=this.nt.get(e);return r&&r.K?null:this.et.Et(e)}ft(e){this.nt.set(e,new $u),this.et.getRemoteKeysForTarget(e).forEach(r=>{this.ct(e,r,null)})}yt(e,r){return this.et.getRemoteKeysForTarget(e).has(r)}}function ha(){return new xi(Vn.comparator)}function oi(){return new xi(Vn.comparator)}const cu={asc:"ASCENDING",desc:"DESCENDING"},Ed={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Wu{constructor(e,r){this.databaseId=e,this.C=r}}function Ha(i,e){return i.C?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ac(i,e){return i.C?e.toBase64():e.toUint8Array()}function uu(i,e){return Ha(i,e.toTimestamp())}function $s(i){return Jt(!!i),$n.fromTimestamp(function(e){const r=fi(e);return new di(r.seconds,r.nanos)}(i))}function Yo(i,e){return(r=i,new Kr(["projects",r.projectId,"databases",r.database])).child("documents").child(e).canonicalString();var r}function bd(i){const e=Kr.fromString(i);return Jt(Jl(e)),e}function Mc(i,e){return Yo(i.databaseId,e.path)}function fa(i,e){const r=bd(e);if(r.get(1)!==i.databaseId.projectId)throw new Bt(Et.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+i.databaseId.projectId);if(r.get(3)!==i.databaseId.database)throw new Bt(Et.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+i.databaseId.database);return new Vn(wd(r))}function rl(i,e){return Yo(i.databaseId,e)}function Ui(i){const e=bd(i);return 4===e.length?Kr.emptyPath():wd(e)}function Ml(i){return new Kr(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function wd(i){return Jt(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function du(i,e,r){return{name:Mc(i,e),fields:r.value.mapValue.fields}}function Js(i,e,r){const o=fa(i,e.name),d=$s(e.updateTime),v=new is({mapValue:{fields:e.fields}}),O=Vi.newFoundDocument(o,d,v);return r&&O.setHasCommittedMutations(),r?O.setHasCommittedMutations():O}function ql(i,e){let r;if(e instanceof Ua)r={update:du(i,e.key,e.value)};else if(e instanceof iu)r={delete:Mc(i,e.key)};else if(e instanceof ja)r={update:du(i,e.key,e.data),updateMask:Ad(e.fieldMask)};else{if(!(e instanceof gd))return ht();r={verify:Mc(i,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(o=>function(d,v){const O=v.transform;if(O instanceof Ja)return{fieldPath:v.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(O instanceof Mo)return{fieldPath:v.field.canonicalString(),appendMissingElements:{values:O.elements}};if(O instanceof ua)return{fieldPath:v.field.canonicalString(),removeAllFromArray:{values:O.elements}};if(O instanceof Dl)return{fieldPath:v.field.canonicalString(),increment:O.N};throw ht()}(0,o))),e.precondition.isNone||(r.currentDocument=void 0!==(d=e.precondition).updateTime?{updateTime:uu(i,d.updateTime)}:void 0!==d.exists?{exists:d.exists}:ht()),r;var d}function xl(i,e){const r=e.currentDocument?void 0!==(d=e.currentDocument).updateTime?Hs.updateTime($s(d.updateTime)):void 0!==d.exists?Hs.exists(d.exists):Hs.none():Hs.none(),o=e.updateTransforms?e.updateTransforms.map(d=>function(v,O){let $=null;"setToServerValue"in O?(Jt("REQUEST_TIME"===O.setToServerValue),$=new Ja):"appendMissingElements"in O?$=new Mo(O.appendMissingElements.values||[]):"removeAllFromArray"in O?$=new ua(O.removeAllFromArray.values||[]):"increment"in O?$=new Dl(v,O.increment):ht();const ue=ho.fromServerFormat(O.fieldPath);return new wa(ue,$)}(i,d)):[];var d;if(e.update){const d=fa(i,e.update.name),v=new is({mapValue:{fields:e.update.fields}});if(e.updateMask){const O=new So((e.updateMask.fieldPaths||[]).map(Ae=>ho.fromServerFormat(Ae)));return new ja(d,v,O,r,o)}return new Ua(d,v,r,o)}if(e.delete){const d=fa(i,e.delete);return new iu(d,r)}if(e.verify){const d=fa(i,e.verify);return new gd(d,r)}return ht()}function Dd(i,e){return{documents:[rl(i,e.path)]}}function xc(i,e){const r={structuredQuery:{}},o=e.path;null!==e.collectionGroup?(r.parent=rl(i,o),r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r.parent=rl(i,o.popLast()),r.structuredQuery.from=[{collectionId:o.lastSegment()}]);const d=function($){if(0===$.length)return;const ue=$.map(Ae=>function(Ze){if("=="===Ze.op){if(Wl(Ze.value))return{unaryFilter:{field:Ql(Ze.field),op:"IS_NAN"}};if(Jc(Ze.value))return{unaryFilter:{field:Ql(Ze.field),op:"IS_NULL"}}}else if("!="===Ze.op){if(Wl(Ze.value))return{unaryFilter:{field:Ql(Ze.field),op:"IS_NOT_NAN"}};if(Jc(Ze.value))return{unaryFilter:{field:Ql(Ze.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ql(Ze.field),op:Uh(Ze.op),value:Ze.value}}}(Ae));return 1===ue.length?ue[0]:{compositeFilter:{op:"AND",filters:ue}}}(e.filters);d&&(r.structuredQuery.where=d);const v=function($){if(0!==$.length)return $.map(ue=>{return{field:Ql((Ae=ue).field),direction:Td(Ae.dir)};var Ae})}(e.orderBy);v&&(r.structuredQuery.orderBy=v);const O=(ue=e.limit,i.C||qs(ue)?ue:{value:ue});var ue;return null!==O&&(r.structuredQuery.limit=O),e.startAt&&(r.structuredQuery.startAt=pu(e.startAt)),e.endAt&&(r.structuredQuery.endAt=pu(e.endAt)),r}function zu(i){let e=Ui(i.parent);const r=i.structuredQuery,o=r.from?r.from.length:0;let d=null;if(o>0){Jt(1===o);const Ze=r.from[0];Ze.allDescendants?d=Ze.collectionId:e=e.child(Ze.collectionId)}let v=[];r.where&&(v=dh(r.where));let O=[];r.orderBy&&(O=r.orderBy.map(Ze=>{return new Bo(Ol((dt=Ze).field),function(Gt){switch(Gt){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(dt.direction));var dt}));let $=null;r.limit&&($=function(Ze){let dt;return dt="object"==typeof Ze?Ze.value:Ze,qs(dt)?null:dt}(r.limit));let ue=null;r.startAt&&(ue=hh(r.startAt));let Ae=null;return r.endAt&&(Ae=hh(r.endAt)),sa(e,d,O,v,$,"F",ue,Ae)}function dh(i){return i?void 0!==i.unaryFilter?[fh(i)]:void 0!==i.fieldFilter?[Sd(i)]:void 0!==i.compositeFilter?i.compositeFilter.filters.map(e=>dh(e)).reduce((e,r)=>e.concat(r)):ht():[]}function pu(i){return{before:i.before,values:i.position}}function hh(i){return new Qs(i.values||[],!!i.before)}function Td(i){return cu[i]}function Uh(i){return Ed[i]}function Ql(i){return{fieldPath:i.canonicalString()}}function Ol(i){return ho.fromServerFormat(i.fieldPath)}function Sd(i){return ge.create(Ol(i.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ht()}}(i.fieldFilter.op),i.fieldFilter.value)}function fh(i){switch(i.unaryFilter.op){case"IS_NAN":const e=Ol(i.unaryFilter.field);return ge.create(e,"==",{doubleValue:NaN});case"IS_NULL":const r=Ol(i.unaryFilter.field);return ge.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Ol(i.unaryFilter.field);return ge.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=Ol(i.unaryFilter.field);return ge.create(d,"!=",{nullValue:"NULL_VALUE"});default:return ht()}}function Ad(i){const e=[];return i.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function Jl(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}function Ca(i){let e="";for(let r=0;r<i.length;r++)e.length>0&&(e=Ga(e)),e=Oc(i.get(r),e);return Ga(e)}function Oc(i,e){let r=e;const o=i.length;for(let d=0;d<o;d++){const v=i.charAt(d);switch(v){case"\0":r+="\x01\x10";break;case"\x01":r+="\x01\x11";break;default:r+=v}}return r}function Ga(i){return i+"\x01\x01"}function Ia(i){const e=i.length;if(Jt(e>=2),2===e)return Jt("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),Kr.emptyPath();const r=e-2,o=[];let d="";for(let v=0;v<e;){const O=i.indexOf("\x01",v);switch((O<0||O>r)&&ht(),i.charAt(O+1)){case"\x01":const $=i.substring(v,O);let ue;0===d.length?ue=$:(d+=$,ue=d,d=""),o.push(ue);break;case"\x10":d+=i.substring(v,O),d+="\0";break;case"\x11":d+=i.substring(v,O+1);break;default:ht()}v=O+2}return new Kr(o)}class gu{constructor(e,r){this.seconds=e,this.nanoseconds=r}}class po{constructor(e,r,o){this.ownerId=e,this.allowTabSynchronization=r,this.leaseTimestampMs=o}}po.store="owner",po.key="owner";class Rl{constructor(e,r,o){this.userId=e,this.lastAcknowledgedBatchId=r,this.lastStreamToken=o}}Rl.store="mutationQueues",Rl.keyPath="userId";class ii{constructor(e,r,o,d,v){this.userId=e,this.batchId=r,this.localWriteTimeMs=o,this.baseMutations=d,this.mutations=v}}ii.store="mutations",ii.keyPath="batchId",ii.userMutationsIndex="userMutationsIndex",ii.userMutationsKeyPath=["userId","batchId"];class Oi{constructor(){}static prefixForUser(e){return[e]}static prefixForPath(e,r){return[e,Ca(r)]}static key(e,r,o){return[e,Ca(r),o]}}Oi.store="documentMutations",Oi.PLACEHOLDER=new Oi;class Rc{constructor(e,r){this.path=e,this.readTime=r}}class Ku{constructor(e,r){this.path=e,this.version=r}}class hs{constructor(e,r,o,d,v,O){this.unknownDocument=e,this.noDocument=r,this.document=o,this.hasCommittedMutations=d,this.readTime=v,this.parentPath=O}}hs.store="remoteDocuments",hs.readTimeIndex="readTimeIndex",hs.readTimeIndexPath="readTime",hs.collectionReadTimeIndex="collectionReadTimeIndex",hs.collectionReadTimeIndexPath=["parentPath","readTime"];class Uo{constructor(e){this.byteSize=e}}Uo.store="remoteDocumentGlobal",Uo.key="remoteDocumentGlobalKey";class go{constructor(e,r,o,d,v,O,$){this.targetId=e,this.canonicalId=r,this.readTime=o,this.resumeToken=d,this.lastListenSequenceNumber=v,this.lastLimboFreeSnapshotVersion=O,this.query=$}}go.store="targets",go.keyPath="targetId",go.queryTargetsIndexName="queryTargetsIndex",go.queryTargetsKeyPath=["canonicalId","targetId"];class os{constructor(e,r,o){this.targetId=e,this.path=r,this.sequenceNumber=o}}os.store="targetDocuments",os.keyPath=["targetId","path"],os.documentTargetsIndex="documentTargetsIndex",os.documentTargetsKeyPath=["path","targetId"];class fs{constructor(e,r,o,d){this.highestTargetId=e,this.highestListenSequenceNumber=r,this.lastRemoteSnapshotVersion=o,this.targetCount=d}}fs.key="targetGlobalKey",fs.store="targetGlobal";class Pc{constructor(e,r){this.collectionId=e,this.parent=r}}Pc.store="collectionParents",Pc.keyPath=["collectionId","parent"];class wo{constructor(e,r,o,d){this.clientId=e,this.updateTimeMs=r,this.networkEnabled=o,this.inForeground=d}}wo.store="clientMetadata",wo.keyPath="clientId";class Pl{constructor(e,r,o){this.bundleId=e,this.createTime=r,this.version=o}}Pl.store="bundles",Pl.keyPath="bundleId";class kc{constructor(e,r,o){this.name=e,this.readTime=r,this.bundledQuery=o}}kc.store="namedQueries",kc.keyPath="name";const Da=[Rl.store,ii.store,Oi.store,hs.store,go.store,po.store,fs.store,os.store,wo.store,Uo.store,Pc.store,Pl.store,kc.store],mu="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Nc{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class Ht{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&ht(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new Ht((o,d)=>{this.nextCallback=v=>{this.wrapSuccess(e,v).next(o,d)},this.catchCallback=v=>{this.wrapFailure(r,v).next(o,d)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof Ht?r:Ht.resolve(r)}catch(r){return Ht.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):Ht.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):Ht.reject(r)}static resolve(e){return new Ht((r,o)=>{r(e)})}static reject(e){return new Ht((r,o)=>{o(e)})}static waitFor(e){return new Ht((r,o)=>{let d=0,v=0,O=!1;e.forEach($=>{++d,$.next(()=>{++v,O&&v===d&&r()},ue=>o(ue))}),O=!0,v===d&&r()})}static or(e){let r=Ht.resolve(!1);for(const o of e)r=r.next(d=>d?Ht.resolve(d):o());return r}static forEach(e,r){const o=[];return e.forEach((d,v)=>{o.push(r.call(this,d,v))}),this.waitFor(o)}}class $a{constructor(e,r){this.action=e,this.transaction=r,this.aborted=!1,this.It=new Xr,this.transaction.oncomplete=()=>{this.It.resolve()},this.transaction.onabort=()=>{r.error?this.It.reject(new Qi(e,r.error)):this.It.resolve()},this.transaction.onerror=o=>{const d=Xl(o.target.error);this.It.reject(new Qi(e,d))}}static open(e,r,o,d){try{return new $a(r,e.transaction(d,o))}catch(v){throw new Qi(r,v)}}get At(){return this.It.promise}abort(e){e&&this.It.reject(e),this.aborted||(W("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}store(e){const r=this.transaction.objectStore(e);return new yu(r)}}class as{constructor(e,r,o){this.name=e,this.version=r,this.Rt=o,12.2===as.Pt((0,rt.z$)())&&pe("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return W("SimpleDb","Removing database:",e),Wa(window.indexedDB.deleteDatabase(e)).toPromise()}static bt(){if(!(0,rt.hl)())return!1;if(as.vt())return!0;const e=(0,rt.z$)(),r=as.Pt(e),o=0<r&&r<10,d=as.Vt(e),v=0<d&&d<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||o||v)}static vt(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.St)}static Dt(e,r){return e.store(r)}static Pt(e){const r=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),o=r?r[1].split("_").slice(0,2).join("."):"-1";return Number(o)}static Vt(e){const r=e.match(/Android ([\d.]+)/i),o=r?r[1].split(".").slice(0,2).join("."):"-1";return Number(o)}Ct(e){var r=this;return(0,ee.Z)(function*(){return r.db||(W("SimpleDb","Opening database:",r.name),r.db=yield new Promise((o,d)=>{const v=indexedDB.open(r.name,r.version);v.onsuccess=O=>{o(O.target.result)},v.onblocked=()=>{d(new Qi(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},v.onerror=O=>{const $=O.target.error;d("VersionError"===$.name?new Bt(Et.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===$.name?new Bt(Et.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+$):new Qi(e,$))},v.onupgradeneeded=O=>{W("SimpleDb",'Database "'+r.name+'" requires upgrade from version:',O.oldVersion),r.Rt.Nt(O.target.result,v.transaction,O.oldVersion,r.version).next(()=>{W("SimpleDb","Database upgrade to version "+r.version+" complete")})}})),r.kt&&(r.db.onversionchange=o=>r.kt(o)),r.db})()}xt(e){this.kt=e,this.db&&(this.db.onversionchange=r=>e(r))}runTransaction(e,r,o,d){var v=this;return(0,ee.Z)(function*(){const O="readonly"===r;let $=0;for(;;){++$;try{v.db=yield v.Ct(e);const ue=$a.open(v.db,e,O?"readonly":"readwrite",o),Ae=d(ue).catch(Ze=>(ue.abort(Ze),Ht.reject(Ze))).toPromise();return Ae.catch(()=>{}),yield ue.At,Ae}catch(ue){const Ae="FirebaseError"!==ue.name&&$<3;if(W("SimpleDb","Transaction failed with error:",ue.message,"Retrying:",Ae),v.close(),!Ae)return Promise.reject(ue)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class _u{constructor(e){this.$t=e,this.Ft=!1,this.Ot=null}get isDone(){return this.Ft}get Mt(){return this.Ot}set cursor(e){this.$t=e}done(){this.Ft=!0}Lt(e){this.Ot=e}delete(){return Wa(this.$t.delete())}}class Qi extends Bt{constructor(e,r){super(Et.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${r}`),this.name="IndexedDbTransactionError"}}function Xs(i){return"IndexedDbTransactionError"===i.name}class yu{constructor(e){this.store=e}put(e,r){let o;return void 0!==r?(W("SimpleDb","PUT",this.store.name,e,r),o=this.store.put(r,e)):(W("SimpleDb","PUT",this.store.name,"<auto-key>",e),o=this.store.put(e)),Wa(o)}add(e){return W("SimpleDb","ADD",this.store.name,e,e),Wa(this.store.add(e))}get(e){return Wa(this.store.get(e)).next(r=>(void 0===r&&(r=null),W("SimpleDb","GET",this.store.name,e,r),r))}delete(e){return W("SimpleDb","DELETE",this.store.name,e),Wa(this.store.delete(e))}count(){return W("SimpleDb","COUNT",this.store.name),Wa(this.store.count())}Bt(e,r){const o=this.cursor(this.options(e,r)),d=[];return this.Ut(o,(v,O)=>{d.push(O)}).next(()=>d)}qt(e,r){W("SimpleDb","DELETE ALL",this.store.name);const o=this.options(e,r);o.Kt=!1;const d=this.cursor(o);return this.Ut(d,(v,O,$)=>$.delete())}jt(e,r){let o;r?o=e:(o={},r=e);const d=this.cursor(o);return this.Ut(d,r)}Qt(e){const r=this.cursor({});return new Ht((o,d)=>{r.onerror=v=>{const O=Xl(v.target.error);d(O)},r.onsuccess=v=>{const O=v.target.result;O?e(O.primaryKey,O.value).next($=>{$?O.continue():o()}):o()}})}Ut(e,r){const o=[];return new Ht((d,v)=>{e.onerror=O=>{v(O.target.error)},e.onsuccess=O=>{const $=O.target.result;if(!$)return void d();const ue=new _u($),Ae=r($.primaryKey,$.value,ue);if(Ae instanceof Ht){const Ze=Ae.catch(dt=>(ue.done(),Ht.reject(dt)));o.push(Ze)}ue.isDone?d():null===ue.Mt?$.continue():$.continue(ue.Mt)}}).next(()=>Ht.waitFor(o))}options(e,r){let o;return void 0!==e&&("string"==typeof e?o=e:r=e),{index:o,range:r}}cursor(e){let r="next";if(e.reverse&&(r="prev"),e.index){const o=this.store.index(e.index);return e.Kt?o.openKeyCursor(e.range,r):o.openCursor(e.range,r)}return this.store.openCursor(e.range,r)}}function Wa(i){return new Ht((e,r)=>{i.onsuccess=o=>{e(o.target.result)},i.onerror=o=>{const d=Xl(o.target.error);r(d)}})}let il=!1;function Xl(i){const e=as.Pt((0,rt.z$)());if(e>=12.2&&e<13){const r="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(r)>=0){const o=new Bt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${r}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return il||(il=!0,setTimeout(()=>{throw o},0)),o}}return i}class Yu extends Nc{constructor(e,r){super(),this.Wt=e,this.currentSequenceNumber=r}}function jo(i,e){const r=Vt(i);return as.Dt(r.Wt,e)}class vu{constructor(e,r,o,d){this.batchId=e,this.localWriteTime=r,this.baseMutations=o,this.mutations=d}applyToRemoteDocument(e,r){const o=r.mutationResults;for(let d=0;d<this.mutations.length;d++){const v=this.mutations[d];v.key.isEqual(e.key)&&da(v,e,o[d])}}applyToLocalView(e){for(const r of this.baseMutations)r.key.isEqual(e.key)&&el(r,e,this.localWriteTime);for(const r of this.mutations)r.key.isEqual(e.key)&&el(r,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(r=>{const o=e.get(r.key),d=o;this.applyToLocalView(d),o.isValidDocument()||d.convertToNoDocument($n.min())})}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),wi())}isEqual(e){return this.batchId===e.batchId&&co(this.mutations,e.mutations,(r,o)=>Dc(r,o))&&co(this.baseMutations,e.baseMutations,(r,o)=>Dc(r,o))}}class b{constructor(e,r,o,d){this.batch=e,this.commitVersion=r,this.mutationResults=o,this.docVersions=d}static from(e,r,o){Jt(e.mutations.length===o.length);let d=nl();const v=e.mutations;for(let O=0;O<v.length;O++)d=d.insert(v[O].key,o[O].version);return new b(e,r,o,d)}}class f{constructor(e,r,o,d,v=$n.min(),O=$n.min(),$=hi.EMPTY_BYTE_STRING){this.target=e,this.targetId=r,this.purpose=o,this.sequenceNumber=d,this.snapshotVersion=v,this.lastLimboFreeSnapshotVersion=O,this.resumeToken=$}withSequenceNumber(e){return new f(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,r){return new f(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new f(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class m{constructor(e){this.Gt=e}}function A(i,e){if(e.document)return Js(i.Gt,e.document,!!e.hasCommittedMutations);if(e.noDocument){const r=Vn.fromSegments(e.noDocument.path),o=gn(e.noDocument.readTime),d=Vi.newNoDocument(r,o);return e.hasCommittedMutations?d.setHasCommittedMutations():d}if(e.unknownDocument){const r=Vn.fromSegments(e.unknownDocument.path),o=gn(e.unknownDocument.version);return Vi.newUnknownDocument(r,o)}return ht()}function Y(i,e,r){const o=le(r),d=e.key.path.popLast().toArray();if(e.isFoundDocument()){const v={name:Mc($=i.Gt,(ue=e).key),fields:ue.data.value.mapValue.fields,updateTime:Ha($,ue.version.toTimestamp())};return new hs(null,null,v,e.hasCommittedMutations,o,d)}var $,ue;if(e.isNoDocument()){const v=e.key.path.toArray(),O=Tt(e.version),$=e.hasCommittedMutations;return new hs(null,new Rc(v,O),null,$,o,d)}if(e.isUnknownDocument()){const v=e.key.path.toArray(),O=Tt(e.version);return new hs(new Ku(v,O),null,null,!0,o,d)}return ht()}function le(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function tt(i){const e=new di(i[0],i[1]);return $n.fromTimestamp(e)}function Tt(i){const e=i.toTimestamp();return new gu(e.seconds,e.nanoseconds)}function gn(i){const e=new di(i.seconds,i.nanoseconds);return $n.fromTimestamp(e)}function ln(i,e){const r=(e.baseMutations||[]).map(v=>xl(i.Gt,v));for(let v=0;v<e.mutations.length-1;++v){const O=e.mutations[v];v+1<e.mutations.length&&void 0!==e.mutations[v+1].transform&&(O.updateTransforms=e.mutations[v+1].transform.fieldTransforms,e.mutations.splice(v+1,1),++v)}const o=e.mutations.map(v=>xl(i.Gt,v)),d=di.fromMillis(e.localWriteTimeMs);return new vu(e.batchId,d,r,o)}function jn(i){const e=gn(i.readTime),r=void 0!==i.lastLimboFreeSnapshotVersion?gn(i.lastLimboFreeSnapshotVersion):$n.min();let o;var d;return void 0!==i.query.documents?(Jt(1===(d=i.query).documents.length),o=Vo(Ba(Ui(d.documents[0])))):o=Vo(zu(i.query)),new f(o,i.targetId,0,i.lastListenSequenceNumber,e,r,hi.fromBase64String(i.resumeToken))}function Zn(i,e){const r=Tt(e.snapshotVersion),o=Tt(e.lastLimboFreeSnapshotVersion);let d;d=Z(e.target)?Dd(i.Gt,e.target):xc(i.Gt,e.target);const v=e.resumeToken.toBase64();return new go(e.targetId,yl(e.target),r,v,e.sequenceNumber,o,d)}function Lr(i){const e=zu({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?sh(e,e.limit,"L"):e}class Ci{getBundleMetadata(e,r){return Ta(e).get(r).next(o=>{if(o)return{id:(d=o).bundleId,createTime:gn(d.createTime),version:d.version};var d})}saveBundleMetadata(e,r){return Ta(e).put({bundleId:(o=r).id,createTime:Tt($s(o.createTime)),version:o.version});var o}getNamedQuery(e,r){return Sa(e).get(r).next(o=>{if(o)return{name:(d=o).name,query:Lr(d.bundledQuery),readTime:gn(d.readTime)};var d})}saveNamedQuery(e,r){return Sa(e).put({name:(o=r).name,readTime:Tt($s(o.readTime)),bundledQuery:o.bundledQuery});var o}}function Ta(i){return jo(i,Pl.store)}function Sa(i){return jo(i,kc.store)}class Zu{constructor(){this.zt=new Eu}addToCollectionParentIndex(e,r){return this.zt.add(r),Ht.resolve()}getCollectionParents(e,r){return Ht.resolve(this.zt.getEntries(r))}}class Eu{constructor(){this.index={}}add(e){const r=e.lastSegment(),o=e.popLast(),d=this.index[r]||new Wi(Kr.comparator),v=!d.has(o);return this.index[r]=d.add(o),v}has(e){const r=e.lastSegment(),o=e.popLast(),d=this.index[r];return d&&d.has(o)}getEntries(e){return(this.index[e]||new Wi(Kr.comparator)).toArray()}}class Md{constructor(){this.Ht=new Eu}addToCollectionParentIndex(e,r){if(!this.Ht.has(r)){const o=r.lastSegment(),d=r.popLast();e.addOnCommittedListener(()=>{this.Ht.add(r)});const v={collectionId:o,parent:Ca(d)};return ec(e).put(v)}return Ht.resolve()}getCollectionParents(e,r){const o=[],d=IDBKeyRange.bound([r,""],[fl(r),""],!1,!0);return ec(e).Bt(d).next(v=>{for(const O of v){if(O.collectionId!==r)break;o.push(Ia(O.parent))}return o})}}function ec(i){return jo(i,Pc.store)}const xd={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class xo{constructor(e,r,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=o}static withCacheSize(e){return new xo(e,xo.DEFAULT_COLLECTION_PERCENTILE,xo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function bu(i,e,r){const o=i.store(ii.store),d=i.store(Oi.store),v=[],O=IDBKeyRange.only(r.batchId);let $=0;const ue=o.jt({range:O},(Ze,dt,Gt)=>($++,Gt.delete()));v.push(ue.next(()=>{Jt(1===$)}));const Ae=[];for(const Ze of r.mutations){const dt=Oi.key(e,Ze.key.path,r.batchId);v.push(d.delete(dt)),Ae.push(Ze.key)}return Ht.waitFor(v).next(()=>Ae)}function Fc(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw ht();e=i.noDocument}return JSON.stringify(e).length}xo.DEFAULT_COLLECTION_PERCENTILE=10,xo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,xo.DEFAULT=new xo(41943040,xo.DEFAULT_COLLECTION_PERCENTILE,xo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),xo.DISABLED=new xo(-1,0,0);class wu{constructor(e,r,o,d){this.userId=e,this.k=r,this.Jt=o,this.referenceDelegate=d,this.Yt={}}static Xt(e,r,o,d){Jt(""!==e.uid);const v=e.isAuthenticated()?e.uid:"";return new wu(v,r,o,d)}checkEmpty(e){let r=!0;const o=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Aa(e).jt({index:ii.userMutationsIndex,range:o},(d,v,O)=>{r=!1,O.done()}).next(()=>r)}addMutationBatch(e,r,o,d){const v=tc(e),O=Aa(e);return O.add({}).next($=>{Jt("number"==typeof $);const ue=new vu($,r,o,d),Ae=function(Gt,on,wn){const lr=wn.baseMutations.map(Zo=>ql(Gt.Gt,Zo)),kr=wn.mutations.map(Zo=>ql(Gt.Gt,Zo));return new ii(on,wn.batchId,wn.localWriteTime.toMillis(),lr,kr)}(this.k,this.userId,ue),Ze=[];let dt=new Wi((Gt,on)=>Tr(Gt.canonicalString(),on.canonicalString()));for(const Gt of d){const on=Oi.key(this.userId,Gt.key.path,$);dt=dt.add(Gt.key.path.popLast()),Ze.push(O.put(Ae)),Ze.push(v.put(on,Oi.PLACEHOLDER))}return dt.forEach(Gt=>{Ze.push(this.Jt.addToCollectionParentIndex(e,Gt))}),e.addOnCommittedListener(()=>{this.Yt[$]=ue.keys()}),Ht.waitFor(Ze).next(()=>ue)})}lookupMutationBatch(e,r){return Aa(e).get(r).next(o=>o?(Jt(o.userId===this.userId),ln(this.k,o)):null)}Zt(e,r){return this.Yt[r]?Ht.resolve(this.Yt[r]):this.lookupMutationBatch(e,r).next(o=>{if(o){const d=o.keys();return this.Yt[r]=d,d}return null})}getNextMutationBatchAfterBatchId(e,r){const o=r+1,d=IDBKeyRange.lowerBound([this.userId,o]);let v=null;return Aa(e).jt({index:ii.userMutationsIndex,range:d},(O,$,ue)=>{$.userId===this.userId&&(Jt($.batchId>=o),v=ln(this.k,$)),ue.done()}).next(()=>v)}getHighestUnacknowledgedBatchId(e){const r=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let o=-1;return Aa(e).jt({index:ii.userMutationsIndex,range:r,reverse:!0},(d,v,O)=>{o=v.batchId,O.done()}).next(()=>o)}getAllMutationBatches(e){const r=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Aa(e).Bt(ii.userMutationsIndex,r).next(o=>o.map(d=>ln(this.k,d)))}getAllMutationBatchesAffectingDocumentKey(e,r){const o=Oi.prefixForPath(this.userId,r.path),d=IDBKeyRange.lowerBound(o),v=[];return tc(e).jt({range:d},(O,$,ue)=>{const[Ae,Ze,dt]=O,Gt=Ia(Ze);if(Ae===this.userId&&r.path.isEqual(Gt))return Aa(e).get(dt).next(on=>{if(!on)throw ht();Jt(on.userId===this.userId),v.push(ln(this.k,on))});ue.done()}).next(()=>v)}getAllMutationBatchesAffectingDocumentKeys(e,r){let o=new Wi(Tr);const d=[];return r.forEach(v=>{const O=Oi.prefixForPath(this.userId,v.path),$=IDBKeyRange.lowerBound(O),ue=tc(e).jt({range:$},(Ae,Ze,dt)=>{const[Gt,on,wn]=Ae,lr=Ia(on);Gt===this.userId&&v.path.isEqual(lr)?o=o.add(wn):dt.done()});d.push(ue)}),Ht.waitFor(d).next(()=>this.te(e,o))}getAllMutationBatchesAffectingQuery(e,r){const o=r.path,d=o.length+1,v=Oi.prefixForPath(this.userId,o),O=IDBKeyRange.lowerBound(v);let $=new Wi(Tr);return tc(e).jt({range:O},(ue,Ae,Ze)=>{const[dt,Gt,on]=ue,wn=Ia(Gt);dt===this.userId&&o.isPrefixOf(wn)?wn.length===d&&($=$.add(on)):Ze.done()}).next(()=>this.te(e,$))}te(e,r){const o=[],d=[];return r.forEach(v=>{d.push(Aa(e).get(v).next(O=>{if(null===O)throw ht();Jt(O.userId===this.userId),o.push(ln(this.k,O))}))}),Ht.waitFor(d).next(()=>o)}removeMutationBatch(e,r){return bu(e.Wt,this.userId,r).next(o=>(e.addOnCommittedListener(()=>{this.ee(r.batchId)}),Ht.forEach(o,d=>this.referenceDelegate.markPotentiallyOrphaned(e,d))))}ee(e){delete this.Yt[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(r=>{if(!r)return Ht.resolve();const o=IDBKeyRange.lowerBound(Oi.prefixForUser(this.userId)),d=[];return tc(e).jt({range:o},(v,O,$)=>{if(v[0]===this.userId){const ue=Ia(v[1]);d.push(ue)}else $.done()}).next(()=>{Jt(0===d.length)})})}containsKey(e,r){return Cu(e,this.userId,r)}ne(e){return jh(e).get(this.userId).next(r=>r||new Rl(this.userId,-1,""))}}function Cu(i,e,r){const o=Oi.prefixForPath(e,r.path),d=o[1],v=IDBKeyRange.lowerBound(o);let O=!1;return tc(i).jt({range:v,Kt:!0},($,ue,Ae)=>{const[Ze,dt,Gt]=$;Ze===e&&dt===d&&(O=!0),Ae.done()}).next(()=>O)}function Aa(i){return jo(i,ii.store)}function tc(i){return jo(i,Oi.store)}function jh(i){return jo(i,Rl.store)}class nc{constructor(e){this.se=e}next(){return this.se+=2,this.se}static ie(){return new nc(0)}static re(){return new nc(-1)}}class Af{constructor(e,r){this.referenceDelegate=e,this.k=r}allocateTargetId(e){return this.oe(e).next(r=>{const o=new nc(r.highestTargetId);return r.highestTargetId=o.next(),this.ae(e,r).next(()=>r.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.oe(e).next(r=>$n.fromTimestamp(new di(r.lastRemoteSnapshotVersion.seconds,r.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.oe(e).next(r=>r.highestListenSequenceNumber)}setTargetsMetadata(e,r,o){return this.oe(e).next(d=>(d.highestListenSequenceNumber=r,o&&(d.lastRemoteSnapshotVersion=o.toTimestamp()),r>d.highestListenSequenceNumber&&(d.highestListenSequenceNumber=r),this.ae(e,d)))}addTargetData(e,r){return this.ce(e,r).next(()=>this.oe(e).next(o=>(o.targetCount+=1,this.ue(r,o),this.ae(e,o))))}updateTargetData(e,r){return this.ce(e,r)}removeTargetData(e,r){return this.removeMatchingKeysForTargetId(e,r.targetId).next(()=>Lc(e).delete(r.targetId)).next(()=>this.oe(e)).next(o=>(Jt(o.targetCount>0),o.targetCount-=1,this.ae(e,o)))}removeTargets(e,r,o){let d=0;const v=[];return Lc(e).jt((O,$)=>{const ue=jn($);ue.sequenceNumber<=r&&null===o.get(ue.targetId)&&(d++,v.push(this.removeTargetData(e,ue)))}).next(()=>Ht.waitFor(v)).next(()=>d)}forEachTarget(e,r){return Lc(e).jt((o,d)=>{const v=jn(d);r(v)})}oe(e){return qu(e).get(fs.key).next(r=>(Jt(null!==r),r))}ae(e,r){return qu(e).put(fs.key,r)}ce(e,r){return Lc(e).put(Zn(this.k,r))}ue(e,r){let o=!1;return e.targetId>r.highestTargetId&&(r.highestTargetId=e.targetId,o=!0),e.sequenceNumber>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e.sequenceNumber,o=!0),o}getTargetCount(e){return this.oe(e).next(r=>r.targetCount)}getTargetData(e,r){const o=yl(r),d=IDBKeyRange.bound([o,Number.NEGATIVE_INFINITY],[o,Number.POSITIVE_INFINITY]);let v=null;return Lc(e).jt({range:d,index:go.queryTargetsIndexName},(O,$,ue)=>{const Ae=jn($);j(r,Ae.target)&&(v=Ae,ue.done())}).next(()=>v)}addMatchingKeys(e,r,o){const d=[],v=Bc(e);return r.forEach(O=>{const $=Ca(O.path);d.push(v.put(new os(o,$))),d.push(this.referenceDelegate.addReference(e,o,O))}),Ht.waitFor(d)}removeMatchingKeys(e,r,o){const d=Bc(e);return Ht.forEach(r,v=>{const O=Ca(v.path);return Ht.waitFor([d.delete([o,O]),this.referenceDelegate.removeReference(e,o,v)])})}removeMatchingKeysForTargetId(e,r){const o=Bc(e),d=IDBKeyRange.bound([r],[r+1],!1,!0);return o.delete(d)}getMatchingKeysForTargetId(e,r){const o=IDBKeyRange.bound([r],[r+1],!1,!0),d=Bc(e);let v=wi();return d.jt({range:o,Kt:!0},(O,$,ue)=>{const Ae=Ia(O[1]),Ze=new Vn(Ae);v=v.add(Ze)}).next(()=>v)}containsKey(e,r){const o=Ca(r.path),d=IDBKeyRange.bound([o],[fl(o)],!1,!0);let v=0;return Bc(e).jt({index:os.documentTargetsIndex,Kt:!0,range:d},([O,$],ue,Ae)=>{0!==O&&(v++,Ae.done())}).next(()=>v>0)}Et(e,r){return Lc(e).get(r).next(o=>o?jn(o):null)}}function Lc(i){return jo(i,go.store)}function qu(i){return jo(i,fs.store)}function Bc(i){return jo(i,os.store)}function Vc(i){return Hh.apply(this,arguments)}function Hh(){return Hh=(0,ee.Z)(function*(i){if(i.code!==Et.FAILED_PRECONDITION||i.message!==mu)throw i;W("LocalStore","Unexpectedly lost primary lease")}),Hh.apply(this,arguments)}function za([i,e],[r,o]){const d=Tr(i,r);return 0===d?Tr(e,o):d}class Mf{constructor(e){this.he=e,this.buffer=new Wi(za),this.le=0}fe(){return++this.le}de(e){const r=[e,this.fe()];if(this.buffer.size<this.he)this.buffer=this.buffer.add(r);else{const o=this.buffer.last();za(r,o)<0&&(this.buffer=this.buffer.delete(o).add(r))}}get maxValue(){return this.buffer.last()[0]}}class Od{constructor(e,r){this.garbageCollector=e,this.asyncQueue=r,this.we=!1,this._e=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.me(e)}stop(){this._e&&(this._e.cancel(),this._e=null)}get started(){return null!==this._e}me(e){var r=this;const o=this.we?3e5:6e4;W("LruGarbageCollector",`Garbage collection scheduled in ${o}ms`),this._e=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",o,(0,ee.Z)(function*(){r._e=null,r.we=!0;try{yield e.collectGarbage(r.garbageCollector)}catch(d){Xs(d)?W("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",d):yield Vc(d)}yield r.me(e)}))}}class Gh{constructor(e,r){this.ge=e,this.params=r}calculateTargetCount(e,r){return this.ge.ye(e).next(o=>Math.floor(r/100*o))}nthSequenceNumber(e,r){if(0===r)return Ht.resolve(bs.I);const o=new Mf(r);return this.ge.forEachTarget(e,d=>o.de(d.sequenceNumber)).next(()=>this.ge.pe(e,d=>o.de(d))).next(()=>o.maxValue)}removeTargets(e,r,o){return this.ge.removeTargets(e,r,o)}removeOrphanedDocuments(e,r){return this.ge.removeOrphanedDocuments(e,r)}collect(e,r){return-1===this.params.cacheSizeCollectionThreshold?(W("LruGarbageCollector","Garbage collection skipped; disabled"),Ht.resolve(xd)):this.getCacheSize(e).next(o=>o<this.params.cacheSizeCollectionThreshold?(W("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),xd):this.Te(e,r))}getCacheSize(e){return this.ge.getCacheSize(e)}Te(e,r){let o,d,v,O,$,ue,Ae;const Ze=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(dt=>(dt>this.params.maximumSequenceNumbersToCollect?(W("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${dt}`),d=this.params.maximumSequenceNumbersToCollect):d=dt,O=Date.now(),this.nthSequenceNumber(e,d))).next(dt=>(o=dt,$=Date.now(),this.removeTargets(e,o,r))).next(dt=>(v=dt,ue=Date.now(),this.removeOrphanedDocuments(e,o))).next(dt=>(Ae=Date.now(),M()<=yt.in.DEBUG&&W("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${O-Ze}ms\n\tDetermined least recently used ${d} in `+($-O)+`ms\n\tRemoved ${v} targets in `+(ue-$)+`ms\n\tRemoved ${dt} documents in `+(Ae-ue)+`ms\nTotal Duration: ${Ae-Ze}ms`),Ht.resolve({didRun:!0,sequenceNumbersCollected:d,targetsRemoved:v,documentsRemoved:dt})))}}class Yg{constructor(e,r){this.db=e,this.garbageCollector=new Gh(this,r)}ye(e){const r=this.Ee(e);return this.db.getTargetCache().getTargetCount(e).next(o=>r.next(d=>o+d))}Ee(e){let r=0;return this.pe(e,o=>{r++}).next(()=>r)}forEachTarget(e,r){return this.db.getTargetCache().forEachTarget(e,r)}pe(e,r){return this.Ie(e,(o,d)=>r(d))}addReference(e,r,o){return Qu(e,o)}removeReference(e,r,o){return Qu(e,o)}removeTargets(e,r,o){return this.db.getTargetCache().removeTargets(e,r,o)}markPotentiallyOrphaned(e,r){return Qu(e,r)}Ae(e,r){return function(o,d){let v=!1;return jh(o).Qt(O=>Cu(o,O,d).next($=>($&&(v=!0),Ht.resolve(!$)))).next(()=>v)}(e,r)}removeOrphanedDocuments(e,r){const o=this.db.getRemoteDocumentCache().newChangeBuffer(),d=[];let v=0;return this.Ie(e,(O,$)=>{if($<=r){const ue=this.Ae(e,O).next(Ae=>{if(!Ae)return v++,o.getEntry(e,O).next(()=>(o.removeEntry(O),Bc(e).delete([0,Ca(O.path)])))});d.push(ue)}}).next(()=>Ht.waitFor(d)).next(()=>o.apply(e)).next(()=>v)}removeTarget(e,r){const o=r.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,o)}updateLimboDocument(e,r){return Qu(e,r)}Ie(e,r){const o=Bc(e);let d,v=bs.I;return o.jt({index:os.documentTargetsIndex},([O,$],{path:ue,sequenceNumber:Ae})=>{0===O?(v!==bs.I&&r(new Vn(Ia(d)),v),v=Ae,d=ue):v=bs.I}).next(()=>{v!==bs.I&&r(new Vn(Ia(d)),v)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Qu(i,e){return Bc(i).put((o=i.currentSequenceNumber,new os(0,Ca(e.path),o)));var o}class Ju{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={}}get(e){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0!==o)for(const[d,v]of o)if(this.equalsFn(d,e))return v}has(e){return void 0!==this.get(e)}set(e,r){const o=this.mapKeyFn(e),d=this.inner[o];if(void 0!==d){for(let v=0;v<d.length;v++)if(this.equalsFn(d[v][0],e))return void(d[v]=[e,r]);d.push([e,r])}else this.inner[o]=[[e,r]]}delete(e){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return!1;for(let d=0;d<o.length;d++)if(this.equalsFn(o[d][0],e))return 1===o.length?delete this.inner[r]:o.splice(d,1),!0;return!1}forEach(e){jr(this.inner,(r,o)=>{for(const[d,v]of o)e(d,v)})}isEmpty(){return pl(this.inner)}}class $h{constructor(){this.changes=new Ju(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}getReadTime(e){const r=this.changes.get(e);return r?r.readTime:$n.min()}addEntry(e,r){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:r})}removeEntry(e,r=null){this.assertNotApplied(),this.changes.set(e,{document:Vi.newInvalidDocument(e),readTime:r})}getEntry(e,r){this.assertNotApplied();const o=this.changes.get(r);return void 0!==o?Ht.resolve(o.document):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Rp{constructor(e,r){this.k=e,this.Jt=r}addEntry(e,r,o){return Uc(e).put(Rd(r),o)}removeEntry(e,r){const o=Uc(e),d=Rd(r);return o.delete(d)}updateMetadata(e,r){return this.getMetadata(e).next(o=>(o.byteSize+=r,this.Re(e,o)))}getEntry(e,r){return Uc(e).get(Rd(r)).next(o=>this.Pe(r,o))}be(e,r){return Uc(e).get(Rd(r)).next(o=>({document:this.Pe(r,o),size:Fc(o)}))}getEntries(e,r){let o=bo();return this.ve(e,r,(d,v)=>{const O=this.Pe(d,v);o=o.insert(d,O)}).next(()=>o)}Ve(e,r){let o=bo(),d=new xi(Vn.comparator);return this.ve(e,r,(v,O)=>{const $=this.Pe(v,O);o=o.insert(v,$),d=d.insert(v,Fc(O))}).next(()=>({documents:o,Se:d}))}ve(e,r,o){if(r.isEmpty())return Ht.resolve();const d=IDBKeyRange.bound(r.first().path.toArray(),r.last().path.toArray()),v=r.getIterator();let O=v.getNext();return Uc(e).jt({range:d},($,ue,Ae)=>{const Ze=Vn.fromSegments($);for(;O&&Vn.comparator(O,Ze)<0;)o(O,null),O=v.getNext();O&&O.isEqual(Ze)&&(o(O,ue),O=v.hasNext()?v.getNext():null),O?Ae.Lt(O.path.toArray()):Ae.done()}).next(()=>{for(;O;)o(O,null),O=v.hasNext()?v.getNext():null})}getDocumentsMatchingQuery(e,r,o){let d=bo();const v=r.path.length+1,O={};if(o.isEqual($n.min())){const $=r.path.toArray();O.range=IDBKeyRange.lowerBound($)}else{const $=r.path.toArray(),ue=le(o);O.range=IDBKeyRange.lowerBound([$,ue],!0),O.index=hs.collectionReadTimeIndex}return Uc(e).jt(O,($,ue,Ae)=>{if($.length!==v)return;const Ze=A(this.k,ue);r.path.isPrefixOf(Ze.key.path)?tu(r,Ze)&&(d=d.insert(Ze.key,Ze)):Ae.done()}).next(()=>d)}newChangeBuffer(e){return new Pp(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(r=>r.byteSize)}getMetadata(e){return sl(e).get(Uo.key).next(r=>(Jt(!!r),r))}Re(e,r){return sl(e).put(Uo.key,r)}Pe(e,r){if(r){const o=A(this.k,r);if(!o.isNoDocument()||!o.version.isEqual($n.min()))return o}return Vi.newInvalidDocument(e)}}class Pp extends $h{constructor(e,r){super(),this.De=e,this.trackRemovals=r,this.Ce=new Ju(o=>o.toString(),(o,d)=>o.isEqual(d))}applyChanges(e){const r=[];let o=0,d=new Wi((v,O)=>Tr(v.canonicalString(),O.canonicalString()));return this.changes.forEach((v,O)=>{const $=this.Ce.get(v);if(O.document.isValidDocument()){const ue=Y(this.De.k,O.document,this.getReadTime(v));d=d.add(v.path.popLast()),o+=Fc(ue)-$,r.push(this.De.addEntry(e,v,ue))}else if(o-=$,this.trackRemovals){const ue=Y(this.De.k,Vi.newNoDocument(v,$n.min()),this.getReadTime(v));r.push(this.De.addEntry(e,v,ue))}else r.push(this.De.removeEntry(e,v))}),d.forEach(v=>{r.push(this.De.Jt.addToCollectionParentIndex(e,v))}),r.push(this.De.updateMetadata(e,o)),Ht.waitFor(r)}getFromCache(e,r){return this.De.be(e,r).next(o=>(this.Ce.set(r,o.size),o.document))}getAllFromCache(e,r){return this.De.Ve(e,r).next(({documents:o,Se:d})=>(d.forEach((v,O)=>{this.Ce.set(v,O)}),o))}}function sl(i){return jo(i,Uo.store)}function Uc(i){return jo(i,hs.store)}function Rd(i){return i.path.toArray()}class kp{constructor(e){this.k=e}Nt(e,r,o,d){Jt(o<d&&o>=0&&d<=11);const v=new $a("createOrUpgrade",r);var $;o<1&&d>=1&&(e.createObjectStore(po.store),($=e).createObjectStore(Rl.store,{keyPath:Rl.keyPath}),$.createObjectStore(ii.store,{keyPath:ii.keyPath,autoIncrement:!0}).createIndex(ii.userMutationsIndex,ii.userMutationsKeyPath,{unique:!0}),$.createObjectStore(Oi.store),xf(e),function($){$.createObjectStore(hs.store)}(e));let O=Ht.resolve();return o<3&&d>=3&&(0!==o&&(function($){$.deleteObjectStore(os.store),$.deleteObjectStore(go.store),$.deleteObjectStore(fs.store)}(e),xf(e)),O=O.next(()=>function($){const ue=$.store(fs.store),Ae=new fs(0,0,$n.min().toTimestamp(),0);return ue.put(fs.key,Ae)}(v))),o<4&&d>=4&&(0!==o&&(O=O.next(()=>function($,ue){return ue.store(ii.store).Bt().next(Ae=>{$.deleteObjectStore(ii.store),$.createObjectStore(ii.store,{keyPath:ii.keyPath,autoIncrement:!0}).createIndex(ii.userMutationsIndex,ii.userMutationsKeyPath,{unique:!0});const Ze=ue.store(ii.store),dt=Ae.map(Gt=>Ze.put(Gt));return Ht.waitFor(dt)})}(e,v))),O=O.next(()=>{!function($){$.createObjectStore(wo.store,{keyPath:wo.keyPath})}(e)})),o<5&&d>=5&&(O=O.next(()=>this.Ne(v))),o<6&&d>=6&&(O=O.next(()=>(function($){$.createObjectStore(Uo.store)}(e),this.ke(v)))),o<7&&d>=7&&(O=O.next(()=>this.xe(v))),o<8&&d>=8&&(O=O.next(()=>this.$e(e,v))),o<9&&d>=9&&(O=O.next(()=>{(function($){$.objectStoreNames.contains("remoteDocumentChanges")&&$.deleteObjectStore("remoteDocumentChanges")})(e),function($){const ue=$.objectStore(hs.store);ue.createIndex(hs.readTimeIndex,hs.readTimeIndexPath,{unique:!1}),ue.createIndex(hs.collectionReadTimeIndex,hs.collectionReadTimeIndexPath,{unique:!1})}(r)})),o<10&&d>=10&&(O=O.next(()=>this.Fe(v))),o<11&&d>=11&&(O=O.next(()=>{(function($){$.createObjectStore(Pl.store,{keyPath:Pl.keyPath})})(e),function($){$.createObjectStore(kc.store,{keyPath:kc.keyPath})}(e)})),O}ke(e){let r=0;return e.store(hs.store).jt((o,d)=>{r+=Fc(d)}).next(()=>{const o=new Uo(r);return e.store(Uo.store).put(Uo.key,o)})}Ne(e){const r=e.store(Rl.store),o=e.store(ii.store);return r.Bt().next(d=>Ht.forEach(d,v=>{const O=IDBKeyRange.bound([v.userId,-1],[v.userId,v.lastAcknowledgedBatchId]);return o.Bt(ii.userMutationsIndex,O).next($=>Ht.forEach($,ue=>{Jt(ue.userId===v.userId);const Ae=ln(this.k,ue);return bu(e,v.userId,Ae).next(()=>{})}))}))}xe(e){const r=e.store(os.store),o=e.store(hs.store);return e.store(fs.store).get(fs.key).next(d=>{const v=[];return o.jt((O,$)=>{const ue=new Kr(O),Ae=[0,Ca(ue)];v.push(r.get(Ae).next(Ze=>Ze?Ht.resolve():r.put(new os(0,Ca(ue),d.highestListenSequenceNumber))))}).next(()=>Ht.waitFor(v))})}$e(e,r){e.createObjectStore(Pc.store,{keyPath:Pc.keyPath});const o=r.store(Pc.store),d=new Eu,v=O=>{if(d.add(O)){const $=O.lastSegment(),ue=O.popLast();return o.put({collectionId:$,parent:Ca(ue)})}};return r.store(hs.store).jt({Kt:!0},(O,$)=>{const ue=new Kr(O);return v(ue.popLast())}).next(()=>r.store(Oi.store).jt({Kt:!0},([O,$,ue],Ae)=>{const Ze=Ia($);return v(Ze.popLast())}))}Fe(e){const r=e.store(go.store);return r.jt((o,d)=>{const v=jn(d),O=Zn(this.k,v);return r.put(O)})}}function xf(i){i.createObjectStore(os.store,{keyPath:os.keyPath}).createIndex(os.documentTargetsIndex,os.documentTargetsKeyPath,{unique:!0}),i.createObjectStore(go.store,{keyPath:go.keyPath}).createIndex(go.queryTargetsIndexName,go.queryTargetsKeyPath,{unique:!0}),i.createObjectStore(fs.store)}const Wh="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class zh{constructor(e,r,o,d,v,O,$,ue,Ae,Ze){if(this.allowTabSynchronization=e,this.persistenceKey=r,this.clientId=o,this.Oe=v,this.window=O,this.document=$,this.Me=Ae,this.Le=Ze,this.Be=null,this.Ue=!1,this.isPrimary=!1,this.networkEnabled=!0,this.qe=null,this.inForeground=!1,this.Ke=null,this.je=null,this.Qe=Number.NEGATIVE_INFINITY,this.We=dt=>Promise.resolve(),!zh.bt())throw new Bt(Et.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Yg(this,d),this.Ge=r+"main",this.k=new m(ue),this.ze=new as(this.Ge,11,new kp(this.k)),this.He=new Af(this.referenceDelegate,this.k),this.Jt=new Md,this.Je=new Rp(this.k,this.Jt),this.Ye=new Ci,this.window&&this.window.localStorage?this.Xe=this.window.localStorage:(this.Xe=null,!1===Ze&&pe("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ze().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Bt(Et.FAILED_PRECONDITION,Wh);return this.tn(),this.en(),this.nn(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.He.getHighestSequenceNumber(e))}).then(e=>{this.Be=new bs(e,this.Me)}).then(()=>{this.Ue=!0}).catch(e=>(this.ze&&this.ze.close(),Promise.reject(e)))}sn(e){var r=this;return this.We=function(){var o=(0,ee.Z)(function*(d){if(r.started)return e(d)});return function(d){return o.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ze.xt(function(){var r=(0,ee.Z)(function*(o){null===o.newVersion&&(yield e())});return function(o){return r.apply(this,arguments)}}())}setNetworkEnabled(e){var r=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Oe.enqueueAndForget((0,ee.Z)(function*(){r.started&&(yield r.Ze())})))}Ze(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>ph(e).put(new wo(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next(()=>{if(this.isPrimary)return this.rn(e).next(r=>{r||(this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.We(!1)))})}).next(()=>this.on(e)).next(r=>this.isPrimary&&!r?this.an(e).next(()=>!1):!!r&&this.cn(e).next(()=>!0))).catch(e=>{if(Xs(e))return W("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return W("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Oe.enqueueRetryable(()=>this.We(e)),this.isPrimary=e})}rn(e){return Xu(e).get(po.key).next(r=>Ht.resolve(this.un(r)))}hn(e){return ph(e).delete(this.clientId)}ln(){var e=this;return(0,ee.Z)(function*(){if(e.isPrimary&&!e.fn(e.Qe,18e5)){e.Qe=Date.now();const r=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",o=>{const d=jo(o,wo.store);return d.Bt().next(v=>{const O=e.dn(v,18e5),$=v.filter(ue=>-1===O.indexOf(ue));return Ht.forEach($,ue=>d.delete(ue.clientId)).next(()=>$)})}).catch(()=>[]);if(e.Xe)for(const o of r)e.Xe.removeItem(e.wn(o.clientId))}})()}nn(){this.je=this.Oe.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ze().then(()=>this.ln()).then(()=>this.nn()))}un(e){return!!e&&e.ownerId===this.clientId}on(e){return this.Le?Ht.resolve(!0):Xu(e).get(po.key).next(r=>{if(null!==r&&this.fn(r.leaseTimestampMs,5e3)&&!this._n(r.ownerId)){if(this.un(r)&&this.networkEnabled)return!0;if(!this.un(r)){if(!r.allowTabSynchronization)throw new Bt(Et.FAILED_PRECONDITION,Wh);return!1}}return!(!this.networkEnabled||!this.inForeground)||ph(e).Bt().next(o=>void 0===this.dn(o,5e3).find(d=>{if(this.clientId!==d.clientId){const O=!this.inForeground&&d.inForeground,$=this.networkEnabled===d.networkEnabled;if(!this.networkEnabled&&d.networkEnabled||O&&$)return!0}return!1}))}).next(r=>(this.isPrimary!==r&&W("IndexedDbPersistence",`Client ${r?"is":"is not"} eligible for a primary lease.`),r))}shutdown(){var e=this;return(0,ee.Z)(function*(){e.Ue=!1,e.mn(),e.je&&(e.je.cancel(),e.je=null),e.gn(),e.yn(),yield e.ze.runTransaction("shutdown","readwrite",[po.store,wo.store],r=>{const o=new Yu(r,bs.I);return e.an(o).next(()=>e.hn(o))}),e.ze.close(),e.pn()})()}dn(e,r){return e.filter(o=>this.fn(o.updateTimeMs,r)&&!this._n(o.clientId))}Tn(){return this.runTransaction("getActiveClients","readonly",e=>ph(e).Bt().next(r=>this.dn(r,18e5).map(o=>o.clientId)))}get started(){return this.Ue}getMutationQueue(e){return wu.Xt(e,this.k,this.Jt,this.referenceDelegate)}getTargetCache(){return this.He}getRemoteDocumentCache(){return this.Je}getIndexManager(){return this.Jt}getBundleCache(){return this.Ye}runTransaction(e,r,o){let v;return W("IndexedDbPersistence","Starting transaction:",e),this.ze.runTransaction(e,"readonly"===r?"readonly":"readwrite",Da,O=>(v=new Yu(O,this.Be?this.Be.next():bs.I),"readwrite-primary"===r?this.rn(v).next($=>!!$||this.on(v)).next($=>{if(!$)throw pe(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.We(!1)),new Bt(Et.FAILED_PRECONDITION,mu);return o(v)}).next($=>this.cn(v).next(()=>$)):this.En(v).next(()=>o(v)))).then(O=>(v.raiseOnCommittedEvent(),O))}En(e){return Xu(e).get(po.key).next(r=>{if(null!==r&&this.fn(r.leaseTimestampMs,5e3)&&!this._n(r.ownerId)&&!this.un(r)&&!(this.Le||this.allowTabSynchronization&&r.allowTabSynchronization))throw new Bt(Et.FAILED_PRECONDITION,Wh)})}cn(e){const r=new po(this.clientId,this.allowTabSynchronization,Date.now());return Xu(e).put(po.key,r)}static bt(){return as.bt()}an(e){const r=Xu(e);return r.get(po.key).next(o=>this.un(o)?(W("IndexedDbPersistence","Releasing primary lease."),r.delete(po.key)):Ht.resolve())}fn(e,r){const o=Date.now();return!(e<o-r||e>o&&(pe(`Detected an update time that is in the future: ${e} > ${o}`),1))}tn(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ke=()=>{this.Oe.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Ze()))},this.document.addEventListener("visibilitychange",this.Ke),this.inForeground="visible"===this.document.visibilityState)}gn(){this.Ke&&(this.document.removeEventListener("visibilitychange",this.Ke),this.Ke=null)}en(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.qe=()=>{this.mn(),(0,rt.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Oe.enterRestrictedMode(!0),this.Oe.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.qe))}yn(){this.qe&&(this.window.removeEventListener("pagehide",this.qe),this.qe=null)}_n(e){var r;try{const o=null!==(null===(r=this.Xe)||void 0===r?void 0:r.getItem(this.wn(e)));return W("IndexedDbPersistence",`Client '${e}' ${o?"is":"is not"} zombied in LocalStorage`),o}catch(o){return pe("IndexedDbPersistence","Failed to get zombied client id.",o),!1}}mn(){if(this.Xe)try{this.Xe.setItem(this.wn(this.clientId),String(Date.now()))}catch(e){pe("Failed to set zombie client id.",e)}}pn(){if(this.Xe)try{this.Xe.removeItem(this.wn(this.clientId))}catch(e){}}wn(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Xu(i){return jo(i,po.store)}function ph(i){return jo(i,wo.store)}function Kh(i,e){let r=i.projectId;return i.isDefaultDatabase||(r+="."+i.database),"firestore/"+e+"/"+r+"/"}class Np{constructor(e,r){this.progress=e,this.In=r}}class Or{constructor(e,r,o){this.Je=e,this.An=r,this.Jt=o}Rn(e,r){return this.An.getAllMutationBatchesAffectingDocumentKey(e,r).next(o=>this.Pn(e,r,o))}Pn(e,r,o){return this.Je.getEntry(e,r).next(d=>{for(const v of o)v.applyToLocalView(d);return d})}bn(e,r){e.forEach((o,d)=>{for(const v of r)v.applyToLocalView(d)})}vn(e,r){return this.Je.getEntries(e,r).next(o=>this.Vn(e,o).next(()=>o))}Vn(e,r){return this.An.getAllMutationBatchesAffectingDocumentKeys(e,r).next(o=>this.bn(r,o))}getDocumentsMatchingQuery(e,r,o){return Vn.isDocumentKey((d=r).path)&&null===d.collectionGroup&&0===d.filters.length?this.Sn(e,r.path):wl(r)?this.Dn(e,r,o):this.Cn(e,r,o);var d}Sn(e,r){return this.Rn(e,new Vn(r)).next(o=>{let d=Tl();return o.isFoundDocument()&&(d=d.insert(o.key,o)),d})}Dn(e,r,o){const d=r.collectionGroup;let v=Tl();return this.Jt.getCollectionParents(e,d).next(O=>Ht.forEach(O,$=>{const ue=(Ae=r,Ze=$.child(d),new Ns(Ze,null,Ae.explicitOrderBy.slice(),Ae.filters.slice(),Ae.limit,Ae.limitType,Ae.startAt,Ae.endAt));var Ae,Ze;return this.Cn(e,ue,o).next(Ae=>{Ae.forEach((Ze,dt)=>{v=v.insert(Ze,dt)})})}).next(()=>v))}Cn(e,r,o){let d,v;return this.Je.getDocumentsMatchingQuery(e,r,o).next(O=>(d=O,this.An.getAllMutationBatchesAffectingQuery(e,r))).next(O=>(v=O,this.Nn(e,v,d).next($=>{d=$;for(const ue of v)for(const Ae of ue.mutations){const Ze=Ae.key;let dt=d.get(Ze);null==dt&&(dt=Vi.newInvalidDocument(Ze),d=d.insert(Ze,dt)),el(Ae,dt,ue.localWriteTime),dt.isFoundDocument()||(d=d.remove(Ze))}}))).next(()=>(d.forEach((O,$)=>{tu(r,$)||(d=d.remove(O))}),d))}Nn(e,r,o){let d=wi();for(const O of r)for(const $ of O.mutations)$ instanceof ja&&null===o.get($.key)&&(d=d.add($.key));let v=o;return this.Je.getEntries(e,d).next(O=>(O.forEach(($,ue)=>{ue.isFoundDocument()&&(v=v.insert($,ue))}),v))}}class Yh{constructor(e,r,o,d){this.targetId=e,this.fromCache=r,this.kn=o,this.xn=d}static $n(e,r){let o=wi(),d=wi();for(const v of r.docChanges)switch(v.type){case 0:o=o.add(v.doc.key);break;case 1:d=d.add(v.doc.key)}return new Yh(e,r.fromCache,o,d)}}class Zh{Fn(e){this.On=e}getDocumentsMatchingQuery(e,r,o,d){return 0===(v=r).filters.length&&null===v.limit&&null==v.startAt&&null==v.endAt&&(0===v.explicitOrderBy.length||1===v.explicitOrderBy.length&&v.explicitOrderBy[0].field.isKeyField())||o.isEqual($n.min())?this.Mn(e,r):this.On.vn(e,d).next(v=>{const O=this.Ln(r,v);return(ca(r)||bl(r))&&this.Bn(r.limitType,O,d,o)?this.Mn(e,r):(M()<=yt.in.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Va(r)),this.On.getDocumentsMatchingQuery(e,r,o).next($=>(O.forEach(ue=>{$=$.insert(ue.key,ue)}),$)))});var v}Ln(e,r){let o=new Wi(Ec(e));return r.forEach((d,v)=>{tu(e,v)&&(o=o.add(v))}),o}Bn(e,r,o,d){if(o.size!==r.size)return!0;const v="F"===e?r.last():r.first();return!!v&&(v.hasPendingWrites||v.version.compareTo(d)>0)}Mn(e,r){return M()<=yt.in.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",Va(r)),this.On.getDocumentsMatchingQuery(e,r,$n.min())}}class Of{constructor(e,r,o,d){this.persistence=e,this.Un=r,this.k=d,this.qn=new xi(Tr),this.Kn=new Ju(v=>yl(v),j),this.jn=$n.min(),this.An=e.getMutationQueue(o),this.Qn=e.getRemoteDocumentCache(),this.He=e.getTargetCache(),this.Wn=new Or(this.Qn,this.An,this.persistence.getIndexManager()),this.Ye=e.getBundleCache(),this.Un.Fn(this.Wn)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.qn))}}function Pd(i,e,r,o){return new Of(i,e,r,o)}function Ma(i,e){return gh.apply(this,arguments)}function gh(){return gh=(0,ee.Z)(function*(i,e){const r=Vt(i);let o=r.An,d=r.Wn;const v=yield r.persistence.runTransaction("Handle user change","readonly",O=>{let $;return r.An.getAllMutationBatches(O).next(ue=>($=ue,o=r.persistence.getMutationQueue(e),d=new Or(r.Qn,o,r.persistence.getIndexManager()),o.getAllMutationBatches(O))).next(ue=>{const Ae=[],Ze=[];let dt=wi();for(const Gt of $){Ae.push(Gt.batchId);for(const on of Gt.mutations)dt=dt.add(on.key)}for(const Gt of ue){Ze.push(Gt.batchId);for(const on of Gt.mutations)dt=dt.add(on.key)}return d.vn(O,dt).next(Gt=>({Gn:Gt,removedBatchIds:Ae,addedBatchIds:Ze}))})});return r.An=o,r.Wn=d,r.Un.Fn(r.Wn),v}),gh.apply(this,arguments)}function Fp(i,e){const r=Vt(i);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",o=>{const d=e.batch.keys(),v=r.Qn.newChangeBuffer({trackRemovals:!0});return function(O,$,ue,Ae){const Ze=ue.batch,dt=Ze.keys();let Gt=Ht.resolve();return dt.forEach(on=>{Gt=Gt.next(()=>Ae.getEntry($,on)).next(wn=>{const lr=ue.docVersions.get(on);Jt(null!==lr),wn.version.compareTo(lr)<0&&(Ze.applyToRemoteDocument(wn,ue),wn.isValidDocument()&&Ae.addEntry(wn,ue.commitVersion))})}),Gt.next(()=>O.An.removeMutationBatch($,Ze))}(r,o,e,v).next(()=>v.apply(o)).next(()=>r.An.performConsistencyCheck(o)).next(()=>r.Wn.vn(o,d))})}function mh(i){const e=Vt(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.He.getLastRemoteSnapshotVersion(r))}function rc(i,e){const r=Vt(i),o=e.snapshotVersion;let d=r.qn;return r.persistence.runTransaction("Apply remote event","readwrite-primary",v=>{const O=r.Qn.newChangeBuffer({trackRemovals:!0});d=r.qn;const $=[];e.targetChanges.forEach((Ae,Ze)=>{const dt=d.get(Ze);if(!dt)return;$.push(r.He.removeMatchingKeys(v,Ae.removedDocuments,Ze).next(()=>r.He.addMatchingKeys(v,Ae.addedDocuments,Ze)));const Gt=Ae.resumeToken;if(Gt.approximateByteSize()>0){const on=dt.withResumeToken(Gt,o).withSequenceNumber(v.currentSequenceNumber);d=d.insert(Ze,on),wn=dt,kr=Ae,Jt((lr=on).resumeToken.approximateByteSize()>0),(0===wn.resumeToken.approximateByteSize()||lr.snapshotVersion.toMicroseconds()-wn.snapshotVersion.toMicroseconds()>=3e8||kr.addedDocuments.size+kr.modifiedDocuments.size+kr.removedDocuments.size>0)&&$.push(r.He.updateTargetData(v,on))}var wn,lr,kr});let ue=bo();if(e.documentUpdates.forEach((Ae,Ze)=>{e.resolvedLimboDocuments.has(Ae)&&$.push(r.persistence.referenceDelegate.updateLimboDocument(v,Ae))}),$.push(ol(v,O,e.documentUpdates,o,void 0).next(Ae=>{ue=Ae})),!o.isEqual($n.min())){const Ae=r.He.getLastRemoteSnapshotVersion(v).next(Ze=>r.He.setTargetsMetadata(v,v.currentSequenceNumber,o));$.push(Ae)}return Ht.waitFor($).next(()=>O.apply(v)).next(()=>r.Wn.Vn(v,ue)).next(()=>ue)}).then(v=>(r.qn=d,v))}function ol(i,e,r,o,d){let v=wi();return r.forEach(O=>v=v.add(O)),e.getEntries(i,v).next(O=>{let $=bo();return r.forEach((ue,Ae)=>{const Ze=O.get(ue),dt=(null==d?void 0:d.get(ue))||o;Ae.isNoDocument()&&Ae.version.isEqual($n.min())?(e.removeEntry(ue,dt),$=$.insert(ue,Ae)):!Ze.isValidDocument()||Ae.version.compareTo(Ze.version)>0||0===Ae.version.compareTo(Ze.version)&&Ze.hasPendingWrites?(e.addEntry(Ae,dt),$=$.insert(ue,Ae)):W("LocalStore","Ignoring outdated watch update for ",ue,". Current version:",Ze.version," Watch version:",Ae.version)}),$})}function Oo(i,e){const r=Vt(i);return r.persistence.runTransaction("Get next mutation batch","readonly",o=>(void 0===e&&(e=-1),r.An.getNextMutationBatchAfterBatchId(o,e)))}function mo(i,e){const r=Vt(i);return r.persistence.runTransaction("Allocate target","readwrite",o=>{let d;return r.He.getTargetData(o,e).next(v=>v?(d=v,Ht.resolve(d)):r.He.allocateTargetId(o).next(O=>(d=new f(e,O,0,o.currentSequenceNumber),r.He.addTargetData(o,d).next(()=>d))))}).then(o=>{const d=r.qn.get(o.targetId);return(null===d||o.snapshotVersion.compareTo(d.snapshotVersion)>0)&&(r.qn=r.qn.insert(o.targetId,o),r.Kn.set(e,o.targetId)),o})}function ic(i,e,r){return _h.apply(this,arguments)}function _h(){return _h=(0,ee.Z)(function*(i,e,r){const o=Vt(i),d=o.qn.get(e),v=r?"readwrite":"readwrite-primary";try{r||(yield o.persistence.runTransaction("Release target",v,O=>o.persistence.referenceDelegate.removeTarget(O,d)))}catch(O){if(!Xs(O))throw O;W("LocalStore",`Failed to update sequence numbers for target ${e}: ${O}`)}o.qn=o.qn.remove(e),o.Kn.delete(d.target)}),_h.apply(this,arguments)}function qh(i,e,r){const o=Vt(i);let d=$n.min(),v=wi();return o.persistence.runTransaction("Execute query","readonly",O=>function($,ue,Ae){const Ze=Vt($),dt=Ze.Kn.get(Ae);return void 0!==dt?Ht.resolve(Ze.qn.get(dt)):Ze.He.getTargetData(ue,Ae)}(o,O,Vo(e)).next($=>{if($)return d=$.lastLimboFreeSnapshotVersion,o.He.getMatchingKeysForTargetId(O,$.targetId).next(ue=>{v=ue})}).next(()=>o.Un.getDocumentsMatchingQuery(O,e,r?d:$n.min(),r?v:wi())).next($=>({documents:$,zn:v})))}function kd(i,e){const r=Vt(i),o=Vt(r.He),d=r.qn.get(e);return d?Promise.resolve(d.target):r.persistence.runTransaction("Get target data","readonly",v=>o.Et(v,e).next(O=>O?O.target:null))}function Nd(i){const e=Vt(i);return e.persistence.runTransaction("Get new document changes","readonly",r=>function(o,d,v){const O=Vt(o);let $=bo(),ue=le(v);const Ae=Uc(d),Ze=IDBKeyRange.lowerBound(ue,!0);return Ae.jt({index:hs.readTimeIndex,range:Ze},(dt,Gt)=>{const on=A(O.k,Gt);$=$.insert(on.key,on),ue=Gt.readTime}).next(()=>({In:$,readTime:tt(ue)}))}(e.Qn,r,e.jn)).then(({In:r,readTime:o})=>(e.jn=o,r))}function Fd(){return Fd=(0,ee.Z)(function*(i){const e=Vt(i);return e.persistence.runTransaction("Synchronize last document change read time","readonly",r=>function(o){const d=Uc(o);let v=$n.min();return d.jt({index:hs.readTimeIndex,reverse:!0},(O,$,ue)=>{$.readTime&&(v=tt($.readTime)),ue.done()}).next(()=>v)}(r)).then(r=>{e.jn=r})}),Fd.apply(this,arguments)}function Rf(){return Rf=(0,ee.Z)(function*(i,e,r,o){const d=Vt(i);let v=wi(),O=bo(),$=nl();for(const Ze of r){const dt=e.Hn(Ze.metadata.name);Ze.document&&(v=v.add(dt)),O=O.insert(dt,e.Jn(Ze)),$=$.insert(dt,e.Yn(Ze.metadata.readTime))}const ue=d.Qn.newChangeBuffer({trackRemovals:!0}),Ae=yield mo(d,(Ze=o,Vo(Ba(Kr.fromString(`__bundle__/docs/${Ze}`)))));var Ze;return d.persistence.runTransaction("Apply bundle documents","readwrite",Ze=>ol(Ze,ue,O,$n.min(),$).next(dt=>(ue.apply(Ze),dt)).next(dt=>d.He.removeMatchingKeysForTargetId(Ze,Ae.targetId).next(()=>d.He.addMatchingKeys(Ze,v,Ae.targetId)).next(()=>d.Wn.Vn(Ze,dt)).next(()=>dt)))}),Rf.apply(this,arguments)}function Lp(i,e){return yh.apply(this,arguments)}function yh(){return yh=(0,ee.Z)(function*(i,e,r=wi()){const o=yield mo(i,Vo(Lr(e.bundledQuery))),d=Vt(i);return d.persistence.runTransaction("Save named query","readwrite",v=>{const O=$s(e.readTime);if(o.snapshotVersion.compareTo(O)>=0)return d.Ye.saveNamedQuery(v,e);const $=o.withResumeToken(hi.EMPTY_BYTE_STRING,O);return d.qn=d.qn.insert($.targetId,$),d.He.updateTargetData(v,$).next(()=>d.He.removeMatchingKeysForTargetId(v,o.targetId)).next(()=>d.He.addMatchingKeys(v,r,o.targetId)).next(()=>d.Ye.saveNamedQuery(v,e))})}),yh.apply(this,arguments)}class Pf{constructor(e){this.k=e,this.Xn=new Map,this.Zn=new Map}getBundleMetadata(e,r){return Ht.resolve(this.Xn.get(r))}saveBundleMetadata(e,r){var o;return this.Xn.set(r.id,{id:(o=r).id,version:o.version,createTime:$s(o.createTime)}),Ht.resolve()}getNamedQuery(e,r){return Ht.resolve(this.Zn.get(r))}saveNamedQuery(e,r){return this.Zn.set(r.name,{name:(o=r).name,query:Lr(o.bundledQuery),readTime:$s(o.readTime)}),Ht.resolve();var o}}class vh{constructor(){this.ts=new Wi(_o.es),this.ns=new Wi(_o.ss)}isEmpty(){return this.ts.isEmpty()}addReference(e,r){const o=new _o(e,r);this.ts=this.ts.add(o),this.ns=this.ns.add(o)}rs(e,r){e.forEach(o=>this.addReference(o,r))}removeReference(e,r){this.os(new _o(e,r))}cs(e,r){e.forEach(o=>this.removeReference(o,r))}us(e){const r=new Vn(new Kr([])),o=new _o(r,e),d=new _o(r,e+1),v=[];return this.ns.forEachInRange([o,d],O=>{this.os(O),v.push(O.key)}),v}hs(){this.ts.forEach(e=>this.os(e))}os(e){this.ts=this.ts.delete(e),this.ns=this.ns.delete(e)}ls(e){const r=new Vn(new Kr([])),o=new _o(r,e),d=new _o(r,e+1);let v=wi();return this.ns.forEachInRange([o,d],O=>{v=v.add(O.key)}),v}containsKey(e){const r=new _o(e,0),o=this.ts.firstAfterOrEqual(r);return null!==o&&e.isEqual(o.key)}}class _o{constructor(e,r){this.key=e,this.fs=r}static es(e,r){return Vn.comparator(e.key,r.key)||Tr(e.fs,r.fs)}static ss(e,r){return Tr(e.fs,r.fs)||Vn.comparator(e.key,r.key)}}class Eh{constructor(e,r){this.Jt=e,this.referenceDelegate=r,this.An=[],this.ds=1,this.ws=new Wi(_o.es)}checkEmpty(e){return Ht.resolve(0===this.An.length)}addMutationBatch(e,r,o,d){const v=this.ds;this.ds++;const O=new vu(v,r,o,d);this.An.push(O);for(const $ of d)this.ws=this.ws.add(new _o($.key,v)),this.Jt.addToCollectionParentIndex(e,$.key.path.popLast());return Ht.resolve(O)}lookupMutationBatch(e,r){return Ht.resolve(this._s(r))}getNextMutationBatchAfterBatchId(e,r){const d=this.gs(r+1),v=d<0?0:d;return Ht.resolve(this.An.length>v?this.An[v]:null)}getHighestUnacknowledgedBatchId(){return Ht.resolve(0===this.An.length?-1:this.ds-1)}getAllMutationBatches(e){return Ht.resolve(this.An.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const o=new _o(r,0),d=new _o(r,Number.POSITIVE_INFINITY),v=[];return this.ws.forEachInRange([o,d],O=>{const $=this._s(O.fs);v.push($)}),Ht.resolve(v)}getAllMutationBatchesAffectingDocumentKeys(e,r){let o=new Wi(Tr);return r.forEach(d=>{const v=new _o(d,0),O=new _o(d,Number.POSITIVE_INFINITY);this.ws.forEachInRange([v,O],$=>{o=o.add($.fs)})}),Ht.resolve(this.ys(o))}getAllMutationBatchesAffectingQuery(e,r){const o=r.path,d=o.length+1;let v=o;Vn.isDocumentKey(v)||(v=v.child(""));const O=new _o(new Vn(v),0);let $=new Wi(Tr);return this.ws.forEachWhile(ue=>{const Ae=ue.key.path;return!!o.isPrefixOf(Ae)&&(Ae.length===d&&($=$.add(ue.fs)),!0)},O),Ht.resolve(this.ys($))}ys(e){const r=[];return e.forEach(o=>{const d=this._s(o);null!==d&&r.push(d)}),r}removeMutationBatch(e,r){Jt(0===this.ps(r.batchId,"removed")),this.An.shift();let o=this.ws;return Ht.forEach(r.mutations,d=>{const v=new _o(d.key,r.batchId);return o=o.delete(v),this.referenceDelegate.markPotentiallyOrphaned(e,d.key)}).next(()=>{this.ws=o})}ee(e){}containsKey(e,r){const o=new _o(r,0),d=this.ws.firstAfterOrEqual(o);return Ht.resolve(r.isEqual(d&&d.key))}performConsistencyCheck(e){return Ht.resolve()}ps(e,r){return this.gs(e)}gs(e){return 0===this.An.length?0:e-this.An[0].batchId}_s(e){const r=this.gs(e);return r<0||r>=this.An.length?null:this.An[r]}}class Bp{constructor(e,r){this.Jt=e,this.Ts=r,this.docs=new xi(Vn.comparator),this.size=0}addEntry(e,r,o){const d=r.key,v=this.docs.get(d),O=v?v.size:0,$=this.Ts(r);return this.docs=this.docs.insert(d,{document:r.clone(),size:$,readTime:o}),this.size+=$-O,this.Jt.addToCollectionParentIndex(e,d.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const o=this.docs.get(r);return Ht.resolve(o?o.document.clone():Vi.newInvalidDocument(r))}getEntries(e,r){let o=bo();return r.forEach(d=>{const v=this.docs.get(d);o=o.insert(d,v?v.document.clone():Vi.newInvalidDocument(d))}),Ht.resolve(o)}getDocumentsMatchingQuery(e,r,o){let d=bo();const v=new Vn(r.path.child("")),O=this.docs.getIteratorFrom(v);for(;O.hasNext();){const{key:$,value:{document:ue,readTime:Ae}}=O.getNext();if(!r.path.isPrefixOf($.path))break;Ae.compareTo(o)<=0||tu(r,ue)&&(d=d.insert(ue.key,ue.clone()))}return Ht.resolve(d)}Es(e,r){return Ht.forEach(this.docs,o=>r(o))}newChangeBuffer(e){return new Vp(this)}getSize(e){return Ht.resolve(this.size)}}class Vp extends $h{constructor(e){super(),this.De=e}applyChanges(e){const r=[];return this.changes.forEach((o,d)=>{d.document.isValidDocument()?r.push(this.De.addEntry(e,d.document,this.getReadTime(o))):this.De.removeEntry(o)}),Ht.waitFor(r)}getFromCache(e,r){return this.De.getEntry(e,r)}getAllFromCache(e,r){return this.De.getEntries(e,r)}}class kf{constructor(e){this.persistence=e,this.Is=new Ju(r=>yl(r),j),this.lastRemoteSnapshotVersion=$n.min(),this.highestTargetId=0,this.As=0,this.Rs=new vh,this.targetCount=0,this.Ps=nc.ie()}forEachTarget(e,r){return this.Is.forEach((o,d)=>r(d)),Ht.resolve()}getLastRemoteSnapshotVersion(e){return Ht.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ht.resolve(this.As)}allocateTargetId(e){return this.highestTargetId=this.Ps.next(),Ht.resolve(this.highestTargetId)}setTargetsMetadata(e,r,o){return o&&(this.lastRemoteSnapshotVersion=o),r>this.As&&(this.As=r),Ht.resolve()}ce(e){this.Is.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.Ps=new nc(r),this.highestTargetId=r),e.sequenceNumber>this.As&&(this.As=e.sequenceNumber)}addTargetData(e,r){return this.ce(r),this.targetCount+=1,Ht.resolve()}updateTargetData(e,r){return this.ce(r),Ht.resolve()}removeTargetData(e,r){return this.Is.delete(r.target),this.Rs.us(r.targetId),this.targetCount-=1,Ht.resolve()}removeTargets(e,r,o){let d=0;const v=[];return this.Is.forEach((O,$)=>{$.sequenceNumber<=r&&null===o.get($.targetId)&&(this.Is.delete(O),v.push(this.removeMatchingKeysForTargetId(e,$.targetId)),d++)}),Ht.waitFor(v).next(()=>d)}getTargetCount(e){return Ht.resolve(this.targetCount)}getTargetData(e,r){const o=this.Is.get(r)||null;return Ht.resolve(o)}addMatchingKeys(e,r,o){return this.Rs.rs(r,o),Ht.resolve()}removeMatchingKeys(e,r,o){this.Rs.cs(r,o);const d=this.persistence.referenceDelegate,v=[];return d&&r.forEach(O=>{v.push(d.markPotentiallyOrphaned(e,O))}),Ht.waitFor(v)}removeMatchingKeysForTargetId(e,r){return this.Rs.us(r),Ht.resolve()}getMatchingKeysForTargetId(e,r){const o=this.Rs.ls(r);return Ht.resolve(o)}containsKey(e,r){return Ht.resolve(this.Rs.containsKey(r))}}class Nf{constructor(e,r){this.bs={},this.Be=new bs(0),this.Ue=!1,this.Ue=!0,this.referenceDelegate=e(this),this.He=new kf(this),this.Jt=new Zu,this.Je=new Bp(this.Jt,o=>this.referenceDelegate.vs(o)),this.k=new m(r),this.Ye=new Pf(this.k)}start(){return Promise.resolve()}shutdown(){return this.Ue=!1,Promise.resolve()}get started(){return this.Ue}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Jt}getMutationQueue(e){let r=this.bs[e.toKey()];return r||(r=new Eh(this.Jt,this.referenceDelegate),this.bs[e.toKey()]=r),r}getTargetCache(){return this.He}getRemoteDocumentCache(){return this.Je}getBundleCache(){return this.Ye}runTransaction(e,r,o){W("MemoryPersistence","Starting transaction:",e);const d=new Ff(this.Be.next());return this.referenceDelegate.Vs(),o(d).next(v=>this.referenceDelegate.Ss(d).next(()=>v)).toPromise().then(v=>(d.raiseOnCommittedEvent(),v))}Ds(e,r){return Ht.or(Object.values(this.bs).map(o=>()=>o.containsKey(e,r)))}}class Ff extends Nc{constructor(e){super(),this.currentSequenceNumber=e}}class ed{constructor(e){this.persistence=e,this.Cs=new vh,this.Ns=null}static ks(e){return new ed(e)}get xs(){if(this.Ns)return this.Ns;throw ht()}addReference(e,r,o){return this.Cs.addReference(o,r),this.xs.delete(o.toString()),Ht.resolve()}removeReference(e,r,o){return this.Cs.removeReference(o,r),this.xs.add(o.toString()),Ht.resolve()}markPotentiallyOrphaned(e,r){return this.xs.add(r.toString()),Ht.resolve()}removeTarget(e,r){this.Cs.us(r.targetId).forEach(d=>this.xs.add(d.toString()));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,r.targetId).next(d=>{d.forEach(v=>this.xs.add(v.toString()))}).next(()=>o.removeTargetData(e,r))}Vs(){this.Ns=new Set}Ss(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ht.forEach(this.xs,o=>{const d=Vn.fromPath(o);return this.$s(e,d).next(v=>{v||r.removeEntry(d)})}).next(()=>(this.Ns=null,r.apply(e)))}updateLimboDocument(e,r){return this.$s(e,r).next(o=>{o?this.xs.delete(r.toString()):this.xs.add(r.toString())})}vs(e){return 0}$s(e,r){return Ht.or([()=>Ht.resolve(this.Cs.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Ds(e,r)])}}function Lf(i,e){return`firestore_clients_${i}_${e}`}function Up(i,e,r){let o=`firestore_mutations_${i}_${r}`;return e.isAuthenticated()&&(o+=`_${e.uid}`),o}function Bf(i,e){return`firestore_targets_${i}_${e}`}class Jh{constructor(e,r,o,d){this.user=e,this.batchId=r,this.state=o,this.error=d}static Fs(e,r,o){const d=JSON.parse(o);let v,O="object"==typeof d&&-1!==["pending","acknowledged","rejected"].indexOf(d.state)&&(void 0===d.error||"object"==typeof d.error);return O&&d.error&&(O="string"==typeof d.error.message&&"string"==typeof d.error.code,O&&(v=new Bt(d.error.code,d.error.message))),O?new Jh(e,r,d.state,v):(pe("SharedClientState",`Failed to parse mutation state for ID '${r}': ${o}`),null)}Os(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Ld{constructor(e,r,o){this.targetId=e,this.state=r,this.error=o}static Fs(e,r){const o=JSON.parse(r);let d,v="object"==typeof o&&-1!==["not-current","current","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return v&&o.error&&(v="string"==typeof o.error.message&&"string"==typeof o.error.code,v&&(d=new Bt(o.error.code,o.error.message))),v?new Ld(e,o.state,d):(pe("SharedClientState",`Failed to parse target state for ID '${e}': ${r}`),null)}Os(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Xh{constructor(e,r){this.clientId=e,this.activeTargetIds=r}static Fs(e,r){const o=JSON.parse(r);let d="object"==typeof o&&o.activeTargetIds instanceof Array,v=Sl();for(let O=0;d&&O<o.activeTargetIds.length;++O)d=Na(o.activeTargetIds[O]),v=v.add(o.activeTargetIds[O]);return d?new Xh(e,v):(pe("SharedClientState",`Failed to parse client data for instance '${e}': ${r}`),null)}}class Vf{constructor(e,r){this.clientId=e,this.onlineState=r}static Fs(e){const r=JSON.parse(e);return"object"==typeof r&&-1!==["Unknown","Online","Offline"].indexOf(r.onlineState)&&"string"==typeof r.clientId?new Vf(r.clientId,r.onlineState):(pe("SharedClientState",`Failed to parse online state: ${e}`),null)}}class ef{constructor(){this.activeTargetIds=Sl()}Ms(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ls(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Os(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Uf{constructor(e,r,o,d,v){this.window=e,this.Oe=r,this.persistenceKey=o,this.Bs=d,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Us=this.qs.bind(this),this.Ks=new xi(Tr),this.started=!1,this.js=[];const O=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=v,this.Qs=Lf(this.persistenceKey,this.Bs),this.Ws=`firestore_sequence_number_${this.persistenceKey}`,this.Ks=this.Ks.insert(this.Bs,new ef),this.Gs=new RegExp(`^firestore_clients_${O}_([^_]*)$`),this.zs=new RegExp(`^firestore_mutations_${O}_(\\d+)(?:_(.*))?$`),this.Hs=new RegExp(`^firestore_targets_${O}_(\\d+)$`),this.Js=`firestore_online_state_${this.persistenceKey}`,this.Ys=function($){return`firestore_bundle_loaded_${$}`}(this.persistenceKey),this.window.addEventListener("storage",this.Us)}static bt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,ee.Z)(function*(){const r=yield e.syncEngine.Tn();for(const d of r){if(d===e.Bs)continue;const v=e.getItem(Lf(e.persistenceKey,d));if(v){const O=Xh.Fs(d,v);O&&(e.Ks=e.Ks.insert(O.clientId,O))}}e.Xs();const o=e.storage.getItem(e.Js);if(o){const d=e.Zs(o);d&&e.ti(d)}for(const d of e.js)e.qs(d);e.js=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ws,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ei(this.Ks)}isActiveQueryTarget(e){let r=!1;return this.Ks.forEach((o,d)=>{d.activeTargetIds.has(e)&&(r=!0)}),r}addPendingMutation(e){this.ni(e,"pending")}updateMutationState(e,r,o){this.ni(e,r,o),this.si(e)}addLocalQueryTarget(e){let r="not-current";if(this.isActiveQueryTarget(e)){const o=this.storage.getItem(Bf(this.persistenceKey,e));if(o){const d=Ld.Fs(e,o);d&&(r=d.state)}}return this.ii.Ms(e),this.Xs(),r}removeLocalQueryTarget(e){this.ii.Ls(e),this.Xs()}isLocalQueryTarget(e){return this.ii.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Bf(this.persistenceKey,e))}updateQueryState(e,r,o){this.ri(e,r,o)}handleUserChange(e,r,o){r.forEach(d=>{this.si(d)}),this.currentUser=e,o.forEach(d=>{this.addPendingMutation(d)})}setOnlineState(e){this.oi(e)}notifyBundleLoaded(){this.ai()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Us),this.removeItem(this.Qs),this.started=!1)}getItem(e){const r=this.storage.getItem(e);return W("SharedClientState","READ",e,r),r}setItem(e,r){W("SharedClientState","SET",e,r),this.storage.setItem(e,r)}removeItem(e){W("SharedClientState","REMOVE",e),this.storage.removeItem(e)}qs(e){var r=this;const o=e;if(o.storageArea===this.storage){if(W("SharedClientState","EVENT",o.key,o.newValue),o.key===this.Qs)return void pe("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Oe.enqueueRetryable((0,ee.Z)(function*(){if(r.started){if(null!==o.key)if(r.Gs.test(o.key)){if(null==o.newValue){const d=r.ci(o.key);return r.ui(d,null)}{const d=r.hi(o.key,o.newValue);if(d)return r.ui(d.clientId,d)}}else if(r.zs.test(o.key)){if(null!==o.newValue){const d=r.li(o.key,o.newValue);if(d)return r.fi(d)}}else if(r.Hs.test(o.key)){if(null!==o.newValue){const d=r.di(o.key,o.newValue);if(d)return r.wi(d)}}else if(o.key===r.Js){if(null!==o.newValue){const d=r.Zs(o.newValue);if(d)return r.ti(d)}}else if(o.key===r.Ws){const d=function(v){let O=bs.I;if(null!=v)try{const $=JSON.parse(v);Jt("number"==typeof $),O=$}catch($){pe("SharedClientState","Failed to read sequence number from WebStorage",$)}return O}(o.newValue);d!==bs.I&&r.sequenceNumberHandler(d)}else if(o.key===r.Ys)return r.syncEngine._i()}else r.js.push(o)}))}}get ii(){return this.Ks.get(this.Bs)}Xs(){this.setItem(this.Qs,this.ii.Os())}ni(e,r,o){const d=new Jh(this.currentUser,e,r,o),v=Up(this.persistenceKey,this.currentUser,e);this.setItem(v,d.Os())}si(e){const r=Up(this.persistenceKey,this.currentUser,e);this.removeItem(r)}oi(e){this.storage.setItem(this.Js,JSON.stringify({clientId:this.Bs,onlineState:e}))}ri(e,r,o){const d=Bf(this.persistenceKey,e),v=new Ld(e,r,o);this.setItem(d,v.Os())}ai(){this.setItem(this.Ys,"value-not-used")}ci(e){const r=this.Gs.exec(e);return r?r[1]:null}hi(e,r){const o=this.ci(e);return Xh.Fs(o,r)}li(e,r){const o=this.zs.exec(e),d=Number(o[1]);return Jh.Fs(new Bi(void 0!==o[2]?o[2]:null),d,r)}di(e,r){const o=this.Hs.exec(e),d=Number(o[1]);return Ld.Fs(d,r)}Zs(e){return Vf.Fs(e)}fi(e){var r=this;return(0,ee.Z)(function*(){if(e.user.uid===r.currentUser.uid)return r.syncEngine.mi(e.batchId,e.state,e.error);W("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}wi(e){return this.syncEngine.gi(e.targetId,e.state,e.error)}ui(e,r){const o=r?this.Ks.insert(e,r):this.Ks.remove(e),d=this.ei(this.Ks),v=this.ei(o),O=[],$=[];return v.forEach(ue=>{d.has(ue)||O.push(ue)}),d.forEach(ue=>{v.has(ue)||$.push(ue)}),this.syncEngine.yi(O,$).then(()=>{this.Ks=o})}ti(e){this.Ks.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ei(e){let r=Sl();return e.forEach((o,d)=>{r=r.unionWith(d.activeTargetIds)}),r}}class jp{constructor(){this.pi=new ef,this.Ti={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,o){}addLocalQueryTarget(e){return this.pi.Ms(e),this.Ti[e]||"not-current"}updateQueryState(e,r,o){this.Ti[e]=r}removeLocalQueryTarget(e){this.pi.Ls(e)}isLocalQueryTarget(e){return this.pi.activeTargetIds.has(e)}clearQueryState(e){delete this.Ti[e]}getAllActiveQueryTargets(){return this.pi.activeTargetIds}isActiveQueryTarget(e){return this.pi.activeTargetIds.has(e)}start(){return this.pi=new ef,Promise.resolve()}handleUserChange(e,r,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(){}}class jc{Ei(e){}shutdown(){}}class bh{constructor(){this.Ii=()=>this.Ai(),this.Ri=()=>this.Pi(),this.bi=[],this.vi()}Ei(e){this.bi.push(e)}shutdown(){window.removeEventListener("online",this.Ii),window.removeEventListener("offline",this.Ri)}vi(){window.addEventListener("online",this.Ii),window.addEventListener("offline",this.Ri)}Ai(){W("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.bi)e(0)}Pi(){W("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.bi)e(1)}static bt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Hp={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class jf{constructor(e){this.Vi=e.Vi,this.Si=e.Si}Di(e){this.Ci=e}Ni(e){this.ki=e}onMessage(e){this.xi=e}close(){this.Si()}send(e){this.Vi(e)}$i(){this.Ci()}Fi(e){this.ki(e)}Oi(e){this.xi(e)}}class Bd extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.Mi=(e.ssl?"https":"http")+"://"+e.host,this.Li="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Bi(e,r,o,d,v){const O=this.Ui(e,r);W("RestConnection","Sending: ",O,o);const $={};return this.qi($,d,v),this.Ki(e,O,$,o).then(ue=>(W("RestConnection","Received: ",ue),ue),ue=>{throw Be("RestConnection",`${e} failed with error: `,ue,"url: ",O,"request:",o),ue})}ji(e,r,o,d,v){return this.Bi(e,r,o,d,v)}qi(e,r,o){e["X-Goog-Api-Client"]="gl-js/ fire/"+F,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((d,v)=>e[v]=d),o&&o.headers.forEach((d,v)=>e[v]=d)}Ui(e,r){return`${this.Mi}/v1/${r}:${Hp[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}Ki(e,r,o,d){return new Promise((v,O)=>{const $=new Pa;$.listenOnce(Qc.COMPLETE,()=>{try{switch($.getLastErrorCode()){case ma.NO_ERROR:const Ae=$.getResponseJson();W("Connection","XHR received:",JSON.stringify(Ae)),v(Ae);break;case ma.TIMEOUT:W("Connection",'RPC "'+e+'" timed out'),O(new Bt(Et.DEADLINE_EXCEEDED,"Request time out"));break;case ma.HTTP_ERROR:const Ze=$.getStatus();if(W("Connection",'RPC "'+e+'" failed with status:',Ze,"response text:",$.getResponseText()),Ze>0){const dt=$.getResponseJson().error;if(dt&&dt.status&&dt.message){const Gt=function(on){const wn=on.toLowerCase().replace(/_/g,"-");return Object.values(Et).indexOf(wn)>=0?wn:Et.UNKNOWN}(dt.status);O(new Bt(Gt,dt.message))}else O(new Bt(Et.UNKNOWN,"Server responded with status "+$.getStatus()))}else O(new Bt(Et.UNAVAILABLE,"Connection failed."));break;default:ht()}}finally{W("Connection",'RPC "'+e+'" completed.')}});const ue=JSON.stringify(d);$.send(r,"POST",ue,o,15)})}Qi(e,r,o){const d=[this.Mi,"/","google.firestore.v1.Firestore","/",e,"/channel"],v=pc(),O=Vs(),$={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&($.xmlHttpFactory=new Gl({})),this.qi($.initMessageHeaders,r,o),(0,rt.uI)()||(0,rt.b$)()||(0,rt.d)()||(0,rt.w1)()||(0,rt.Mn)()||(0,rt.ru)()||($.httpHeadersOverwriteParam="$httpHeaders");const ue=d.join("");W("Connection","Creating WebChannel: "+ue,$);const Ae=v.createWebChannel(ue,$);let Ze=!1,dt=!1;const Gt=new jf({Vi:wn=>{dt?W("Connection","Not sending because WebChannel is closed:",wn):(Ze||(W("Connection","Opening WebChannel transport."),Ae.open(),Ze=!0),W("Connection","WebChannel sending:",wn),Ae.send(wn))},Si:()=>Ae.close()}),on=(wn,lr,kr)=>{wn.listen(lr,Zo=>{try{kr(Zo)}catch(qn){setTimeout(()=>{throw qn},0)}})};return on(Ae,na.EventType.OPEN,()=>{dt||W("Connection","WebChannel transport opened.")}),on(Ae,na.EventType.CLOSE,()=>{dt||(dt=!0,W("Connection","WebChannel transport closed"),Gt.Fi())}),on(Ae,na.EventType.ERROR,wn=>{dt||(dt=!0,Be("Connection","WebChannel transport errored:",wn),Gt.Fi(new Bt(Et.UNAVAILABLE,"The operation could not be completed")))}),on(Ae,na.EventType.MESSAGE,wn=>{var lr;if(!dt){const kr=wn.data[0];Jt(!!kr);const Zo=kr,qn=Zo.error||(null===(lr=Zo[0])||void 0===lr?void 0:lr.error);if(qn){W("Connection","WebChannel received error:",qn);const Pu=qn.status;let Yc=function(Bh){const Dp=Fs[Bh];if(void 0!==Dp)return _d(Dp)}(Pu),Zc=qn.message;void 0===Yc&&(Yc=Et.INTERNAL,Zc="Unknown error status: "+Pu+" with message "+qn.message),dt=!0,Gt.Fi(new Bt(Yc,Zc)),Ae.close()}else W("Connection","WebChannel received:",kr),Gt.Oi(kr)}}),on(O,Hl.STAT_EVENT,wn=>{wn.stat===ta.PROXY?W("Connection","Detected buffering proxy"):wn.stat===ta.NOPROXY&&W("Connection","Detected no buffering proxy")}),setTimeout(()=>{Gt.$i()},0),Gt}}function tf(){return"undefined"!=typeof window?window:null}function Iu(){return"undefined"!=typeof document?document:null}function Vd(i){return new Wu(i,!0)}class Nl{constructor(e,r,o=1e3,d=1.5,v=6e4){this.Oe=e,this.timerId=r,this.Wi=o,this.Gi=d,this.zi=v,this.Hi=0,this.Ji=null,this.Yi=Date.now(),this.reset()}reset(){this.Hi=0}Xi(){this.Hi=this.zi}Zi(e){this.cancel();const r=Math.floor(this.Hi+this.tr()),o=Math.max(0,Date.now()-this.Yi),d=Math.max(0,r-o);d>0&&W("ExponentialBackoff",`Backing off for ${d} ms (base delay: ${this.Hi} ms, delay with jitter: ${r} ms, last attempt: ${o} ms ago)`),this.Ji=this.Oe.enqueueAfterDelay(this.timerId,d,()=>(this.Yi=Date.now(),e())),this.Hi*=this.Gi,this.Hi<this.Wi&&(this.Hi=this.Wi),this.Hi>this.zi&&(this.Hi=this.zi)}er(){null!==this.Ji&&(this.Ji.skipDelay(),this.Ji=null)}cancel(){null!==this.Ji&&(this.Ji.cancel(),this.Ji=null)}tr(){return(Math.random()-.5)*this.Hi}}class wh{constructor(e,r,o,d,v,O,$,ue){this.Oe=e,this.nr=o,this.sr=d,this.ir=v,this.authCredentialsProvider=O,this.appCheckCredentialsProvider=$,this.listener=ue,this.state=0,this.rr=0,this.ar=null,this.cr=null,this.stream=null,this.ur=new Nl(e,r)}hr(){return 1===this.state||5===this.state||this.lr()}lr(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.dr()}stop(){var e=this;return(0,ee.Z)(function*(){e.hr()&&(yield e.close(0))})()}wr(){this.state=0,this.ur.reset()}_r(){this.lr()&&null===this.ar&&(this.ar=this.Oe.enqueueAfterDelay(this.nr,6e4,()=>this.mr()))}gr(e){this.yr(),this.stream.send(e)}mr(){var e=this;return(0,ee.Z)(function*(){if(e.lr())return e.close(0)})()}yr(){this.ar&&(this.ar.cancel(),this.ar=null)}pr(){this.cr&&(this.cr.cancel(),this.cr=null)}close(e,r){var o=this;return(0,ee.Z)(function*(){o.yr(),o.pr(),o.ur.cancel(),o.rr++,4!==e?o.ur.reset():r&&r.code===Et.RESOURCE_EXHAUSTED?(pe(r.toString()),pe("Using maximum backoff delay to prevent overloading the backend."),o.ur.Xi()):r&&r.code===Et.UNAUTHENTICATED&&3!==o.state&&(o.authCredentialsProvider.invalidateToken(),o.appCheckCredentialsProvider.invalidateToken()),null!==o.stream&&(o.Tr(),o.stream.close(),o.stream=null),o.state=e,yield o.listener.Ni(r)})()}Tr(){}auth(){this.state=1;const e=this.Er(this.rr),r=this.rr;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([o,d])=>{this.rr===r&&this.Ir(o,d)},o=>{e(()=>{const d=new Bt(Et.UNKNOWN,"Fetching auth token failed: "+o.message);return this.Ar(d)})})}Ir(e,r){const o=this.Er(this.rr);this.stream=this.Rr(e,r),this.stream.Di(()=>{o(()=>(this.state=2,this.cr=this.Oe.enqueueAfterDelay(this.sr,1e4,()=>(this.lr()&&(this.state=3),Promise.resolve())),this.listener.Di()))}),this.stream.Ni(d=>{o(()=>this.Ar(d))}),this.stream.onMessage(d=>{o(()=>this.onMessage(d))})}dr(){var e=this;this.state=5,this.ur.Zi((0,ee.Z)(function*(){e.state=0,e.start()}))}Ar(e){return W("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Er(e){return r=>{this.Oe.enqueueAndForget(()=>this.rr===e?r():(W("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Gp extends wh{constructor(e,r,o,d,v,O){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,o,d,O),this.k=v}Rr(e,r){return this.ir.Qi("Listen",e,r)}onMessage(e){this.ur.reset();const r=function(i,e){let r;if("targetChange"in e){const o="NO_CHANGE"===(ue=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===ue?1:"REMOVE"===ue?2:"CURRENT"===ue?3:"RESET"===ue?4:ht(),d=e.targetChange.targetIds||[],v=function(ue,Ae){return ue.C?(Jt(void 0===Ae||"string"==typeof Ae),hi.fromBase64String(Ae||"")):(Jt(void 0===Ae||Ae instanceof Uint8Array),hi.fromUint8Array(Ae||new Uint8Array))}(i,e.targetChange.resumeToken),O=e.targetChange.cause,$=O&&function(ue){const Ae=void 0===ue.code?Et.UNKNOWN:_d(ue.code);return new Bt(Ae,ue.message||"")}(O);r=new Al(o,d,v,$||null)}else if("documentChange"in e){const o=e.documentChange,d=fa(i,o.document.name),v=$s(o.document.updateTime),O=new is({mapValue:{fields:o.document.fields}}),$=Vi.newFoundDocument(d,v,O);r=new au(o.targetIds||[],o.removedTargetIds||[],$.key,$)}else if("documentDelete"in e){const o=e.documentDelete,d=fa(i,o.document),v=o.readTime?$s(o.readTime):$n.min(),O=Vi.newNoDocument(d,v);r=new au([],o.removedTargetIds||[],O.key,O)}else if("documentRemove"in e){const o=e.documentRemove,d=fa(i,o.document);r=new au([],o.removedTargetIds||[],d,null)}else{if(!("filter"in e))return ht();{const o=e.filter,v=new md(o.count||0);r=new lu(o.targetId,v)}}var ue;return r}(this.k,e),o=function(d){if(!("targetChange"in d))return $n.min();const v=d.targetChange;return v.targetIds&&v.targetIds.length?$n.min():v.readTime?$s(v.readTime):$n.min()}(e);return this.listener.Pr(r,o)}br(e){const r={};r.database=Ml(this.k),r.addTarget=function(d,v){let O;const $=v.target;return O=Z($)?{documents:Dd(d,$)}:{query:xc(d,$)},O.targetId=v.targetId,v.resumeToken.approximateByteSize()>0?O.resumeToken=Ac(d,v.resumeToken):v.snapshotVersion.compareTo($n.min())>0&&(O.readTime=Ha(d,v.snapshotVersion.toTimestamp())),O}(this.k,e);const o=function(i,e){const r=function(o,d){switch(d){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ht()}}(0,e.purpose);return null==r?null:{"goog-listen-tags":r}}(0,e);o&&(r.labels=o),this.gr(r)}vr(e){const r={};r.database=Ml(this.k),r.removeTarget=e,this.gr(r)}}class nf extends wh{constructor(e,r,o,d,v,O){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,o,d,O),this.k=v,this.Vr=!1}get Sr(){return this.Vr}start(){this.Vr=!1,this.lastStreamToken=void 0,super.start()}Tr(){this.Vr&&this.Dr([])}Rr(e,r){return this.ir.Qi("Write",e,r)}onMessage(e){if(Jt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Vr){this.ur.reset();const r=function(i,e){return i&&i.length>0?(Jt(void 0!==e),i.map(r=>function(o,d){let v=$s(o.updateTime?o.updateTime:d);return v.isEqual($n.min())&&(v=$s(d)),new Ic(v,o.transformResults||[])}(r,e))):[]}(e.writeResults,e.commitTime),o=$s(e.commitTime);return this.listener.Cr(o,r)}return Jt(!e.writeResults||0===e.writeResults.length),this.Vr=!0,this.listener.Nr()}kr(){const e={};e.database=Ml(this.k),this.gr(e)}Dr(e){const r={streamToken:this.lastStreamToken,writes:e.map(o=>ql(this.k,o))};this.gr(r)}}class Hf extends class{}{constructor(e,r,o,d){super(),this.authCredentials=e,this.appCheckCredentials=r,this.ir=o,this.k=d,this.$r=!1}Fr(){if(this.$r)throw new Bt(Et.FAILED_PRECONDITION,"The client has already been terminated.")}Bi(e,r,o){return this.Fr(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,v])=>this.ir.Bi(e,r,o,d,v)).catch(d=>{throw"FirebaseError"===d.name?(d.code===Et.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new Bt(Et.UNKNOWN,d.toString())})}ji(e,r,o){return this.Fr(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,v])=>this.ir.ji(e,r,o,d,v)).catch(d=>{throw"FirebaseError"===d.name?(d.code===Et.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new Bt(Et.UNKNOWN,d.toString())})}terminate(){this.$r=!0}}class Gf{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.Or=0,this.Mr=null,this.Lr=!0}Br(){0===this.Or&&(this.Ur("Unknown"),this.Mr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.Mr=null,this.qr("Backend didn't respond within 10 seconds."),this.Ur("Offline"),Promise.resolve())))}Kr(e){"Online"===this.state?this.Ur("Unknown"):(this.Or++,this.Or>=1&&(this.jr(),this.qr(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.Ur("Offline")))}set(e){this.jr(),this.Or=0,"Online"===e&&(this.Lr=!1),this.Ur(e)}Ur(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}qr(e){const r=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Lr?(pe(r),this.Lr=!1):W("OnlineStateTracker",r)}jr(){null!==this.Mr&&(this.Mr.cancel(),this.Mr=null)}}class Zg{constructor(e,r,o,d,v){var O=this;this.localStore=e,this.datastore=r,this.asyncQueue=o,this.remoteSyncer={},this.Qr=[],this.Wr=new Map,this.Gr=new Set,this.zr=[],this.Hr=v,this.Hr.Ei($=>{o.enqueueAndForget((0,ee.Z)(function*(){var ue;Bl(O)&&(W("RemoteStore","Restarting streams for network reachability change."),yield(ue=(0,ee.Z)(function*(Ae){const Ze=Vt(Ae);Ze.Gr.add(4),yield Fl(Ze),Ze.Jr.set("Unknown"),Ze.Gr.delete(4),yield Ch(Ze)}),function(Ae){return ue.apply(this,arguments)})(O))}))}),this.Jr=new Gf(o,d)}}function Ch(i){return td.apply(this,arguments)}function td(){return td=(0,ee.Z)(function*(i){if(Bl(i))for(const e of i.zr)yield e(!0)}),td.apply(this,arguments)}function Fl(i){return Ud.apply(this,arguments)}function Ud(){return Ud=(0,ee.Z)(function*(i){for(const e of i.zr)yield e(!1)}),Ud.apply(this,arguments)}function al(i,e){const r=Vt(i);r.Wr.has(e.targetId)||(r.Wr.set(e.targetId,e),jd(r)?Ll(r):nd(r).lr()&&Hc(r,e))}function sc(i,e){const r=Vt(i),o=nd(r);r.Wr.delete(e),o.lr()&&$f(r,e),0===r.Wr.size&&(o.lr()?o._r():Bl(r)&&r.Jr.set("Unknown"))}function Hc(i,e){i.Yr.X(e.targetId),nd(i).br(e)}function $f(i,e){i.Yr.X(e),nd(i).vr(e)}function Ll(i){i.Yr=new uh({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>i.Wr.get(e)||null}),nd(i).start(),i.Jr.Br()}function jd(i){return Bl(i)&&!nd(i).hr()&&i.Wr.size>0}function Bl(i){return 0===Vt(i).Gr.size}function rf(i){i.Yr=void 0}function Wf(i){return Hd.apply(this,arguments)}function Hd(){return Hd=(0,ee.Z)(function*(i){i.Wr.forEach((e,r)=>{Hc(i,e)})}),Hd.apply(this,arguments)}function $p(i,e){return Ih.apply(this,arguments)}function Ih(){return Ih=(0,ee.Z)(function*(i,e){rf(i),jd(i)?(i.Jr.Kr(e),Ll(i)):i.Jr.set("Unknown")}),Ih.apply(this,arguments)}function qg(i,e,r){return Dh.apply(this,arguments)}function Dh(){return Dh=(0,ee.Z)(function*(i,e,r){if(i.Jr.set("Online"),e instanceof Al&&2===e.state&&e.cause)try{yield(o=(0,ee.Z)(function*(d,v){const O=v.cause;for(const $ of v.targetIds)d.Wr.has($)&&(yield d.remoteSyncer.rejectListen($,O),d.Wr.delete($),d.Yr.removeTarget($))}),function(d,v){return o.apply(this,arguments)})(i,e)}catch(o){W("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),o),yield Gd(i,o)}else if(e instanceof au?i.Yr.ot(e):e instanceof lu?i.Yr.dt(e):i.Yr.ut(e),!r.isEqual($n.min()))try{const o=yield mh(i.localStore);r.compareTo(o)>=0&&(yield function(d,v){const O=d.Yr.gt(v);return O.targetChanges.forEach(($,ue)=>{if($.resumeToken.approximateByteSize()>0){const Ae=d.Wr.get(ue);Ae&&d.Wr.set(ue,Ae.withResumeToken($.resumeToken,v))}}),O.targetMismatches.forEach($=>{const ue=d.Wr.get($);if(!ue)return;d.Wr.set($,ue.withResumeToken(hi.EMPTY_BYTE_STRING,ue.snapshotVersion)),$f(d,$);const Ae=new f(ue.target,$,1,ue.sequenceNumber);Hc(d,Ae)}),d.remoteSyncer.applyRemoteEvent(O)}(i,r))}catch(o){W("RemoteStore","Failed to raise snapshot:",o),yield Gd(i,o)}var o}),Dh.apply(this,arguments)}function Gd(i,e,r){return sf.apply(this,arguments)}function sf(){return sf=(0,ee.Z)(function*(i,e,r){if(!Xs(e))throw e;i.Gr.add(1),yield Fl(i),i.Jr.set("Offline"),r||(r=()=>mh(i.localStore)),i.asyncQueue.enqueueRetryable((0,ee.Z)(function*(){W("RemoteStore","Retrying IndexedDB access"),yield r(),i.Gr.delete(1),yield Ch(i)}))}),sf.apply(this,arguments)}function zf(i,e){return e().catch(r=>Gd(i,r,e))}function $d(i){return Kf.apply(this,arguments)}function Kf(){return Kf=(0,ee.Z)(function*(i){const e=Vt(i),r=oc(e);let o=e.Qr.length>0?e.Qr[e.Qr.length-1].batchId:-1;for(;Ka(e);)try{const d=yield Oo(e.localStore,o);if(null===d){0===e.Qr.length&&r._r();break}o=d.batchId,Qg(e,d)}catch(d){yield Gd(e,d)}Wp(e)&&Jg(e)}),Kf.apply(this,arguments)}function Ka(i){return Bl(i)&&i.Qr.length<10}function Qg(i,e){i.Qr.push(e);const r=oc(i);r.lr()&&r.Sr&&r.Dr(e.mutations)}function Wp(i){return Bl(i)&&!oc(i).hr()&&i.Qr.length>0}function Jg(i){oc(i).start()}function y_(i){return of.apply(this,arguments)}function of(){return of=(0,ee.Z)(function*(i){oc(i).kr()}),of.apply(this,arguments)}function v_(i){return Yf.apply(this,arguments)}function Yf(){return Yf=(0,ee.Z)(function*(i){const e=oc(i);for(const r of i.Qr)e.Dr(r.mutations)}),Yf.apply(this,arguments)}function Zf(i,e,r){return af.apply(this,arguments)}function af(){return af=(0,ee.Z)(function*(i,e,r){const o=i.Qr.shift(),d=b.from(o,e,r);yield zf(i,()=>i.remoteSyncer.applySuccessfulWrite(d)),yield $d(i)}),af.apply(this,arguments)}function Xg(i,e){return lf.apply(this,arguments)}function lf(){return lf=(0,ee.Z)(function*(i,e){var r;e&&oc(i).Sr&&(yield(r=(0,ee.Z)(function*(o,d){if(Zl(v=d.code)&&v!==Et.ABORTED){const O=o.Qr.shift();oc(o).wr(),yield zf(o,()=>o.remoteSyncer.rejectFailedWrite(O.batchId,d)),yield $d(o)}var v}),function(o,d){return r.apply(this,arguments)})(i,e)),Wp(i)&&Jg(i)}),lf.apply(this,arguments)}function cf(i,e){return Th.apply(this,arguments)}function Th(){return Th=(0,ee.Z)(function*(i,e){const r=Vt(i);e?(r.Gr.delete(2),yield Ch(r)):e||(r.Gr.add(2),yield Fl(r),r.Jr.set("Unknown"))}),Th.apply(this,arguments)}function nd(i){return i.Xr||(i.Xr=function(e,r,o){const d=Vt(e);return d.Fr(),new Gp(r,d.ir,d.authCredentials,d.appCheckCredentials,d.k,o)}(i.datastore,i.asyncQueue,{Di:Wf.bind(null,i),Ni:$p.bind(null,i),Pr:qg.bind(null,i)}),i.zr.push(function(){var e=(0,ee.Z)(function*(r){r?(i.Xr.wr(),jd(i)?Ll(i):i.Jr.set("Unknown")):(yield i.Xr.stop(),rf(i))});return function(r){return e.apply(this,arguments)}}())),i.Xr}function oc(i){return i.Zr||(i.Zr=function(e,r,o){const d=Vt(e);return d.Fr(),new nf(r,d.ir,d.authCredentials,d.appCheckCredentials,d.k,o)}(i.datastore,i.asyncQueue,{Di:y_.bind(null,i),Ni:Xg.bind(null,i),Nr:v_.bind(null,i),Cr:Zf.bind(null,i)}),i.zr.push(function(){var e=(0,ee.Z)(function*(r){r?(i.Zr.wr(),yield $d(i)):(yield i.Zr.stop(),i.Qr.length>0&&(W("RemoteStore",`Stopping write stream with ${i.Qr.length} pending writes`),i.Qr=[]))});return function(r){return e.apply(this,arguments)}}())),i.Zr}class qf{constructor(e,r,o,d,v){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=o,this.op=d,this.removalCallback=v,this.deferred=new Xr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(O=>{})}static createAndSchedule(e,r,o,d,v){const O=Date.now()+o,$=new qf(e,r,O,d,v);return $.start(o),$}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Bt(Et.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function u(i,e){if(pe("AsyncQueue",`${e}: ${i}`),Xs(i))return new Bt(Et.UNAVAILABLE,`${e}: ${i}`);throw i}class l{constructor(e){this.comparator=e?(r,o)=>e(r,o)||Vn.comparator(r.key,o.key):(r,o)=>Vn.comparator(r.key,o.key),this.keyedMap=Tl(),this.sortedSet=new xi(this.comparator)}static emptySet(e){return new l(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,o)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof l)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;r.hasNext();){const d=r.getNext().key,v=o.getNext().key;if(!d.isEqual(v))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,r){const o=new l;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=r,o}}class a{constructor(){this.eo=new xi(Vn.comparator)}track(e){const r=e.doc.key,o=this.eo.get(r);o?0!==e.type&&3===o.type?this.eo=this.eo.insert(r,e):3===e.type&&1!==o.type?this.eo=this.eo.insert(r,{type:o.type,doc:e.doc}):2===e.type&&2===o.type?this.eo=this.eo.insert(r,{type:2,doc:e.doc}):2===e.type&&0===o.type?this.eo=this.eo.insert(r,{type:0,doc:e.doc}):1===e.type&&0===o.type?this.eo=this.eo.remove(r):1===e.type&&2===o.type?this.eo=this.eo.insert(r,{type:1,doc:o.doc}):0===e.type&&1===o.type?this.eo=this.eo.insert(r,{type:2,doc:e.doc}):ht():this.eo=this.eo.insert(r,e)}no(){const e=[];return this.eo.inorderTraversal((r,o)=>{e.push(o)}),e}}class p{constructor(e,r,o,d,v,O,$,ue){this.query=e,this.docs=r,this.oldDocs=o,this.docChanges=d,this.mutatedKeys=v,this.fromCache=O,this.syncStateChanged=$,this.excludesMetadataChanges=ue}static fromInitialDocuments(e,r,o,d){const v=[];return r.forEach(O=>{v.push({type:0,doc:O})}),new p(e,r,l.emptySet(r),v,o,d,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ea(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,o=e.docChanges;if(r.length!==o.length)return!1;for(let d=0;d<r.length;d++)if(r[d].type!==o[d].type||!r[d].doc.isEqual(o[d].doc))return!1;return!0}}class I{constructor(){this.so=void 0,this.listeners=[]}}class k{constructor(){this.queries=new Ju(e=>Cl(e),Ea),this.onlineState="Unknown",this.io=new Set}}function K(i,e){return _e.apply(this,arguments)}function _e(){return _e=(0,ee.Z)(function*(i,e){const r=Vt(i),o=e.query;let d=!1,v=r.queries.get(o);if(v||(d=!0,v=new I),d)try{v.so=yield r.onListen(o)}catch(O){const $=u(O,`Initialization of query '${Va(e.query)}' failed`);return void e.onError($)}r.queries.set(o,v),v.listeners.push(e),e.ro(r.onlineState),v.so&&e.oo(v.so)&&Xt(r)}),_e.apply(this,arguments)}function ke(i,e){return Je.apply(this,arguments)}function Je(){return Je=(0,ee.Z)(function*(i,e){const r=Vt(i),o=e.query;let d=!1;const v=r.queries.get(o);if(v){const O=v.listeners.indexOf(e);O>=0&&(v.listeners.splice(O,1),d=0===v.listeners.length)}if(d)return r.queries.delete(o),r.onUnlisten(o)}),Je.apply(this,arguments)}function kt(i,e){const r=Vt(i);let o=!1;for(const d of e){const O=r.queries.get(d.query);if(O){for(const $ of O.listeners)$.oo(d)&&(o=!0);O.so=d}}o&&Xt(r)}function Ot(i,e,r){const o=Vt(i),d=o.queries.get(e);if(d)for(const v of d.listeners)v.onError(r);o.queries.delete(e)}function Xt(i){i.io.forEach(e=>{e.next()})}class Hn{constructor(e,r,o){this.query=e,this.ao=r,this.co=!1,this.uo=null,this.onlineState="Unknown",this.options=o||{}}oo(e){if(!this.options.includeMetadataChanges){const o=[];for(const d of e.docChanges)3!==d.type&&o.push(d);e=new p(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let r=!1;return this.co?this.ho(e)&&(this.ao.next(e),r=!0):this.lo(e,this.onlineState)&&(this.fo(e),r=!0),this.uo=e,r}onError(e){this.ao.error(e)}ro(e){this.onlineState=e;let r=!1;return this.uo&&!this.co&&this.lo(this.uo,e)&&(this.fo(this.uo),r=!0),r}lo(e,r){return!e.fromCache||!(this.options.wo&&"Offline"!==r||e.docs.isEmpty()&&"Offline"!==r)}ho(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.uo&&this.uo.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}fo(e){e=p.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.co=!0,this.ao.next(e)}}class cr{constructor(e,r){this.payload=e,this.byteLength=r}_o(){return"metadata"in this.payload}}class Ii{constructor(e){this.k=e}Hn(e){return fa(this.k,e)}Jn(e){return e.metadata.exists?Js(this.k,e.document,!1):Vi.newNoDocument(this.Hn(e.metadata.name),this.Yn(e.metadata.readTime))}Yn(e){return $s(e)}}class eo{constructor(e,r,o){this.mo=e,this.localStore=r,this.k=o,this.queries=[],this.documents=[],this.progress=Vl(e)}yo(e){this.progress.bytesLoaded+=e.byteLength;let r=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++r):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++r),r!==this.progress.documentsLoaded?(this.progress.documentsLoaded=r,Object.assign({},this.progress)):null}po(e){const r=new Map,o=new Ii(this.k);for(const d of e)if(d.metadata.queries){const v=o.Hn(d.metadata.name);for(const O of d.metadata.queries){const $=(r.get(O)||wi()).add(v);r.set(O,$)}}return r}complete(){var e=this;return(0,ee.Z)(function*(){const r=yield function(i,e,r,o){return Rf.apply(this,arguments)}(e.localStore,new Ii(e.k),e.documents,e.mo.id),o=e.po(e.documents);for(const d of e.queries)yield Lp(e.localStore,d,o.get(d.name));return e.progress.taskState="Success",new Np(Object.assign({},e.progress),r)})()}}function Vl(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class Ul{constructor(e){this.key=e}}class ac{constructor(e){this.key=e}}class Sh{constructor(e,r){this.query=e,this.To=r,this.Eo=null,this.current=!1,this.Io=wi(),this.mutatedKeys=wi(),this.Ao=Ec(e),this.Ro=new l(this.Ao)}get Po(){return this.To}bo(e,r){const o=r?r.vo:new a,d=r?r.Ro:this.Ro;let v=r?r.mutatedKeys:this.mutatedKeys,O=d,$=!1;const ue=ca(this.query)&&d.size===this.query.limit?d.last():null,Ae=bl(this.query)&&d.size===this.query.limit?d.first():null;if(e.inorderTraversal((Ze,dt)=>{const Gt=d.get(Ze),on=tu(this.query,dt)?dt:null,wn=!!Gt&&this.mutatedKeys.has(Gt.key),lr=!!on&&(on.hasLocalMutations||this.mutatedKeys.has(on.key)&&on.hasCommittedMutations);let kr=!1;Gt&&on?Gt.data.isEqual(on.data)?wn!==lr&&(o.track({type:3,doc:on}),kr=!0):this.Vo(Gt,on)||(o.track({type:2,doc:on}),kr=!0,(ue&&this.Ao(on,ue)>0||Ae&&this.Ao(on,Ae)<0)&&($=!0)):!Gt&&on?(o.track({type:0,doc:on}),kr=!0):Gt&&!on&&(o.track({type:1,doc:Gt}),kr=!0,(ue||Ae)&&($=!0)),kr&&(on?(O=O.add(on),v=lr?v.add(Ze):v.delete(Ze)):(O=O.delete(Ze),v=v.delete(Ze)))}),ca(this.query)||bl(this.query))for(;O.size>this.query.limit;){const Ze=ca(this.query)?O.last():O.first();O=O.delete(Ze.key),v=v.delete(Ze.key),o.track({type:1,doc:Ze})}return{Ro:O,vo:o,Bn:$,mutatedKeys:v}}Vo(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,o){const d=this.Ro;this.Ro=e.Ro,this.mutatedKeys=e.mutatedKeys;const v=e.vo.no();v.sort((Ae,Ze)=>function(dt,Gt){const on=wn=>{switch(wn){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ht()}};return on(dt)-on(Gt)}(Ae.type,Ze.type)||this.Ao(Ae.doc,Ze.doc)),this.So(o);const O=r?this.Do():[],$=0===this.Io.size&&this.current?1:0,ue=$!==this.Eo;return this.Eo=$,0!==v.length||ue?{snapshot:new p(this.query,e.Ro,d,v,e.mutatedKeys,0===$,ue,!1),Co:O}:{Co:O}}ro(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ro:this.Ro,vo:new a,mutatedKeys:this.mutatedKeys,Bn:!1},!1)):{Co:[]}}No(e){return!this.To.has(e)&&!!this.Ro.has(e)&&!this.Ro.get(e).hasLocalMutations}So(e){e&&(e.addedDocuments.forEach(r=>this.To=this.To.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.To=this.To.delete(r)),this.current=e.current)}Do(){if(!this.current)return[];const e=this.Io;this.Io=wi(),this.Ro.forEach(o=>{this.No(o.key)&&(this.Io=this.Io.add(o.key))});const r=[];return e.forEach(o=>{this.Io.has(o)||r.push(new ac(o))}),this.Io.forEach(o=>{e.has(o)||r.push(new Ul(o))}),r}ko(e){this.To=e.zn,this.Io=wi();const r=this.bo(e.documents);return this.applyChanges(r,!0)}xo(){return p.fromInitialDocuments(this.query,this.Ro,this.mutatedKeys,0===this.Eo)}}class em{constructor(e,r,o){this.query=e,this.targetId=r,this.view=o}}class E_{constructor(e){this.key=e,this.$o=!1}}class b_{constructor(e,r,o,d,v,O){this.localStore=e,this.remoteStore=r,this.eventManager=o,this.sharedClientState=d,this.currentUser=v,this.maxConcurrentLimboResolutions=O,this.Fo={},this.Oo=new Ju($=>Cl($),Ea),this.Mo=new Map,this.Lo=new Set,this.Bo=new xi(Vn.comparator),this.Uo=new Map,this.qo=new vh,this.Ko={},this.jo=new Map,this.Qo=nc.re(),this.onlineState="Unknown",this.Wo=void 0}get isPrimaryClient(){return!0===this.Wo}}function zp(i,e){return tm.apply(this,arguments)}function tm(){return tm=(0,ee.Z)(function*(i,e){const r=lm(i);let o,d;const v=r.Oo.get(e);if(v)o=v.targetId,r.sharedClientState.addLocalQueryTarget(o),d=v.view.xo();else{const O=yield mo(r.localStore,Vo(e)),$=r.sharedClientState.addLocalQueryTarget(O.targetId);o=O.targetId,d=yield Kp(r,e,o,"current"===$),r.isPrimaryClient&&al(r.remoteStore,O)}return d}),tm.apply(this,arguments)}function Kp(i,e,r,o){return Qf.apply(this,arguments)}function Qf(){return Qf=(0,ee.Z)(function*(i,e,r,o){i.Go=(Ze,dt,Gt)=>{return(on=(0,ee.Z)(function*(wn,lr,kr,Zo){let qn=lr.view.bo(kr);qn.Bn&&(qn=yield qh(wn.localStore,lr.query,!1).then(({documents:Zc})=>lr.view.bo(Zc,qn)));const Pu=Zo&&Zo.targetChanges.get(lr.targetId),Yc=lr.view.applyChanges(qn,wn.isPrimaryClient,Pu);return df(wn,lr.targetId,Yc.Co),Yc.snapshot}),function(wn,lr,kr,Zo){return on.apply(this,arguments)})(i,Ze,dt,Gt);var on};const d=yield qh(i.localStore,e,!0),v=new Sh(e,d.zn),O=v.bo(d.documents),$=Sc.createSynthesizedTargetChangeForCurrentChange(r,o&&"Offline"!==i.onlineState),ue=v.applyChanges(O,i.isPrimaryClient,$);df(i,r,ue.Co);const Ae=new em(e,r,v);return i.Oo.set(e,Ae),i.Mo.has(r)?i.Mo.get(r).push(e):i.Mo.set(r,[e]),ue.snapshot}),Qf.apply(this,arguments)}function nm(i,e){return Jf.apply(this,arguments)}function Jf(){return Jf=(0,ee.Z)(function*(i,e){const r=Vt(i),o=r.Oo.get(e),d=r.Mo.get(o.targetId);if(d.length>1)return r.Mo.set(o.targetId,d.filter(v=>!Ea(v,e))),void r.Oo.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||(yield ic(r.localStore,o.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(o.targetId),sc(r.remoteStore,o.targetId),zd(r,o.targetId)}).catch(Vc))):(zd(r,o.targetId),yield ic(r.localStore,o.targetId,!0))}),Jf.apply(this,arguments)}function Xf(){return Xf=(0,ee.Z)(function*(i,e,r){const o=op(i);try{const d=yield function(v,O){const $=Vt(v),ue=di.now(),Ae=O.reduce((dt,Gt)=>dt.add(Gt.key),wi());let Ze;return $.persistence.runTransaction("Locally write mutations","readwrite",dt=>$.Wn.vn(dt,Ae).next(Gt=>{Ze=Gt;const on=[];for(const wn of O){const lr=ru(wn,Ze.get(wn.key));null!=lr&&on.push(new ja(wn.key,lr,Xc(lr.value.mapValue),Hs.exists(!0)))}return $.An.addMutationBatch(dt,ue,on,O)})).then(dt=>(dt.applyToLocalDocumentSet(Ze),{batchId:dt.batchId,changes:Ze}))}(o.localStore,e);o.sharedClientState.addPendingMutation(d.batchId),function(v,O,$){let ue=v.Ko[v.currentUser.toKey()];ue||(ue=new xi(Tr)),ue=ue.insert(O,$),v.Ko[v.currentUser.toKey()]=ue}(o,d.batchId,r),yield $c(o,d.changes),yield $d(o.remoteStore)}catch(d){const v=u(d,"Failed to persist write");r.reject(v)}}),Xf.apply(this,arguments)}function Gc(i,e){return Ah.apply(this,arguments)}function Ah(){return Ah=(0,ee.Z)(function*(i,e){const r=Vt(i);try{const o=yield rc(r.localStore,e);e.targetChanges.forEach((d,v)=>{const O=r.Uo.get(v);O&&(Jt(d.addedDocuments.size+d.modifiedDocuments.size+d.removedDocuments.size<=1),d.addedDocuments.size>0?O.$o=!0:d.modifiedDocuments.size>0?Jt(O.$o):d.removedDocuments.size>0&&(Jt(O.$o),O.$o=!1))}),yield $c(r,o,e)}catch(o){yield Vc(o)}}),Ah.apply(this,arguments)}function im(i,e,r){const o=Vt(i);if(o.isPrimaryClient&&0===r||!o.isPrimaryClient&&1===r){const d=[];o.Oo.forEach((v,O)=>{const $=O.view.ro(e);$.snapshot&&d.push($.snapshot)}),function(v,O){const $=Vt(v);$.onlineState=O;let ue=!1;$.queries.forEach((Ae,Ze)=>{for(const dt of Ze.listeners)dt.ro(O)&&(ue=!0)}),ue&&Xt($)}(o.eventManager,e),d.length&&o.Fo.Pr(d),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}function w_(i,e,r){return sm.apply(this,arguments)}function sm(){return sm=(0,ee.Z)(function*(i,e,r){const o=Vt(i);o.sharedClientState.updateQueryState(e,"rejected",r);const d=o.Uo.get(e),v=d&&d.key;if(v){let O=new xi(Vn.comparator);O=O.insert(v,Vi.newNoDocument(v,$n.min()));const $=wi().add(v),ue=new ou($n.min(),new Map,new Wi(Tr),O,$);yield Gc(o,ue),o.Bo=o.Bo.remove(v),o.Uo.delete(e),qp(o)}else yield ic(o.localStore,e,!1).then(()=>zd(o,e,r)).catch(Vc)}),sm.apply(this,arguments)}function Yp(i,e){return ep.apply(this,arguments)}function ep(){return ep=(0,ee.Z)(function*(i,e){const r=Vt(i),o=e.batch.batchId;try{const d=yield Fp(r.localStore,e);np(r,o,null),tp(r,o),r.sharedClientState.updateMutationState(o,"acknowledged"),yield $c(r,d)}catch(d){yield Vc(d)}}),ep.apply(this,arguments)}function Zp(i,e,r){return Wd.apply(this,arguments)}function Wd(){return Wd=(0,ee.Z)(function*(i,e,r){const o=Vt(i);try{const d=yield function(v,O){const $=Vt(v);return $.persistence.runTransaction("Reject batch","readwrite-primary",ue=>{let Ae;return $.An.lookupMutationBatch(ue,O).next(Ze=>(Jt(null!==Ze),Ae=Ze.keys(),$.An.removeMutationBatch(ue,Ze))).next(()=>$.An.performConsistencyCheck(ue)).next(()=>$.Wn.vn(ue,Ae))})}(o.localStore,e);np(o,e,r),tp(o,e),o.sharedClientState.updateMutationState(e,"rejected",r),yield $c(o,d)}catch(d){yield Vc(d)}}),Wd.apply(this,arguments)}function uf(){return uf=(0,ee.Z)(function*(i,e){const r=Vt(i);Bl(r.remoteStore)||W("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const o=yield function(v){const O=Vt(v);return O.persistence.runTransaction("Get highest unacknowledged batch id","readonly",$=>O.An.getHighestUnacknowledgedBatchId($))}(r.localStore);if(-1===o)return void e.resolve();const d=r.jo.get(o)||[];d.push(e),r.jo.set(o,d)}catch(o){const d=u(o,"Initialization of waitForPendingWrites() operation failed");e.reject(d)}}),uf.apply(this,arguments)}function tp(i,e){(i.jo.get(e)||[]).forEach(r=>{r.resolve()}),i.jo.delete(e)}function np(i,e,r){const o=Vt(i);let d=o.Ko[o.currentUser.toKey()];if(d){const v=d.get(e);v&&(r?v.reject(r):v.resolve(),d=d.remove(e)),o.Ko[o.currentUser.toKey()]=d}}function zd(i,e,r=null){i.sharedClientState.removeLocalQueryTarget(e);for(const o of i.Mo.get(e))i.Oo.delete(o),r&&i.Fo.zo(o,r);i.Mo.delete(e),i.isPrimaryClient&&i.qo.us(e).forEach(o=>{i.qo.containsKey(o)||om(i,o)})}function om(i,e){i.Lo.delete(e.path.canonicalString());const r=i.Bo.get(e);null!==r&&(sc(i.remoteStore,r),i.Bo=i.Bo.remove(e),i.Uo.delete(r),qp(i))}function df(i,e,r){for(const o of r)o instanceof Ul?(i.qo.addReference(o.key,e),I_(i,o)):o instanceof ac?(W("SyncEngine","Document no longer in limbo: "+o.key),i.qo.removeReference(o.key,e),i.qo.containsKey(o.key)||om(i,o.key)):ht()}function I_(i,e){const r=e.key,o=r.path.canonicalString();i.Bo.get(r)||i.Lo.has(o)||(W("SyncEngine","New document in limbo: "+r),i.Lo.add(o),qp(i))}function qp(i){for(;i.Lo.size>0&&i.Bo.size<i.maxConcurrentLimboResolutions;){const e=i.Lo.values().next().value;i.Lo.delete(e);const r=new Vn(Kr.fromString(e)),o=i.Qo.next();i.Uo.set(o,new E_(r)),i.Bo=i.Bo.insert(r,o),al(i.remoteStore,new f(Vo(Ba(r.path)),o,2,bs.I))}}function $c(i,e,r){return rd.apply(this,arguments)}function rd(){return rd=(0,ee.Z)(function*(i,e,r){const o=Vt(i),d=[],v=[],O=[];var $;o.Oo.isEmpty()||(o.Oo.forEach(($,ue)=>{O.push(o.Go(ue,e,r).then(Ae=>{if(Ae){o.isPrimaryClient&&o.sharedClientState.updateQueryState(ue.targetId,Ae.fromCache?"not-current":"current"),d.push(Ae);const Ze=Yh.$n(ue.targetId,Ae);v.push(Ze)}}))}),yield Promise.all(O),o.Fo.Pr(d),yield($=(0,ee.Z)(function*(ue,Ae){const Ze=Vt(ue);try{yield Ze.persistence.runTransaction("notifyLocalViewChanges","readwrite",dt=>Ht.forEach(Ae,Gt=>Ht.forEach(Gt.kn,on=>Ze.persistence.referenceDelegate.addReference(dt,Gt.targetId,on)).next(()=>Ht.forEach(Gt.xn,on=>Ze.persistence.referenceDelegate.removeReference(dt,Gt.targetId,on)))))}catch(dt){if(!Xs(dt))throw dt;W("LocalStore","Failed to update sequence numbers: "+dt)}for(const dt of Ae){const Gt=dt.targetId;if(!dt.fromCache){const on=Ze.qn.get(Gt),lr=on.withLastLimboFreeSnapshotVersion(on.snapshotVersion);Ze.qn=Ze.qn.insert(Gt,lr)}}}),function(ue,Ae){return $.apply(this,arguments)})(o.localStore,v))}),rd.apply(this,arguments)}function am(i,e){return Qp.apply(this,arguments)}function Qp(){return Qp=(0,ee.Z)(function*(i,e){const r=Vt(i);if(!r.currentUser.isEqual(e)){W("SyncEngine","User change. New user:",e.toKey());const o=yield Ma(r.localStore,e);r.currentUser=e,(d=r).jo.forEach(O=>{O.forEach($=>{$.reject(new Bt(Et.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),d.jo.clear(),r.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),yield $c(r,o.Gn)}var d}),Qp.apply(this,arguments)}function D_(i,e){const r=Vt(i),o=r.Uo.get(e);if(o&&o.$o)return wi().add(o.key);{let d=wi();const v=r.Mo.get(e);if(!v)return d;for(const O of v){const $=r.Oo.get(O);d=d.unionWith($.view.Po)}return d}}function Mh(i,e){return Jp.apply(this,arguments)}function Jp(){return Jp=(0,ee.Z)(function*(i,e){const r=Vt(i),o=yield qh(r.localStore,e.query,!0),d=e.view.ko(o);return r.isPrimaryClient&&df(r,e.targetId,d.Co),d}),Jp.apply(this,arguments)}function T_(i){return Xp.apply(this,arguments)}function Xp(){return Xp=(0,ee.Z)(function*(i){const e=Vt(i);return Nd(e.localStore).then(r=>$c(e,r))}),Xp.apply(this,arguments)}function S_(i,e,r,o){return Ya.apply(this,arguments)}function Ya(){return Ya=(0,ee.Z)(function*(i,e,r,o){const d=Vt(i),v=yield function(O,$){const ue=Vt(O),Ae=Vt(ue.An);return ue.persistence.runTransaction("Lookup mutation documents","readonly",Ze=>Ae.Zt(Ze,$).next(dt=>dt?ue.Wn.vn(Ze,dt):Ht.resolve(null)))}(d.localStore,e);var $;null!==v?("pending"===r?yield $d(d.remoteStore):"acknowledged"===r||"rejected"===r?(np(d,e,o||null),tp(d,e),$=e,Vt(Vt(d.localStore).An).ee($)):ht(),yield $c(d,v)):W("SyncEngine","Cannot apply mutation batch with id: "+e)}),Ya.apply(this,arguments)}function rp(){return rp=(0,ee.Z)(function*(i,e){const r=Vt(i);if(lm(r),op(r),!0===e&&!0!==r.Wo){const o=r.sharedClientState.getAllActiveQueryTargets(),d=yield tg(r,o.toArray());r.Wo=!0,yield cf(r.remoteStore,!0);for(const v of d)al(r.remoteStore,v)}else if(!1===e&&!1!==r.Wo){const o=[];let d=Promise.resolve();r.Mo.forEach((v,O)=>{r.sharedClientState.isLocalQueryTarget(O)?o.push(O):d=d.then(()=>(zd(r,O),ic(r.localStore,O,!0))),sc(r.remoteStore,O)}),yield d,yield tg(r,o),function(v){const O=Vt(v);O.Uo.forEach(($,ue)=>{sc(O.remoteStore,ue)}),O.qo.hs(),O.Uo=new Map,O.Bo=new xi(Vn.comparator)}(r),r.Wo=!1,yield cf(r.remoteStore,!1)}}),rp.apply(this,arguments)}function tg(i,e,r){return ip.apply(this,arguments)}function ip(){return ip=(0,ee.Z)(function*(i,e,r){const o=Vt(i),d=[],v=[];for(const O of e){let $;const ue=o.Mo.get(O);if(ue&&0!==ue.length){$=yield mo(o.localStore,Vo(ue[0]));for(const Ae of ue){const Ze=o.Oo.get(Ae),dt=yield Mh(o,Ze);dt.snapshot&&v.push(dt.snapshot)}}else{const Ae=yield kd(o.localStore,O);$=yield mo(o.localStore,Ae),yield Kp(o,ng(Ae),O,!1)}d.push($)}return o.Fo.Pr(v),d}),ip.apply(this,arguments)}function ng(i){return sa(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function A_(i){const e=Vt(i);return Vt(Vt(e.localStore).persistence).Tn()}function M_(i,e,r,o){return rg.apply(this,arguments)}function rg(){return rg=(0,ee.Z)(function*(i,e,r,o){const d=Vt(i);if(d.Wo)W("SyncEngine","Ignoring unexpected query state notification.");else if(d.Mo.has(e))switch(r){case"current":case"not-current":{const v=yield Nd(d.localStore),O=ou.createSynthesizedRemoteEventForCurrentChange(e,"current"===r);yield $c(d,v,O);break}case"rejected":yield ic(d.localStore,e,!0),zd(d,e,o);break;default:ht()}}),rg.apply(this,arguments)}function x_(i,e,r){return sp.apply(this,arguments)}function sp(){return sp=(0,ee.Z)(function*(i,e,r){const o=lm(i);if(o.Wo){for(const d of e){if(o.Mo.has(d)){W("SyncEngine","Adding an already active target "+d);continue}const v=yield kd(o.localStore,d),O=yield mo(o.localStore,v);yield Kp(o,ng(v),O.targetId,!1),al(o.remoteStore,O)}for(const d of r)o.Mo.has(d)&&(yield ic(o.localStore,d,!1).then(()=>{sc(o.remoteStore,d),zd(o,d)}).catch(Vc))}}),sp.apply(this,arguments)}function lm(i){const e=Vt(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=Gc.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=D_.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=w_.bind(null,e),e.Fo.Pr=kt.bind(null,e.eventManager),e.Fo.zo=Ot.bind(null,e.eventManager),e}function op(i){const e=Vt(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Yp.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Zp.bind(null,e),e}class cm{constructor(){this.synchronizeTabs=!1}initialize(e){var r=this;return(0,ee.Z)(function*(){r.k=Vd(e.databaseInfo.databaseId),r.sharedClientState=r.Jo(e),r.persistence=r.Yo(e),yield r.persistence.start(),r.gcScheduler=r.Xo(e),r.localStore=r.Zo(e)})()}Xo(e){return null}Zo(e){return Pd(this.persistence,new Zh,e.initialUser,this.k)}Yo(e){return new Nf(ed.ks,this.k)}Jo(e){return new jp}terminate(){var e=this;return(0,ee.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class R_ extends cm{constructor(e,r,o){super(),this.ta=e,this.cacheSizeBytes=r,this.forceOwnership=o,this.synchronizeTabs=!1}initialize(e){var r=()=>super.initialize,o=this;return(0,ee.Z)(function*(){yield r().call(o,e),yield function(i){return Fd.apply(this,arguments)}(o.localStore),yield o.ta.initialize(o,e),yield op(o.ta.syncEngine),yield $d(o.ta.remoteStore),yield o.persistence.sn(()=>(o.gcScheduler&&!o.gcScheduler.started&&o.gcScheduler.start(o.localStore),Promise.resolve()))})()}Zo(e){return Pd(this.persistence,new Zh,e.initialUser,this.k)}Xo(e){return new Od(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}Yo(e){const r=Kh(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),o=void 0!==this.cacheSizeBytes?xo.withCacheSize(this.cacheSizeBytes):xo.DEFAULT;return new zh(this.synchronizeTabs,r,e.clientId,o,e.asyncQueue,tf(),Iu(),this.k,this.sharedClientState,!!this.forceOwnership)}Jo(e){return new jp}}class ov extends R_{constructor(e,r){super(e,r,!1),this.ta=e,this.cacheSizeBytes=r,this.synchronizeTabs=!0}initialize(e){var r=()=>super.initialize,o=this;return(0,ee.Z)(function*(){yield r().call(o,e);const d=o.ta.syncEngine;o.sharedClientState instanceof Uf&&(o.sharedClientState.syncEngine={mi:S_.bind(null,d),gi:M_.bind(null,d),yi:x_.bind(null,d),Tn:A_.bind(null,d),_i:T_.bind(null,d)},yield o.sharedClientState.start()),yield o.persistence.sn(function(){var v=(0,ee.Z)(function*(O){yield function(i,e){return rp.apply(this,arguments)}(o.ta.syncEngine,O),o.gcScheduler&&(O&&!o.gcScheduler.started?o.gcScheduler.start(o.localStore):O||o.gcScheduler.stop())});return function(O){return v.apply(this,arguments)}}())})()}Jo(e){const r=tf();if(!Uf.bt(r))throw new Bt(Et.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const o=Kh(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Uf(r,e.asyncQueue,o,e.clientId,e.initialUser)}}class hf{initialize(e,r){var o=this;return(0,ee.Z)(function*(){o.localStore||(o.localStore=e.localStore,o.sharedClientState=e.sharedClientState,o.datastore=o.createDatastore(r),o.remoteStore=o.createRemoteStore(r),o.eventManager=o.createEventManager(r),o.syncEngine=o.createSyncEngine(r,!e.synchronizeTabs),o.sharedClientState.onlineStateHandler=d=>im(o.syncEngine,d,1),o.remoteStore.remoteSyncer.handleCredentialChange=am.bind(null,o.syncEngine),yield cf(o.remoteStore,o.syncEngine.isPrimaryClient))})()}createEventManager(e){return new k}createDatastore(e){const r=Vd(e.databaseInfo.databaseId),o=new Bd(e.databaseInfo);return new Hf(e.authCredentials,e.appCheckCredentials,o,r)}createRemoteStore(e){return r=this.localStore,o=this.datastore,d=e.asyncQueue,v=$=>im(this.syncEngine,$,0),O=bh.bt()?new bh:new jc,new Zg(r,o,d,v,O);var r,o,d,v,O}createSyncEngine(e,r){return function(o,d,v,O,$,ue,Ae){const Ze=new b_(o,d,v,O,$,ue);return Ae&&(Ze.Wo=!0),Ze}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}terminate(){return(e=(0,ee.Z)(function*(r){const o=Vt(r);W("RemoteStore","RemoteStore shutting down."),o.Gr.add(5),yield Fl(o),o.Hr.shutdown(),o.Jr.set("Unknown")}),function(r){return e.apply(this,arguments)})(this.remoteStore);var e}}function um(i,e=10240){let r=0;return{read:()=>(0,ee.Z)(function*(){if(r<i.byteLength){const o={value:i.slice(r,r+e),done:!1};return r+=e,o}return{done:!0}})(),cancel:()=>(0,ee.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class ff{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.ea(this.observer.next,e)}error(e){this.observer.error?this.ea(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}na(){this.muted=!0}ea(e,r){this.muted||setTimeout(()=>{this.muted||e(r)},0)}}class dm{constructor(e,r){this.sa=e,this.k=r,this.metadata=new Xr,this.buffer=new Uint8Array,this.ia=new TextDecoder("utf-8"),this.ra().then(o=>{o&&o._o()?this.metadata.resolve(o.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==o?void 0:o.payload)}`))},o=>this.metadata.reject(o))}close(){return this.sa.cancel()}getMetadata(){var e=this;return(0,ee.Z)(function*(){return e.metadata.promise})()}Ho(){var e=this;return(0,ee.Z)(function*(){return yield e.getMetadata(),e.ra()})()}ra(){var e=this;return(0,ee.Z)(function*(){const r=yield e.oa();if(null===r)return null;const o=e.ia.decode(r),d=Number(o);isNaN(d)&&e.aa(`length string (${o}) is not valid number`);const v=yield e.ca(d);return new cr(JSON.parse(v),r.length+d)})()}ua(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}oa(){var e=this;return(0,ee.Z)(function*(){for(;e.ua()<0&&!(yield e.ha()););if(0===e.buffer.length)return null;const r=e.ua();r<0&&e.aa("Reached the end of bundle when a length string is expected.");const o=e.buffer.slice(0,r);return e.buffer=e.buffer.slice(r),o})()}ca(e){var r=this;return(0,ee.Z)(function*(){for(;r.buffer.length<e;)(yield r.ha())&&r.aa("Reached the end of bundle when more is expected.");const o=r.ia.decode(r.buffer.slice(0,e));return r.buffer=r.buffer.slice(e),o})()}aa(e){throw this.sa.cancel(),new Error(`Invalid bundle format: ${e}`)}ha(){var e=this;return(0,ee.Z)(function*(){const r=yield e.sa.read();if(!r.done){const o=new Uint8Array(e.buffer.length+r.value.length);o.set(e.buffer),o.set(r.value,e.buffer.length),e.buffer=o}return r.done})()}}class av{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var r=this;return(0,ee.Z)(function*(){if(r.ensureCommitNotCalled(),r.mutations.length>0)throw new Bt(Et.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const o=yield(d=(0,ee.Z)(function*(v,O){const $=Vt(v),ue=Ml($.k)+"/documents",Ae={documents:O.map(on=>Mc($.k,on))},Ze=yield $.ji("BatchGetDocuments",ue,Ae),dt=new Map;Ze.forEach(on=>{const wn=function(i,e){return"found"in e?function(r,o){Jt(!!o.found);const d=fa(r,o.found.name),v=$s(o.found.updateTime),O=new is({mapValue:{fields:o.found.fields}});return Vi.newFoundDocument(d,v,O)}(i,e):"missing"in e?function(r,o){Jt(!!o.missing),Jt(!!o.readTime);const d=fa(r,o.missing),v=$s(o.readTime);return Vi.newNoDocument(d,v)}(i,e):ht()}($.k,on);dt.set(wn.key.toString(),wn)});const Gt=[];return O.forEach(on=>{const wn=dt.get(on.toString());Jt(!!wn),Gt.push(wn)}),Gt}),function(v,O){return d.apply(this,arguments)})(r.datastore,e);var d;return o.forEach(d=>r.recordVersion(d)),o})()}set(e,r){this.write(r.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,r){try{this.write(r.toMutation(e,this.preconditionForUpdate(e)))}catch(o){this.lastWriteError=o}this.writtenDocs.add(e.toString())}delete(e){this.write(new iu(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,ee.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const r=e.readVersions;var o;e.mutations.forEach(o=>{r.delete(o.key.toString())}),r.forEach((o,d)=>{const v=Vn.fromPath(d);e.mutations.push(new gd(v,e.precondition(v)))}),yield(o=(0,ee.Z)(function*(d,v){const O=Vt(d),$=Ml(O.k)+"/documents",ue={writes:v.map(Ae=>ql(O.k,Ae))};yield O.Bi("Commit",$,ue)}),function(d,v){return o.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let r;if(e.isFoundDocument())r=e.version;else{if(!e.isNoDocument())throw ht();r=$n.min()}const o=this.readVersions.get(e.key.toString());if(o){if(!r.isEqual(o))throw new Bt(Et.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),r)}precondition(e){const r=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&r?Hs.updateTime(r):Hs.none()}preconditionForUpdate(e){const r=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&r){if(r.isEqual($n.min()))throw new Bt(Et.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Hs.updateTime(r)}return Hs.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class lc{constructor(e,r,o,d){this.asyncQueue=e,this.datastore=r,this.updateFunction=o,this.deferred=d,this.la=5,this.ur=new Nl(this.asyncQueue,"transaction_retry")}run(){this.la-=1,this.fa()}fa(){var e=this;this.ur.Zi((0,ee.Z)(function*(){const r=new av(e.datastore),o=e.da(r);o&&o.then(d=>{e.asyncQueue.enqueueAndForget(()=>r.commit().then(()=>{e.deferred.resolve(d)}).catch(v=>{e.wa(v)}))}).catch(d=>{e.wa(d)})}))}da(e){try{const r=this.updateFunction(e);return!qs(r)&&r.catch&&r.then?r:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(r){return this.deferred.reject(r),null}}wa(e){this.la>0&&this._a(e)?(this.la-=1,this.asyncQueue.enqueueAndForget(()=>(this.fa(),Promise.resolve()))):this.deferred.reject(e)}_a(e){if("FirebaseError"===e.name){const r=e.code;return"aborted"===r||"failed-precondition"===r||!Zl(r)}return!1}}class lv{constructor(e,r,o,d){var v=this;this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=o,this.databaseInfo=d,this.user=Bi.UNAUTHENTICATED,this.clientId=aa.A(),this.authCredentialListener=()=>Promise.resolve(),this.authCredentials.start(o,function(){var O=(0,ee.Z)(function*($){W("FirestoreClient","Received user=",$.uid),yield v.authCredentialListener($),v.user=$});return function($){return O.apply(this,arguments)}}()),this.appCheckCredentials.start(o,()=>Promise.resolve())}getConfiguration(){var e=this;return(0,ee.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Bt(Et.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const r=new Xr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,ee.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),r.resolve()}catch(o){const d=u(o,"Failed to shutdown persistence");r.reject(d)}})),r.promise}}function P_(i,e){return ap.apply(this,arguments)}function ap(){return ap=(0,ee.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),W("FirestoreClient","Initializing OfflineComponentProvider");const r=yield i.getConfiguration();yield e.initialize(r);let o=r.initialUser;i.setCredentialChangeListener(function(){var d=(0,ee.Z)(function*(v){o.isEqual(v)||(yield Ma(e.localStore,v),o=v)});return function(v){return d.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i.offlineComponents=e}),ap.apply(this,arguments)}function ig(i,e){return lp.apply(this,arguments)}function lp(){return lp=(0,ee.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const r=yield sg(i);W("FirestoreClient","Initializing OnlineComponentProvider");const o=yield i.getConfiguration();yield e.initialize(r,o),i.setCredentialChangeListener(d=>{return(v=(0,ee.Z)(function*(O,$){const ue=Vt(O);ue.asyncQueue.verifyOperationInProgress(),W("RemoteStore","RemoteStore received new credentials");const Ae=Bl(ue);ue.Gr.add(3),yield Fl(ue),Ae&&ue.Jr.set("Unknown"),yield ue.remoteSyncer.handleCredentialChange($),ue.Gr.delete(3),yield Ch(ue)}),function(O,$){return v.apply(this,arguments)})(e.remoteStore,d);var v}),i.onlineComponents=e}),lp.apply(this,arguments)}function sg(i){return hm.apply(this,arguments)}function hm(){return hm=(0,ee.Z)(function*(i){return i.offlineComponents||(W("FirestoreClient","Using default OfflineComponentProvider"),yield P_(i,new cm)),i.offlineComponents}),hm.apply(this,arguments)}function pf(i){return gf.apply(this,arguments)}function gf(){return gf=(0,ee.Z)(function*(i){return i.onlineComponents||(W("FirestoreClient","Using default OnlineComponentProvider"),yield ig(i,new hf)),i.onlineComponents}),gf.apply(this,arguments)}function fm(i){return sg(i).then(e=>e.persistence)}function mf(i){return sg(i).then(e=>e.localStore)}function pm(i){return pf(i).then(e=>e.remoteStore)}function og(i){return pf(i).then(e=>e.syncEngine)}function xh(i){return ag.apply(this,arguments)}function ag(){return ag=(0,ee.Z)(function*(i){const e=yield pf(i),r=e.eventManager;return r.onListen=zp.bind(null,e.syncEngine),r.onUnlisten=nm.bind(null,e.syncEngine),r}),ag.apply(this,arguments)}function Kd(i,e,r={}){const o=new Xr;return i.asyncQueue.enqueueAndForget((0,ee.Z)(function*(){return function(d,v,O,$,ue){const Ae=new ff({next:dt=>{v.enqueueAndForget(()=>ke(d,Ze));const Gt=dt.docs.has(O);!Gt&&dt.fromCache?ue.reject(new Bt(Et.UNAVAILABLE,"Failed to get document because the client is offline.")):Gt&&dt.fromCache&&$&&"server"===$.source?ue.reject(new Bt(Et.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):ue.resolve(dt)},error:dt=>ue.reject(dt)}),Ze=new Hn(Ba(O.path),Ae,{includeMetadataChanges:!0,wo:!0});return K(d,Ze)}(yield xh(i),i.asyncQueue,e,r,o)})),o.promise}function Oh(i,e,r={}){const o=new Xr;return i.asyncQueue.enqueueAndForget((0,ee.Z)(function*(){return function(d,v,O,$,ue){const Ae=new ff({next:dt=>{v.enqueueAndForget(()=>ke(d,Ze)),dt.fromCache&&"server"===$.source?ue.reject(new Bt(Et.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):ue.resolve(dt)},error:dt=>ue.reject(dt)}),Ze=new Hn(O,Ae,{includeMetadataChanges:!0,wo:!0});return K(d,Ze)}(yield xh(i),i.asyncQueue,e,r,o)})),o.promise}class _f{constructor(e,r,o,d,v,O,$,ue){this.databaseId=e,this.appId=r,this.persistenceKey=o,this.host=d,this.ssl=v,this.forceLongPolling=O,this.autoDetectLongPolling=$,this.useFetchStreams=ue}}class Co{constructor(e,r){this.projectId=e,this.database=r||"(default)"}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Co&&e.projectId===this.projectId&&e.database===this.database}}const id=new Map;function Rh(i,e,r){if(!r)throw new Bt(Et.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function ll(i,e,r,o){if(!0===e&&!0===o)throw new Bt(Et.INVALID_ARGUMENT,`${i} and ${r} cannot be used together.`)}function up(i){if(!Vn.isDocumentKey(i))throw new Bt(Et.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function Yd(i){if(Vn.isDocumentKey(i))throw new Bt(Et.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Du(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(r=i).constructor?r.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var r;return"function"==typeof i?"a function":ht()}function $r(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new Bt(Et.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=Du(i);throw new Bt(Et.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return i}function Zd(i,e){if(e<=0)throw new Bt(Et.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}class qd{constructor(e){var r;if(void 0===e.host){if(void 0!==e.ssl)throw new Bt(Et.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(r=e.ssl)||void 0===r||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Bt(Et.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,ll("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class zc{constructor(e,r,o){this._authCredentials=r,this._appCheckCredentials=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new qd({}),this._settingsFrozen=!1,e instanceof Co?this._databaseId=e:(this._app=e,this._databaseId=function(d){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Bt(Et.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Co(d.options.projectId)}(e))}get app(){if(!this._app)throw new Bt(Et.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Bt(Et.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new qd(e),void 0!==e.credentials&&(this._authCredentials=function(r){if(!r)return new ei;switch(r.type){case"gapi":const o=r.client;return Jt(!("object"!=typeof o||null===o||!o.auth||!o.auth.getAuthHeaderValueForFirstParty)),new _a(o,r.sessionIndex||"0",r.iamToken||null);case"provider":return r.client;default:throw new Bt(Et.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const r=id.get(e);r&&(W("ComponentProvider","Removing Datastore"),id.delete(e),r.terminate())}(this),Promise.resolve()}}class zi{constructor(e,r,o){this.converter=r,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new cc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new zi(this.firestore,e,this._key)}}class Io{constructor(e,r,o){this.converter=r,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new Io(this.firestore,e,this._query)}}class cc extends Io{constructor(e,r,o){super(e,r,Ba(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new zi(this.firestore,null,new Vn(e))}withConverter(e){return new cc(this.firestore,e,this._path)}}function cg(i,e,...r){if(i=(0,rt.m9)(i),Rh("collection","path",e),i instanceof zc){const o=Kr.fromString(e,...r);return Yd(o),new cc(i,null,o)}{if(!(i instanceof zi||i instanceof cc))throw new Bt(Et.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(Kr.fromString(e,...r));return Yd(o),new cc(i.firestore,null,o)}}function yf(i,e,...r){if(i=(0,rt.m9)(i),1===arguments.length&&(e=aa.A()),Rh("doc","path",e),i instanceof zc){const o=Kr.fromString(e,...r);return up(o),new zi(i,null,new Vn(o))}{if(!(i instanceof zi||i instanceof cc))throw new Bt(Et.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(Kr.fromString(e,...r));return up(o),new zi(i.firestore,i instanceof cc?i.converter:null,new Vn(o))}}function ug(i,e){return i=(0,rt.m9)(i),e=(0,rt.m9)(e),(i instanceof zi||i instanceof cc)&&(e instanceof zi||e instanceof cc)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function dg(i,e){return i=(0,rt.m9)(i),e=(0,rt.m9)(e),i instanceof Io&&e instanceof Io&&i.firestore===e.firestore&&Ea(i._query,e._query)&&i.converter===e.converter}class mm{constructor(){this.ma=Promise.resolve(),this.ga=[],this.ya=!1,this.pa=[],this.Ta=null,this.Ea=!1,this.Ia=!1,this.Aa=[],this.ur=new Nl(this,"async_queue_retry"),this.Ra=()=>{const r=Iu();r&&W("AsyncQueue","Visibility state changed to "+r.visibilityState),this.ur.er()};const e=Iu();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ra)}get isShuttingDown(){return this.ya}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Pa(),this.ba(e)}enterRestrictedMode(e){if(!this.ya){this.ya=!0,this.Ia=e||!1;const r=Iu();r&&"function"==typeof r.removeEventListener&&r.removeEventListener("visibilitychange",this.Ra)}}enqueue(e){if(this.Pa(),this.ya)return new Promise(()=>{});const r=new Xr;return this.ba(()=>this.ya&&this.Ia?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ga.push(e),this.va()))}va(){var e=this;return(0,ee.Z)(function*(){if(0!==e.ga.length){try{yield e.ga[0](),e.ga.shift(),e.ur.reset()}catch(r){if(!Xs(r))throw r;W("AsyncQueue","Operation failed with retryable error: "+r)}e.ga.length>0&&e.ur.Zi(()=>e.va())}})()}ba(e){const r=this.ma.then(()=>(this.Ea=!0,e().catch(o=>{throw this.Ta=o,this.Ea=!1,pe("INTERNAL UNHANDLED ERROR: ",function(v){let O=v.message||"";return v.stack&&(O=v.stack.includes(v.message)?v.stack:v.message+"\n"+v.stack),O}(o)),o}).then(o=>(this.Ea=!1,o))));return this.ma=r,r}enqueueAfterDelay(e,r,o){this.Pa(),this.Aa.indexOf(e)>-1&&(r=0);const d=qf.createAndSchedule(this,e,r,o,v=>this.Va(v));return this.pa.push(d),d}Pa(){this.Ta&&ht()}verifyOperationInProgress(){}Sa(){var e=this;return(0,ee.Z)(function*(){let r;do{r=e.ma,yield r}while(r!==e.ma)})()}Da(e){for(const r of this.pa)if(r.timerId===e)return!0;return!1}Ca(e){return this.Sa().then(()=>{this.pa.sort((r,o)=>r.targetTimeMs-o.targetTimeMs);for(const r of this.pa)if(r.skipDelay(),"all"!==e&&r.timerId===e)break;return this.Sa()})}Na(e){this.Aa.push(e)}Va(e){const r=this.pa.indexOf(e);this.pa.splice(r,1)}}function dp(i){return function(e,r){if("object"!=typeof e||null===e)return!1;const o=e;for(const d of["next","error","complete"])if(d in o&&"function"==typeof o[d])return!0;return!1}(i)}class _m{constructor(){this._progressObserver={},this._taskCompletionResolver=new Xr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,r,o){this._progressObserver={next:e,error:r,complete:o}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,r){return this._taskCompletionResolver.promise.then(e,r)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Ws extends zc{constructor(e,r,o){super(e,r,o),this.type="firestore",this._queue=new mm,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||ym(this),this._firestoreClient.terminate()}}function Ro(i){return i._firestoreClient||ym(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function ym(i){var e;const r=i._freezeSettings(),o=(v=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new _f(i._databaseId,v,i._persistenceKey,($=r).host,$.ssl,$.experimentalForceLongPolling,$.experimentalAutoDetectLongPolling,$.useFetchStreams));var v,$;i._firestoreClient=new lv(i._authCredentials,i._appCheckCredentials,i._queue,o)}function Em(i,e,r){const o=new Xr;return i.asyncQueue.enqueue((0,ee.Z)(function*(){try{yield P_(i,r),yield ig(i,e),o.resolve()}catch(d){if(!("FirebaseError"===(v=d).name?v.code===Et.FAILED_PRECONDITION||v.code===Et.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&v instanceof DOMException)||22===v.code||20===v.code||11===v.code))throw d;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+d),o.reject(d)}var v})).then(()=>o.promise)}function wm(i){if(i._initialized||i._terminated)throw new Bt(Et.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class sd{constructor(...e){for(let r=0;r<e.length;++r)if(0===e[r].length)throw new Bt(Et.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ho(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Tu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Tu(hi.fromBase64String(e))}catch(r){throw new Bt(Et.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new Tu(hi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Qd{constructor(e){this._methodName=e}}class vf{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new Bt(Et.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new Bt(Et.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Tr(this._lat,e._lat)||Tr(this._long,e._long)}}const hv=/^__.*__$/;class $_{constructor(e,r,o){this.data=e,this.fieldMask=r,this.fieldTransforms=o}toMutation(e,r){return null!==this.fieldMask?new ja(e,this.data,this.fieldMask,r,this.fieldTransforms):new Ua(e,this.data,r,this.fieldTransforms)}}class Jd{constructor(e,r,o){this.data=e,this.fieldMask=r,this.fieldTransforms=o}toMutation(e,r){return new ja(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function Cm(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ht()}}class Ef{constructor(e,r,o,d,v,O){this.settings=e,this.databaseId=r,this.k=o,this.ignoreUndefinedProperties=d,void 0===v&&this.ka(),this.fieldTransforms=v||[],this.fieldMask=O||[]}get path(){return this.settings.path}get xa(){return this.settings.xa}$a(e){return new Ef(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.k,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Fa(e){var r;const o=null===(r=this.path)||void 0===r?void 0:r.child(e),d=this.$a({path:o,Oa:!1});return d.Ma(e),d}La(e){var r;const o=null===(r=this.path)||void 0===r?void 0:r.child(e),d=this.$a({path:o,Oa:!1});return d.ka(),d}Ba(e){return this.$a({path:void 0,Oa:!0})}Ua(e){return ld(e,this.settings.methodName,this.settings.qa||!1,this.path,this.settings.Ka)}contains(e){return void 0!==this.fieldMask.find(r=>e.isPrefixOf(r))||void 0!==this.fieldTransforms.find(r=>e.isPrefixOf(r.field))}ka(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ma(this.path.get(e))}Ma(e){if(0===e.length)throw this.Ua("Document fields must not be empty");if(Cm(this.xa)&&hv.test(e))throw this.Ua('Document fields cannot begin and end with "__"')}}class W_{constructor(e,r,o){this.databaseId=e,this.ignoreUndefinedProperties=r,this.k=o||Vd(e)}ja(e,r,o,d=!1){return new Ef({xa:e,methodName:r,Ka:o,path:ho.emptyPath(),Oa:!1,qa:d},this.databaseId,this.k,this.ignoreUndefinedProperties)}}function od(i){const e=i._freezeSettings(),r=Vd(i._databaseId);return new W_(i._databaseId,!!e.ignoreUndefinedProperties,r)}function Xd(i,e,r,o,d,v={}){const O=i.ja(v.merge||v.mergeFields?2:0,e,r,d);Dm("Data must be an object, but it was:",O,o);const $=_g(o,O);let ue,Ae;if(v.merge)ue=new So(O.fieldMask),Ae=O.fieldTransforms;else if(v.mergeFields){const Ze=[];for(const dt of v.mergeFields){const Gt=wf(e,dt,r);if(!O.contains(Gt))throw new Bt(Et.INVALID_ARGUMENT,`Field '${Gt}' is specified in your field mask but missing from your input data.`);yg(Ze,Gt)||Ze.push(Gt)}ue=new So(Ze),Ae=O.fieldTransforms.filter(dt=>ue.covers(dt.field))}else ue=null,Ae=O.fieldTransforms;return new $_(new is($),ue,Ae)}class bf extends Qd{_toFieldTransform(e){if(2!==e.xa)throw e.Ua(1===e.xa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof bf}}function pg(i,e,r){return new Ef({xa:3,Ka:e.settings.Ka,methodName:i._methodName,Oa:r},e.databaseId,e.k,e.ignoreUndefinedProperties)}class gg extends Qd{_toFieldTransform(e){return new wa(e.path,new Ja)}isEqual(e){return e instanceof gg}}class z_ extends Qd{constructor(e,r){super(e),this.Qa=r}_toFieldTransform(e){const r=pg(this,e,!0),o=this.Qa.map(v=>ad(v,r)),d=new Mo(o);return new wa(e.path,d)}isEqual(e){return this===e}}class K_ extends Qd{constructor(e,r){super(e),this.Qa=r}_toFieldTransform(e){const r=pg(this,e,!0),o=this.Qa.map(v=>ad(v,r)),d=new ua(o);return new wa(e.path,d)}isEqual(e){return this===e}}class Y_ extends Qd{constructor(e,r){super(e),this.Wa=r}_toFieldTransform(e){const r=new Dl(e.k,oh(e.k,this.Wa));return new wa(e.path,r)}isEqual(e){return this===e}}function mg(i,e,r,o){const d=i.ja(1,e,r);Dm("Data must be an object, but it was:",d,o);const v=[],O=is.empty();jr(o,(ue,Ae)=>{const Ze=Tm(e,ue,r);Ae=(0,rt.m9)(Ae);const dt=d.La(Ze);if(Ae instanceof bf)v.push(Ze);else{const Gt=ad(Ae,dt);null!=Gt&&(v.push(Ze),O.set(Ze,Gt))}});const $=new So(v);return new Jd(O,$,d.fieldTransforms)}function hp(i,e,r,o,d,v){const O=i.ja(1,e,r),$=[wf(e,o,r)],ue=[d];if(v.length%2!=0)throw new Bt(Et.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Gt=0;Gt<v.length;Gt+=2)$.push(wf(e,v[Gt])),ue.push(v[Gt+1]);const Ae=[],Ze=is.empty();for(let Gt=$.length-1;Gt>=0;--Gt)if(!yg(Ae,$[Gt])){const on=$[Gt];let wn=ue[Gt];wn=(0,rt.m9)(wn);const lr=O.La(on);if(wn instanceof bf)Ae.push(on);else{const kr=ad(wn,lr);null!=kr&&(Ae.push(on),Ze.set(on,kr))}}const dt=new So(Ae);return new Jd(Ze,dt,O.fieldTransforms)}function Im(i,e,r,o=!1){return ad(r,i.ja(o?4:3,e))}function ad(i,e){if(fp(i=(0,rt.m9)(i)))return Dm("Unsupported field value:",e,i),_g(i,e);if(i instanceof Qd)return function(r,o){if(!Cm(o.xa))throw o.Ua(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Ua(`${r._methodName}() is not currently supported inside arrays`);const d=r._toFieldTransform(o);d&&o.fieldTransforms.push(d)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.Oa&&4!==e.xa)throw e.Ua("Nested arrays are not supported");return function(r,o){const d=[];let v=0;for(const O of r){let $=ad(O,o.Ba(v));null==$&&($={nullValue:"NULL_VALUE"}),d.push($),v++}return{arrayValue:{values:d}}}(i,e)}return function(r,o){if(null===(r=(0,rt.m9)(r)))return{nullValue:"NULL_VALUE"};if("number"==typeof r)return oh(o.k,r);if("boolean"==typeof r)return{booleanValue:r};if("string"==typeof r)return{stringValue:r};if(r instanceof Date){const d=di.fromDate(r);return{timestampValue:Ha(o.k,d)}}if(r instanceof di){const d=new di(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ha(o.k,d)}}if(r instanceof vf)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Tu)return{bytesValue:Ac(o.k,r._byteString)};if(r instanceof zi){const d=o.databaseId,v=r.firestore._databaseId;if(!v.isEqual(d))throw o.Ua(`Document reference is for database ${v.projectId}/${v.database} but should be for database ${d.projectId}/${d.database}`);return{referenceValue:Yo(r.firestore._databaseId||o.databaseId,r._key.path)}}throw o.Ua(`Unsupported field value: ${Du(r)}`)}(i,e)}function _g(i,e){const r={};return pl(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):jr(i,(o,d)=>{const v=ad(d,e.Fa(o));null!=v&&(r[o]=v)}),{mapValue:{fields:r}}}function fp(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof di||i instanceof vf||i instanceof Tu||i instanceof zi||i instanceof Qd)}function Dm(i,e,r){if(!fp(r)||"object"!=typeof(o=r)||null===o||Object.getPrototypeOf(o)!==Object.prototype&&null!==Object.getPrototypeOf(o)){const o=Du(r);throw e.Ua("an object"===o?i+" a custom object":i+" "+o)}var o}function wf(i,e,r){if((e=(0,rt.m9)(e))instanceof sd)return e._internalPath;if("string"==typeof e)return Tm(i,e);throw ld("Field path arguments must be of type string or FieldPath.",i,!1,void 0,r)}const Z_=new RegExp("[~\\*/\\[\\]]");function Tm(i,e,r){if(e.search(Z_)>=0)throw ld(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,r);try{return new sd(...e.split("."))._internalPath}catch(o){throw ld(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,r)}}function ld(i,e,r,o,d){const v=o&&!o.isEmpty(),O=void 0!==d;let $=`Function ${e}() called with invalid data`;r&&($+=" (via `toFirestore()`)"),$+=". ";let ue="";return(v||O)&&(ue+=" (found",v&&(ue+=` in field ${o}`),O&&(ue+=` in document ${d}`),ue+=")"),new Bt(Et.INVALID_ARGUMENT,$+i+ue)}function yg(i,e){return i.some(r=>r.isEqual(e))}class eh{constructor(e,r,o,d,v){this._firestore=e,this._userDataWriter=r,this._key=o,this._document=d,this._converter=v}get id(){return this._key.path.lastSegment()}get ref(){return new zi(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new vg(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(pp("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r)}}}class vg extends eh{data(){return super.data()}}function pp(i,e){return"string"==typeof e?Tm(i,e):e instanceof sd?e._internalPath:e._delegate._internalPath}class Su{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class uc extends eh{constructor(e,r,o,d,v,O){super(e,r,o,d,O),this._firestore=e,this._firestoreImpl=e,this.metadata=v}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new kh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const o=this._document.data.field(pp("DocumentSnapshot.get",e));if(null!==o)return this._userDataWriter.convertValue(o,r.serverTimestamps)}}}class kh extends uc{data(e={}){return super.data(e)}}class th{constructor(e,r,o,d){this._firestore=e,this._userDataWriter=r,this._snapshot=d,this.metadata=new Su(d.hasPendingWrites,d.fromCache),this.query=o}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,r){this._snapshot.docs.forEach(o=>{e.call(r,new kh(this._firestore,this._userDataWriter,o.key,o,new Su(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Bt(Et.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(o,d){if(o._snapshot.oldDocs.isEmpty()){let v=0;return o._snapshot.docChanges.map(O=>({type:"added",doc:new kh(o._firestore,o._userDataWriter,O.doc.key,O.doc,new Su(o._snapshot.mutatedKeys.has(O.doc.key),o._snapshot.fromCache),o.query.converter),oldIndex:-1,newIndex:v++}))}{let v=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(O=>d||3!==O.type).map(O=>{const $=new kh(o._firestore,o._userDataWriter,O.doc.key,O.doc,new Su(o._snapshot.mutatedKeys.has(O.doc.key),o._snapshot.fromCache),o.query.converter);let ue=-1,Ae=-1;return 0!==O.type&&(ue=v.indexOf(O.doc.key),v=v.delete(O.doc.key)),1!==O.type&&(v=v.add(O.doc),Ae=v.indexOf(O.doc.key)),{type:q_(O.type),doc:$,oldIndex:ue,newIndex:Ae}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function q_(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ht()}}function gp(i,e){return i instanceof uc&&e instanceof uc?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof th&&e instanceof th&&i._firestore===e._firestore&&dg(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}function mp(i){if(bl(i)&&0===i.explicitOrderBy.length)throw new Bt(Et.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Nh{}function Au(i,...e){for(const r of e)i=r._apply(i);return i}class Eg extends Nh{constructor(e,r,o){super(),this.Ga=e,this.za=r,this.Ha=o,this.type="where"}_apply(e){const r=od(e.firestore),o=function(d,v,O,$,ue,Ae,Ze){let dt;if(ue.isKeyField()){if("array-contains"===Ae||"array-contains-any"===Ae)throw new Bt(Et.INVALID_ARGUMENT,`Invalid Query. You can't perform '${Ae}' queries on FieldPath.documentId().`);if("in"===Ae||"not-in"===Ae){Tg(Ze,Ae);const on=[];for(const wn of Ze)on.push(_p($,d,wn));dt={arrayValue:{values:on}}}else dt=_p($,d,Ze)}else"in"!==Ae&&"not-in"!==Ae&&"array-contains-any"!==Ae||Tg(Ze,Ae),dt=Im(O,"where",Ze,"in"===Ae||"not-in"===Ae);const Gt=ge.create(ue,Ae,dt);return function(on,wn){if(wn.V()){const kr=eu(on);if(null!==kr&&!kr.isEqual(wn.field))throw new Bt(Et.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${kr.toString()}' and '${wn.field.toString()}'`);const Zo=Lu(on);null!==Zo&&Sg(0,wn.field,Zo)}const lr=function(kr,Zo){for(const qn of kr.filters)if(Zo.indexOf(qn.op)>=0)return qn.op;return null}(on,function(kr){switch(kr){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(wn.op));if(null!==lr)throw new Bt(Et.INVALID_ARGUMENT,lr===wn.op?`Invalid query. You cannot use more than one '${wn.op.toString()}' filter.`:`Invalid query. You cannot use '${wn.op.toString()}' filters with '${lr.toString()}' filters.`)}(d,Gt),Gt}(e._query,0,r,e.firestore._databaseId,this.Ga,this.za,this.Ha);return new Io(e.firestore,e.converter,function(d,v){const O=d.filters.concat([v]);return new Ns(d.path,d.collectionGroup,d.explicitOrderBy.slice(),O,d.limit,d.limitType,d.startAt,d.endAt)}(e._query,o))}}class Am extends Nh{constructor(e,r){super(),this.Ga=e,this.Ja=r,this.type="orderBy"}_apply(e){const r=function(o,d,v){if(null!==o.startAt)throw new Bt(Et.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==o.endAt)throw new Bt(Et.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const O=new Bo(d,v);return function($,ue){if(null===Lu($)){const Ae=eu($);null!==Ae&&Sg(0,Ae,ue.field)}}(o,O),O}(e._query,this.Ga,this.Ja);return new Io(e.firestore,e.converter,function(o,d){const v=o.explicitOrderBy.concat([d]);return new Ns(o.path,o.collectionGroup,v,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,r))}}class wg extends Nh{constructor(e,r,o){super(),this.type=e,this.Ya=r,this.Xa=o}_apply(e){return new Io(e.firestore,e.converter,sh(e._query,this.Ya,this.Xa))}}class Cg extends Nh{constructor(e,r,o){super(),this.type=e,this.Za=r,this.tc=o}_apply(e){const r=Dg(e,this.type,this.Za,this.tc);return new Io(e.firestore,e.converter,(d=r,new Ns((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,d,o.endAt)));var o,d}}class Om extends Nh{constructor(e,r,o){super(),this.type=e,this.Za=r,this.tc=o}_apply(e){const r=Dg(e,this.type,this.Za,this.tc);return new Io(e.firestore,e.converter,(d=r,new Ns((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,o.startAt,d)));var o,d}}function Dg(i,e,r,o){if(r[0]=(0,rt.m9)(r[0]),r[0]instanceof eh)return function(d,v,O,$,ue){if(!$)throw new Bt(Et.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${O}().`);const Ae=[];for(const Ze of va(d))if(Ze.field.isKeyField())Ae.push(Fa(v,$.key));else{const dt=$.data.field(Ze.field);if(Nu(dt))throw new Bt(Et.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+Ze.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===dt){const Gt=Ze.field.canonicalString();throw new Bt(Et.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Gt}' (used as the orderBy) does not exist.`)}Ae.push(dt)}return new Qs(Ae,ue)}(i._query,i.firestore._databaseId,e,r[0]._document,o);{const d=od(i.firestore);return function(v,O,$,ue,Ae,Ze){const dt=v.explicitOrderBy;if(Ae.length>dt.length)throw new Bt(Et.INVALID_ARGUMENT,`Too many arguments provided to ${ue}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Gt=[];for(let on=0;on<Ae.length;on++){const wn=Ae[on];if(dt[on].field.isKeyField()){if("string"!=typeof wn)throw new Bt(Et.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${ue}(), but got a ${typeof wn}`);if(!wl(v)&&-1!==wn.indexOf("/"))throw new Bt(Et.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to ${ue}() must be a plain document ID, but '${wn}' contains a slash.`);const lr=v.path.child(Kr.fromString(wn));if(!Vn.isDocumentKey(lr))throw new Bt(Et.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to ${ue}() must result in a valid document path, but '${lr}' is not because it contains an odd number of segments.`);const kr=new Vn(lr);Gt.push(Fa(O,kr))}else{const lr=Im($,ue,wn);Gt.push(lr)}}return new Qs(Gt,Ze)}(i._query,i.firestore._databaseId,d,e,r,o)}}function _p(i,e,r){if("string"==typeof(r=(0,rt.m9)(r))){if(""===r)throw new Bt(Et.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!wl(e)&&-1!==r.indexOf("/"))throw new Bt(Et.INVALID_ARGUMENT,`Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const o=e.path.child(Kr.fromString(r));if(!Vn.isDocumentKey(o))throw new Bt(Et.INVALID_ARGUMENT,`Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return Fa(i,new Vn(o))}if(r instanceof zi)return Fa(i,r._key);throw new Bt(Et.INVALID_ARGUMENT,`Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: ${Du(r)}.`)}function Tg(i,e){if(!Array.isArray(i)||0===i.length)throw new Bt(Et.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(i.length>10)throw new Bt(Et.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function Sg(i,e,r){if(!r.isEqual(e))throw new Bt(Et.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${r.toString()}' instead.`)}class yp{convertValue(e,r="none"){switch(ya(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Mi(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(la(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 10:return this.convertObject(e.mapValue,r);default:throw ht()}}convertObject(e,r){const o={};return jr(e.fields,(d,v)=>{o[d]=this.convertValue(v,r)}),o}convertGeoPoint(e){return new vf(Mi(e.latitude),Mi(e.longitude))}convertArray(e,r){return(e.values||[]).map(o=>this.convertValue(o,r))}convertServerTimestamp(e,r){switch(r){case"previous":const o=Fu(e);return null==o?null:this.convertValue(o,r);case"estimate":return this.convertTimestamp(Us(e));default:return null}}convertTimestamp(e){const r=fi(e);return new di(r.seconds,r.nanos)}convertDocumentKey(e,r){const o=Kr.fromString(e);Jt(Jl(o));const d=new Co(o.get(1),o.get(3)),v=new Vn(o.popFirst(5));return d.isEqual(r)||pe(`Document ${v} contains a document reference within a different database (${d.projectId}/${d.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),v}}function Cf(i,e,r){let o;return o=i?r&&(r.merge||r.mergeFields)?i.toFirestore(e,r):i.toFirestore(e):e,o}class km extends yp{constructor(e){super(),this.firestore=e}convertBytes(e){return new Tu(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new zi(this.firestore,null,r)}}class Ag{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=od(e)}set(e,r,o){this._verifyNotCommitted();const d=Mu(e,this._firestore),v=Cf(d.converter,r,o),O=Xd(this._dataReader,"WriteBatch.set",d._key,v,null!==d.converter,o);return this._mutations.push(O.toMutation(d._key,Hs.none())),this}update(e,r,o,...d){this._verifyNotCommitted();const v=Mu(e,this._firestore);let O;return O="string"==typeof(r=(0,rt.m9)(r))||r instanceof sd?hp(this._dataReader,"WriteBatch.update",v._key,r,o,d):mg(this._dataReader,"WriteBatch.update",v._key,r),this._mutations.push(O.toMutation(v._key,Hs.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=Mu(e,this._firestore);return this._mutations=this._mutations.concat(new iu(r._key,Hs.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Bt(Et.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Mu(i,e){if((i=(0,rt.m9)(i)).firestore!==e)throw new Bt(Et.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class Fh extends yp{constructor(e){super(),this.firestore=e}convertBytes(e){return new Tu(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new zi(this.firestore,null,r)}}function Mg(i,e,r){i=$r(i,zi);const o=$r(i.firestore,Ws),d=Cf(i.converter,e,r);return nh(o,[Xd(od(o),"setDoc",i._key,d,null!==i.converter,r).toMutation(i._key,Hs.none())])}function Lm(i,e,r,...o){i=$r(i,zi);const d=$r(i.firestore,Ws),v=od(d);let O;return O="string"==typeof(e=(0,rt.m9)(e))||e instanceof sd?hp(v,"updateDoc",i._key,e,r,o):mg(v,"updateDoc",i._key,e),nh(d,[O.toMutation(i._key,Hs.exists(!0))])}function Vm(i,...e){var r,o,d;i=(0,rt.m9)(i);let v={includeMetadataChanges:!1},O=0;"object"!=typeof e[O]||dp(e[O])||(v=e[O],O++);const $={includeMetadataChanges:v.includeMetadataChanges};if(dp(e[O])){const dt=e[O];e[O]=null===(r=dt.next)||void 0===r?void 0:r.bind(dt),e[O+1]=null===(o=dt.error)||void 0===o?void 0:o.bind(dt),e[O+2]=null===(d=dt.complete)||void 0===d?void 0:d.bind(dt)}let ue,Ae,Ze;if(i instanceof zi)Ae=$r(i.firestore,Ws),Ze=Ba(i._key.path),ue={next:dt=>{e[O]&&e[O](cd(Ae,i,dt))},error:e[O+1],complete:e[O+2]};else{const dt=$r(i,Io);Ae=$r(dt.firestore,Ws),Ze=dt._query;const Gt=new Fh(Ae);ue={next:on=>{e[O]&&e[O](new th(Ae,Gt,dt,on))},error:e[O+1],complete:e[O+2]},mp(i._query)}return function(dt,Gt,on,wn){const lr=new ff(wn),kr=new Hn(Gt,lr,on);return dt.asyncQueue.enqueueAndForget((0,ee.Z)(function*(){return K(yield xh(dt),kr)})),()=>{lr.na(),dt.asyncQueue.enqueueAndForget((0,ee.Z)(function*(){return ke(yield xh(dt),kr)}))}}(Ro(Ae),Ze,$,ue)}function nh(i,e){return function(r,o){const d=new Xr;return r.asyncQueue.enqueueAndForget((0,ee.Z)(function*(){return function(i,e,r){return Xf.apply(this,arguments)}(yield og(r),o,d)})),d.promise}(Ro(i),e)}function cd(i,e,r){const o=r.docs.get(e._key),d=new Fh(i);return new uc(i,d,e._key,o,new Su(r.hasPendingWrites,r.fromCache),e.converter)}class ny extends class{constructor(e,r){this._firestore=e,this._transaction=r,this._dataReader=od(e)}get(e){const r=Mu(e,this._firestore),o=new km(this._firestore);return this._transaction.lookup([r._key]).then(d=>{if(!d||1!==d.length)return ht();const v=d[0];if(v.isFoundDocument())return new eh(this._firestore,o,v.key,v,r.converter);if(v.isNoDocument())return new eh(this._firestore,o,r._key,null,r.converter);throw ht()})}set(e,r,o){const d=Mu(e,this._firestore),v=Cf(d.converter,r,o),O=Xd(this._dataReader,"Transaction.set",d._key,v,null!==d.converter,o);return this._transaction.set(d._key,O),this}update(e,r,o,...d){const v=Mu(e,this._firestore);let O;return O="string"==typeof(r=(0,rt.m9)(r))||r instanceof sd?hp(this._dataReader,"Transaction.update",v._key,r,o,d):mg(this._dataReader,"Transaction.update",v._key,r),this._transaction.update(v._key,O),this}delete(e){const r=Mu(e,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,r){super(e,r),this._firestore=e}get(e){const r=Mu(e,this._firestore),o=new Fh(this._firestore);return super.get(e).then(d=>new uc(this._firestore,o,r._key,d._document,new Su(!1,!1),r.converter))}}function vp(i,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Bt("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return e}function dc(){if("undefined"==typeof Uint8Array)throw new Bt("unimplemented","Uint8Arrays are not available in this environment.")}function jl(){if("undefined"==typeof atob)throw new Bt("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(i,e=!0){F=Te.SDK_VERSION,(0,Te._registerComponent)(new He.wA("firestore",(r,{options:o})=>{const d=r.getProvider("app").getImmediate(),v=new Ws(d,new zo(r.getProvider("auth-internal")),new gc(r.getProvider("app-check-internal")));return o=Object.assign({useFetchStreams:e},o),v._setSettings(o),v},"PUBLIC")),(0,Te.registerVersion)(Wo,"3.4.1",i),(0,Te.registerVersion)(Wo,"3.4.1","esm2017")}();class xa{constructor(e){this._delegate=e}static fromBase64String(e){return jl(),new xa(Tu.fromBase64String(e))}static fromUint8Array(e){return dc(),new xa(Tu.fromUint8Array(e))}toBase64(){return jl(),this._delegate.toBase64()}toUint8Array(){return dc(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Ep(i){return function(i,e){if("object"!=typeof i||null===i)return!1;const r=i;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(i)}class oy{enableIndexedDbPersistence(e,r){return function(i,e){wm(i=$r(i,Ws));const r=Ro(i),o=i._freezeSettings(),d=new hf;return Em(r,d,new R_(d,o.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:r})}enableMultiTabIndexedDbPersistence(e){return function(i){wm(i=$r(i,Ws));const e=Ro(i),r=i._freezeSettings(),o=new hf;return Em(e,o,new ov(o,r.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(i){if(i._initialized&&!i._terminated)throw new Bt(Et.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Xr;return i._queue.enqueueAndForgetEvenWhileRestricted((0,ee.Z)(function*(){try{yield(r=(0,ee.Z)(function*(o){if(!as.bt())return Promise.resolve();const d=o+"main";yield as.delete(d)}),function(o){return r.apply(this,arguments)})(Kh(i._databaseId,i._persistenceKey)),e.resolve()}catch(r){e.reject(r)}var r})),e.promise}(e._delegate)}}class Wm{constructor(e,r,o){this._delegate=r,this._persistenceProvider=o,this.INTERNAL={delete:()=>this.terminate()},e instanceof Co||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const r=this._delegate._getSettings();!e.merge&&r.host!==e.host&&Be("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},r),e)).merge,this._delegate._setSettings(e)}useEmulator(e,r,o={}){!function(i,e,r,o={}){var d;const v=(i=$r(i,zc))._getSettings();if("firestore.googleapis.com"!==v.host&&v.host!==e&&Be("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},v),{host:`${e}:${r}`,ssl:!1})),o.mockUserToken){let O,$;if("string"==typeof o.mockUserToken)O=o.mockUserToken,$=Bi.MOCK_USER;else{O=(0,rt.Sg)(o.mockUserToken,null===(d=i._app)||void 0===d?void 0:d.options.projectId);const ue=o.mockUserToken.sub||o.mockUserToken.user_id;if(!ue)throw new Bt(Et.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");$=new Bi(ue)}i._authCredentials=new ds(new ao(O,$))}}(this._delegate,e,r,o)}enableNetwork(){return function(i){return function(i){return i.asyncQueue.enqueue((0,ee.Z)(function*(){const e=yield fm(i),r=yield pm(i);return e.setNetworkEnabled(!0),function(o){const d=Vt(o);return d.Gr.delete(0),Ch(d)}(r)}))}(Ro(i=$r(i,Ws)))}(this._delegate)}disableNetwork(){return function(i){return function(i){return i.asyncQueue.enqueue((0,ee.Z)(function*(){const e=yield fm(i),r=yield pm(i);return e.setNetworkEnabled(!1),(o=(0,ee.Z)(function*(d){const v=Vt(d);v.Gr.add(0),yield Fl(v),v.Jr.set("Offline")}),function(d){return o.apply(this,arguments)})(r);var o}))}(Ro(i=$r(i,Ws)))}(this._delegate)}enablePersistence(e){let r=!1,o=!1;return e&&(r=!!e.synchronizeTabs,o=!!e.experimentalForceOwningTab,ll("synchronizeTabs",r,"experimentalForceOwningTab",o)),r?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,o)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function(i){return function(e){const r=new Xr;return e.asyncQueue.enqueueAndForget((0,ee.Z)(function*(){return function(i,e){return uf.apply(this,arguments)}(yield og(e),r)})),r.promise}(Ro(i=$r(i,Ws)))}(this._delegate)}onSnapshotsInSync(e){return function(i,e){return function(i,e){const r=new ff(e);return i.asyncQueue.enqueueAndForget((0,ee.Z)(function*(){return o=yield xh(i),d=r,Vt(o).io.add(d),void d.next();var o,d})),()=>{r.na(),i.asyncQueue.enqueueAndForget((0,ee.Z)(function*(){return o=yield xh(i),d=r,void Vt(o).io.delete(d);var o,d}))}}(Ro(i=$r(i,Ws)),dp(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Bt("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new xu(this,cg(this._delegate,e))}catch(r){throw Oa(r,"collection()","Firestore.collection()")}}doc(e){try{return new cl(this,yf(this._delegate,e))}catch(r){throw Oa(r,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new pa(this,function(i,e){if(i=$r(i,zc),Rh("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Bt(Et.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Io(i,null,(r=e,new Ns(Kr.emptyPath(),r)));var r}(this._delegate,e))}catch(r){throw Oa(r,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function(i,e){return function(i,e){const r=new Xr;return i.asyncQueue.enqueueAndForget((0,ee.Z)(function*(){const o=yield(d=i,pf(d).then(v=>v.datastore));var d;new lc(i.asyncQueue,o,e,r).run()})),r.promise}(Ro(i=$r(i,Ws)),r=>e(new ny(i,r)))}(this._delegate,r=>e(new wp(this,r)))}batch(){return Ro(this._delegate),new Lh(new Ag(this._delegate,e=>nh(this._delegate,e)))}loadBundle(e){return function(i,e){const r=Ro(i=$r(i,Ws)),o=new _m;return function(i,e,r,o){const d=function(v,O){let $;return $="string"==typeof v?(new TextEncoder).encode(v):v,ue=function(ue,Ae){if(ue instanceof Uint8Array)return um(ue,void 0);if(ue instanceof ArrayBuffer)return um(new Uint8Array(ue),void 0);if(ue instanceof ReadableStream)return ue.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}($),new dm(ue,O);var ue}(r,Vd(e));i.asyncQueue.enqueueAndForget((0,ee.Z)(function*(){!function(i,e,r){const o=Vt(i);var d;(d=(0,ee.Z)(function*(v,O,$){try{const ue=yield O.getMetadata();if(yield function(Gt,on){const wn=Vt(Gt),lr=$s(on.createTime);return wn.persistence.runTransaction("hasNewerBundle","readonly",kr=>wn.Ye.getBundleMetadata(kr,on.id)).then(kr=>!!kr&&kr.createTime.compareTo(lr)>=0)}(v.localStore,ue))return yield O.close(),void $._completeWith((Gt=ue,{taskState:"Success",documentsLoaded:Gt.totalDocuments,bytesLoaded:Gt.totalBytes,totalDocuments:Gt.totalDocuments,totalBytes:Gt.totalBytes}));$._updateProgress(Vl(ue));const Ae=new eo(ue,v.localStore,O.k);let Ze=yield O.Ho();for(;Ze;){const Gt=yield Ae.yo(Ze);Gt&&$._updateProgress(Gt),Ze=yield O.Ho()}const dt=yield Ae.complete();yield $c(v,dt.In,void 0),yield function(Gt,on){const wn=Vt(Gt);return wn.persistence.runTransaction("Save bundle","readwrite",lr=>wn.Ye.saveBundleMetadata(lr,on))}(v.localStore,ue),$._completeWith(dt.progress)}catch(ue){Be("SyncEngine",`Loading bundle failed with ${ue}`),$._failWith(ue)}var Gt}),function(v,O,$){return d.apply(this,arguments)})(o,e,r).then(()=>{o.sharedClientState.notifyBundleLoaded()})}(yield og(i),d,o)}))}(r,i._databaseId,e,o),o}(this._delegate,e)}namedQuery(e){return function(i,e){return function(i,e){return i.asyncQueue.enqueue((0,ee.Z)(function*(){return function(r,o){const d=Vt(r);return d.persistence.runTransaction("Get named query","readonly",v=>d.Ye.getNamedQuery(v,o))}(yield mf(i),e)}))}(Ro(i=$r(i,Ws)),e).then(r=>r?new Io(i,null,r.query):null)}(this._delegate,e).then(r=>r?new pa(this,r):null)}}class bp extends yp{constructor(e){super(),this.firestore=e}convertBytes(e){return new xa(new Tu(e))}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return cl.forKey(r,this.firestore,null)}}class wp{constructor(e,r){this._firestore=e,this._delegate=r,this._userDataWriter=new bp(e)}get(e){const r=Ou(e);return this._delegate.get(r).then(o=>new ud(this._firestore,new uc(this._firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,r.converter)))}set(e,r,o){const d=Ou(e);return o?(vp("Transaction.set",o),this._delegate.set(d,r,o)):this._delegate.set(d,r),this}update(e,r,o,...d){const v=Ou(e);return 2===arguments.length?this._delegate.update(v,r):this._delegate.update(v,r,o,...d),this}delete(e){const r=Ou(e);return this._delegate.delete(r),this}}class Lh{constructor(e){this._delegate=e}set(e,r,o){const d=Ou(e);return o?(vp("WriteBatch.set",o),this._delegate.set(d,r,o)):this._delegate.set(d,r),this}update(e,r,o,...d){const v=Ou(e);return 2===arguments.length?this._delegate.update(v,r):this._delegate.update(v,r,o,...d),this}delete(e){const r=Ou(e);return this._delegate.delete(r),this}commit(){return this._delegate.commit()}}class rh{constructor(e,r,o){this._firestore=e,this._userDataWriter=r,this._delegate=o}fromFirestore(e,r){const o=new kh(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new If(this._firestore,o),null!=r?r:{})}toFirestore(e,r){return r?this._delegate.toFirestore(e,r):this._delegate.toFirestore(e)}static getInstance(e,r){const o=rh.INSTANCES;let d=o.get(e);d||(d=new WeakMap,o.set(e,d));let v=d.get(r);return v||(v=new rh(e,new bp(e),r),d.set(r,v)),v}}rh.INSTANCES=new WeakMap;class cl{constructor(e,r){this.firestore=e,this._delegate=r,this._userDataWriter=new bp(e)}static forPath(e,r,o){if(e.length%2!=0)throw new Bt("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new cl(r,new zi(r._delegate,o,new Vn(e)))}static forKey(e,r,o){return new cl(r,new zi(r._delegate,o,e))}get id(){return this._delegate.id}get parent(){return new xu(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new xu(this.firestore,cg(this._delegate,e))}catch(r){throw Oa(r,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,rt.m9)(e))instanceof zi&&ug(this._delegate,e)}set(e,r){r=vp("DocumentReference.set",r);try{return r?Mg(this._delegate,e,r):Mg(this._delegate,e)}catch(o){throw Oa(o,"setDoc()","DocumentReference.set()")}}update(e,r,...o){try{return 1===arguments.length?Lm(this._delegate,e):Lm(this._delegate,e,r,...o)}catch(d){throw Oa(d,"updateDoc()","DocumentReference.update()")}}delete(){return function(i){return nh($r(i.firestore,Ws),[new iu(i._key,Hs.none())])}(this._delegate)}onSnapshot(...e){const r=Og(e),o=Rg(e,d=>new ud(this.firestore,new uc(this.firestore._delegate,this._userDataWriter,d._key,d._document,d.metadata,this._delegate.converter)));return Vm(this._delegate,r,o)}get(e){let r;return r="cache"===(null==e?void 0:e.source)?function(i){i=$r(i,zi);const e=$r(i.firestore,Ws),r=Ro(e),o=new Fh(e);return function(i,e){const r=new Xr;return i.asyncQueue.enqueueAndForget((0,ee.Z)(function*(){return(o=(0,ee.Z)(function*(d,v,O){try{const $=yield function(ue,Ae){const Ze=Vt(ue);return Ze.persistence.runTransaction("read document","readonly",dt=>Ze.Wn.Rn(dt,Ae))}(d,v);$.isFoundDocument()?O.resolve($):$.isNoDocument()?O.resolve(null):O.reject(new Bt(Et.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch($){const ue=u($,`Failed to get document '${v} from cache`);O.reject(ue)}}),function(d,v,O){return o.apply(this,arguments)})(yield mf(i),e,r);var o})),r.promise}(r,i._key).then(d=>new uc(e,o,i._key,d,new Su(null!==d&&d.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function(i){i=$r(i,zi);const e=$r(i.firestore,Ws);return Kd(Ro(e),i._key,{source:"server"}).then(r=>cd(e,i,r))}(this._delegate):function(i){i=$r(i,zi);const e=$r(i.firestore,Ws);return Kd(Ro(e),i._key).then(r=>cd(e,i,r))}(this._delegate),r.then(o=>new ud(this.firestore,new uc(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)))}withConverter(e){return new cl(this.firestore,this._delegate.withConverter(e?rh.getInstance(this.firestore,e):null))}}function Oa(i,e,r){return i.message=i.message.replace(e,r),i}function Og(i){for(const e of i)if("object"==typeof e&&!Ep(e))return e;return{}}function Rg(i,e){var r,o;let d;return d=Ep(i[0])?i[0]:Ep(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:v=>{d.next&&d.next(e(v))},error:null===(r=d.error)||void 0===r?void 0:r.bind(d),complete:null===(o=d.complete)||void 0===o?void 0:o.bind(d)}}class ud{constructor(e,r){this._firestore=e,this._delegate=r}get ref(){return new cl(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,r){return this._delegate.get(e,r)}isEqual(e){return gp(this._delegate,e._delegate)}}class If extends ud{data(e){const r=this._delegate.data(e);return function(i,e){i||ht()}(void 0!==r),r}}class pa{constructor(e,r){this.firestore=e,this._delegate=r,this._userDataWriter=new bp(e)}where(e,r,o){try{return new pa(this.firestore,Au(this._delegate,function(i,e,r){const o=e,d=pp("where",i);return new Eg(d,o,r)}(e,r,o)))}catch(d){throw Oa(d,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,r){try{return new pa(this.firestore,Au(this._delegate,function(i,e="asc"){const r=e,o=pp("orderBy",i);return new Am(o,r)}(e,r)))}catch(o){throw Oa(o,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new pa(this.firestore,Au(this._delegate,function(i){return Zd("limit",i),new wg("limit",i,"F")}(e)))}catch(r){throw Oa(r,"limit()","Query.limit()")}}limitToLast(e){try{return new pa(this.firestore,Au(this._delegate,function(i){return Zd("limitToLast",i),new wg("limitToLast",i,"L")}(e)))}catch(r){throw Oa(r,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new pa(this.firestore,Au(this._delegate,function(...i){return new Cg("startAt",i,!0)}(...e)))}catch(r){throw Oa(r,"startAt()","Query.startAt()")}}startAfter(...e){try{return new pa(this.firestore,Au(this._delegate,function(...i){return new Cg("startAfter",i,!1)}(...e)))}catch(r){throw Oa(r,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new pa(this.firestore,Au(this._delegate,function(...i){return new Om("endBefore",i,!0)}(...e)))}catch(r){throw Oa(r,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new pa(this.firestore,Au(this._delegate,function(...i){return new Om("endAt",i,!1)}(...e)))}catch(r){throw Oa(r,"endAt()","Query.endAt()")}}isEqual(e){return dg(this._delegate,e._delegate)}get(e){let r;return r="cache"===(null==e?void 0:e.source)?function(i){i=$r(i,Io);const e=$r(i.firestore,Ws),r=Ro(e),o=new Fh(e);return function(i,e){const r=new Xr;return i.asyncQueue.enqueueAndForget((0,ee.Z)(function*(){return(o=(0,ee.Z)(function*(d,v,O){try{const $=yield qh(d,v,!0),ue=new Sh(v,$.zn),Ae=ue.bo($.documents),Ze=ue.applyChanges(Ae,!1);O.resolve(Ze.snapshot)}catch($){const ue=u($,`Failed to execute query '${v} against cache`);O.reject(ue)}}),function(d,v,O){return o.apply(this,arguments)})(yield mf(i),e,r);var o})),r.promise}(r,i._query).then(d=>new th(e,o,i,d))}(this._delegate):"server"===(null==e?void 0:e.source)?function(i){i=$r(i,Io);const e=$r(i.firestore,Ws),r=Ro(e),o=new Fh(e);return Oh(r,i._query,{source:"server"}).then(d=>new th(e,o,i,d))}(this._delegate):function(i){i=$r(i,Io);const e=$r(i.firestore,Ws),r=Ro(e),o=new Fh(e);return mp(i._query),Oh(r,i._query).then(d=>new th(e,o,i,d))}(this._delegate),r.then(o=>new Df(this.firestore,new th(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)))}onSnapshot(...e){const r=Og(e),o=Rg(e,d=>new Df(this.firestore,new th(this.firestore._delegate,this._userDataWriter,this._delegate,d._snapshot)));return Vm(this._delegate,r,o)}withConverter(e){return new pa(this.firestore,this._delegate.withConverter(e?rh.getInstance(this.firestore,e):null))}}class zm{constructor(e,r){this._firestore=e,this._delegate=r}get type(){return this._delegate.type}get doc(){return new If(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Df{constructor(e,r){this._firestore=e,this._delegate=r}get query(){return new pa(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new If(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(r=>new zm(this._firestore,r))}forEach(e,r){this._delegate.forEach(o=>{e.call(r,new If(this._firestore,o))})}isEqual(e){return gp(this._delegate,e._delegate)}}class xu extends pa{constructor(e,r){super(e,r),this.firestore=e,this._delegate=r}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new cl(this.firestore,e):null}doc(e){try{return new cl(this.firestore,void 0===e?yf(this._delegate):yf(this._delegate,e))}catch(r){throw Oa(r,"doc()","CollectionReference.doc()")}}add(e){return function(i,e){const r=$r(i.firestore,Ws),o=yf(i),d=Cf(i.converter,e);return nh(r,[Xd(od(i.firestore),"addDoc",o._key,d,null!==i.converter,{}).toMutation(o._key,Hs.exists(!1))]).then(()=>o)}(this._delegate,e).then(r=>new cl(this.firestore,r))}isEqual(e){return ug(this._delegate,e._delegate)}withConverter(e){return new xu(this.firestore,this._delegate.withConverter(e?rh.getInstance(this.firestore,e):null))}}function Ou(i){return $r(i,zi)}class Cp{constructor(...e){this._delegate=new sd(...e)}static documentId(){return new Cp(ho.keyField().canonicalString())}isEqual(e){return(e=(0,rt.m9)(e))instanceof sd&&this._delegate._internalPath.isEqual(e._internalPath)}}class dd{constructor(e){this._delegate=e}static serverTimestamp(){const e=new gg("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new dd(e)}static delete(){const e=new bf("deleteField");return e._methodName="FieldValue.delete",new dd(e)}static arrayUnion(...e){const r=function(...i){return new z_("arrayUnion",i)}(...e);return r._methodName="FieldValue.arrayUnion",new dd(r)}static arrayRemove(...e){const r=function(...i){return new K_("arrayRemove",i)}(...e);return r._methodName="FieldValue.arrayRemove",new dd(r)}static increment(e){const r=function(i){return new Y_("increment",i)}(e);return r._methodName="FieldValue.increment",new dd(r)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Km={Firestore:Wm,GeoPoint:vf,Timestamp:di,Blob:xa,Transaction:wp,WriteBatch:Lh,DocumentReference:cl,DocumentSnapshot:ud,Query:pa,QueryDocumentSnapshot:If,QuerySnapshot:Df,CollectionReference:xu,FieldPath:Cp,FieldValue:dd,setLogLevel:function(i){!function(i){R.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};!function(i){(function(i,e){i.INTERNAL.registerComponent(new He.wA("firestore-compat",r=>((e,r)=>new Wm(e,r,new oy))(r.getProvider("app-compat").getImmediate(),r.getProvider("firestore").getImmediate()),"PUBLIC").setServiceProps(Object.assign({},Km)))})(i),i.registerVersion("@firebase/firestore-compat","0.1.10")}(Oe.Z);var Ru=x(7451),qm=x(440);function Qm(i,e){return function(i,e=E.z){return new B.y(r=>{let o;return null!=e?e.schedule(()=>{o=i.onSnapshot({includeMetadataChanges:!0},r)}):o=i.onSnapshot({includeMetadataChanges:!0},r),()=>{null!=o&&o()}})}(i,e)}function Pg(i,e){return Qm(i,e).pipe((0,ie.U)(r=>({payload:r,type:"query"})))}function Ip(i,e){return Pg(i,e).pipe((0,se.O)(void 0),(0,X.G)(),(0,ie.U)(([r,o])=>{const d=o.payload.docChanges(),v=d.map(O=>({type:O.type,payload:O}));return r&&JSON.stringify(r.payload.metadata)!==JSON.stringify(o.payload.metadata)&&o.payload.docs.forEach((O,$)=>{const ue=d.find(Ze=>Ze.doc.ref.isEqual(O.ref)),Ae=null==r?void 0:r.payload.docs.find(Ze=>Ze.ref.isEqual(O.ref));ue&&JSON.stringify(ue.doc.metadata)===JSON.stringify(O.metadata)||!ue&&Ae&&JSON.stringify(Ae.metadata)===JSON.stringify(O.metadata)||v.push({type:"modified",payload:{oldIndex:$,newIndex:$,type:"modified",doc:O}})}),v}))}function Jm(i,e,r){return Ip(i,r).pipe((0,Q.R)((o,d)=>function(i,e,r){return e.forEach(o=>{r.indexOf(o.type)>-1&&(i=function(i,e){switch(e.type){case"added":if(!i[e.newIndex]||!i[e.newIndex].doc.ref.isEqual(e.doc.ref))return kg(i,e.newIndex,0,e);break;case"modified":if(null==i[e.oldIndex]||i[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const r=i.slice();return r.splice(e.oldIndex,1),r.splice(e.newIndex,0,e),r}return kg(i,e.newIndex,1,e)}break;case"removed":if(i[e.oldIndex]&&i[e.oldIndex].doc.ref.isEqual(e.doc.ref))return kg(i,e.oldIndex,1)}return i}(i,o))}),i}(o,d.map(v=>v.payload),e),[]),(0,oe.x)(),(0,ie.U)(o=>o.map(d=>({type:d.type,payload:d}))))}function kg(i,e,r,...o){const d=i.slice();return d.splice(e,r,...o),d}function Xm(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}x(127);class e_{constructor(e,r,o){this.ref=e,this.query=r,this.afs=o}stateChanges(e){let r=Ip(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(r=r.pipe((0,ie.U)(o=>o.filter(d=>e.indexOf(d.type)>-1)))),r.pipe((0,se.O)(void 0),(0,X.G)(),(0,ae.h)(([o,d])=>d.length>0||!o),(0,ie.U)(([o,d])=>d),q.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Q.R)((r,o)=>[...r,...o],[]))}snapshotChanges(e){const r=Xm(e);return Jm(this.query,r,this.afs.schedulers.outsideAngular).pipe(q.iC)}valueChanges(e={}){return Pg(this.query,this.afs.schedulers.outsideAngular).pipe((0,ie.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign(Object.assign({},o.data()),{[e.idField]:o.id}):o.data())),q.iC)}get(e){return(0,ne.D)(this.query.get(e)).pipe(q.iC)}add(e){return this.ref.add(e)}doc(e){return new t_(this.ref.doc(e),this.afs)}}class t_{constructor(e,r){this.ref=e,this.afs=r}set(e,r){return this.ref.set(e,r)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,r){const o=this.ref.collection(e),{ref:d,query:v}=Ng(o,r);return new e_(d,v,this.afs)}snapshotChanges(){return function(i,e){return Qm(i,e).pipe((0,se.O)(void 0),(0,X.G)(),(0,ie.U)(([r,o])=>o.exists?(null==r?void 0:r.exists)?{payload:o,type:"modified"}:{payload:o,type:"added"}:{payload:o,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(q.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,ie.U)(({payload:r})=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data()))}get(e){return(0,ne.D)(this.ref.get(e)).pipe(q.iC)}}class hy{constructor(e,r){this.query=e,this.afs=r}stateChanges(e){return e&&0!==e.length?Ip(this.query,this.afs.schedulers.outsideAngular).pipe((0,ie.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)),(0,ae.h)(r=>r.length>0),q.iC):Ip(this.query,this.afs.schedulers.outsideAngular).pipe(q.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Q.R)((r,o)=>[...r,...o],[]))}snapshotChanges(e){const r=Xm(e);return Jm(this.query,r,this.afs.schedulers.outsideAngular).pipe(q.iC)}valueChanges(e={}){return Pg(this.query,this.afs.schedulers.outsideAngular).pipe((0,ie.U)(o=>o.payload.docs.map(d=>e.idField?Object.assign({[e.idField]:d.id},d.data()):d.data())),q.iC)}get(e){return(0,ne.D)(this.query.get(e)).pipe(q.iC)}}const fy=new g.OlP("angularfire2.enableFirestorePersistence"),py=new g.OlP("angularfire2.firestore.persistenceSettings"),gy=new g.OlP("angularfire2.firestore.settings"),my=new g.OlP("angularfire2.firestore.use-emulator");function Ng(i,e=(r=>r)){return{query:e(i),ref:i}}let n_=(()=>{class i{constructor(r,o,d,v,O,$,ue,Ae,Ze,dt,Gt,on,wn,lr,kr,Zo,qn){this.schedulers=ue;const Pu=(0,Me.on)(r,$,o),Yc=Ze;dt&&(0,Ru.nw)(Pu,$,Gt,wn,lr,kr,on,Zo),[this.firestore,this.persistenceEnabled$]=(0,Me.cc)(`${Pu.name}.firestore`,"AngularFirestore",Pu.name,()=>{const Zc=$.runOutsideAngular(()=>Pu.firestore());if(v&&Zc.settings(v),Yc&&Zc.useEmulator(...Yc),d&&!(0,Ve.PM)(O)){const Bh=()=>{try{return(0,ne.D)(Zc.enablePersistence(Ae||void 0).then(()=>!0,()=>!1))}catch(Dp){return"undefined"!=typeof console&&console.warn(Dp),(0,he.of)(!1)}};return[Zc,$.runOutsideAngular(Bh)]}return[Zc,(0,he.of)(!1)]},[v,Yc,d])}collection(r,o){let d;d="string"==typeof r?this.firestore.collection(r):r;const{ref:v,query:O}=Ng(d,o),$=this.schedulers.ngZone.run(()=>v);return new e_($,O,this)}collectionGroup(r,o){const d=o||(O=>O),v=this.firestore.collectionGroup(r);return new hy(d(v),this)}doc(r){let o;o="string"==typeof r?this.firestore.doc(r):r;const d=this.schedulers.ngZone.run(()=>o);return new t_(d,this)}createId(){return this.firestore.collection("_").doc().id}}return i.\u0275fac=function(r){return new(r||i)(g.LFG(Me.Dh),g.LFG(Me.xv,8),g.LFG(fy,8),g.LFG(gy,8),g.LFG(g.Lbi),g.LFG(g.R0b),g.LFG(q.HU),g.LFG(py,8),g.LFG(my,8),g.LFG(Ru.zQ,8),g.LFG(Ru.Qv,8),g.LFG(Ru.L6,8),g.LFG(Ru._Q,8),g.LFG(Ru.rT,8),g.LFG(Ru.lh,8),g.LFG(Ru.f7,8),g.LFG(qm.nm,8))},i.\u0275prov=g.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})()},2011:($t,$e,x)=>{"use strict";x.d($e,{hO:()=>Me,xv:()=>ie,Dh:()=>X,GT:()=>q,cc:()=>Ve,on:()=>Q,pX:()=>he});var g=x(5e3),E=x(127),B=x(6351);$t=x.hmd($t);const ne=["ngOnDestroy"],he=(Te,He,yt,rt={})=>new Proxy(Te,{get:(ft,we)=>yt.runOutsideAngular(()=>{var Pe;if(Te[we])return(null===(Pe=null==rt?void 0:rt.spy)||void 0===Pe?void 0:Pe.get)&&rt.spy.get(we,Te[we]),Te[we];if(ne.indexOf(we)>-1)return()=>{};const qe=He.toPromise().then(et=>{const At=et&&et[we];return"function"==typeof At?At.bind(et):At&&At.then?At.then(Ut=>yt.run(()=>Ut)):yt.run(()=>At)});return new Proxy(()=>{},{get:(et,At)=>qe[At],apply:(et,At,Ut)=>qe.then(Zt=>{var jt;const tn=Zt&&Zt(...Ut);return(null===(jt=null==rt?void 0:rt.spy)||void 0===jt?void 0:jt.apply)&&rt.spy.apply(we,Ut,tn),tn})})})}),q=(Te,He)=>{He.forEach(yt=>{Object.getOwnPropertyNames(yt.prototype||yt).forEach(rt=>{Object.defineProperty(Te.prototype,rt,Object.getOwnPropertyDescriptor(yt.prototype||yt,rt))})})};class se{constructor(He){return He}}const X=new g.OlP("angularfire2.app.options"),ie=new g.OlP("angularfire2.app.name");function Q(Te,He,yt){const ft="object"==typeof yt&&yt||{};ft.name=ft.name||"string"==typeof yt&&yt||"[DEFAULT]";const Pe=E.Z.apps.filter(qe=>qe&&qe.name===ft.name)[0]||He.runOutsideAngular(()=>E.Z.initializeApp(Te,ft));try{JSON.stringify(Te)!==JSON.stringify(Pe.options)&&oe("error",`${Pe.name} Firebase App already initialized with different options${$t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(qe){}return new se(Pe)}const oe=(Te,...He)=>{(0,g.X6Q)()&&"undefined"!=typeof console&&console[Te](...He)},ae={provide:se,useFactory:Q,deps:[X,g.R0b,[new g.FiY,ie]]};let Me=(()=>{class Te{constructor(yt){E.Z.registerVersion("angularfire",B.q4.full,"core"),E.Z.registerVersion("angularfire",B.q4.full,"app-compat"),E.Z.registerVersion("angular",g.q4F.full,yt.toString())}static initializeApp(yt,rt){return{ngModule:Te,providers:[{provide:X,useValue:yt},{provide:ie,useValue:rt}]}}}return Te.\u0275fac=function(yt){return new(yt||Te)(g.LFG(g.Lbi))},Te.\u0275mod=g.oAB({type:Te}),Te.\u0275inj=g.cJS({providers:[ae]}),Te})();function Ve(Te,He,yt,rt,ft){const[,we,Pe]=globalThis.\u0275AngularfireInstanceCache.find(qe=>qe[0]===Te)||[];if(we)return function(Te,He){try{return Te.toString()===He.toString()}catch(yt){return Te===He}}(ft,Pe)||(ee("error",`${He} was already initialized on the ${yt} Firebase App with different settings.${Oe?" You may need to reload as Firebase is not HMR aware.":""}`),ee("warn",{is:ft,was:Pe})),we;{const qe=rt();return globalThis.\u0275AngularfireInstanceCache.push([Te,qe,ft]),qe}}const Oe=!!$t.hot,ee=(Te,...He)=>{(0,g.X6Q)()&&"undefined"!=typeof console&&console[Te](...He)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},6351:($t,$e,x)=>{"use strict";x.d($e,{q4:()=>Us,iC:()=>La,HU:()=>Wl,vb:()=>Fa,JM:()=>js});var g=x(5e3),E=x(5867),B=x(5861),ne=x(9681),he=x(2090),q=x(4859),se=x(1877),X=x(2940);const ie="@firebase/installations",Q="0.5.4",ae=`w:${Q}`,Me="FIS_v2",He=new he.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function yt(j){return j instanceof he.ZR&&j.code.includes("request-failed")}function rt({projectId:j}){return`https://firebaseinstallations.googleapis.com/v1/projects/${j}/installations`}function ft(j){return{token:j.token,requestStatus:2,expiresIn:Zt(j.expiresIn),creationTime:Date.now()}}function we(j,Z){return Pe.apply(this,arguments)}function Pe(){return(Pe=(0,B.Z)(function*(j,Z){const Ge=(yield Z.json()).error;return He.create("request-failed",{requestName:j,serverCode:Ge.code,serverMessage:Ge.message,serverStatus:Ge.status})})).apply(this,arguments)}function qe({apiKey:j}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":j})}function et(j,{refreshToken:Z}){const ge=qe(j);return ge.append("Authorization",function(j){return`${Me} ${j}`}(Z)),ge}function At(j){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,B.Z)(function*(j){const Z=yield j();return Z.status>=500&&Z.status<600?j():Z})).apply(this,arguments)}function Zt(j){return Number(j.replace("s","000"))}function tn(j,Z){return qt.apply(this,arguments)}function qt(){return(qt=(0,B.Z)(function*(j,{fid:Z}){const ge=rt(j),Lt={method:"POST",headers:qe(j),body:JSON.stringify({fid:Z,authVersion:Me,appId:j.appId,sdkVersion:ae})},nn=yield At(()=>fetch(ge,Lt));if(nn.ok){const On=yield nn.json();return{fid:On.fid||Z,registrationStatus:2,refreshToken:On.refreshToken,authToken:ft(On.authToken)}}throw yield we("Create Installation",nn)})).apply(this,arguments)}function wr(j){return new Promise(Z=>{setTimeout(Z,j)})}const Nn=/^[cdef][\w-]{21}$/;function dn(){try{const j=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(j),j[0]=112+j[0]%16;const ge=function(j){return function(j){return btoa(String.fromCharCode(...j)).replace(/\+/g,"-").replace(/\//g,"_")}(j).substr(0,22)}(j);return Nn.test(ge)?ge:""}catch(j){return""}}function kn(j){return`${j.appName}!${j.appId}`}const gt=new Map;function Ye(j,Z){const ge=kn(j);mt(ge,Z),function(j,Z){const ge=(!Mt&&"BroadcastChannel"in self&&(Mt=new BroadcastChannel("[Firebase] FID Change"),Mt.onmessage=j=>{mt(j.data.key,j.data.fid)}),Mt);ge&&ge.postMessage({key:j,fid:Z}),0===gt.size&&Mt&&(Mt.close(),Mt=null)}(ge,Z)}function mt(j,Z){const ge=gt.get(j);if(ge)for(const Ge of ge)Ge(Z)}let Mt=null;const Rt="firebase-installations-store";let br=null;function gr(){return br||(br=(0,X.openDb)("firebase-installations-database",1,j=>{0===j.oldVersion&&j.createObjectStore(Rt)})),br}function Qt(j,Z){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,B.Z)(function*(j,Z){const ge=kn(j),_t=(yield gr()).transaction(Rt,"readwrite"),Lt=_t.objectStore(Rt),nn=yield Lt.get(ge);return yield Lt.put(Z,ge),yield _t.complete,(!nn||nn.fid!==Z.fid)&&Ye(j,Z.fid),Z})).apply(this,arguments)}function yr(j){return hr.apply(this,arguments)}function hr(){return(hr=(0,B.Z)(function*(j){const Z=kn(j),Ge=(yield gr()).transaction(Rt,"readwrite");yield Ge.objectStore(Rt).delete(Z),yield Ge.complete})).apply(this,arguments)}function Re(j,Z){return L.apply(this,arguments)}function L(){return(L=(0,B.Z)(function*(j,Z){const ge=kn(j),_t=(yield gr()).transaction(Rt,"readwrite"),Lt=_t.objectStore(Rt),nn=yield Lt.get(ge),On=Z(nn);return void 0===On?yield Lt.delete(ge):yield Lt.put(On,ge),yield _t.complete,On&&(!nn||nn.fid!==On.fid)&&Ye(j,On.fid),On})).apply(this,arguments)}function J(j){return ce.apply(this,arguments)}function ce(){return(ce=(0,B.Z)(function*(j){let Z;const ge=yield Re(j,Ge=>{const _t=be(Ge),Lt=N(j,_t);return Z=Lt.registrationPromise,Lt.installationEntry});return""===ge.fid?{installationEntry:yield Z}:{installationEntry:ge,registrationPromise:Z}})).apply(this,arguments)}function be(j){return fn(j||{fid:dn(),registrationStatus:0})}function N(j,Z){if(0===Z.registrationStatus){if(!navigator.onLine)return{installationEntry:Z,registrationPromise:Promise.reject(He.create("app-offline"))};const ge={fid:Z.fid,registrationStatus:1,registrationTime:Date.now()},Ge=function(j,Z){return at.apply(this,arguments)}(j,ge);return{installationEntry:ge,registrationPromise:Ge}}return 1===Z.registrationStatus?{installationEntry:Z,registrationPromise:Pt(j)}:{installationEntry:Z}}function at(){return(at=(0,B.Z)(function*(j,Z){try{return Qt(j,yield tn(j,Z))}catch(ge){throw yt(ge)&&409===ge.customData.serverCode?yield yr(j):yield Qt(j,{fid:Z.fid,registrationStatus:0}),ge}})).apply(this,arguments)}function Pt(j){return zt.apply(this,arguments)}function zt(){return(zt=(0,B.Z)(function*(j){let Z=yield sn(j);for(;1===Z.registrationStatus;)yield wr(100),Z=yield sn(j);if(0===Z.registrationStatus){const{installationEntry:ge,registrationPromise:Ge}=yield J(j);return Ge||ge}return Z})).apply(this,arguments)}function sn(j){return Re(j,Z=>{if(!Z)throw He.create("installation-not-found");return fn(Z)})}function fn(j){return function(j){return 1===j.registrationStatus&&j.registrationTime+1e4<Date.now()}(j)?{fid:j.fid,registrationStatus:0}:j}function Fn(j,Z){return Fe.apply(this,arguments)}function Fe(){return(Fe=(0,B.Z)(function*({appConfig:j,platformLoggerProvider:Z},ge){const Ge=Le(j,ge),_t=et(j,ge),Lt=Z.getImmediate({optional:!0});Lt&&_t.append("x-firebase-client",Lt.getPlatformInfoString());const On={method:"POST",headers:_t,body:JSON.stringify({installation:{sdkVersion:ae}})},Un=yield At(()=>fetch(Ge,On));if(Un.ok)return ft(yield Un.json());throw yield we("Generate Auth Token",Un)})).apply(this,arguments)}function Le(j,{fid:Z}){return`${rt(j)}/${Z}/authTokens:generate`}function Xe(j){return xt.apply(this,arguments)}function xt(){return(xt=(0,B.Z)(function*(j,Z=!1){let ge;const Ge=yield Re(j.appConfig,Lt=>{if(!De(Lt))throw He.create("not-registered");const nn=Lt.authToken;if(!Z&&ve(nn))return Lt;if(1===nn.requestStatus)return ge=pt(j,Z),Lt;{if(!navigator.onLine)throw He.create("app-offline");const On=ye(Lt);return ge=it(j,On),On}});return ge?yield ge:Ge.authToken})).apply(this,arguments)}function pt(j,Z){return pn.apply(this,arguments)}function pn(){return(pn=(0,B.Z)(function*(j,Z){let ge=yield In(j.appConfig);for(;1===ge.authToken.requestStatus;)yield wr(100),ge=yield In(j.appConfig);const Ge=ge.authToken;return 0===Ge.requestStatus?Xe(j,Z):Ge})).apply(this,arguments)}function In(j){return Re(j,Z=>{if(!De(Z))throw He.create("not-registered");return function(j){return 1===j.requestStatus&&j.requestTime+1e4<Date.now()}(Z.authToken)?Object.assign(Object.assign({},Z),{authToken:{requestStatus:0}}):Z})}function it(j,Z){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,B.Z)(function*(j,Z){try{const ge=yield Fn(j,Z),Ge=Object.assign(Object.assign({},Z),{authToken:ge});return yield Qt(j.appConfig,Ge),ge}catch(ge){if(!yt(ge)||401!==ge.customData.serverCode&&404!==ge.customData.serverCode){const Ge=Object.assign(Object.assign({},Z),{authToken:{requestStatus:0}});yield Qt(j.appConfig,Ge)}else yield yr(j.appConfig);throw ge}})).apply(this,arguments)}function De(j){return void 0!==j&&2===j.registrationStatus}function ve(j){return 2===j.requestStatus&&!function(j){const Z=Date.now();return Z<j.creationTime||j.creationTime+j.expiresIn<Z+36e5}(j)}function ye(j){const Z={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},j),{authToken:Z})}function ze(){return(ze=(0,B.Z)(function*(j){const Z=j,{installationEntry:ge,registrationPromise:Ge}=yield J(Z.appConfig);return Ge?Ge.catch(console.error):Xe(Z).catch(console.error),ge.fid})).apply(this,arguments)}function Se(){return(Se=(0,B.Z)(function*(j,Z=!1){const ge=j;return yield ut(ge.appConfig),(yield Xe(ge,Z)).token})).apply(this,arguments)}function ut(j){return St.apply(this,arguments)}function St(){return(St=(0,B.Z)(function*(j){const{registrationPromise:Z}=yield J(j);Z&&(yield Z)})).apply(this,arguments)}function or(j){return He.create("missing-app-config-values",{valueName:j})}const to="installations";(0,ne._registerComponent)(new q.wA(to,j=>{const Z=j.getProvider("app").getImmediate(),ge=function(j){if(!j||!j.options)throw or("App Configuration");if(!j.name)throw or("App Name");const Z=["projectId","apiKey","appId"];for(const ge of Z)if(!j.options[ge])throw or(ge);return{appName:j.name,projectId:j.options.projectId,apiKey:j.options.apiKey,appId:j.options.appId}}(Z);return{app:Z,appConfig:ge,platformLoggerProvider:(0,ne._getProvider)(Z,"platform-logger"),_delete:()=>Promise.resolve()}},"PUBLIC")),(0,ne._registerComponent)(new q.wA("installations-internal",j=>{const Z=j.getProvider("app").getImmediate(),ge=(0,ne._getProvider)(Z,to).getImmediate();return{getId:()=>function(j){return ze.apply(this,arguments)}(ge),getToken:_t=>function(j){return Se.apply(this,arguments)}(ge,_t)}},"PRIVATE")),(0,ne.registerVersion)(ie,Q),(0,ne.registerVersion)(ie,Q,"esm2017");const Gr="@firebase/remote-config",Vr=new he.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class ps{constructor(Z,ge,Ge,_t){this.client=Z,this.storage=ge,this.storageCache=Ge,this.logger=_t}isCachedDataFresh(Z,ge){if(!ge)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const Ge=Date.now()-ge,_t=Ge<=Z;return this.logger.debug(`Config fetch cache check. Cache age millis: ${Ge}. Cache max age millis (minimumFetchIntervalMillis setting): ${Z}. Is cache hit: ${_t}.`),_t}fetch(Z){var ge=this;return(0,B.Z)(function*(){const[Ge,_t]=yield Promise.all([ge.storage.getLastSuccessfulFetchTimestampMillis(),ge.storage.getLastSuccessfulFetchResponse()]);if(_t&&ge.isCachedDataFresh(Z.cacheMaxAgeMillis,Ge))return _t;Z.eTag=_t&&_t.eTag;const Lt=yield ge.client.fetch(Z),nn=[ge.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Lt.status&&nn.push(ge.storage.setLastSuccessfulFetchResponse(Lt)),yield Promise.all(nn),Lt})()}}function qo(j=navigator){return j.languages&&j.languages[0]||j.language}class yi{constructor(Z,ge,Ge,_t,Lt,nn){this.firebaseInstallations=Z,this.sdkVersion=ge,this.namespace=Ge,this.projectId=_t,this.apiKey=Lt,this.appId=nn}fetch(Z){var ge=this;return(0,B.Z)(function*(){const[Ge,_t]=yield Promise.all([ge.firebaseInstallations.getId(),ge.firebaseInstallations.getToken()]),nn=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${ge.projectId}/namespaces/${ge.namespace}:fetch?key=${ge.apiKey}`,On={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":Z.eTag||"*"},Un={sdk_version:ge.sdkVersion,app_instance_id:Ge,app_instance_id_token:_t,app_id:ge.appId,language_code:qo()},Yr={method:"POST",headers:On,body:JSON.stringify(Un)},Ar=fetch(nn,Yr),fo=new Promise((ia,Ns)=>{Z.signal.addEventListener(()=>{const sa=new Error("The operation was aborted.");sa.name="AbortError",Ns(sa)})});let Qs;try{yield Promise.race([Ar,fo]),Qs=yield Ar}catch(ia){let Ns="fetch-client-network";throw"AbortError"===ia.name&&(Ns="fetch-timeout"),Vr.create(Ns,{originalErrorMessage:ia.message})}let ss=Qs.status;const Bo=Qs.headers.get("ETag")||void 0;let vl,El;if(200===Qs.status){let ia;try{ia=yield Qs.json()}catch(Ns){throw Vr.create("fetch-client-parse",{originalErrorMessage:Ns.message})}vl=ia.entries,El=ia.state}if("INSTANCE_STATE_UNSPECIFIED"===El?ss=500:"NO_CHANGE"===El?ss=304:("NO_TEMPLATE"===El||"EMPTY_CONFIG"===El)&&(vl={}),304!==ss&&200!==ss)throw Vr.create("fetch-status",{httpStatus:ss});return{status:ss,eTag:Bo,config:vl}})()}}class lt{constructor(Z,ge){this.client=Z,this.storage=ge}fetch(Z){var ge=this;return(0,B.Z)(function*(){const Ge=(yield ge.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return ge.attemptFetch(Z,Ge)})()}attemptFetch(Z,{throttleEndTimeMillis:ge,backoffCount:Ge}){var _t=this;return(0,B.Z)(function*(){yield function(j,Z){return new Promise((ge,Ge)=>{const _t=Math.max(Z-Date.now(),0),Lt=setTimeout(ge,_t);j.addEventListener(()=>{clearTimeout(Lt),Ge(Vr.create("fetch-throttle",{throttleEndTimeMillis:Z}))})})}(Z.signal,ge);try{const Lt=yield _t.client.fetch(Z);return yield _t.storage.deleteThrottleMetadata(),Lt}catch(Lt){if(!function(j){if(!(j instanceof he.ZR&&j.customData))return!1;const Z=Number(j.customData.httpStatus);return 429===Z||500===Z||503===Z||504===Z}(Lt))throw Lt;const nn={throttleEndTimeMillis:Date.now()+(0,he.$s)(Ge),backoffCount:Ge+1};return yield _t.storage.setThrottleMetadata(nn),_t.attemptFetch(Z,nn)}})()}}class Kt{constructor(Z,ge,Ge,_t,Lt){this.app=Z,this._client=ge,this._storageCache=Ge,this._storage=_t,this._logger=Lt,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function cn(j,Z){const ge=j.target.error||void 0;return Vr.create(Z,{originalErrorMessage:ge&&ge.message})}const Mn="app_namespace_store";class zs{constructor(Z,ge,Ge,_t=function(){return new Promise((j,Z)=>{try{const ge=indexedDB.open("firebase_remote_config",1);ge.onerror=Ge=>{Z(cn(Ge,"storage-open"))},ge.onsuccess=Ge=>{j(Ge.target.result)},ge.onupgradeneeded=Ge=>{0===Ge.oldVersion&&Ge.target.result.createObjectStore(Mn,{keyPath:"compositeKey"})}}catch(ge){Z(Vr.create("storage-open",{originalErrorMessage:ge}))}})}()){this.appId=Z,this.appName=ge,this.namespace=Ge,this.openDbPromise=_t}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(Z){return this.set("last_fetch_status",Z)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(Z){return this.set("last_successful_fetch_timestamp_millis",Z)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(Z){return this.set("last_successful_fetch_response",Z)}getActiveConfig(){return this.get("active_config")}setActiveConfig(Z){return this.set("active_config",Z)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(Z){return this.set("active_config_etag",Z)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(Z){return this.set("throttle_metadata",Z)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(Z){var ge=this;return(0,B.Z)(function*(){const Ge=yield ge.openDbPromise;return new Promise((_t,Lt)=>{const On=Ge.transaction([Mn],"readonly").objectStore(Mn),Un=ge.createCompositeKey(Z);try{const Yr=On.get(Un);Yr.onerror=Ar=>{Lt(cn(Ar,"storage-get"))},Yr.onsuccess=Ar=>{const fo=Ar.target.result;_t(fo?fo.value:void 0)}}catch(Yr){Lt(Vr.create("storage-get",{originalErrorMessage:Yr&&Yr.message}))}})})()}set(Z,ge){var Ge=this;return(0,B.Z)(function*(){const _t=yield Ge.openDbPromise;return new Promise((Lt,nn)=>{const Un=_t.transaction([Mn],"readwrite").objectStore(Mn),Yr=Ge.createCompositeKey(Z);try{const Ar=Un.put({compositeKey:Yr,value:ge});Ar.onerror=fo=>{nn(cn(fo,"storage-set"))},Ar.onsuccess=()=>{Lt()}}catch(Ar){nn(Vr.create("storage-set",{originalErrorMessage:Ar&&Ar.message}))}})})()}delete(Z){var ge=this;return(0,B.Z)(function*(){const Ge=yield ge.openDbPromise;return new Promise((_t,Lt)=>{const On=Ge.transaction([Mn],"readwrite").objectStore(Mn),Un=ge.createCompositeKey(Z);try{const Yr=On.delete(Un);Yr.onerror=Ar=>{Lt(cn(Ar,"storage-delete"))},Yr.onsuccess=()=>{_t()}}catch(Yr){Lt(Vr.create("storage-delete",{originalErrorMessage:Yr&&Yr.message}))}})})()}createCompositeKey(Z){return[this.appId,this.appName,this.namespace,Z].join()}}class Is{constructor(Z){this.storage=Z}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var Z=this;return(0,B.Z)(function*(){const ge=Z.storage.getLastFetchStatus(),Ge=Z.storage.getLastSuccessfulFetchTimestampMillis(),_t=Z.storage.getActiveConfig(),Lt=yield ge;Lt&&(Z.lastFetchStatus=Lt);const nn=yield Ge;nn&&(Z.lastSuccessfulFetchTimestampMillis=nn);const On=yield _t;On&&(Z.activeConfig=On)})()}setLastFetchStatus(Z){return this.lastFetchStatus=Z,this.storage.setLastFetchStatus(Z)}setLastSuccessfulFetchTimestampMillis(Z){return this.lastSuccessfulFetchTimestampMillis=Z,this.storage.setLastSuccessfulFetchTimestampMillis(Z)}setActiveConfig(Z){return this.activeConfig=Z,this.storage.setActiveConfig(Z)}}function Ks(){return Ds.apply(this,arguments)}function Ds(){return(Ds=(0,B.Z)(function*(){if(!(0,he.hl)())return!1;try{return yield(0,he.eu)()}catch(j){return!1}})).apply(this,arguments)}(0,ne._registerComponent)(new q.wA("remote-config",function(Z,{instanceIdentifier:ge}){const Ge=Z.getProvider("app").getImmediate(),_t=Z.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw Vr.create("registration-window");if(!(0,he.hl)())throw Vr.create("indexed-db-unavailable");const{projectId:Lt,apiKey:nn,appId:On}=Ge.options;if(!Lt)throw Vr.create("registration-project-id");if(!nn)throw Vr.create("registration-api-key");if(!On)throw Vr.create("registration-app-id");const Un=new zs(On,Ge.name,ge=ge||"firebase"),Yr=new Is(Un),Ar=new se.Yd(Gr);Ar.logLevel=se.in.ERROR;const fo=new yi(_t,ne.SDK_VERSION,ge,Lt,nn,On),Qs=new lt(fo,Un),ss=new ps(Qs,Un,Yr,Ar),Bo=new Kt(Ge,ss,Yr,Un,Ar);return function(j){const Z=(0,he.m9)(j);Z._initializePromise||(Z._initializePromise=Z._storageCache.loadFromStorage().then(()=>{Z._isInitializationComplete=!0}))}(Bo),Bo},"PUBLIC").setMultipleInstances(!0)),(0,ne.registerVersion)(Gr,"0.3.3"),(0,ne.registerVersion)(Gr,"0.3.3","esm2017");const Ts="/firebase-messaging-sw.js",vo="/firebase-cloud-messaging-push-scope",es="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ts="google.c.a.c_id",Yi="google.c.a.c_l",Zi="google.c.a.ts",us="google.c.a.e";var ui=(()=>{return(j=ui||(ui={})).PUSH_RECEIVED="push-received",j.NOTIFICATION_CLICKED="notification-clicked",ui;var j})();function vi(j){const Z=new Uint8Array(j);return btoa(String.fromCharCode(...Z)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function no(j){const ge=(j+"=".repeat((4-j.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),Ge=atob(ge),_t=new Uint8Array(Ge.length);for(let Lt=0;Lt<Ge.length;++Lt)_t[Lt]=Ge.charCodeAt(Lt);return _t}const Do="fcm_token_details_db",As="fcm_token_object_Store";function Ni(j){return Ms.apply(this,arguments)}function Ms(){return Ms=(0,B.Z)(function*(j){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Lt=>Lt.name).includes(Do))return null;let Z=null;return(yield(0,X.openDb)(Do,5,function(){var Ge=(0,B.Z)(function*(_t){var Lt;if(_t.oldVersion<2||!_t.objectStoreNames.contains(As))return;const nn=_t.transaction.objectStore(As),On=yield nn.index("fcmSenderId").get(j);if(yield nn.clear(),On)if(2===_t.oldVersion){const Un=On;if(!Un.auth||!Un.p256dh||!Un.endpoint)return;Z={token:Un.fcmToken,createTime:null!==(Lt=Un.createTime)&&void 0!==Lt?Lt:Date.now(),subscriptionOptions:{auth:Un.auth,p256dh:Un.p256dh,endpoint:Un.endpoint,swScope:Un.swScope,vapidKey:"string"==typeof Un.vapidKey?Un.vapidKey:vi(Un.vapidKey)}}}else if(3===_t.oldVersion){const Un=On;Z={token:Un.fcmToken,createTime:Un.createTime,subscriptionOptions:{auth:vi(Un.auth),p256dh:vi(Un.p256dh),endpoint:Un.endpoint,swScope:Un.swScope,vapidKey:vi(Un.vapidKey)}}}else if(4===_t.oldVersion){const Un=On;Z={token:Un.fcmToken,createTime:Un.createTime,subscriptionOptions:{auth:vi(Un.auth),p256dh:vi(Un.p256dh),endpoint:Un.endpoint,swScope:Un.swScope,vapidKey:vi(Un.vapidKey)}}}});return function(_t){return Ge.apply(this,arguments)}}())).close(),yield(0,X.deleteDb)(Do),yield(0,X.deleteDb)("fcm_vapid_details_db"),yield(0,X.deleteDb)("undefined"),Qo(Z)?Z:null}),Ms.apply(this,arguments)}function Qo(j){if(!j||!j.subscriptionOptions)return!1;const{subscriptionOptions:Z}=j;return"number"==typeof j.createTime&&j.createTime>0&&"string"==typeof j.token&&j.token.length>0&&"string"==typeof Z.auth&&Z.auth.length>0&&"string"==typeof Z.p256dh&&Z.p256dh.length>0&&"string"==typeof Z.endpoint&&Z.endpoint.length>0&&"string"==typeof Z.swScope&&Z.swScope.length>0&&"string"==typeof Z.vapidKey&&Z.vapidKey.length>0}const _r="firebase-messaging-store";let ko=null;function xs(){return ko||(ko=(0,X.openDb)("firebase-messaging-database",1,j=>{0===j.oldVersion&&j.createObjectStore(_r)})),ko}function G(j){return S.apply(this,arguments)}function S(){return(S=(0,B.Z)(function*(j){const Z=wt(j),Ge=yield(yield xs()).transaction(_r).objectStore(_r).get(Z);if(Ge)return Ge;{const _t=yield Ni(j.appConfig.senderId);if(_t)return yield y(j,_t),_t}})).apply(this,arguments)}function y(j,Z){return C.apply(this,arguments)}function C(){return(C=(0,B.Z)(function*(j,Z){const ge=wt(j),_t=(yield xs()).transaction(_r,"readwrite");return yield _t.objectStore(_r).put(Z,ge),yield _t.complete,Z})).apply(this,arguments)}function H(j){return je.apply(this,arguments)}function je(){return(je=(0,B.Z)(function*(j){const Z=wt(j),Ge=(yield xs()).transaction(_r,"readwrite");yield Ge.objectStore(_r).delete(Z),yield Ge.complete})).apply(this,arguments)}function wt({appConfig:j}){return j.appId}const Pn=new he.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Gn(j,Z){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,B.Z)(function*(j,Z){const ge=yield Os(j),Ge=Ys(Z),_t={method:"POST",headers:ge,body:JSON.stringify(Ge)};let Lt;try{Lt=yield(yield fetch(Tn(j.appConfig),_t)).json()}catch(nn){throw Pn.create("token-subscribe-failed",{errorInfo:nn})}if(Lt.error)throw Pn.create("token-subscribe-failed",{errorInfo:Lt.error.message});if(!Lt.token)throw Pn.create("token-subscribe-no-token");return Lt.token})).apply(this,arguments)}function rr(j,Z){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,B.Z)(function*(j,Z){const ge=yield Os(j),Ge=Ys(Z.subscriptionOptions),_t={method:"PATCH",headers:ge,body:JSON.stringify(Ge)};let Lt;try{Lt=yield(yield fetch(`${Tn(j.appConfig)}/${Z.token}`,_t)).json()}catch(nn){throw Pn.create("token-update-failed",{errorInfo:nn})}if(Lt.error)throw Pn.create("token-update-failed",{errorInfo:Lt.error.message});if(!Lt.token)throw Pn.create("token-update-no-token");return Lt.token})).apply(this,arguments)}function Ur(j,Z){return xr.apply(this,arguments)}function xr(){return(xr=(0,B.Z)(function*(j,Z){const Ge={method:"DELETE",headers:yield Os(j)};try{const Lt=yield(yield fetch(`${Tn(j.appConfig)}/${Z}`,Ge)).json();if(Lt.error)throw Pn.create("token-unsubscribe-failed",{errorInfo:Lt.error.message})}catch(_t){throw Pn.create("token-unsubscribe-failed",{errorInfo:_t})}})).apply(this,arguments)}function Tn({projectId:j}){return`https://fcmregistrations.googleapis.com/v1/projects/${j}/registrations`}function Os(j){return No.apply(this,arguments)}function No(){return(No=(0,B.Z)(function*({appConfig:j,installations:Z}){const ge=yield Z.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":j.apiKey,"x-goog-firebase-installations-auth":`FIS ${ge}`})})).apply(this,arguments)}function Ys({p256dh:j,auth:Z,endpoint:ge,vapidKey:Ge}){const _t={web:{endpoint:ge,auth:Z,p256dh:j}};return Ge!==es&&(_t.web.applicationPubKey=Ge),_t}const Ei=6048e5;function To(j){return ms.apply(this,arguments)}function ms(){return(ms=(0,B.Z)(function*(j){const Z=yield V(j.swRegistration,j.vapidKey),ge={vapidKey:j.vapidKey,swScope:j.swRegistration.scope,endpoint:Z.endpoint,auth:vi(Z.getKey("auth")),p256dh:vi(Z.getKey("p256dh"))},Ge=yield G(j.firebaseDependencies);if(Ge){if(me(Ge.subscriptionOptions,ge))return Date.now()>=Ge.createTime+Ei?Ir(j,{token:Ge.token,createTime:Date.now(),subscriptionOptions:ge}):Ge.token;try{yield Ur(j.firebaseDependencies,Ge.token)}catch(_t){console.warn(_t)}return w(j.firebaseDependencies,ge)}return w(j.firebaseDependencies,ge)})).apply(this,arguments)}function Za(j){return en.apply(this,arguments)}function en(){return(en=(0,B.Z)(function*(j){const Z=yield G(j.firebaseDependencies);Z&&(yield Ur(j.firebaseDependencies,Z.token),yield H(j.firebaseDependencies));const ge=yield j.swRegistration.pushManager.getSubscription();return!ge||ge.unsubscribe()})).apply(this,arguments)}function Ir(j,Z){return de.apply(this,arguments)}function de(){return(de=(0,B.Z)(function*(j,Z){try{const ge=yield rr(j.firebaseDependencies,Z),Ge=Object.assign(Object.assign({},Z),{token:ge,createTime:Date.now()});return yield y(j.firebaseDependencies,Ge),ge}catch(ge){throw yield Za(j),ge}})).apply(this,arguments)}function w(j,Z){return D.apply(this,arguments)}function D(){return(D=(0,B.Z)(function*(j,Z){const Ge={token:yield Gn(j,Z),createTime:Date.now(),subscriptionOptions:Z};return yield y(j,Ge),Ge.token})).apply(this,arguments)}function V(j,Z){return re.apply(this,arguments)}function re(){return(re=(0,B.Z)(function*(j,Z){return(yield j.pushManager.getSubscription())||j.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:no(Z)})})).apply(this,arguments)}function me(j,Z){return Z.vapidKey===j.vapidKey&&Z.endpoint===j.endpoint&&Z.auth===j.auth&&Z.p256dh===j.p256dh}function We(j){const Z={from:j.from,collapseKey:j.collapse_key,messageId:j.fcm_message_id};return function(j,Z){if(!Z.notification)return;j.notification={};const ge=Z.notification.title;ge&&(j.notification.title=ge);const Ge=Z.notification.body;Ge&&(j.notification.body=Ge);const _t=Z.notification.image;_t&&(j.notification.image=_t)}(Z,j),function(j,Z){!Z.data||(j.data=Z.data)}(Z,j),function(j,Z){if(!Z.fcmOptions)return;j.fcmOptions={};const ge=Z.fcmOptions.link;ge&&(j.fcmOptions.link=ge);const Ge=Z.fcmOptions.analytics_label;Ge&&(j.fcmOptions.analyticsLabel=Ge)}(Z,j),Z}function un(j){return"object"==typeof j&&!!j&&ts in j}function _n(j,Z){const ge=[];for(let Ge=0;Ge<j.length;Ge++)ge.push(j.charAt(Ge)),Ge<Z.length&&ge.push(Z.charAt(Ge));return ge.join("")}function ir(j){return Pn.create("missing-app-config-values",{valueName:j})}_n("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),_n("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Ln{constructor(Z,ge,Ge){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const _t=function(j){if(!j||!j.options)throw ir("App Configuration Object");if(!j.name)throw ir("App Name");const Z=["projectId","apiKey","appId","messagingSenderId"],{options:ge}=j;for(const Ge of Z)if(!ge[Ge])throw ir(Ge);return{appName:j.name,projectId:ge.projectId,apiKey:ge.apiKey,appId:ge.appId,senderId:ge.messagingSenderId}}(Z);this.firebaseDependencies={app:Z,appConfig:_t,installations:ge,analyticsProvider:Ge}}_delete(){return Promise.resolve()}}function zn(j){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,B.Z)(function*(j){try{j.swRegistration=yield navigator.serviceWorker.register(Ts,{scope:vo}),j.swRegistration.update().catch(()=>{})}catch(Z){throw Pn.create("failed-service-worker-registration",{browserErrorMessage:Z.message})}})).apply(this,arguments)}function dr(j,Z){return zr.apply(this,arguments)}function zr(){return(zr=(0,B.Z)(function*(j,Z){if(!Z&&!j.swRegistration&&(yield zn(j)),Z||!j.swRegistration){if(!(Z instanceof ServiceWorkerRegistration))throw Pn.create("invalid-sw-registration");j.swRegistration=Z}})).apply(this,arguments)}function $i(j,Z){return bi.apply(this,arguments)}function bi(){return(bi=(0,B.Z)(function*(j,Z){Z?j.vapidKey=Z:j.vapidKey||(j.vapidKey=es)})).apply(this,arguments)}function Bs(){return(Bs=(0,B.Z)(function*(j,Z){if(!navigator)throw Pn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Pn.create("permission-blocked");return yield $i(j,null==Z?void 0:Z.vapidKey),yield dr(j,null==Z?void 0:Z.serviceWorkerRegistration),To(j)})).apply(this,arguments)}function Li(j,Z,ge){return ro.apply(this,arguments)}function ro(){return(ro=(0,B.Z)(function*(j,Z,ge){const Ge=Zs(Z);(yield j.firebaseDependencies.analyticsProvider.get()).logEvent(Ge,{message_id:ge[ts],message_name:ge[Yi],message_time:ge[Zi],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Zs(j){switch(j){case ui.NOTIFICATION_CLICKED:return"notification_open";case ui.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Fr(){return(Fr=(0,B.Z)(function*(j,Z){const ge=Z.data;if(!ge.isFirebaseMessaging)return;j.onMessageHandler&&ge.messageType===ui.PUSH_RECEIVED&&("function"==typeof j.onMessageHandler?j.onMessageHandler(We(ge)):j.onMessageHandler.next(We(ge)));const Ge=ge.data;un(Ge)&&"1"===Ge[us]&&(yield Li(j,ge.messageType,Ge))})).apply(this,arguments)}const Rs="@firebase/messaging";function Bn(){return xn.apply(this,arguments)}function xn(){return(xn=(0,B.Z)(function*(){return"undefined"!=typeof window&&(0,he.hl)()&&(yield(0,he.eu)())&&(0,he.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}(0,ne._registerComponent)(new q.wA("messaging",j=>{const Z=new Ln(j.getProvider("app").getImmediate(),j.getProvider("installations-internal").getImmediate(),j.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",ge=>function(j,Z){return Fr.apply(this,arguments)}(Z,ge)),Z},"PUBLIC")),(0,ne._registerComponent)(new q.wA("messaging-internal",j=>{const Z=j.getProvider("messaging").getImmediate();return{getToken:Ge=>function(j,Z){return Bs.apply(this,arguments)}(Z,Ge)}},"PRIVATE")),(0,ne.registerVersion)(Rs,"0.9.4"),(0,ne.registerVersion)(Rs,"0.9.4","esm2017");const Ai="analytics",ys="firebase_id",oa="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",dl="https://www.googletagmanager.com/gtag/js",Jr=new se.Yd("@firebase/analytics");function oo(j){return Promise.all(j.map(Z=>Z.catch(ge=>ge)))}function Xo(j,Z){const ge=document.createElement("script");ge.src=`${dl}?l=${j}&id=${Z}`,ge.async=!0,document.head.appendChild(ge)}function Es(j,Z,ge,Ge,_t,Lt){return ga.apply(this,arguments)}function ga(){return(ga=(0,B.Z)(function*(j,Z,ge,Ge,_t,Lt){const nn=Ge[_t];try{if(nn)yield Z[nn];else{const Un=(yield oo(ge)).find(Yr=>Yr.measurementId===_t);Un&&(yield Z[Un.appId])}}catch(On){Jr.error(On)}j("config",_t,Lt)})).apply(this,arguments)}function Lo(j,Z,ge,Ge,_t){return rs.apply(this,arguments)}function rs(){return(rs=(0,B.Z)(function*(j,Z,ge,Ge,_t){try{let Lt=[];if(_t&&_t.send_to){let nn=_t.send_to;Array.isArray(nn)||(nn=[nn]);const On=yield oo(ge);for(const Un of nn){const Yr=On.find(fo=>fo.measurementId===Un),Ar=Yr&&Z[Yr.appId];if(!Ar){Lt=[];break}Lt.push(Ar)}}0===Lt.length&&(Lt=Object.values(Z)),yield Promise.all(Lt),j("event",Ge,_t||{})}catch(Lt){Jr.error(Lt)}})).apply(this,arguments)}function ea(){const j=window.document.getElementsByTagName("script");for(const Z of Object.values(j))if(Z.src&&Z.src.includes(dl))return Z;return null}const Vs=new he.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),ta=new class{constructor(Z={},ge=1e3){this.throttleMetadata=Z,this.intervalMillis=ge}getThrottleMetadata(Z){return this.throttleMetadata[Z]}setThrottleMetadata(Z,ge){this.throttleMetadata[Z]=ge}deleteThrottleMetadata(Z){delete this.throttleMetadata[Z]}};function Gl(j){return new Headers({Accept:"application/json","x-goog-api-key":j})}function na(j){return Pa.apply(this,arguments)}function Pa(){return(Pa=(0,B.Z)(function*(j){var Z;const{appId:ge,apiKey:Ge}=j,_t={method:"GET",headers:Gl(Ge)},Lt=oa.replace("{app-id}",ge),nn=yield fetch(Lt,_t);if(200!==nn.status&&304!==nn.status){let On="";try{const Un=yield nn.json();(null===(Z=Un.error)||void 0===Z?void 0:Z.message)&&(On=Un.error.message)}catch(Un){}throw Vs.create("config-fetch-failed",{httpStatus:nn.status,responseMessage:On})}return nn.json()})).apply(this,arguments)}function Wo(j){return Bi.apply(this,arguments)}function Bi(){return(Bi=(0,B.Z)(function*(j,Z=ta,ge){const{appId:Ge,apiKey:_t,measurementId:Lt}=j.options;if(!Ge)throw Vs.create("no-app-id");if(!_t){if(Lt)return{measurementId:Lt,appId:Ge};throw Vs.create("no-api-key")}const nn=Z.getThrottleMetadata(Ge)||{backoffCount:0,throttleEndTimeMillis:Date.now()},On=new W;return setTimeout((0,B.Z)(function*(){On.abort()}),void 0!==ge?ge:6e4),F({appId:Ge,apiKey:_t,measurementId:Lt},nn,On,Z)})).apply(this,arguments)}function F(j,Z,ge){return R.apply(this,arguments)}function R(){return(R=(0,B.Z)(function*(j,{throttleEndTimeMillis:Z,backoffCount:ge},Ge,_t=ta){const{appId:Lt,measurementId:nn}=j;try{yield M(Ge,Z)}catch(On){if(nn)return Jr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${nn} provided in the "measurementId" field in the local Firebase config. [${On.message}]`),{appId:Lt,measurementId:nn};throw On}try{const On=yield na(j);return _t.deleteThrottleMetadata(Lt),On}catch(On){if(!z(On)){if(_t.deleteThrottleMetadata(Lt),nn)return Jr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${nn} provided in the "measurementId" field in the local Firebase config. [${On.message}]`),{appId:Lt,measurementId:nn};throw On}const Un=503===Number(On.customData.httpStatus)?(0,he.$s)(ge,_t.intervalMillis,30):(0,he.$s)(ge,_t.intervalMillis),Yr={throttleEndTimeMillis:Date.now()+Un,backoffCount:ge+1};return _t.setThrottleMetadata(Lt,Yr),Jr.debug(`Calling attemptFetch again in ${Un} millis`),F(j,Yr,Ge,_t)}})).apply(this,arguments)}function M(j,Z){return new Promise((ge,Ge)=>{const _t=Math.max(Z-Date.now(),0),Lt=setTimeout(ge,_t);j.addEventListener(()=>{clearTimeout(Lt),Ge(Vs.create("fetch-throttle",{throttleEndTimeMillis:Z}))})})}function z(j){if(!(j instanceof he.ZR&&j.customData))return!1;const Z=Number(j.customData.httpStatus);return 429===Z||500===Z||503===Z||504===Z}class W{constructor(){this.listeners=[]}addEventListener(Z){this.listeners.push(Z)}abort(){this.listeners.forEach(Z=>Z())}}function pe(){return Be.apply(this,arguments)}function Be(){return(Be=(0,B.Z)(function*(){if(!(0,he.hl)())return Jr.warn(Vs.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,he.eu)()}catch(j){return Jr.warn(Vs.create("indexeddb-unavailable",{errorInfo:j}).message),!1}return!0})).apply(this,arguments)}function ht(){return(ht=(0,B.Z)(function*(j,Z,ge,Ge,_t,Lt,nn){var On;const Un=Wo(j);Un.then(ss=>{ge[ss.measurementId]=ss.appId,j.options.measurementId&&ss.measurementId!==j.options.measurementId&&Jr.warn(`The measurement ID in the local Firebase config (${j.options.measurementId}) does not match the measurement ID fetched from the server (${ss.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(ss=>Jr.error(ss)),Z.push(Un);const Yr=pe().then(ss=>{if(ss)return Ge.getId()}),[Ar,fo]=yield Promise.all([Un,Yr]);ea()||Xo(Lt,Ar.measurementId),_t("js",new Date);const Qs=null!==(On=null==nn?void 0:nn.config)&&void 0!==On?On:{};return Qs.origin="firebase",Qs.update=!0,null!=fo&&(Qs[ys]=fo),_t("config",Ar.measurementId,Qs),Ar.measurementId})).apply(this,arguments)}class Jt{constructor(Z){this.app=Z}_delete(){return delete sr[this.app.options.appId],Promise.resolve()}}let sr={},Vt=[];const Et={};let ao,ei,Bt="dataLayer",ds=!1;function _a(j,Z,ge){!function(){const j=[];if((0,he.ru)()&&j.push("This is a browser extension environment."),(0,he.zI)()||j.push("Cookies are not available."),j.length>0){const Z=j.map((Ge,_t)=>`(${_t+1}) ${Ge}`).join(" "),ge=Vs.create("invalid-analytics-context",{errorInfo:Z});Jr.warn(ge.message)}}();const Ge=j.options.appId;if(!Ge)throw Vs.create("no-app-id");if(!j.options.apiKey){if(!j.options.measurementId)throw Vs.create("no-api-key");Jr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${j.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=sr[Ge])throw Vs.create("already-exists",{id:Ge});if(!ds){!function(j){let Z=[];Array.isArray(window[j])?Z=window[j]:window[j]=Z}(Bt);const{wrappedGtag:Lt,gtagCore:nn}=function(j,Z,ge,Ge,_t){let Lt=function(...nn){window[Ge].push(arguments)};return window[_t]&&"function"==typeof window[_t]&&(Lt=window[_t]),window[_t]=function(j,Z,ge,Ge){function Lt(){return(Lt=(0,B.Z)(function*(nn,On,Un){try{"event"===nn?yield Lo(j,Z,ge,On,Un):"config"===nn?yield Es(j,Z,ge,Ge,On,Un):j("set",On)}catch(Yr){Jr.error(Yr)}})).apply(this,arguments)}return function(nn,On,Un){return Lt.apply(this,arguments)}}(Lt,j,Z,ge),{gtagCore:Lt,wrappedGtag:window[_t]}}(sr,Vt,Et,Bt,"gtag");ei=Lt,ao=nn,ds=!0}return sr[Ge]=function(j,Z,ge,Ge,_t,Lt,nn){return ht.apply(this,arguments)}(j,Vt,Et,Z,ao,Bt,ge),new Jt(j)}function gc(){return(gc=(0,B.Z)(function*(j,Z,ge,Ge,_t){if(_t&&_t.global)j("event",ge,Ge);else{const Lt=yield Z;j("event",ge,Object.assign(Object.assign({},Ge),{send_to:Lt}))}})).apply(this,arguments)}function jr(){return pl.apply(this,arguments)}function pl(){return(pl=(0,B.Z)(function*(){if((0,he.ru)()||!(0,he.zI)()||!(0,he.hl)())return!1;try{return yield(0,he.eu)()}catch(j){return!1}})).apply(this,arguments)}const _c="@firebase/analytics";(0,ne._registerComponent)(new q.wA(Ai,(Z,{options:ge})=>_a(Z.getProvider("app").getImmediate(),Z.getProvider("installations-internal").getImmediate(),ge),"PUBLIC")),(0,ne._registerComponent)(new q.wA("analytics-internal",function(Z){try{const ge=Z.getProvider(Ai).getImmediate();return{logEvent:(Ge,_t,Lt)=>function(j,Z,ge,Ge){j=(0,he.m9)(j),function(j,Z,ge,Ge,_t){return gc.apply(this,arguments)}(ei,sr[j.app.options.appId],Z,ge,Ge).catch(_t=>Jr.error(_t))}(ge,Ge,_t,Lt)}}catch(ge){throw Vs.create("interop-component-reg-failed",{reason:ge})}},"PRIVATE")),(0,ne.registerVersion)(_c,"0.7.4"),(0,ne.registerVersion)(_c,"0.7.4","esm2017");var fi=x(341),Mi=x(353),la=x(2868),Nu=x(3334),Fu=x(7770);const Us=new g.GfV("7.2.0"),ka="__angularfire_symbol__analyticsIsSupported",Vn="__angularfire_symbol__remoteConfigIsSupported",Eo="__angularfire_symbol__messagingIsSupported";function js(j,Z,ge){if(Z){if(1===Z.length)return Z[0];const Lt=Z.filter(nn=>nn.app===ge);if(1===Lt.length)return Lt[0]}return ge.container.getProvider(j).getImmediate({optional:!0})}globalThis[ka]||(globalThis[ka]=jr().then(j=>globalThis.__angularfire_symbol__analyticsIsSupportedValue=j)),globalThis[Eo]||(globalThis[Eo]=Bn().then(j=>globalThis.__angularfire_symbol__messagingIsSupportedValue=j)),globalThis[Vn]||(globalThis[Vn]=Ks().then(j=>globalThis.__angularfire_symbol__remoteConfigIsSupportedValue=j));const Fa=(j,Z)=>{const ge=Z?[Z]:(0,E.C6)(),Ge=[];return ge.forEach(_t=>{_t.container.getProvider(j).instances.forEach(nn=>{Ge.includes(nn)||Ge.push(nn)})}),Ge};function Ao(){}class ml{constructor(Z,ge=fi.N){this.zone=Z,this.delegate=ge}now(){return this.delegate.now()}schedule(Z,ge,Ge){const _t=this.zone;return this.delegate.schedule(function(nn){_t.runGuarded(()=>{Z.apply(this,[nn])})},ge,Ge)}}class Jc{constructor(Z){this.zone=Z,this.task=null}call(Z,ge){const Ge=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Ao,{},Ao,Ao)),ge.pipe((0,la.b)({next:Ge,complete:Ge,error:Ge})).subscribe(Z).add(Ge)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Wl=(()=>{class j{constructor(ge){this.ngZone=ge,this.outsideAngular=ge.runOutsideAngular(()=>new ml(Zone.current)),this.insideAngular=ge.run(()=>new ml(Zone.current,Mi.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return j.\u0275fac=function(ge){return new(ge||j)(g.LFG(g.R0b))},j.\u0275prov=g.Yz7({token:j,factory:j.\u0275fac,providedIn:"root"}),j})();function ra(){const j=globalThis.\u0275AngularFireScheduler;if(!j)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return j}function La(j){return ra(),function(j){return function(ge){return(ge=ge.lift(new Jc(j.ngZone))).pipe((0,Nu.R)(j.outsideAngular),(0,Fu.QV)(j.insideAngular))}}(ra())(j)}},1377:($t,$e,x)=>{"use strict";x.d($e,{lW:()=>oe,ot:()=>Me});var g=x(6201),E=x(6360),B=x(5e3),ne=x(1879);const he=["mat-button",""],q=["*"],ie=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],Q=(0,g.pj)((0,g.Id)((0,g.Kr)(class{constructor(Ve){this._elementRef=Ve}})));let oe=(()=>{class Ve extends Q{constructor(Oe,ee,Te){super(Oe),this._focusMonitor=ee,this._animationMode=Te,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const He of ie)this._hasHostAttributes(He)&&this._getHostElement().classList.add(He);Oe.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(Oe,ee){Oe?this._focusMonitor.focusVia(this._getHostElement(),Oe,ee):this._getHostElement().focus(ee)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...Oe){return Oe.some(ee=>this._getHostElement().hasAttribute(ee))}}return Ve.\u0275fac=function(Oe){return new(Oe||Ve)(B.Y36(B.SBq),B.Y36(ne.tE),B.Y36(E.Qb,8))},Ve.\u0275cmp=B.Xpm({type:Ve,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(Oe,ee){if(1&Oe&&B.Gf(g.wG,5),2&Oe){let Te;B.iGM(Te=B.CRH())&&(ee.ripple=Te.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(Oe,ee){2&Oe&&(B.uIk("disabled",ee.disabled||null),B.ekj("_mat-animation-noopable","NoopAnimations"===ee._animationMode)("mat-button-disabled",ee.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[B.qOj],attrs:he,ngContentSelectors:q,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(Oe,ee){1&Oe&&(B.F$t(),B.TgZ(0,"span",0),B.Hsn(1),B.qZA(),B._UZ(2,"span",1),B._UZ(3,"span",2)),2&Oe&&(B.xp6(2),B.ekj("mat-button-ripple-round",ee.isRoundButton||ee.isIconButton),B.Q6J("matRippleDisabled",ee._isRippleDisabled())("matRippleCentered",ee.isIconButton)("matRippleTrigger",ee._getHostElement()))},directives:[g.wG],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),Ve})(),Me=(()=>{class Ve{}return Ve.\u0275fac=function(Oe){return new(Oe||Ve)},Ve.\u0275mod=B.oAB({type:Ve}),Ve.\u0275inj=B.cJS({imports:[[g.si,g.BQ],g.BQ]}),Ve})()},3482:($t,$e,x)=>{"use strict";x.d($e,{oG:()=>Te,p9:()=>ft});var g=x(4865),E=x(5e3),B=x(3075),ne=x(6201),he=x(6360),q=x(3263),se=x(1879);const X=["input"],ie=function(we){return{enterDuration:we}},Q=["*"],oe=new E.OlP("mat-checkbox-default-options",{providedIn:"root",factory:ae});function ae(){return{color:"accent",clickAction:"check-indeterminate"}}let Me=0;const Ve=ae(),xe={provide:B.JU,useExisting:(0,E.Gpc)(()=>Te),multi:!0};class Oe{}const ee=(0,ne.sb)((0,ne.pj)((0,ne.Kr)((0,ne.Id)(class{constructor(we){this._elementRef=we}}))));let Te=(()=>{class we extends ee{constructor(qe,et,At,Ut,Zt,jt,tn){super(qe),this._changeDetectorRef=et,this._focusMonitor=At,this._ngZone=Ut,this._animationMode=jt,this._options=tn,this.ariaLabel="",this.ariaLabelledby=null,this._uniqueId="mat-checkbox-"+ ++Me,this.id=this._uniqueId,this.labelPosition="after",this.name=null,this.change=new E.vpe,this.indeterminateChange=new E.vpe,this._onTouched=()=>{},this._currentAnimationClass="",this._currentCheckState=0,this._controlValueAccessorChangeFn=()=>{},this._checked=!1,this._disabled=!1,this._indeterminate=!1,this._options=this._options||Ve,this.color=this.defaultColor=this._options.color||Ve.color,this.tabIndex=parseInt(Zt)||0}get inputId(){return`${this.id||this._uniqueId}-input`}get required(){return this._required}set required(qe){this._required=(0,g.Ig)(qe)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(qe=>{qe||Promise.resolve().then(()=>{this._onTouched(),this._changeDetectorRef.markForCheck()})}),this._syncIndeterminate(this._indeterminate)}ngAfterViewChecked(){}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}get checked(){return this._checked}set checked(qe){qe!=this.checked&&(this._checked=qe,this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(qe){const et=(0,g.Ig)(qe);et!==this.disabled&&(this._disabled=et,this._changeDetectorRef.markForCheck())}get indeterminate(){return this._indeterminate}set indeterminate(qe){const et=qe!=this._indeterminate;this._indeterminate=(0,g.Ig)(qe),et&&(this._transitionCheckState(this._indeterminate?3:this.checked?1:2),this.indeterminateChange.emit(this._indeterminate)),this._syncIndeterminate(this._indeterminate)}_isRippleDisabled(){return this.disableRipple||this.disabled}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}writeValue(qe){this.checked=!!qe}registerOnChange(qe){this._controlValueAccessorChangeFn=qe}registerOnTouched(qe){this._onTouched=qe}setDisabledState(qe){this.disabled=qe}_getAriaChecked(){return this.checked?"true":this.indeterminate?"mixed":"false"}_transitionCheckState(qe){let et=this._currentCheckState,At=this._elementRef.nativeElement;if(et!==qe&&(this._currentAnimationClass.length>0&&At.classList.remove(this._currentAnimationClass),this._currentAnimationClass=this._getAnimationClassForCheckStateTransition(et,qe),this._currentCheckState=qe,this._currentAnimationClass.length>0)){At.classList.add(this._currentAnimationClass);const Ut=this._currentAnimationClass;this._ngZone.runOutsideAngular(()=>{setTimeout(()=>{At.classList.remove(Ut)},1e3)})}}_emitChangeEvent(){const qe=new Oe;qe.source=this,qe.checked=this.checked,this._controlValueAccessorChangeFn(this.checked),this.change.emit(qe),this._inputElement&&(this._inputElement.nativeElement.checked=this.checked)}toggle(){this.checked=!this.checked}_onInputClick(qe){var et;const At=null===(et=this._options)||void 0===et?void 0:et.clickAction;qe.stopPropagation(),this.disabled||"noop"===At?!this.disabled&&"noop"===At&&(this._inputElement.nativeElement.checked=this.checked,this._inputElement.nativeElement.indeterminate=this.indeterminate):(this.indeterminate&&"check"!==At&&Promise.resolve().then(()=>{this._indeterminate=!1,this.indeterminateChange.emit(this._indeterminate)}),this.toggle(),this._transitionCheckState(this._checked?1:2),this._emitChangeEvent())}focus(qe,et){qe?this._focusMonitor.focusVia(this._inputElement,qe,et):this._inputElement.nativeElement.focus(et)}_onInteractionEvent(qe){qe.stopPropagation()}_getAnimationClassForCheckStateTransition(qe,et){if("NoopAnimations"===this._animationMode)return"";let At="";switch(qe){case 0:if(1===et)At="unchecked-checked";else{if(3!=et)return"";At="unchecked-indeterminate"}break;case 2:At=1===et?"unchecked-checked":"unchecked-indeterminate";break;case 1:At=2===et?"checked-unchecked":"checked-indeterminate";break;case 3:At=1===et?"indeterminate-checked":"indeterminate-unchecked"}return`mat-checkbox-anim-${At}`}_syncIndeterminate(qe){const et=this._inputElement;et&&(et.nativeElement.indeterminate=qe)}}return we.\u0275fac=function(qe){return new(qe||we)(E.Y36(E.SBq),E.Y36(E.sBO),E.Y36(se.tE),E.Y36(E.R0b),E.$8M("tabindex"),E.Y36(he.Qb,8),E.Y36(oe,8))},we.\u0275cmp=E.Xpm({type:we,selectors:[["mat-checkbox"]],viewQuery:function(qe,et){if(1&qe&&(E.Gf(X,5),E.Gf(ne.wG,5)),2&qe){let At;E.iGM(At=E.CRH())&&(et._inputElement=At.first),E.iGM(At=E.CRH())&&(et.ripple=At.first)}},hostAttrs:[1,"mat-checkbox"],hostVars:12,hostBindings:function(qe,et){2&qe&&(E.Ikx("id",et.id),E.uIk("tabindex",null),E.ekj("mat-checkbox-indeterminate",et.indeterminate)("mat-checkbox-checked",et.checked)("mat-checkbox-disabled",et.disabled)("mat-checkbox-label-before","before"==et.labelPosition)("_mat-animation-noopable","NoopAnimations"===et._animationMode))},inputs:{disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],id:"id",labelPosition:"labelPosition",name:"name",required:"required",checked:"checked",disabled:"disabled",indeterminate:"indeterminate",ariaDescribedby:["aria-describedby","ariaDescribedby"],value:"value"},outputs:{change:"change",indeterminateChange:"indeterminateChange"},exportAs:["matCheckbox"],features:[E._Bn([xe]),E.qOj],ngContentSelectors:Q,decls:17,vars:21,consts:[[1,"mat-checkbox-layout"],["label",""],[1,"mat-checkbox-inner-container"],["type","checkbox",1,"mat-checkbox-input","cdk-visually-hidden",3,"id","required","checked","disabled","tabIndex","change","click"],["input",""],["matRipple","",1,"mat-checkbox-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleRadius","matRippleCentered","matRippleAnimation"],[1,"mat-ripple-element","mat-checkbox-persistent-ripple"],[1,"mat-checkbox-frame"],[1,"mat-checkbox-background"],["version","1.1","focusable","false","viewBox","0 0 24 24",0,"xml","space","preserve","aria-hidden","true",1,"mat-checkbox-checkmark"],["fill","none","stroke","white","d","M4.1,12.7 9,17.6 20.3,6.3",1,"mat-checkbox-checkmark-path"],[1,"mat-checkbox-mixedmark"],[1,"mat-checkbox-label",3,"cdkObserveContent"],["checkboxLabel",""],[2,"display","none"]],template:function(qe,et){if(1&qe&&(E.F$t(),E.TgZ(0,"label",0,1),E.TgZ(2,"span",2),E.TgZ(3,"input",3,4),E.NdJ("change",function(Ut){return et._onInteractionEvent(Ut)})("click",function(Ut){return et._onInputClick(Ut)}),E.qZA(),E.TgZ(5,"span",5),E._UZ(6,"span",6),E.qZA(),E._UZ(7,"span",7),E.TgZ(8,"span",8),E.O4$(),E.TgZ(9,"svg",9),E._UZ(10,"path",10),E.qZA(),E.kcU(),E._UZ(11,"span",11),E.qZA(),E.qZA(),E.TgZ(12,"span",12,13),E.NdJ("cdkObserveContent",function(){return et._onLabelTextChange()}),E.TgZ(14,"span",14),E._uU(15,"\xa0"),E.qZA(),E.Hsn(16),E.qZA(),E.qZA()),2&qe){const At=E.MAs(1),Ut=E.MAs(13);E.uIk("for",et.inputId),E.xp6(2),E.ekj("mat-checkbox-inner-container-no-side-margin",!Ut.textContent||!Ut.textContent.trim()),E.xp6(1),E.Q6J("id",et.inputId)("required",et.required)("checked",et.checked)("disabled",et.disabled)("tabIndex",et.tabIndex),E.uIk("value",et.value)("name",et.name)("aria-label",et.ariaLabel||null)("aria-labelledby",et.ariaLabelledby)("aria-checked",et._getAriaChecked())("aria-describedby",et.ariaDescribedby),E.xp6(2),E.Q6J("matRippleTrigger",At)("matRippleDisabled",et._isRippleDisabled())("matRippleRadius",20)("matRippleCentered",!0)("matRippleAnimation",E.VKq(19,ie,"NoopAnimations"===et._animationMode?0:150))}},directives:[ne.wG,q.wD],styles:["@keyframes mat-checkbox-fade-in-background{0%{opacity:0}50%{opacity:1}}@keyframes mat-checkbox-fade-out-background{0%,50%{opacity:1}100%{opacity:0}}@keyframes mat-checkbox-unchecked-checked-checkmark-path{0%,50%{stroke-dashoffset:22.910259}50%{animation-timing-function:cubic-bezier(0, 0, 0.2, 0.1)}100%{stroke-dashoffset:0}}@keyframes mat-checkbox-unchecked-indeterminate-mixedmark{0%,68.2%{transform:scaleX(0)}68.2%{animation-timing-function:cubic-bezier(0, 0, 0, 1)}100%{transform:scaleX(1)}}@keyframes mat-checkbox-checked-unchecked-checkmark-path{from{animation-timing-function:cubic-bezier(0.4, 0, 1, 1);stroke-dashoffset:0}to{stroke-dashoffset:-22.910259}}@keyframes mat-checkbox-checked-indeterminate-checkmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 0.1);opacity:1;transform:rotate(0deg)}to{opacity:0;transform:rotate(45deg)}}@keyframes mat-checkbox-indeterminate-checked-checkmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);opacity:0;transform:rotate(45deg)}to{opacity:1;transform:rotate(360deg)}}@keyframes mat-checkbox-checked-indeterminate-mixedmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 0.1);opacity:0;transform:rotate(-45deg)}to{opacity:1;transform:rotate(0deg)}}@keyframes mat-checkbox-indeterminate-checked-mixedmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);opacity:1;transform:rotate(0deg)}to{opacity:0;transform:rotate(315deg)}}@keyframes mat-checkbox-indeterminate-unchecked-mixedmark{0%{animation-timing-function:linear;opacity:1;transform:scaleX(1)}32.8%,100%{opacity:0;transform:scaleX(0)}}.mat-checkbox-background,.mat-checkbox-frame{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:2px;box-sizing:border-box;pointer-events:none}.mat-checkbox{display:inline-block;transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);cursor:pointer;-webkit-tap-highlight-color:transparent}._mat-animation-noopable.mat-checkbox{transition:none;animation:none}.mat-checkbox .mat-ripple-element:not(.mat-checkbox-persistent-ripple){opacity:.16}.mat-checkbox .mat-checkbox-ripple{position:absolute;left:calc(50% - 20px);top:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.cdk-high-contrast-active .mat-checkbox.cdk-keyboard-focused .mat-checkbox-ripple{outline:solid 3px}.mat-checkbox-layout{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:inherit;align-items:baseline;vertical-align:middle;display:inline-flex;white-space:nowrap}.mat-checkbox-label{-webkit-user-select:auto;-moz-user-select:auto;-ms-user-select:auto;user-select:auto}.mat-checkbox-inner-container{display:inline-block;height:16px;line-height:0;margin:auto;margin-right:8px;order:0;position:relative;vertical-align:middle;white-space:nowrap;width:16px;flex-shrink:0}[dir=rtl] .mat-checkbox-inner-container{margin-left:8px;margin-right:auto}.mat-checkbox-inner-container-no-side-margin{margin-left:0;margin-right:0}.mat-checkbox-frame{background-color:transparent;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1);border-width:2px;border-style:solid}._mat-animation-noopable .mat-checkbox-frame{transition:none}.mat-checkbox-background{align-items:center;display:inline-flex;justify-content:center;transition:background-color 90ms cubic-bezier(0, 0, 0.2, 0.1),opacity 90ms cubic-bezier(0, 0, 0.2, 0.1);-webkit-print-color-adjust:exact;color-adjust:exact}._mat-animation-noopable .mat-checkbox-background{transition:none}.cdk-high-contrast-active .mat-checkbox .mat-checkbox-background{background:none}.mat-checkbox-persistent-ripple{display:block;width:100%;height:100%;transform:none}.mat-checkbox-inner-container:hover .mat-checkbox-persistent-ripple{opacity:.04}.mat-checkbox.cdk-keyboard-focused .mat-checkbox-persistent-ripple{opacity:.12}.mat-checkbox-persistent-ripple,.mat-checkbox.mat-checkbox-disabled .mat-checkbox-inner-container:hover .mat-checkbox-persistent-ripple{opacity:0}@media(hover: none){.mat-checkbox-inner-container:hover .mat-checkbox-persistent-ripple{display:none}}.mat-checkbox-checkmark{top:0;left:0;right:0;bottom:0;position:absolute;width:100%}.mat-checkbox-checkmark-path{stroke-dashoffset:22.910259;stroke-dasharray:22.910259;stroke-width:2.1333333333px}.cdk-high-contrast-black-on-white .mat-checkbox-checkmark-path{stroke:#000 !important}.mat-checkbox-mixedmark{width:calc(100% - 6px);height:2px;opacity:0;transform:scaleX(0) rotate(0deg);border-radius:2px}.cdk-high-contrast-active .mat-checkbox-mixedmark{height:0;border-top:solid 2px;margin-top:2px}.mat-checkbox-label-before .mat-checkbox-inner-container{order:1;margin-left:8px;margin-right:auto}[dir=rtl] .mat-checkbox-label-before .mat-checkbox-inner-container{margin-left:auto;margin-right:8px}.mat-checkbox-checked .mat-checkbox-checkmark{opacity:1}.mat-checkbox-checked .mat-checkbox-checkmark-path{stroke-dashoffset:0}.mat-checkbox-checked .mat-checkbox-mixedmark{transform:scaleX(1) rotate(-45deg)}.mat-checkbox-indeterminate .mat-checkbox-checkmark{opacity:0;transform:rotate(45deg)}.mat-checkbox-indeterminate .mat-checkbox-checkmark-path{stroke-dashoffset:0}.mat-checkbox-indeterminate .mat-checkbox-mixedmark{opacity:1;transform:scaleX(1) rotate(0deg)}.mat-checkbox-unchecked .mat-checkbox-background{background-color:transparent}.mat-checkbox-disabled{cursor:default}.cdk-high-contrast-active .mat-checkbox-disabled{opacity:.5}.mat-checkbox-anim-unchecked-checked .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-in-background}.mat-checkbox-anim-unchecked-checked .mat-checkbox-checkmark-path{animation:180ms linear 0ms mat-checkbox-unchecked-checked-checkmark-path}.mat-checkbox-anim-unchecked-indeterminate .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-in-background}.mat-checkbox-anim-unchecked-indeterminate .mat-checkbox-mixedmark{animation:90ms linear 0ms mat-checkbox-unchecked-indeterminate-mixedmark}.mat-checkbox-anim-checked-unchecked .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-out-background}.mat-checkbox-anim-checked-unchecked .mat-checkbox-checkmark-path{animation:90ms linear 0ms mat-checkbox-checked-unchecked-checkmark-path}.mat-checkbox-anim-checked-indeterminate .mat-checkbox-checkmark{animation:90ms linear 0ms mat-checkbox-checked-indeterminate-checkmark}.mat-checkbox-anim-checked-indeterminate .mat-checkbox-mixedmark{animation:90ms linear 0ms mat-checkbox-checked-indeterminate-mixedmark}.mat-checkbox-anim-indeterminate-checked .mat-checkbox-checkmark{animation:500ms linear 0ms mat-checkbox-indeterminate-checked-checkmark}.mat-checkbox-anim-indeterminate-checked .mat-checkbox-mixedmark{animation:500ms linear 0ms mat-checkbox-indeterminate-checked-mixedmark}.mat-checkbox-anim-indeterminate-unchecked .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-out-background}.mat-checkbox-anim-indeterminate-unchecked .mat-checkbox-mixedmark{animation:300ms linear 0ms mat-checkbox-indeterminate-unchecked-mixedmark}.mat-checkbox-input{bottom:0;left:50%}\n"],encapsulation:2,changeDetection:0}),we})(),rt=(()=>{class we{}return we.\u0275fac=function(qe){return new(qe||we)},we.\u0275mod=E.oAB({type:we}),we.\u0275inj=E.cJS({}),we})(),ft=(()=>{class we{}return we.\u0275fac=function(qe){return new(qe||we)},we.\u0275mod=E.oAB({type:we}),we.\u0275inj=E.cJS({imports:[[ne.si,ne.BQ,q.Q8,rt],ne.BQ,rt]}),we})()},6201:($t,$e,x)=>{"use strict";x.d($e,{rD:()=>rn,BQ:()=>we,X2:()=>En,uc:()=>Rt,wG:()=>be,si:()=>N,pj:()=>qe,Kr:()=>et,Id:()=>Pe,FD:()=>Ut,sb:()=>At,E0:()=>bn});var g=x(5e3),E=x(1879),B=x(3887);const ne=new g.GfV("12.2.11");var he=x(9808),q=x(4565),se=x(4865),X=x(8929),ie=x(1059),Q=x(6360);x(9909);const yt=new g.GfV("12.2.11"),ft=new g.OlP("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let ar,we=(()=>{class it{constructor(De,ve,Ce){this._hasDoneGlobalChecks=!1,this._document=Ce,De._applyBodyHighContrastModeCssClasses(),this._sanityChecks=ve,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}_checkIsEnabled(De){return!(!(0,g.X6Q)()||(0,q.Oy)())&&("boolean"==typeof this._sanityChecks?this._sanityChecks:!!this._sanityChecks[De])}_checkDoctypeIsDefined(){this._checkIsEnabled("doctype")&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}_checkThemeIsPresent(){if(!this._checkIsEnabled("theme")||!this._document.body||"function"!=typeof getComputedStyle)return;const De=this._document.createElement("div");De.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(De);const ve=getComputedStyle(De);ve&&"none"!==ve.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),this._document.body.removeChild(De)}_checkCdkVersionMatch(){this._checkIsEnabled("version")&&yt.full!==ne.full&&console.warn("The Angular Material version ("+yt.full+") does not match the Angular CDK version ("+ne.full+").\nPlease ensure the versions of these two packages exactly match.")}}return it.\u0275fac=function(De){return new(De||it)(g.LFG(E.qm),g.LFG(ft,8),g.LFG(he.K0))},it.\u0275mod=g.oAB({type:it}),it.\u0275inj=g.cJS({imports:[[B.vT],B.vT]}),it})();function Pe(it){return class extends it{constructor(...Qe){super(...Qe),this._disabled=!1}get disabled(){return this._disabled}set disabled(Qe){this._disabled=(0,se.Ig)(Qe)}}}function qe(it,Qe){return class extends it{constructor(...De){super(...De),this.defaultColor=Qe,this.color=Qe}get color(){return this._color}set color(De){const ve=De||this.defaultColor;ve!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),ve&&this._elementRef.nativeElement.classList.add(`mat-${ve}`),this._color=ve)}}}function et(it){return class extends it{constructor(...Qe){super(...Qe),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(Qe){this._disableRipple=(0,se.Ig)(Qe)}}}function At(it,Qe=0){return class extends it{constructor(...De){super(...De),this._tabIndex=Qe,this.defaultTabIndex=Qe}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(De){this._tabIndex=null!=De?(0,se.su)(De):this.defaultTabIndex}}}function Ut(it){return class extends it{constructor(...Qe){super(...Qe),this.stateChanges=new X.xQ,this.errorState=!1}updateErrorState(){const Qe=this.errorState,ye=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);ye!==Qe&&(this.errorState=ye,this.stateChanges.next())}}}try{ar="undefined"!=typeof Intl}catch(it){ar=!1}let rn=(()=>{class it{isErrorState(De,ve){return!!(De&&De.invalid&&(De.touched||ve&&ve.submitted))}}return it.\u0275fac=function(De){return new(De||it)},it.\u0275prov=g.Yz7({factory:function(){return new it},token:it,providedIn:"root"}),it})(),En=(()=>{class it{}return it.\u0275fac=function(De){return new(De||it)},it.\u0275dir=g.lG2({type:it,selectors:[["","mat-line",""],["","matLine",""]],hostAttrs:[1,"mat-line"]}),it})();function bn(it,Qe,De="mat"){it.changes.pipe((0,ie.O)(it)).subscribe(({length:ve})=>{mn(Qe,`${De}-2-line`,!1),mn(Qe,`${De}-3-line`,!1),mn(Qe,`${De}-multi-line`,!1),2===ve||3===ve?mn(Qe,`${De}-${ve}-line`,!0):ve>3&&mn(Qe,`${De}-multi-line`,!0)})}function mn(it,Qe,De){const ve=it.nativeElement.classList;De?ve.add(Qe):ve.remove(Qe)}let Rt=(()=>{class it{}return it.\u0275fac=function(De){return new(De||it)},it.\u0275mod=g.oAB({type:it}),it.\u0275inj=g.cJS({imports:[[we],we]}),it})();class br{constructor(Qe,De,ve){this._renderer=Qe,this.element=De,this.config=ve,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const gr={enterDuration:225,exitDuration:150},Yn=(0,q.i$)({passive:!0}),yr=["mousedown","touchstart"],hr=["mouseup","mouseleave","touchend","touchcancel"];class Re{constructor(Qe,De,ve,Ce){this._target=Qe,this._ngZone=De,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,Ce.isBrowser&&(this._containerElement=(0,se.fI)(ve))}fadeInRipple(Qe,De,ve={}){const Ce=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),ye=Object.assign(Object.assign({},gr),ve.animation);ve.centered&&(Qe=Ce.left+Ce.width/2,De=Ce.top+Ce.height/2);const Ke=ve.radius||function(it,Qe,De){const ve=Math.max(Math.abs(it-De.left),Math.abs(it-De.right)),Ce=Math.max(Math.abs(Qe-De.top),Math.abs(Qe-De.bottom));return Math.sqrt(ve*ve+Ce*Ce)}(Qe,De,Ce),bt=Qe-Ce.left,ze=De-Ce.top,Ue=ye.enterDuration,Se=document.createElement("div");Se.classList.add("mat-ripple-element"),Se.style.left=bt-Ke+"px",Se.style.top=ze-Ke+"px",Se.style.height=2*Ke+"px",Se.style.width=2*Ke+"px",null!=ve.color&&(Se.style.backgroundColor=ve.color),Se.style.transitionDuration=`${Ue}ms`,this._containerElement.appendChild(Se),window.getComputedStyle(Se).getPropertyValue("opacity"),Se.style.transform="scale(1)";const ut=new br(this,Se,ve);return ut.state=0,this._activeRipples.add(ut),ve.persistent||(this._mostRecentTransientRipple=ut),this._runTimeoutOutsideZone(()=>{const St=ut===this._mostRecentTransientRipple;ut.state=1,!ve.persistent&&(!St||!this._isPointerDown)&&ut.fadeOut()},Ue),ut}fadeOutRipple(Qe){const De=this._activeRipples.delete(Qe);if(Qe===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!De)return;const ve=Qe.element,Ce=Object.assign(Object.assign({},gr),Qe.config.animation);ve.style.transitionDuration=`${Ce.exitDuration}ms`,ve.style.opacity="0",Qe.state=2,this._runTimeoutOutsideZone(()=>{Qe.state=3,ve.parentNode.removeChild(ve)},Ce.exitDuration)}fadeOutAll(){this._activeRipples.forEach(Qe=>Qe.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(Qe=>{Qe.config.persistent||Qe.fadeOut()})}setupTriggerEvents(Qe){const De=(0,se.fI)(Qe);!De||De===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=De,this._registerEvents(yr))}handleEvent(Qe){"mousedown"===Qe.type?this._onMousedown(Qe):"touchstart"===Qe.type?this._onTouchStart(Qe):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(hr),this._pointerUpEventsRegistered=!0)}_onMousedown(Qe){const De=(0,E.X6)(Qe),ve=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;!this._target.rippleDisabled&&!De&&!ve&&(this._isPointerDown=!0,this.fadeInRipple(Qe.clientX,Qe.clientY,this._target.rippleConfig))}_onTouchStart(Qe){if(!this._target.rippleDisabled&&!(0,E.yG)(Qe)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const De=Qe.changedTouches;for(let ve=0;ve<De.length;ve++)this.fadeInRipple(De[ve].clientX,De[ve].clientY,this._target.rippleConfig)}}_onPointerUp(){!this._isPointerDown||(this._isPointerDown=!1,this._activeRipples.forEach(Qe=>{!Qe.config.persistent&&(1===Qe.state||Qe.config.terminateOnPointerUp&&0===Qe.state)&&Qe.fadeOut()}))}_runTimeoutOutsideZone(Qe,De=0){this._ngZone.runOutsideAngular(()=>setTimeout(Qe,De))}_registerEvents(Qe){this._ngZone.runOutsideAngular(()=>{Qe.forEach(De=>{this._triggerElement.addEventListener(De,this,Yn)})})}_removeTriggerEvents(){this._triggerElement&&(yr.forEach(Qe=>{this._triggerElement.removeEventListener(Qe,this,Yn)}),this._pointerUpEventsRegistered&&hr.forEach(Qe=>{this._triggerElement.removeEventListener(Qe,this,Yn)}))}}const ce=new g.OlP("mat-ripple-global-options");let be=(()=>{class it{constructor(De,ve,Ce,ye,Ke){this._elementRef=De,this._animationMode=Ke,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=ye||{},this._rippleRenderer=new Re(this,ve,De,Ce)}get disabled(){return this._disabled}set disabled(De){De&&this.fadeOutAllNonPersistent(),this._disabled=De,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(De){this._trigger=De,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(De,ve=0,Ce){return"number"==typeof De?this._rippleRenderer.fadeInRipple(De,ve,Object.assign(Object.assign({},this.rippleConfig),Ce)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),De))}}return it.\u0275fac=function(De){return new(De||it)(g.Y36(g.SBq),g.Y36(g.R0b),g.Y36(q.t4),g.Y36(ce,8),g.Y36(Q.Qb,8))},it.\u0275dir=g.lG2({type:it,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(De,ve){2&De&&g.ekj("mat-ripple-unbounded",ve.unbounded)},inputs:{radius:["matRippleRadius","radius"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"],color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],animation:["matRippleAnimation","animation"]},exportAs:["matRipple"]}),it})(),N=(()=>{class it{}return it.\u0275fac=function(De){return new(De||it)},it.\u0275mod=g.oAB({type:it}),it.\u0275inj=g.cJS({imports:[[we,q.ud],we]}),it})()},1279:($t,$e,x)=>{"use strict";x.d($e,{Hw:()=>Qn,Ps:()=>dn,jv:()=>we});var g=x(5e3),E=x(6201),B=x(4865),ne=x(9808),he=x(1086),q=x(1737),se=x(567),X=x(2654),ie=x(2868),Q=x(4850),oe=x(7221),ae=x(537),Me=x(2474),Ve=x(2986),xe=x(520),Oe=x(2313);const ee=["*"];function Te(Wt){return Error(`Unable to find icon with the name "${Wt}"`)}function yt(Wt){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${Wt}".`)}function rt(Wt){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${Wt}".`)}class ft{constructor(kn,gt,Ye){this.url=kn,this.svgText=gt,this.options=Ye}}let we=(()=>{class Wt{constructor(gt,Ye,Ct,Ee){this._httpClient=gt,this._sanitizer=Ye,this._errorHandler=Ee,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass="material-icons",this._document=Ct}addSvgIcon(gt,Ye,Ct){return this.addSvgIconInNamespace("",gt,Ye,Ct)}addSvgIconLiteral(gt,Ye,Ct){return this.addSvgIconLiteralInNamespace("",gt,Ye,Ct)}addSvgIconInNamespace(gt,Ye,Ct,Ee){return this._addSvgIconConfig(gt,Ye,new ft(Ct,null,Ee))}addSvgIconResolver(gt){return this._resolvers.push(gt),this}addSvgIconLiteralInNamespace(gt,Ye,Ct,Ee){const mt=this._sanitizer.sanitize(g.q3G.HTML,Ct);if(!mt)throw rt(Ct);return this._addSvgIconConfig(gt,Ye,new ft("",mt,Ee))}addSvgIconSet(gt,Ye){return this.addSvgIconSetInNamespace("",gt,Ye)}addSvgIconSetLiteral(gt,Ye){return this.addSvgIconSetLiteralInNamespace("",gt,Ye)}addSvgIconSetInNamespace(gt,Ye,Ct){return this._addSvgIconSetConfig(gt,new ft(Ye,null,Ct))}addSvgIconSetLiteralInNamespace(gt,Ye,Ct){const Ee=this._sanitizer.sanitize(g.q3G.HTML,Ye);if(!Ee)throw rt(Ye);return this._addSvgIconSetConfig(gt,new ft("",Ee,Ct))}registerFontClassAlias(gt,Ye=gt){return this._fontCssClassesByAlias.set(gt,Ye),this}classNameForFontAlias(gt){return this._fontCssClassesByAlias.get(gt)||gt}setDefaultFontSetClass(gt){return this._defaultFontSetClass=gt,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(gt){const Ye=this._sanitizer.sanitize(g.q3G.RESOURCE_URL,gt);if(!Ye)throw yt(gt);const Ct=this._cachedIconsByUrl.get(Ye);return Ct?(0,he.of)(et(Ct)):this._loadSvgIconFromConfig(new ft(gt,null)).pipe((0,ie.b)(Ee=>this._cachedIconsByUrl.set(Ye,Ee)),(0,Q.U)(Ee=>et(Ee)))}getNamedSvgIcon(gt,Ye=""){const Ct=At(Ye,gt);let Ee=this._svgIconConfigs.get(Ct);if(Ee)return this._getSvgFromConfig(Ee);if(Ee=this._getIconConfigFromResolvers(Ye,gt),Ee)return this._svgIconConfigs.set(Ct,Ee),this._getSvgFromConfig(Ee);const mt=this._iconSetConfigs.get(Ye);return mt?this._getSvgFromIconSetConfigs(gt,mt):(0,q._)(Te(Ct))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(gt){return gt.svgText?(0,he.of)(et(this._svgElementFromConfig(gt))):this._loadSvgIconFromConfig(gt).pipe((0,Q.U)(Ye=>et(Ye)))}_getSvgFromIconSetConfigs(gt,Ye){const Ct=this._extractIconWithNameFromAnySet(gt,Ye);if(Ct)return(0,he.of)(Ct);const Ee=Ye.filter(mt=>!mt.svgText).map(mt=>this._loadSvgIconSetFromConfig(mt).pipe((0,oe.K)(Nt=>{const rn=`Loading icon set URL: ${this._sanitizer.sanitize(g.q3G.RESOURCE_URL,mt.url)} failed: ${Nt.message}`;return this._errorHandler.handleError(new Error(rn)),(0,he.of)(null)})));return(0,se.D)(Ee).pipe((0,Q.U)(()=>{const mt=this._extractIconWithNameFromAnySet(gt,Ye);if(!mt)throw Te(gt);return mt}))}_extractIconWithNameFromAnySet(gt,Ye){for(let Ct=Ye.length-1;Ct>=0;Ct--){const Ee=Ye[Ct];if(Ee.svgText&&Ee.svgText.indexOf(gt)>-1){const mt=this._svgElementFromConfig(Ee),Nt=this._extractSvgIconFromSet(mt,gt,Ee.options);if(Nt)return Nt}}return null}_loadSvgIconFromConfig(gt){return this._fetchIcon(gt).pipe((0,ie.b)(Ye=>gt.svgText=Ye),(0,Q.U)(()=>this._svgElementFromConfig(gt)))}_loadSvgIconSetFromConfig(gt){return gt.svgText?(0,he.of)(null):this._fetchIcon(gt).pipe((0,ie.b)(Ye=>gt.svgText=Ye))}_extractSvgIconFromSet(gt,Ye,Ct){const Ee=gt.querySelector(`[id="${Ye}"]`);if(!Ee)return null;const mt=Ee.cloneNode(!0);if(mt.removeAttribute("id"),"svg"===mt.nodeName.toLowerCase())return this._setSvgAttributes(mt,Ct);if("symbol"===mt.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(mt),Ct);const Nt=this._svgElementFromString("<svg></svg>");return Nt.appendChild(mt),this._setSvgAttributes(Nt,Ct)}_svgElementFromString(gt){const Ye=this._document.createElement("DIV");Ye.innerHTML=gt;const Ct=Ye.querySelector("svg");if(!Ct)throw Error("<svg> tag not found");return Ct}_toSvgElement(gt){const Ye=this._svgElementFromString("<svg></svg>"),Ct=gt.attributes;for(let Ee=0;Ee<Ct.length;Ee++){const{name:mt,value:Nt}=Ct[Ee];"id"!==mt&&Ye.setAttribute(mt,Nt)}for(let Ee=0;Ee<gt.childNodes.length;Ee++)gt.childNodes[Ee].nodeType===this._document.ELEMENT_NODE&&Ye.appendChild(gt.childNodes[Ee].cloneNode(!0));return Ye}_setSvgAttributes(gt,Ye){return gt.setAttribute("fit",""),gt.setAttribute("height","100%"),gt.setAttribute("width","100%"),gt.setAttribute("preserveAspectRatio","xMidYMid meet"),gt.setAttribute("focusable","false"),Ye&&Ye.viewBox&&gt.setAttribute("viewBox",Ye.viewBox),gt}_fetchIcon(gt){var Ye;const{url:Ct,options:Ee}=gt,mt=null!==(Ye=null==Ee?void 0:Ee.withCredentials)&&void 0!==Ye&&Ye;if(!this._httpClient)throw Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.");if(null==Ct)throw Error(`Cannot fetch icon from URL "${Ct}".`);const Nt=this._sanitizer.sanitize(g.q3G.RESOURCE_URL,Ct);if(!Nt)throw yt(Ct);const Mt=this._inProgressUrlFetches.get(Nt);if(Mt)return Mt;const rn=this._httpClient.get(Nt,{responseType:"text",withCredentials:mt}).pipe((0,ae.x)(()=>this._inProgressUrlFetches.delete(Nt)),(0,Me.B)());return this._inProgressUrlFetches.set(Nt,rn),rn}_addSvgIconConfig(gt,Ye,Ct){return this._svgIconConfigs.set(At(gt,Ye),Ct),this}_addSvgIconSetConfig(gt,Ye){const Ct=this._iconSetConfigs.get(gt);return Ct?Ct.push(Ye):this._iconSetConfigs.set(gt,[Ye]),this}_svgElementFromConfig(gt){if(!gt.svgElement){const Ye=this._svgElementFromString(gt.svgText);this._setSvgAttributes(Ye,gt.options),gt.svgElement=Ye}return gt.svgElement}_getIconConfigFromResolvers(gt,Ye){for(let Ct=0;Ct<this._resolvers.length;Ct++){const Ee=this._resolvers[Ct](Ye,gt);if(Ee)return Ut(Ee)?new ft(Ee.url,null,Ee.options):new ft(Ee,null)}}}return Wt.\u0275fac=function(gt){return new(gt||Wt)(g.LFG(xe.eN,8),g.LFG(Oe.H7),g.LFG(ne.K0,8),g.LFG(g.qLn))},Wt.\u0275prov=g.Yz7({factory:function(){return new Wt(g.LFG(xe.eN,8),g.LFG(Oe.H7),g.LFG(ne.K0,8),g.LFG(g.qLn))},token:Wt,providedIn:"root"}),Wt})();function et(Wt){return Wt.cloneNode(!0)}function At(Wt,kn){return Wt+":"+kn}function Ut(Wt){return!(!Wt.url||!Wt.options)}const Zt=(0,E.pj)(class{constructor(Wt){this._elementRef=Wt}}),jt=new g.OlP("mat-icon-location",{providedIn:"root",factory:function(){const Wt=(0,g.f3M)(ne.K0),kn=Wt?Wt.location:null;return{getPathname:()=>kn?kn.pathname+kn.search:""}}}),qt=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],ar=qt.map(Wt=>`[${Wt}]`).join(", "),Nn=/^url\(['"]?#(.*?)['"]?\)$/;let Qn=(()=>{class Wt extends Zt{constructor(gt,Ye,Ct,Ee,mt){super(gt),this._iconRegistry=Ye,this._location=Ee,this._errorHandler=mt,this._inline=!1,this._currentIconFetch=X.w.EMPTY,Ct||gt.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(gt){this._inline=(0,B.Ig)(gt)}get svgIcon(){return this._svgIcon}set svgIcon(gt){gt!==this._svgIcon&&(gt?this._updateSvgIcon(gt):this._svgIcon&&this._clearSvgElement(),this._svgIcon=gt)}get fontSet(){return this._fontSet}set fontSet(gt){const Ye=this._cleanupFontValue(gt);Ye!==this._fontSet&&(this._fontSet=Ye,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(gt){const Ye=this._cleanupFontValue(gt);Ye!==this._fontIcon&&(this._fontIcon=Ye,this._updateFontIconClasses())}_splitIconName(gt){if(!gt)return["",""];const Ye=gt.split(":");switch(Ye.length){case 1:return["",Ye[0]];case 2:return Ye;default:throw Error(`Invalid icon name: "${gt}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const gt=this._elementsWithExternalReferences;if(gt&&gt.size){const Ye=this._location.getPathname();Ye!==this._previousPath&&(this._previousPath=Ye,this._prependPathToReferences(Ye))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(gt){this._clearSvgElement();const Ye=gt.querySelectorAll("style");for(let Ee=0;Ee<Ye.length;Ee++)Ye[Ee].textContent+=" ";const Ct=this._location.getPathname();this._previousPath=Ct,this._cacheChildrenWithExternalReferences(gt),this._prependPathToReferences(Ct),this._elementRef.nativeElement.appendChild(gt)}_clearSvgElement(){const gt=this._elementRef.nativeElement;let Ye=gt.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();Ye--;){const Ct=gt.childNodes[Ye];(1!==Ct.nodeType||"svg"===Ct.nodeName.toLowerCase())&&gt.removeChild(Ct)}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const gt=this._elementRef.nativeElement,Ye=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();Ye!=this._previousFontSetClass&&(this._previousFontSetClass&&gt.classList.remove(this._previousFontSetClass),Ye&&gt.classList.add(Ye),this._previousFontSetClass=Ye),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&gt.classList.remove(this._previousFontIconClass),this.fontIcon&&gt.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(gt){return"string"==typeof gt?gt.trim().split(" ")[0]:gt}_prependPathToReferences(gt){const Ye=this._elementsWithExternalReferences;Ye&&Ye.forEach((Ct,Ee)=>{Ct.forEach(mt=>{Ee.setAttribute(mt.name,`url('${gt}#${mt.value}')`)})})}_cacheChildrenWithExternalReferences(gt){const Ye=gt.querySelectorAll(ar),Ct=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let Ee=0;Ee<Ye.length;Ee++)qt.forEach(mt=>{const Nt=Ye[Ee],Mt=Nt.getAttribute(mt),rn=Mt?Mt.match(Nn):null;if(rn){let En=Ct.get(Nt);En||(En=[],Ct.set(Nt,En)),En.push({name:mt,value:rn[1]})}})}_updateSvgIcon(gt){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),gt){const[Ye,Ct]=this._splitIconName(gt);Ye&&(this._svgNamespace=Ye),Ct&&(this._svgName=Ct),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(Ct,Ye).pipe((0,Ve.q)(1)).subscribe(Ee=>this._setSvgElement(Ee),Ee=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${Ye}:${Ct}! ${Ee.message}`))})}}}return Wt.\u0275fac=function(gt){return new(gt||Wt)(g.Y36(g.SBq),g.Y36(we),g.$8M("aria-hidden"),g.Y36(jt),g.Y36(g.qLn))},Wt.\u0275cmp=g.Xpm({type:Wt,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(gt,Ye){2&gt&&(g.uIk("data-mat-icon-type",Ye._usingFontIcon()?"font":"svg")("data-mat-icon-name",Ye._svgName||Ye.fontIcon)("data-mat-icon-namespace",Ye._svgNamespace||Ye.fontSet),g.ekj("mat-icon-inline",Ye.inline)("mat-icon-no-color","primary"!==Ye.color&&"accent"!==Ye.color&&"warn"!==Ye.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[g.qOj],ngContentSelectors:ee,decls:1,vars:0,template:function(gt,Ye){1&gt&&(g.F$t(),g.Hsn(0))},styles:[".mat-icon{background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),Wt})(),dn=(()=>{class Wt{}return Wt.\u0275fac=function(gt){return new(gt||Wt)},Wt.\u0275mod=g.oAB({type:Wt}),Wt.\u0275inj=g.cJS({imports:[[E.BQ],E.BQ]}),Wt})()},5205:($t,$e,x)=>{"use strict";x.d($e,{OP:()=>rn,Tx:()=>J});var g=x(1879),ne=(x(4865),x(9909),x(5e3)),he=x(8929);x(2654),x(6787),x(1086),x(8139),x(353),x(3489),x(9312),x(1059),x(7545),x(2986),x(2198),x(7625),x(1777),x(8);var qe=x(9808),et=x(6201),At=x(3586),Zt=(x(4565),x(4854));x(3887);const tn=["mat-menu-item",""];function qt(ce,be){1&ce&&(ne.O4$(),ne.TgZ(0,"svg",2),ne._UZ(1,"polygon",3),ne.qZA())}const wr=["*"],Nt=new ne.OlP("MAT_MENU_PANEL"),Mt=(0,et.Kr)((0,et.Id)(class{}));let rn=(()=>{class ce extends Mt{constructor(N,Ie,at,Pt,zt){super(),this._elementRef=N,this._focusMonitor=at,this._parentMenu=Pt,this._changeDetectorRef=zt,this.role="menuitem",this._hovered=new he.xQ,this._focused=new he.xQ,this._highlighted=!1,this._triggersSubmenu=!1,Pt&&Pt.addItem&&Pt.addItem(this)}focus(N,Ie){this._focusMonitor&&N?this._focusMonitor.focusVia(this._getHostElement(),N,Ie):this._getHostElement().focus(Ie),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(N){this.disabled&&(N.preventDefault(),N.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){var N,Ie;const at=this._elementRef.nativeElement.cloneNode(!0),Pt=at.querySelectorAll("mat-icon, .material-icons");for(let zt=0;zt<Pt.length;zt++){const sn=Pt[zt];null===(N=sn.parentNode)||void 0===N||N.removeChild(sn)}return(null===(Ie=at.textContent)||void 0===Ie?void 0:Ie.trim())||""}_setHighlighted(N){var Ie;this._highlighted=N,null===(Ie=this._changeDetectorRef)||void 0===Ie||Ie.markForCheck()}}return ce.\u0275fac=function(N){return new(N||ce)(ne.Y36(ne.SBq),ne.Y36(qe.K0),ne.Y36(g.tE),ne.Y36(Nt,8),ne.Y36(ne.sBO))},ce.\u0275cmp=ne.Xpm({type:ce,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-focus-indicator"],hostVars:10,hostBindings:function(N,Ie){1&N&&ne.NdJ("click",function(Pt){return Ie._checkDisabled(Pt)})("mouseenter",function(){return Ie._handleMouseEnter()}),2&N&&(ne.uIk("role",Ie.role)("tabindex",Ie._getTabIndex())("aria-disabled",Ie.disabled.toString())("disabled",Ie.disabled||null),ne.ekj("mat-menu-item",!0)("mat-menu-item-highlighted",Ie._highlighted)("mat-menu-item-submenu-trigger",Ie._triggersSubmenu))},inputs:{disabled:"disabled",disableRipple:"disableRipple",role:"role"},exportAs:["matMenuItem"],features:[ne.qOj],attrs:tn,ngContentSelectors:wr,decls:3,vars:3,consts:[["matRipple","",1,"mat-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["class","mat-menu-submenu-icon","viewBox","0 0 5 10","focusable","false",4,"ngIf"],["viewBox","0 0 5 10","focusable","false",1,"mat-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(N,Ie){1&N&&(ne.F$t(),ne.Hsn(0),ne._UZ(1,"div",0),ne.YNc(2,qt,2,0,"svg",1)),2&N&&(ne.xp6(1),ne.Q6J("matRippleDisabled",Ie.disableRipple||Ie.disabled)("matRippleTrigger",Ie._getHostElement()),ne.xp6(1),ne.Q6J("ngIf",Ie._triggersSubmenu))},directives:[et.wG,qe.O5],encapsulation:2,changeDetection:0}),ce})();const Yn={provide:new ne.OlP("mat-menu-scroll-strategy"),deps:[At.aV],useFactory:function(ce){return()=>ce.scrollStrategies.reposition()}};let J=(()=>{class ce{}return ce.\u0275fac=function(N){return new(N||ce)},ce.\u0275mod=ne.oAB({type:ce}),ce.\u0275inj=ne.cJS({providers:[Yn],imports:[[qe.ez,et.BQ,et.si,At.U8],Zt.ZD,et.BQ]}),ce})()},1101:($t,$e,x)=>{"use strict";x.d($e,{pW:()=>Ve,Cv:()=>Oe});var g=x(5e3),E=x(9808),B=x(6201),ne=x(4865),he=x(6360),q=x(2654),se=x(3753),X=x(2198);const ie=["primaryValueBar"],Q=(0,B.pj)(class{constructor(ee){this._elementRef=ee}},"primary"),oe=new g.OlP("mat-progress-bar-location",{providedIn:"root",factory:function(){const ee=(0,g.f3M)(E.K0),Te=ee?ee.location:null;return{getPathname:()=>Te?Te.pathname+Te.search:""}}});let Me=0,Ve=(()=>{class ee extends Q{constructor(He,yt,rt,ft){super(He),this._ngZone=yt,this._animationMode=rt,this._isNoopAnimation=!1,this._value=0,this._bufferValue=0,this.animationEnd=new g.vpe,this._animationEndSubscription=q.w.EMPTY,this.mode="determinate",this.progressbarId="mat-progress-bar-"+Me++;const we=ft?ft.getPathname().split("#")[0]:"";this._rectangleFillValue=`url('${we}#${this.progressbarId}')`,this._isNoopAnimation="NoopAnimations"===rt}get value(){return this._value}set value(He){this._value=xe((0,ne.su)(He)||0)}get bufferValue(){return this._bufferValue}set bufferValue(He){this._bufferValue=xe(He||0)}_primaryTransform(){return{transform:`scale3d(${this.value/100}, 1, 1)`}}_bufferTransform(){return"buffer"===this.mode?{transform:`scale3d(${this.bufferValue/100}, 1, 1)`}:null}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{const He=this._primaryValueBar.nativeElement;this._animationEndSubscription=(0,se.R)(He,"transitionend").pipe((0,X.h)(yt=>yt.target===He)).subscribe(()=>{("determinate"===this.mode||"buffer"===this.mode)&&this._ngZone.run(()=>this.animationEnd.next({value:this.value}))})})}ngOnDestroy(){this._animationEndSubscription.unsubscribe()}}return ee.\u0275fac=function(He){return new(He||ee)(g.Y36(g.SBq),g.Y36(g.R0b),g.Y36(he.Qb,8),g.Y36(oe,8))},ee.\u0275cmp=g.Xpm({type:ee,selectors:[["mat-progress-bar"]],viewQuery:function(He,yt){if(1&He&&g.Gf(ie,5),2&He){let rt;g.iGM(rt=g.CRH())&&(yt._primaryValueBar=rt.first)}},hostAttrs:["role","progressbar","aria-valuemin","0","aria-valuemax","100","tabindex","-1",1,"mat-progress-bar"],hostVars:4,hostBindings:function(He,yt){2&He&&(g.uIk("aria-valuenow","indeterminate"===yt.mode||"query"===yt.mode?null:yt.value)("mode",yt.mode),g.ekj("_mat-animation-noopable",yt._isNoopAnimation))},inputs:{color:"color",mode:"mode",value:"value",bufferValue:"bufferValue"},outputs:{animationEnd:"animationEnd"},exportAs:["matProgressBar"],features:[g.qOj],decls:10,vars:4,consts:[["aria-hidden","true"],["width","100%","height","4","focusable","false",1,"mat-progress-bar-background","mat-progress-bar-element"],["x","4","y","0","width","8","height","4","patternUnits","userSpaceOnUse",3,"id"],["cx","2","cy","2","r","2"],["width","100%","height","100%"],[1,"mat-progress-bar-buffer","mat-progress-bar-element",3,"ngStyle"],[1,"mat-progress-bar-primary","mat-progress-bar-fill","mat-progress-bar-element",3,"ngStyle"],["primaryValueBar",""],[1,"mat-progress-bar-secondary","mat-progress-bar-fill","mat-progress-bar-element"]],template:function(He,yt){1&He&&(g.TgZ(0,"div",0),g.O4$(),g.TgZ(1,"svg",1),g.TgZ(2,"defs"),g.TgZ(3,"pattern",2),g._UZ(4,"circle",3),g.qZA(),g.qZA(),g._UZ(5,"rect",4),g.qZA(),g.kcU(),g._UZ(6,"div",5),g._UZ(7,"div",6,7),g._UZ(9,"div",8),g.qZA()),2&He&&(g.xp6(3),g.Q6J("id",yt.progressbarId),g.xp6(2),g.uIk("fill",yt._rectangleFillValue),g.xp6(1),g.Q6J("ngStyle",yt._bufferTransform()),g.xp6(1),g.Q6J("ngStyle",yt._primaryTransform()))},directives:[E.PC],styles:['.mat-progress-bar{display:block;height:4px;overflow:hidden;position:relative;transition:opacity 250ms linear;width:100%}._mat-animation-noopable.mat-progress-bar{transition:none;animation:none}.mat-progress-bar .mat-progress-bar-element,.mat-progress-bar .mat-progress-bar-fill::after{height:100%;position:absolute;width:100%}.mat-progress-bar .mat-progress-bar-background{width:calc(100% + 10px)}.cdk-high-contrast-active .mat-progress-bar .mat-progress-bar-background{display:none}.mat-progress-bar .mat-progress-bar-buffer{transform-origin:top left;transition:transform 250ms ease}.cdk-high-contrast-active .mat-progress-bar .mat-progress-bar-buffer{border-top:solid 5px;opacity:.5}.mat-progress-bar .mat-progress-bar-secondary{display:none}.mat-progress-bar .mat-progress-bar-fill{animation:none;transform-origin:top left;transition:transform 250ms ease}.cdk-high-contrast-active .mat-progress-bar .mat-progress-bar-fill{border-top:solid 4px}.mat-progress-bar .mat-progress-bar-fill::after{animation:none;content:"";display:inline-block;left:0}.mat-progress-bar[dir=rtl],[dir=rtl] .mat-progress-bar{transform:rotateY(180deg)}.mat-progress-bar[mode=query]{transform:rotateZ(180deg)}.mat-progress-bar[mode=query][dir=rtl],[dir=rtl] .mat-progress-bar[mode=query]{transform:rotateZ(180deg) rotateY(180deg)}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-fill,.mat-progress-bar[mode=query] .mat-progress-bar-fill{transition:none}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-primary,.mat-progress-bar[mode=query] .mat-progress-bar-primary{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-primary-indeterminate-translate 2000ms infinite linear;left:-145.166611%}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-primary.mat-progress-bar-fill::after,.mat-progress-bar[mode=query] .mat-progress-bar-primary.mat-progress-bar-fill::after{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-primary-indeterminate-scale 2000ms infinite linear}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-secondary,.mat-progress-bar[mode=query] .mat-progress-bar-secondary{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-secondary-indeterminate-translate 2000ms infinite linear;left:-54.888891%;display:block}.mat-progress-bar[mode=indeterminate] .mat-progress-bar-secondary.mat-progress-bar-fill::after,.mat-progress-bar[mode=query] .mat-progress-bar-secondary.mat-progress-bar-fill::after{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-secondary-indeterminate-scale 2000ms infinite linear}.mat-progress-bar[mode=buffer] .mat-progress-bar-background{-webkit-backface-visibility:hidden;backface-visibility:hidden;animation:mat-progress-bar-background-scroll 250ms infinite linear;display:block}.mat-progress-bar._mat-animation-noopable .mat-progress-bar-fill,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-fill::after,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-buffer,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-primary,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-primary.mat-progress-bar-fill::after,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-secondary,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-secondary.mat-progress-bar-fill::after,.mat-progress-bar._mat-animation-noopable .mat-progress-bar-background{animation:none;transition-duration:1ms}@keyframes mat-progress-bar-primary-indeterminate-translate{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(83.67142%)}100%{transform:translateX(200.611057%)}}@keyframes mat-progress-bar-primary-indeterminate-scale{0%{transform:scaleX(0.08)}36.65%{animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);transform:scaleX(0.08)}69.15%{animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);transform:scaleX(0.661479)}100%{transform:scaleX(0.08)}}@keyframes mat-progress-bar-secondary-indeterminate-translate{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(37.651913%)}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(84.386165%)}100%{transform:translateX(160.277782%)}}@keyframes mat-progress-bar-secondary-indeterminate-scale{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:scaleX(0.08)}19.15%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:scaleX(0.457104)}44.15%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:scaleX(0.72796)}100%{transform:scaleX(0.08)}}@keyframes mat-progress-bar-background-scroll{to{transform:translateX(-8px)}}\n'],encapsulation:2,changeDetection:0}),ee})();function xe(ee,Te=0,He=100){return Math.max(Te,Math.min(He,ee))}let Oe=(()=>{class ee{}return ee.\u0275fac=function(He){return new(He||ee)},ee.\u0275mod=g.oAB({type:ee}),ee.\u0275inj=g.cJS({imports:[[E.ez,B.BQ],B.BQ]}),ee})()},2090:($t,$e,x)=>{"use strict";x.d($e,{BH:()=>Me,LL:()=>qt,ZR:()=>tn,gQ:()=>Rt,zI:()=>Ut,hu:()=>E,g5:()=>B,US:()=>q,tV:()=>ie,h$:()=>se,$s:()=>sn,r3:()=>Ct,Sg:()=>Ve,ne:()=>br,p$:()=>Q,vZ:()=>Mt,ZB:()=>oe,gK:()=>Re,pd:()=>mn,m9:()=>Fn,z$:()=>xe,GJ:()=>Ye,jU:()=>Te,ru:()=>He,d:()=>rt,xb:()=>mt,w1:()=>ft,hl:()=>et,uI:()=>Oe,UG:()=>ee,Yr:()=>Pe,b$:()=>yt,G6:()=>qe,Mn:()=>we,w9:()=>gt,cI:()=>Nn,UI:()=>Nt,xO:()=>En,zd:()=>bn,DV:()=>Ee,ug:()=>N,dS:()=>be,Pz:()=>Qn,Dv:()=>hr,Wj:()=>J,lb:()=>ce,eu:()=>At});const E=function(Fe,Le){if(!Fe)throw B(Le)},B=function(Fe){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+Fe)},ne=function(Fe){const Le=[];let Xe=0;for(let xt=0;xt<Fe.length;xt++){let pt=Fe.charCodeAt(xt);pt<128?Le[Xe++]=pt:pt<2048?(Le[Xe++]=pt>>6|192,Le[Xe++]=63&pt|128):55296==(64512&pt)&&xt+1<Fe.length&&56320==(64512&Fe.charCodeAt(xt+1))?(pt=65536+((1023&pt)<<10)+(1023&Fe.charCodeAt(++xt)),Le[Xe++]=pt>>18|240,Le[Xe++]=pt>>12&63|128,Le[Xe++]=pt>>6&63|128,Le[Xe++]=63&pt|128):(Le[Xe++]=pt>>12|224,Le[Xe++]=pt>>6&63|128,Le[Xe++]=63&pt|128)}return Le},q={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(Fe,Le){if(!Array.isArray(Fe))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Xe=Le?this.byteToCharMapWebSafe_:this.byteToCharMap_,xt=[];for(let pt=0;pt<Fe.length;pt+=3){const pn=Fe[pt],In=pt+1<Fe.length,it=In?Fe[pt+1]:0,Qe=pt+2<Fe.length,De=Qe?Fe[pt+2]:0;let ye=(15&it)<<2|De>>6,Ke=63&De;Qe||(Ke=64,In||(ye=64)),xt.push(Xe[pn>>2],Xe[(3&pn)<<4|it>>4],Xe[ye],Xe[Ke])}return xt.join("")},encodeString(Fe,Le){return this.HAS_NATIVE_SUPPORT&&!Le?btoa(Fe):this.encodeByteArray(ne(Fe),Le)},decodeString(Fe,Le){return this.HAS_NATIVE_SUPPORT&&!Le?atob(Fe):function(Fe){const Le=[];let Xe=0,xt=0;for(;Xe<Fe.length;){const pt=Fe[Xe++];if(pt<128)Le[xt++]=String.fromCharCode(pt);else if(pt>191&&pt<224){const pn=Fe[Xe++];Le[xt++]=String.fromCharCode((31&pt)<<6|63&pn)}else if(pt>239&&pt<365){const Qe=((7&pt)<<18|(63&Fe[Xe++])<<12|(63&Fe[Xe++])<<6|63&Fe[Xe++])-65536;Le[xt++]=String.fromCharCode(55296+(Qe>>10)),Le[xt++]=String.fromCharCode(56320+(1023&Qe))}else{const pn=Fe[Xe++],In=Fe[Xe++];Le[xt++]=String.fromCharCode((15&pt)<<12|(63&pn)<<6|63&In)}}return Le.join("")}(this.decodeStringToByteArray(Fe,Le))},decodeStringToByteArray(Fe,Le){this.init_();const Xe=Le?this.charToByteMapWebSafe_:this.charToByteMap_,xt=[];for(let pt=0;pt<Fe.length;){const pn=Xe[Fe.charAt(pt++)],it=pt<Fe.length?Xe[Fe.charAt(pt)]:0;++pt;const De=pt<Fe.length?Xe[Fe.charAt(pt)]:64;++pt;const Ce=pt<Fe.length?Xe[Fe.charAt(pt)]:64;if(++pt,null==pn||null==it||null==De||null==Ce)throw Error();xt.push(pn<<2|it>>4),64!==De&&(xt.push(it<<4&240|De>>2),64!==Ce&&xt.push(De<<6&192|Ce))}return xt},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let Fe=0;Fe<this.ENCODED_VALS.length;Fe++)this.byteToCharMap_[Fe]=this.ENCODED_VALS.charAt(Fe),this.charToByteMap_[this.byteToCharMap_[Fe]]=Fe,this.byteToCharMapWebSafe_[Fe]=this.ENCODED_VALS_WEBSAFE.charAt(Fe),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[Fe]]=Fe,Fe>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(Fe)]=Fe,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(Fe)]=Fe)}}},se=function(Fe){const Le=ne(Fe);return q.encodeByteArray(Le,!0)},X=function(Fe){return se(Fe).replace(/\./g,"")},ie=function(Fe){try{return q.decodeString(Fe,!0)}catch(Le){console.error("base64Decode failed: ",Le)}return null};function Q(Fe){return oe(void 0,Fe)}function oe(Fe,Le){if(!(Le instanceof Object))return Le;switch(Le.constructor){case Date:return new Date(Le.getTime());case Object:void 0===Fe&&(Fe={});break;case Array:Fe=[];break;default:return Le}for(const Xe in Le)!Le.hasOwnProperty(Xe)||!ae(Xe)||(Fe[Xe]=oe(Fe[Xe],Le[Xe]));return Fe}function ae(Fe){return"__proto__"!==Fe}class Me{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((Le,Xe)=>{this.resolve=Le,this.reject=Xe})}wrapCallback(Le){return(Xe,xt)=>{Xe?this.reject(Xe):this.resolve(xt),"function"==typeof Le&&(this.promise.catch(()=>{}),1===Le.length?Le(Xe):Le(Xe,xt))}}}function Ve(Fe,Le){if(Fe.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const xt=Le||"demo-project",pt=Fe.iat||0,pn=Fe.sub||Fe.user_id;if(!pn)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const In=Object.assign({iss:`https://securetoken.google.com/${xt}`,aud:xt,iat:pt,exp:pt+3600,auth_time:pt,sub:pn,user_id:pn,firebase:{sign_in_provider:"custom",identities:{}}},Fe);return[X(JSON.stringify({alg:"none",type:"JWT"})),X(JSON.stringify(In)),""].join(".")}function xe(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Oe(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(xe())}function ee(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(Fe){return!1}}function Te(){return"object"==typeof self&&self.self===self}function He(){const Fe="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof Fe&&void 0!==Fe.id}function yt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function rt(){return xe().indexOf("Electron/")>=0}function ft(){const Fe=xe();return Fe.indexOf("MSIE ")>=0||Fe.indexOf("Trident/")>=0}function we(){return xe().indexOf("MSAppHost/")>=0}function Pe(){return!1}function qe(){return!ee()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function et(){return"object"==typeof indexedDB}function At(){return new Promise((Fe,Le)=>{try{let Xe=!0;const xt="validate-browser-context-for-indexeddb-analytics-module",pt=self.indexedDB.open(xt);pt.onsuccess=()=>{pt.result.close(),Xe||self.indexedDB.deleteDatabase(xt),Fe(!0)},pt.onupgradeneeded=()=>{Xe=!1},pt.onerror=()=>{var pn;Le((null===(pn=pt.error)||void 0===pn?void 0:pn.message)||"")}}catch(Xe){Le(Xe)}})}function Ut(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class tn extends Error{constructor(Le,Xe,xt){super(Xe),this.code=Le,this.customData=xt,this.name="FirebaseError",Object.setPrototypeOf(this,tn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,qt.prototype.create)}}class qt{constructor(Le,Xe,xt){this.service=Le,this.serviceName=Xe,this.errors=xt}create(Le,...Xe){const xt=Xe[0]||{},pt=`${this.service}/${Le}`,pn=this.errors[Le],In=pn?function(Fe,Le){return Fe.replace(ar,(Xe,xt)=>{const pt=Le[xt];return null!=pt?String(pt):`<${xt}?>`})}(pn,xt):"Error";return new tn(pt,`${this.serviceName}: ${In} (${pt}).`,xt)}}const ar=/\{\$([^}]+)}/g;function Nn(Fe){return JSON.parse(Fe)}function Qn(Fe){return JSON.stringify(Fe)}const dn=function(Fe){let Le={},Xe={},xt={},pt="";try{const pn=Fe.split(".");Le=Nn(ie(pn[0])||""),Xe=Nn(ie(pn[1])||""),pt=pn[2],xt=Xe.d||{},delete Xe.d}catch(pn){}return{header:Le,claims:Xe,data:xt,signature:pt}},gt=function(Fe){const Xe=dn(Fe).claims;return!!Xe&&"object"==typeof Xe&&Xe.hasOwnProperty("iat")},Ye=function(Fe){const Le=dn(Fe).claims;return"object"==typeof Le&&!0===Le.admin};function Ct(Fe,Le){return Object.prototype.hasOwnProperty.call(Fe,Le)}function Ee(Fe,Le){if(Object.prototype.hasOwnProperty.call(Fe,Le))return Fe[Le]}function mt(Fe){for(const Le in Fe)if(Object.prototype.hasOwnProperty.call(Fe,Le))return!1;return!0}function Nt(Fe,Le,Xe){const xt={};for(const pt in Fe)Object.prototype.hasOwnProperty.call(Fe,pt)&&(xt[pt]=Le.call(Xe,Fe[pt],pt,Fe));return xt}function Mt(Fe,Le){if(Fe===Le)return!0;const Xe=Object.keys(Fe),xt=Object.keys(Le);for(const pt of Xe){if(!xt.includes(pt))return!1;const pn=Fe[pt],In=Le[pt];if(rn(pn)&&rn(In)){if(!Mt(pn,In))return!1}else if(pn!==In)return!1}for(const pt of xt)if(!Xe.includes(pt))return!1;return!0}function rn(Fe){return null!==Fe&&"object"==typeof Fe}function En(Fe){const Le=[];for(const[Xe,xt]of Object.entries(Fe))Array.isArray(xt)?xt.forEach(pt=>{Le.push(encodeURIComponent(Xe)+"="+encodeURIComponent(pt))}):Le.push(encodeURIComponent(Xe)+"="+encodeURIComponent(xt));return Le.length?"&"+Le.join("&"):""}function bn(Fe){const Le={};return Fe.replace(/^\?/,"").split("&").forEach(xt=>{if(xt){const[pt,pn]=xt.split("=");Le[decodeURIComponent(pt)]=decodeURIComponent(pn)}}),Le}function mn(Fe){const Le=Fe.indexOf("?");if(!Le)return"";const Xe=Fe.indexOf("#",Le);return Fe.substring(Le,Xe>0?Xe:void 0)}class Rt{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let Le=1;Le<this.blockSize;++Le)this.pad_[Le]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(Le,Xe){Xe||(Xe=0);const xt=this.W_;if("string"==typeof Le)for(let Ce=0;Ce<16;Ce++)xt[Ce]=Le.charCodeAt(Xe)<<24|Le.charCodeAt(Xe+1)<<16|Le.charCodeAt(Xe+2)<<8|Le.charCodeAt(Xe+3),Xe+=4;else for(let Ce=0;Ce<16;Ce++)xt[Ce]=Le[Xe]<<24|Le[Xe+1]<<16|Le[Xe+2]<<8|Le[Xe+3],Xe+=4;for(let Ce=16;Ce<80;Ce++){const ye=xt[Ce-3]^xt[Ce-8]^xt[Ce-14]^xt[Ce-16];xt[Ce]=4294967295&(ye<<1|ye>>>31)}let De,ve,pt=this.chain_[0],pn=this.chain_[1],In=this.chain_[2],it=this.chain_[3],Qe=this.chain_[4];for(let Ce=0;Ce<80;Ce++){Ce<40?Ce<20?(De=it^pn&(In^it),ve=1518500249):(De=pn^In^it,ve=1859775393):Ce<60?(De=pn&In|it&(pn|In),ve=2400959708):(De=pn^In^it,ve=3395469782);const ye=(pt<<5|pt>>>27)+De+Qe+ve+xt[Ce]&4294967295;Qe=it,it=In,In=4294967295&(pn<<30|pn>>>2),pn=pt,pt=ye}this.chain_[0]=this.chain_[0]+pt&4294967295,this.chain_[1]=this.chain_[1]+pn&4294967295,this.chain_[2]=this.chain_[2]+In&4294967295,this.chain_[3]=this.chain_[3]+it&4294967295,this.chain_[4]=this.chain_[4]+Qe&4294967295}update(Le,Xe){if(null==Le)return;void 0===Xe&&(Xe=Le.length);const xt=Xe-this.blockSize;let pt=0;const pn=this.buf_;let In=this.inbuf_;for(;pt<Xe;){if(0===In)for(;pt<=xt;)this.compress_(Le,pt),pt+=this.blockSize;if("string"==typeof Le){for(;pt<Xe;)if(pn[In]=Le.charCodeAt(pt),++In,++pt,In===this.blockSize){this.compress_(pn),In=0;break}}else for(;pt<Xe;)if(pn[In]=Le[pt],++In,++pt,In===this.blockSize){this.compress_(pn),In=0;break}}this.inbuf_=In,this.total_+=Xe}digest(){const Le=[];let Xe=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let pt=this.blockSize-1;pt>=56;pt--)this.buf_[pt]=255&Xe,Xe/=256;this.compress_(this.buf_);let xt=0;for(let pt=0;pt<5;pt++)for(let pn=24;pn>=0;pn-=8)Le[xt]=this.chain_[pt]>>pn&255,++xt;return Le}}function br(Fe,Le){const Xe=new gr(Fe,Le);return Xe.subscribe.bind(Xe)}class gr{constructor(Le,Xe){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Xe,this.task.then(()=>{Le(this)}).catch(xt=>{this.error(xt)})}next(Le){this.forEachObserver(Xe=>{Xe.next(Le)})}error(Le){this.forEachObserver(Xe=>{Xe.error(Le)}),this.close(Le)}complete(){this.forEachObserver(Le=>{Le.complete()}),this.close()}subscribe(Le,Xe,xt){let pt;if(void 0===Le&&void 0===Xe&&void 0===xt)throw new Error("Missing Observer.");pt=function(Fe,Le){if("object"!=typeof Fe||null===Fe)return!1;for(const Xe of["next","error","complete"])if(Xe in Fe&&"function"==typeof Fe[Xe])return!0;return!1}(Le)?Le:{next:Le,error:Xe,complete:xt},void 0===pt.next&&(pt.next=yr),void 0===pt.error&&(pt.error=yr),void 0===pt.complete&&(pt.complete=yr);const pn=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?pt.error(this.finalError):pt.complete()}catch(In){}}),this.observers.push(pt),pn}unsubscribeOne(Le){void 0===this.observers||void 0===this.observers[Le]||(delete this.observers[Le],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(Le){if(!this.finalized)for(let Xe=0;Xe<this.observers.length;Xe++)this.sendOne(Xe,Le)}sendOne(Le,Xe){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[Le])try{Xe(this.observers[Le])}catch(xt){"undefined"!=typeof console&&console.error&&console.error(xt)}})}close(Le){this.finalized||(this.finalized=!0,void 0!==Le&&(this.finalError=Le),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function yr(){}const hr=function(Fe,Le,Xe,xt){let pt;if(xt<Le?pt="at least "+Le:xt>Xe&&(pt=0===Xe?"none":"no more than "+Xe),pt)throw new Error(Fe+" failed: Was called with "+xt+(1===xt?" argument.":" arguments.")+" Expects "+pt+".")};function Re(Fe,Le){return`${Fe} failed: ${Le} argument `}function J(Fe,Le,Xe,xt){if((!xt||Xe)&&"function"!=typeof Xe)throw new Error(Re(Fe,Le)+"must be a valid function.")}function ce(Fe,Le,Xe,xt){if((!xt||Xe)&&("object"!=typeof Xe||null===Xe))throw new Error(Re(Fe,Le)+"must be a valid context object.")}const be=function(Fe){const Le=[];let Xe=0;for(let xt=0;xt<Fe.length;xt++){let pt=Fe.charCodeAt(xt);if(pt>=55296&&pt<=56319){const pn=pt-55296;xt++,E(xt<Fe.length,"Surrogate pair missing trail surrogate."),pt=65536+(pn<<10)+(Fe.charCodeAt(xt)-56320)}pt<128?Le[Xe++]=pt:pt<2048?(Le[Xe++]=pt>>6|192,Le[Xe++]=63&pt|128):pt<65536?(Le[Xe++]=pt>>12|224,Le[Xe++]=pt>>6&63|128,Le[Xe++]=63&pt|128):(Le[Xe++]=pt>>18|240,Le[Xe++]=pt>>12&63|128,Le[Xe++]=pt>>6&63|128,Le[Xe++]=63&pt|128)}return Le},N=function(Fe){let Le=0;for(let Xe=0;Xe<Fe.length;Xe++){const xt=Fe.charCodeAt(Xe);xt<128?Le++:xt<2048?Le+=2:xt>=55296&&xt<=56319?(Le+=4,Xe++):Le+=3}return Le};function sn(Fe,Le=1e3,Xe=2){const xt=Le*Math.pow(Xe,Fe),pt=Math.round(.5*xt*(Math.random()-.5)*2);return Math.min(144e5,xt+pt)}function Fn(Fe){return Fe&&Fe._delegate?Fe._delegate:Fe}},7116:($t,$e,x)=>{"use strict";x.d($e,{K:()=>g});const g=Object.freeze({router:[{name:"Pull Request",path:"pull_request"},{name:"Code",path:"code"},{name:"Settings",path:"settings"}],pageHeader:[{name:"Issues",path:"issues"},{name:"Marketplace",path:"marketplace"},{name:"Explore",path:"explore"},{name:"Timer",path:"timer"},{name:"Transport",path:"tms"}],tms:[{name:"Items",path:"items",icon:"fa_solid:pencil-alt"},{name:"Dashboard",path:"dashboard",icon:"fa_solid:tachometer-alt"},{name:"Pickup & Collection",path:"pck-collection",icon:"fa_solid:truck-pickup"},{name:"Shipping & Transportation",path:"shp-transportation",icon:"fa_solid:shipping-fast"},{name:"Delivery",path:"delivery",icon:"fa_solid:truck-loading"},{name:"Customer Support",path:"ctm-support",icon:"fa_solid:user-circle"},{name:"Billing",path:"billing",icon:"fa_solid:money-bill-wave"},{name:"3-pl Billing",path:"3-pl-billing",icon:"fa_solid:money-bill"},{name:"Api",path:"api",icon:"fa_brands:quinscape"},{name:"Customer & Vendor",path:"customer-vendor",icon:"fa_solid:warehouse"}]})},9215:($t,$e,x)=>{"use strict";x.d($e,{M:()=>E,u:()=>B});const g=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;function E(){let ne=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(q){let se=(ne+16*Math.random())%16|0;return ne=Math.floor(ne/16),("x"==q?se:3&se|8).toString(16)})}function B(ne){return g.test(String(ne.value.email).toLowerCase())&&String(ne.value.password).length>=6}},2552:($t,$e,x)=>{"use strict";x.d($e,{z:()=>ne});var g=x(591),E=x(8929),B=x(5e3);let ne=(()=>{class he{constructor(){this._statePopUpLogin=new g.X(!1),this.statePopUp$=this._statePopUpLogin.asObservable(),this._coordinates=new E.xQ,this.coordinates$=this._coordinates.asObservable()}coordinates(se){this._coordinates.next(se)}statePopLogin(se){this._statePopUpLogin.next(se)}}return he.\u0275fac=function(se){return new(se||he)},he.\u0275prov=B.Yz7({token:he,factory:he.\u0275fac,providedIn:"root"}),he})()},5059:($t,$e,x)=>{"use strict";x.d($e,{V:()=>B});var g=x(591),E=x(5e3);let B=(()=>{class ne{constructor(){this._stateSpiner=new g.X(!1),this.getState$=this._stateSpiner.asObservable()}setStateBehaviorSpinner(q){this._stateSpiner.next(q)}}return ne.\u0275fac=function(q){return new(q||ne)},ne.\u0275prov=E.Yz7({token:ne,factory:ne.\u0275fac,providedIn:"root"}),ne})()},4466:($t,$e,x)=>{"use strict";x.d($e,{m:()=>ne});var g=x(9808),E=x(7587),B=x(5e3);let ne=(()=>{class he{}return he.\u0275fac=function(se){return new(se||he)},he.\u0275mod=B.oAB({type:he}),he.\u0275inj=B.cJS({imports:[[g.ez,E.Bz]]}),he})()},8382:($t,$e,x)=>{"use strict";x.d($e,{_:()=>E});var g=x(5e3);let E=(()=>{class B{constructor(){}getResource(he){return localStorage.getItem(he)}setResource(he,q){localStorage.setItem(he,q)}deleteResource(he){return localStorage.removeItem(he)}clearAllValue(){return localStorage.clear()}}return B.\u0275fac=function(he){return new(he||B)},B.\u0275prov=g.Yz7({token:B,factory:B.\u0275fac,providedIn:"root"}),B})()},865:($t,$e,x)=>{"use strict";x.d($e,{s:()=>E});var g=x(5e3);let E=(()=>{class B{constructor(he,q){this._el=he,this._renderer=q,this._renderer.addClass(this._el.nativeElement,"vorkurt__primary-btn")}mouseClick(){this._renderer.addClass(this._el.nativeElement,"vorkurt__primary-btn")}}return B.\u0275fac=function(he){return new(he||B)(g.Y36(g.SBq),g.Y36(g.Qsj))},B.\u0275dir=g.lG2({type:B,selectors:[["","elixBtnPrimary",""]],hostBindings:function(he,q){1&he&&g.NdJ("click",function(){return q.mouseClick()})}}),B})()},4402:($t,$e,x)=>{"use strict";x.d($e,{F:()=>E});var g=x(5e3);let E=(()=>{class B{constructor(he,q){this._el=he,this._renderer=q,this._renderer.addClass(this._el.nativeElement,"vorkurt__primary-input")}}return B.\u0275fac=function(he){return new(he||B)(g.Y36(g.SBq),g.Y36(g.Qsj))},B.\u0275dir=g.lG2({type:B,selectors:[["","elixInputPrimary",""]]}),B})()},7071:($t,$e,x)=>{"use strict";x.d($e,{M:()=>ne});var g=x(5e3),E=x(1995),B=x(8382);let ne=(()=>{class he{constructor(se,X){this._db=se,this._localStorage=X,this._dbPath="/repository",this.user=JSON.parse(this._localStorage.getResource("user")),this.repositoryRef=se.collection(this._dbPath)}get data(){return this.repositoryRef}setUrl(se){this.repositoryRef=this._db.collection(se),this._dbPath=se}updateData(se){return this._dbPath="/templateff",this._db.collection(this._dbPath).add(se).then(X=>X)}createRepository(se){return this._dbPath="/repositoryNew",this._db.collection(this._dbPath).add(se).then(X=>X)}createItems(se,X){return this._db.collection("/users").doc(this.user.user.email).collection(X).add(se)}createDB(se,X){this._dbPath="/users",this._db.collection(this._dbPath).doc(X.user.email).set(se)}allDateTwoColection(se,X){return this._db.collection(se).doc(this.user.user.email).collection(X)}}return he.\u0275fac=function(se){return new(se||he)(g.LFG(E.ST),g.LFG(B._))},he.\u0275prov=g.Yz7({token:he,factory:he.\u0275fac,providedIn:"root"}),he})()},2799:($t,$e,x)=>{"use strict";x.d($e,{ei:()=>oe,e8:()=>ie,_g:()=>g._,F0:()=>Ve.F,zE:()=>ae.z});var g=x(8382),E=x(1737),B=x(5e3),ne=x(7451),he=x(7587),q=x(8403),se=x(5059),X=x(7071);let ie=(()=>{class Oe{constructor(Te,He,yt,rt,ft,we){this.ngZone=Te,this.afAuth=He,this._router=yt,this._userService=rt,this._sppinerService=ft,this._connectionService=we,this.checkLocalStorage()}getDataFromFirebase(){this.afAuth.authState.subscribe(Te=>{Te?(this.user=Te,console.log("Authenticated"),this._userService.setUserLoggedIn(Te)):(this._sppinerService.setStateBehaviorSpinner(!1),console.log("Not authenticated"))})}signInWithEmail(Te){return this.afAuth.signInWithEmailAndPassword(Te.email,Te.password).then(He=>(this._userService.setUserLoggedIn(He),this.ngZone.run(()=>{this._router.navigate(["account"]),this._sppinerService.setStateBehaviorSpinner(!0)}),He)).catch(He=>(this._router.navigate(["/auth/l"]),this._sppinerService.setStateBehaviorSpinner(!1),(0,E._)(He)))}signUp(Te){return this.afAuth.createUserWithEmailAndPassword(Te.email,Te.password).then(He=>{this._sppinerService.setStateBehaviorSpinner(!1)}).catch(He=>(console.error("error2"),this._sppinerService.setStateBehaviorSpinner(!1),2))}logout(){this._userService.clearLocalStorage(),this.afAuth.signOut().then(()=>{this._router.navigate(["/","auth/l"])})}forgotPassword(Te){return this._sppinerService.setStateBehaviorSpinner(!0),this.afAuth.sendPasswordResetEmail(Te).then(()=>{window.alert("Password reset email send, check your inbox!")}).catch(He=>("auth/user-not-found"===He.code&&window.alert("User Is not created"),He)).finally(()=>{this._sppinerService.setStateBehaviorSpinner(!1)})}checkLocalStorage(){localStorage.getItem("user")?console.log("localStorage ready"):this.getDataFromFirebase()}handleError(Te){console.log("handle Error"),"FirebaseError"===Te.name&&console.log(Te)}}return Oe.\u0275fac=function(Te){return new(Te||Oe)(B.LFG(B.R0b),B.LFG(ne.zQ),B.LFG(he.F0),B.LFG(q.K),B.LFG(se.V),B.LFG(X.M))},Oe.\u0275prov=B.Yz7({token:Oe,factory:Oe.\u0275fac,providedIn:"root"}),Oe})();var Q=x(5861);let oe=(()=>{class Oe{constructor(Te,He,yt,rt){this._firebaseAuth=Te,this._sppinerService=He,this._userService=yt,this._route=rt}canActivate(Te,He){var yt=this;return(0,Q.Z)(function*(){let ft=!!(yield yt._firebaseAuth.currentUser);return yt._userService.getUserLoggedIn()&&(ft=!0),ft||(console.warn("You must be authenticated in order to access this page."),yield yt._route.navigate(["/auth/l"])),yt._sppinerService.setStateBehaviorSpinner(!1),ft})()}}return Oe.\u0275fac=function(Te){return new(Te||Oe)(B.LFG(ne.zQ),B.LFG(se.V),B.LFG(q.K),B.LFG(he.F0))},Oe.\u0275prov=B.Yz7({token:Oe,factory:Oe.\u0275fac,providedIn:"root"}),Oe})();var ae=x(8993),Ve=(x(7235),x(531));x(903)},8993:($t,$e,x)=>{"use strict";x.d($e,{z:()=>B});var g=x(8929),E=x(5e3);let B=(()=>{class ne{constructor(){this._templateData=new g.xQ,this._templateUserName=new g.xQ,this._templateRepositoryName=new g.xQ,this._templateDescription=new g.xQ,this._templateRepository=new g.xQ,this.templateData$=this._templateData.asObservable(),this.templateUserName$=this._templateUserName.asObservable(),this.templateRepositoryName$=this._templateRepositoryName.asObservable(),this.templateDescription$=this._templateDescription.asObservable(),this.templateRepositoryAvailable$=this._templateRepository.asObservable()}sendDataOnObservable(q){this._templateData.next(q)}sendUserNameOnObservable(q){this._templateUserName.next(q)}sendRepositoryNameOnObservable(q){this._templateRepositoryName.next(q)}sendDescriptionNameOnObservable(q){this._templateDescription.next(q)}sendRepositoryAvailableOnObservable(q){this._templateRepository.next(q)}}return ne.\u0275fac=function(q){return new(q||ne)},ne.\u0275prov=E.Yz7({token:ne,factory:ne.\u0275fac,providedIn:"root"}),ne})()},7235:($t,$e,x)=>{"use strict";x.d($e,{J:()=>he});var g=x(8);const E={LEFT:{originX:"start",originY:"center",overlayX:"end",overlayY:"center"},RIGHT:{originX:"start",originY:"center",overlayX:"start",overlayY:"center"},TOP:{originX:"start",originY:"center",overlayX:"start",overlayY:"top"},BOTTOM:{originX:"center",originY:"top",overlayX:"center",overlayY:"bottom"}};var B=x(5e3),ne=x(3586);let he=(()=>{class q{constructor(X,ie){this._overlay=X,this._rendererFactory=ie,this._rendered2=ie.createRenderer(null,null)}initTooltip(X,ie,Q,oe){const ae=new g.UE(X,ie),Me=this._overlay.create({positionStrategy:this._overlay.position().flexibleConnectedTo(Q).withPositions([E.BOTTOM,E.TOP,E.LEFT,E.RIGHT]),hasBackdrop:!0,backdropClass:"cdk-overlay-transparent-backdrop",panelClass:"vorkurt-tooltip",width:oe});return this._getConfigAtArrow(Me),Me.attach(ae),Me.backdropClick().subscribe(()=>this.close(Me)),Me}close(X){X.detach(),X.dispose()}_getConfigAtArrow(X){const ie=X.getConfig().positionStrategy.positions[0],Q=this._rendered2.createElement("span");switch(Q.classList.add("elix__arrow"),X.getConfig(),X.getConfig(),ie){case E.LEFT:Q.classList.add("elix__arrow-right"),Q.style.transform="rotate(230deg)",Q.style.top="calc(50% + -6.5px)",Q.style.left="calc(100%)";break;case E.RIGHT:Q.classList.add("elix__arrow-left");break;case E.TOP:Q.classList.add("elix__arrow-bottom"),Q.style.transform="rotate(135deg)";break;case E.BOTTOM:Q.classList.add("elix__arrow-top"),Q.style.left="50%",Q.style.top="calc(100% + -15px)",Q.style.transform="rotate(315deg)"}X.overlayElement.appendChild(Q)}}return q.\u0275fac=function(X){return new(X||q)(B.LFG(ne.aV),B.LFG(B.FYo))},q.\u0275prov=B.Yz7({token:q,factory:q.\u0275fac,providedIn:"root"}),q})()},903:($t,$e,x)=>{"use strict";x.d($e,{w:()=>Ve});var g=x(3586),E=x(8),B=x(5e3),ne=x(2552),he=x(2799),q=x(8403),se=x(5059),X=x(1101),ie=x(1377);const Q=["popUp"];let oe=(()=>{class xe{constructor(ee,Te,He,yt,rt,ft){this._popState=ee,this._render=Te,this._authService=He,this._userService=yt,this._spinnerService=rt,this._overlayConfig=ft,this.start=0,this.timer=0}ngOnInit(){this.dataUser=this._userService.getUserLoggedIn(),this.resumeTimeOut()}signOut(){this._popState.statePopLogin(!1),this._spinnerService.setStateBehaviorSpinner(!0),this._authService.logout(),this._spinnerService.setStateBehaviorSpinner(!1),this._overlayConfig.closeOverlay()}stopTimer(){window.setTimeout(()=>{this.componentRef.destroy()})}pauseTimeout(){window.clearInterval(this.timer)}resumeTimeOut(){this.timer=window.setInterval(()=>{if(!(this.start<100))return this.pauseTimeout(),void this._overlayConfig.closeOverlay();this.start+=10},500)}}return xe.\u0275fac=function(ee){return new(ee||xe)(B.Y36(ne.z),B.Y36(B.Qsj),B.Y36(he.e8),B.Y36(q.K),B.Y36(se.V),B.Y36(Ve))},xe.\u0275cmp=B.Xpm({type:xe,selectors:[["elix-pop-up-login"]],viewQuery:function(ee,Te){if(1&ee&&B.Gf(Q,5),2&ee){let He;B.iGM(He=B.CRH())&&(Te.popUp=He.first)}},inputs:{componentRef:"componentRef"},decls:11,vars:2,consts:[[1,"border-2","text-white","w-44","elix__border-color","border-solid",3,"mouseenter","mouseleave"],["popUp",""],[1,"mt-2"],[1,"truncate"],["mode","determinate",1,"pop__login-progress",3,"value"],[1,"flex","justify-center"],["mat-flat-button","",3,"click"]],template:function(ee,Te){1&ee&&(B.TgZ(0,"div",0,1),B.NdJ("mouseenter",function(){return Te.pauseTimeout()})("mouseleave",function(){return Te.resumeTimeOut()}),B.TgZ(2,"div"),B.TgZ(3,"div",2),B.TgZ(4,"p",3),B._uU(5),B.qZA(),B.qZA(),B.TgZ(6,"div"),B._UZ(7,"mat-progress-bar",4),B.qZA(),B.TgZ(8,"div",5),B.TgZ(9,"button",6),B.NdJ("click",function(){return Te.signOut()}),B._uU(10,"Sign Out"),B.qZA(),B.qZA(),B.qZA(),B.qZA()),2&ee&&(B.xp6(5),B.hij("",Te.dataUser.email||Te.dataUser.user.email," "),B.xp6(2),B.Q6J("value",Te.start))},directives:[X.pW,ie.lW],styles:[".elix__border-color[_ngcontent-%COMP%]{border-color:#1ea7fd;box-shadow:2px 1px 8px #00f,-8px 0 8px;z-index:100000000;height:min-content;position:relative;border-bottom-right-radius:1rem;border-bottom-left-radius:1rem}.elix__border-color[_ngcontent-%COMP%]   .pop__login-progress[_ngcontent-%COMP%]{position:absolute;top:0}h1[_ngcontent-%COMP%]{margin:0;padding:1em}"]}),xe})(),ae=(()=>{class xe{constructor(ee){this._overlayRef=ee}close(){this._overlayRef.dispose(),this._overlayRef.detach()}}return xe.\u0275fac=function(ee){return new(ee||xe)(B.LFG(g.Iu))},xe.\u0275prov=B.Yz7({token:xe,factory:xe.\u0275fac,providedIn:"root"}),xe})();const Me={hasBackdrop:!0,backdropClass:"dark-backdrop",panelClass:"elixir-dialog-panel"};let Ve=(()=>{class xe{constructor(ee){this._overlay=ee}open(ee,Te={}){const He=Object.assign(Object.assign({},Me),Te);return this.overlayRef=this.createOverlay(He,ee),this.dialogRef=new ae(this.overlayRef),this.filePortal=new E.C5(oe),this.overlayRef.attach(this.filePortal),this.overlayRef.backdropClick().subscribe(yt=>this.dialogRef.close()),this.overlayRef}closeOverlay(){this.dialogRef.close()}createOverlay(ee,Te){const He=this.getOverlayConfig(ee,Te);return this._overlay.create(He)}getOverlayConfig(ee,Te){const He=this._overlay.position().global().left(Te.clientX-176+"px").top(Te.clientY+3+"px");return new g.X_({hasBackdrop:ee.hasBackdrop,backdropClass:ee.backdropClass,panelClass:ee.panelClass,scrollStrategy:this._overlay.scrollStrategies.block(),positionStrategy:He})}}return xe.\u0275fac=function(ee){return new(ee||xe)(B.LFG(g.aV))},xe.\u0275prov=B.Yz7({token:xe,factory:xe.\u0275fac,providedIn:"root"}),xe})()},531:($t,$e,x)=>{"use strict";x.d($e,{F:()=>ne});var g=x(8),E=x(5e3),B=x(3586);let ne=(()=>{class he{constructor(se){this._ovelay=se}display(se,X){const ie=se;this.overlayRef=this._ovelay.create({hasBackdrop:!0,backdropClass:"cdk-overlay-transparent-backdrop",panelClass:"vorkurt-overlay",positionStrategy:this._ovelay.position().flexibleConnectedTo(ie).withPositions([{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"center",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"end",overlayY:"top"}])}),this.component=new g.C5(X),this.overlayRef.attach(this.component),this.overlayRef.backdropClick().subscribe(()=>{this.overlayRef.detach(),this.overlayRef.dispose()})}closeOverlay(){this.overlayRef.detach()}}return he.\u0275fac=function(se){return new(se||he)(E.LFG(B.aV))},he.\u0275prov=E.Yz7({token:he,factory:he.\u0275fac,providedIn:"root"}),he})()},8403:($t,$e,x)=>{"use strict";x.d($e,{K:()=>B});var g=x(5e3),E=x(8382);let B=(()=>{class ne{constructor(q){this._localStorage=q}setUserLoggedIn(q){this._localStorage.setResource("user",JSON.stringify(q))}getUserLoggedIn(){return localStorage.getItem("user")?JSON.parse(this._localStorage.getResource("user")):(console.log("local storage is empty"),null)}clearLocalStorage(){this._localStorage.clearAllValue()}}return ne.\u0275fac=function(q){return new(q||ne)(g.LFG(E._))},ne.\u0275prov=g.Yz7({token:ne,factory:ne.\u0275fac,providedIn:"root"}),ne})()},6474:($t,$e,x)=>{"use strict";var g=x(2313),E=x(5e3),B=x(7587),ne=x(9215),he=x(2799),q=x(5059),se=x(7071),X=x(9808),ie=x(6201),Q=x(3075),oe=x(4402);function ae(u,l){1&u&&(E.TgZ(0,"span",22),E._uU(1," * email is not valid"),E.qZA())}function Me(u,l){1&u&&(E.TgZ(0,"span",22),E._uU(1," * Password to short"),E.qZA())}function Ve(u,l){if(1&u){const a=E.EpF();E.TgZ(0,"div",1),E.TgZ(1,"div",2),E.TgZ(2,"div",3),E.TgZ(3,"h1",4),E._uU(4),E.qZA(),E.qZA(),E.TgZ(5,"div",5),E.TgZ(6,"button",6),E.NdJ("click",function(){return E.CHM(a),E.oxw(2).changeSignIn()}),E._uU(7),E.qZA(),E.qZA(),E.qZA(),E.TgZ(8,"div",7),E.TgZ(9,"form",8,9),E.NdJ("ngSubmit",function(){E.CHM(a);const I=E.MAs(10);return E.oxw(2).onSubmit(I)}),E.TgZ(11,"div",10),E.TgZ(12,"div",11),E.TgZ(13,"h1",12),E._uU(14,"Username"),E.qZA(),E._UZ(15,"input",13),E.qZA(),E.YNc(16,ae,2,0,"span",14),E.qZA(),E.TgZ(17,"div",10),E.TgZ(18,"div",11),E.TgZ(19,"h1",12),E._uU(20,"Password"),E.qZA(),E._UZ(21,"input",15),E.qZA(),E.YNc(22,Me,2,0,"span",14),E.qZA(),E.TgZ(23,"div",16),E.TgZ(24,"button",17),E._uU(25),E.qZA(),E.qZA(),E.TgZ(26,"div",18),E.NdJ("click",function(){return E.CHM(a),E.oxw(2).changeSignIn()}),E.TgZ(27,"span"),E._uU(28),E.qZA(),E.qZA(),E.TgZ(29,"div"),E.TgZ(30,"div",19),E.TgZ(31,"span"),E._uU(32,"Forgot password"),E.qZA(),E.qZA(),E.qZA(),E.qZA(),E.TgZ(33,"div",20),E._UZ(34,"div",21),E.qZA(),E.qZA(),E.qZA()}if(2&u){const a=E.MAs(10),p=E.oxw(2);E.xp6(4),E.Oqu(p.logedIn?"Logged":"Create"),E.xp6(3),E.Oqu(p.logedIn?"Sign Up":"Sign In"),E.xp6(9),E.Q6J("ngIf",p.feedback.email),E.xp6(6),E.Q6J("ngIf",p.feedback.password),E.xp6(2),E.Q6J("disabled",!a),E.xp6(1),E.hij(" ",p.logedIn?"Sign In":"Sign Up"," "),E.xp6(3),E.hij(" ",p.logedIn?"Create new User":"User already created",""),E.xp6(2),E.Q6J("routerLink","/forgot_password")}}function xe(u,l){if(1&u&&(E.TgZ(0,"div",1),E.YNc(1,Ve,35,8,"div",0),E.qZA()),2&u){const a=E.oxw();E.xp6(1),E.Q6J("ngIf",!a.isSignedIn)}}function Oe(u,l){1&u&&E._UZ(0,"div",1)}let ee=(()=>{class u{constructor(a,p,I,k){this._authService=a,this._router=p,this._sppinerService=I,this._connectionService=k,this.isSignedIn=!1,this.logedIn=!0,this.feedback={password:!1,email:!1},this.forgotPass=!0}ngOnInit(){this._sppinerService.setStateBehaviorSpinner(!1),this.isSignedIn=null!==localStorage.getItem("user")}onSubmit(a){this.feedback.password=!1,this.feedback.email=!1;try{(0,ne.u)(a)?(this._sppinerService.setStateBehaviorSpinner(!0),this.logedIn?this._authService.signInWithEmail(a.value).then(p=>{this._connectionService.createDB({role:"admin"},p)}):this._authService.signUp(a.value).catch(p=>(console.log(p),p)),a.reset()):(this.feedback.email=!0,this.feedback.password=!0)}catch(p){console.log(p)}}changeSignIn(){this.logedIn=!this.logedIn}forgotPassword(a){"route"===a&&this._router.navigate(["forgot_password"])}}return u.\u0275fac=function(a){return new(a||u)(E.Y36(he.e8),E.Y36(B.F0),E.Y36(q.V),E.Y36(se.M))},u.\u0275cmp=E.Xpm({type:u,selectors:[["elix-auth"]],decls:2,vars:2,consts:[["class","h-full",4,"ngIf"],[1,"h-full"],[1,"flex"],[1,"flex","flex-1","justify-end","ml-20","pt-3"],[1,"text-white","text-9xl"],[1,"flex","flex-1","justify-end"],["mat-ripple","",1,"bg-white","hover:border-2","hover:bg-blue-100","rounded-md","text-white","pr-3","pl-3","pb-2","pt-2","text-blue-900","mt-3","mr-3",3,"click"],[1,"flex","justify-center","items-center","elix__height"],[3,"ngSubmit"],["authForm","ngForm"],[1,"flex-col","mt-3","mb-8"],["elixInputPrimary",""],[1,"text-white","text-4xl"],["type","email","ngModel","","name","email","required",""],["class","text-red-600 absolute my-1",4,"ngIf"],["type","password","minlength","6","ngModel","","name","password","required",""],[1,"flex","justify-end","items-center","mt-3"],["type","submit",1,"bg-blue-400","hover:border-2","hover:bg-blue-700","rounded-md","text-white","pr-3","pl-3","pb-2","pt-2",3,"disabled"],[1,"wrapper-arrow","-ml-2","text-blue-400","hover:underline","cursor-pointer","mt-10",3,"click"],[1,"wrapper-arrow","-ml-2","text-blue-400","hover:underline","cursor-pointer","mt-20",3,"routerLink"],[1,"arrow"],[1,"arrow__body"],[1,"text-red-600","absolute","my-1"]],template:function(a,p){1&a&&(E.YNc(0,xe,2,1,"div",0),E.YNc(1,Oe,1,0,"div",0)),2&a&&(E.Q6J("ngIf",p.forgotPass),E.xp6(1),E.Q6J("ngIf",!p.forgotPass))},directives:[X.O5,ie.wG,Q._Y,Q.JL,Q.F,oe.F,Q.Fj,Q.JJ,Q.On,Q.Q7,Q.wO,B.rH],styles:['.elix__height[_ngcontent-%COMP%]{height:94%}.wrapper-arrow[_ngcontent-%COMP%]{position:absolute}.arrow[_ngcontent-%COMP%]{position:absolute;left:54%;top:6%;width:43%;height:63%;margin-right:11px;border-width:0 5px 5px 0;border-style:dashed;border-color:var(--second-primary-text);border-bottom-right-radius:100%}.arrow[_ngcontent-%COMP%]   .arrow__body[_ngcontent-%COMP%]:after{content:"";position:absolute;right:-17px;top:-4px;transform:rotate(180deg);border-width:20px 15px 0;border-style:solid;border-color:var(--second-primary-text) transparent transparent}']}),u})();var Te=x(7116),He=x(1377);let yt=(()=>{class u{constructor(){}ngOnInit(){}}return u.\u0275fac=function(a){return new(a||u)},u.\u0275cmp=E.Xpm({type:u,selectors:[["elix-page-not-found"]],decls:10,vars:0,consts:[[1,"flex","font-normal","h-5/6","items-center","justify-center","text-6xl","vorkurt__color-text"],[1,"flex","items-center","flex-col"],[1,"pb-20"],[1,"w-1/3"],["src","https://1.bp.blogspot.com/-RyFB60VBiA0/XqxM-LYTR4I/AAAAAAAABE0/A4bqBPK_ETMzDRK_qO_s0ooiSiMF19xgACLcBGAsYHQ/s1600/sed%2Bdp%2Bfor%2Bwhatsapp.jpg"],[1,"flex","justify-center"],["mat-button","","routerLink","/account"]],template:function(a,p){1&a&&(E.TgZ(0,"div",0),E.TgZ(1,"div"),E.TgZ(2,"div",1),E.TgZ(3,"div",2),E._uU(4," Page Not Foun "),E.qZA(),E.TgZ(5,"div",3),E._UZ(6,"img",4),E.qZA(),E.qZA(),E.TgZ(7,"div",5),E.TgZ(8,"button",6),E._uU(9," Go To Account "),E.qZA(),E.qZA(),E.qZA(),E.qZA())},directives:[He.lW,B.rH],styles:[""]}),u})();var rt=x(865);const ft=function(){return["/","auth/l"]},Pe=[{path:"forgot_password",component:(()=>{class u{constructor(a,p,I){this._authService=a,this._router=p,this._sppinerService=I}ngOnInit(){}forgotPassword(a){(0,ne.u)(a)&&(this._sppinerService.setStateBehaviorSpinner(!0),this._authService.forgotPassword(a.value.email).then(p=>{"auth/user-not-found"!==p.code&&this._router.navigate(["/auth/l"])}).catch(p=>console.error(p)).finally(()=>this._sppinerService.setStateBehaviorSpinner(!1)))}getVelocityEmail(a){return(0,ne.u)(a)}}return u.\u0275fac=function(a){return new(a||u)(E.Y36(he.e8),E.Y36(B.F0),E.Y36(q.V))},u.\u0275cmp=E.Xpm({type:u,selectors:[["elix-forgot-password"]],decls:20,vars:3,consts:[[1,"h-full"],[1,"flex","justify-center","pt-3"],[1,"text-white","text-9xl"],[1,"flex","h-full","items-center","justify-center","flex-col"],[3,"ngSubmit"],["forgotPass","ngForm"],[1,"flex-col","mt-3","mb-8"],["elixInputPrimary",""],[1,"text-white","text-4xl"],["type","email","ngModel","","name","email","required",""],[1,"flex"],[1,"mr-5"],["elixBtnPrimary","","type","submit",3,"disabled"],["elixBtnPrimary","","type","submit",3,"routerLink"]],template:function(a,p){if(1&a){const I=E.EpF();E.TgZ(0,"div",0),E.TgZ(1,"div"),E.TgZ(2,"div",1),E.TgZ(3,"h1",2),E._uU(4,"Forgot Password"),E.qZA(),E.qZA(),E.qZA(),E.TgZ(5,"div",3),E.TgZ(6,"form",4,5),E.NdJ("ngSubmit",function(){E.CHM(I);const K=E.MAs(7);return p.forgotPassword(K)}),E.TgZ(8,"div",6),E.TgZ(9,"div",7),E.TgZ(10,"h1",8),E._uU(11,"Username"),E.qZA(),E._UZ(12,"input",9),E.qZA(),E.qZA(),E.TgZ(13,"div",10),E.TgZ(14,"div",11),E.TgZ(15,"button",12),E._uU(16,"Send Email"),E.qZA(),E.qZA(),E.TgZ(17,"div"),E.TgZ(18,"button",13),E._uU(19," Go back"),E.qZA(),E.qZA(),E.qZA(),E.qZA(),E.qZA(),E.qZA()}if(2&a){const I=E.MAs(7);E.xp6(15),E.Q6J("disabled",!p.getVelocityEmail(I)),E.xp6(3),E.Q6J("routerLink",E.DdM(2,ft))}},directives:[Q._Y,Q.JL,Q.F,oe.F,Q.Fj,Q.JJ,Q.On,Q.Q7,rt.s,B.rH],styles:[""]}),u})()},{path:"",data:{data:Te.K.pageHeader},canActivate:[he.ei],loadChildren:()=>x.e(329).then(x.bind(x,1329)).then(u=>u.HeaderModule)},{path:"auth/l",component:ee},{path:"",redirectTo:"auth/l",pathMatch:"full"},{path:"**",component:yt}];let qe=(()=>{class u{}return u.\u0275fac=function(a){return new(a||u)},u.\u0275mod=E.oAB({type:u}),u.\u0275inj=E.cJS({imports:[[B.Bz.forRoot(Pe)],B.Bz]}),u})();var et=x(2198);function At(u,l){1&u&&E._UZ(0,"div",1)}let Ut=(()=>{class u{constructor(a){this._spinnerStateService=a}get showSppiner(){return this._showSppiner}ngOnInit(){this._spinnerStateService.getState$.subscribe(a=>this._showSppiner=a)}}return u.\u0275fac=function(a){return new(a||u)(E.Y36(q.V))},u.\u0275cmp=E.Xpm({type:u,selectors:[["elix-spinner"]],decls:1,vars:1,consts:[["class","lds-hourglass flex justify-center items-center",4,"ngIf"],[1,"lds-hourglass","flex","justify-center","items-center"]],template:function(a,p){1&a&&E.YNc(0,At,1,0,"div",0),2&a&&E.Q6J("ngIf",p.showSppiner)},directives:[X.O5],styles:['.lds-hourglass[_ngcontent-%COMP%]{display:flex;width:100%;height:100%}.lds-hourglass[_ngcontent-%COMP%]:after{content:" ";display:block;border-radius:50%;width:0;height:0;margin:8px;box-sizing:border-box;border:32px solid #fff;border-color:#9d8b6f transparent #5a9469 transparent;animation:lds-hourglass 3.2s infinite}@keyframes lds-hourglass{0%{transform:rotate(0);animation-timing-function:cubic-bezier(.55,.055,.675,.19)}50%{transform:rotate(900deg);animation-timing-function:cubic-bezier(.215,.61,.355,1)}to{transform:rotate(3600deg)}}']}),u})();function Zt(u,l){1&u&&E._UZ(0,"router-outlet")}let jt=(()=>{class u{constructor(a,p){this._spinerService=a,this._router=p,this.title="vorkurt",this.stateSpiner=!1,this._spinerService.getState$.subscribe(I=>this.stateSpiner=I)}ngOnInit(){this.unSubscriptionscrollBar=this._router.events.pipe((0,et.h)(a=>a instanceof B.m2)).subscribe(a=>window.scrollTo(0,0))}ngOnDestroy(){this.unSubscriptionscrollBar.unsubscribe()}}return u.\u0275fac=function(a){return new(a||u)(E.Y36(q.V),E.Y36(B.F0))},u.\u0275cmp=E.Xpm({type:u,selectors:[["app-root"]],decls:2,vars:1,consts:[[4,"ngIf"]],template:function(a,p){1&a&&(E._UZ(0,"elix-spinner"),E.YNc(1,Zt,1,0,"router-outlet",0)),2&a&&(E.xp6(1),E.Q6J("ngIf",!p.stateSpiner))},directives:[Ut,X.O5,B.lC],styles:[""]}),u})();var tn=x(6360),qt=x(1279),wr=x(520);let ar=(()=>{class u{constructor(a){this._injectable=a}handleError(a){const p=this._injectable.get(B.F0);console.warn(`${p.url}`),a instanceof wr.UA?(console.log(`Error from backend ${a.status}`),console.log(`Response body ${a.message}`)):console.warn(`An error occurred ${a.message}`)}}return u.\u0275fac=function(a){return new(a||u)(E.LFG(E.zs3))},u.\u0275prov=E.Yz7({token:u,factory:u.\u0275fac}),u})(),Nn=(()=>{class u{constructor(a,p){this._domSanitizer=a,this._matIconRegistry=p,this._matIconRegistry.addSvgIconSetInNamespace("fa_brands",this._domSanitizer.bypassSecurityTrustResourceUrl("assets/icons/svgs/brands.svg")),this._matIconRegistry.addSvgIconSetInNamespace("fa_regular",this._domSanitizer.bypassSecurityTrustResourceUrl("assets/icons/svgs/regular.svg")),this._matIconRegistry.addSvgIconSetInNamespace("fa_solid",this._domSanitizer.bypassSecurityTrustResourceUrl("assets/icons/svgs/solid.svg"))}}return u.\u0275fac=function(a){return new(a||u)(E.LFG(g.H7),E.LFG(qt.jv))},u.\u0275mod=E.oAB({type:u}),u.\u0275inj=E.cJS({providers:[{provide:E.qLn,useClass:ar}],imports:[[wr.JF,He.ot,B.Bz]]}),u})();var Qn=x(4466);const dn={apiKey:"AIzaSyA6YpwfAmlLH4o6B1NQQeQ1uoHYnJoOvHs",authDomain:"vorkurt.firebaseapp.com",databaseURL:"https://vorkurt-default-rtdb.firebaseio.com",projectId:"vorkurt",storageBucket:"vorkurt.appspot.com",messagingSenderId:"1044413194434",appId:"1:1044413194434:web:4667694345fbde0e6adb5b",measurementId:"G-49RDGK301M"};var Wt=x(2011),kn=x(353),gt=x(2916),Ye=x(1086),Ct=x(6787),Ee=x(4850),mt=x(2474),Nt=x(7545),Mt=x(2014),rn=x(5778),En=x(826),bn=x(448);class Rt{constructor(l,a){this.observables=l,this.project=a}call(l,a){return a.subscribe(new br(l,this.observables,this.project))}}class br extends En.L{constructor(l,a,p){super(l),this.observables=a,this.project=p,this.toRespond=[];const I=a.length;this.values=new Array(I);for(let k=0;k<I;k++)this.toRespond.push(k);for(let k=0;k<I;k++)this.add((0,bn.D)(this,a[k],void 0,k))}notifyNext(l,a,p){this.values[p]=a;const I=this.toRespond;if(I.length>0){const k=I.indexOf(p);-1!==k&&I.splice(k,1)}}notifyComplete(){}_next(l){if(0===this.toRespond.length){const a=[l,...this.values];this.project?this._tryProject(a):this.destination.next(a)}}_tryProject(l){let a;try{a=this.project.apply(this,l)}catch(p){return void this.destination.error(p)}this.destination.next(a)}}var gr=x(3489);class Yn{constructor(l){this.predicate=l}call(l,a){return a.subscribe(new yr(l,this.predicate))}}class yr extends gr.L{constructor(l,a){super(l),this.predicate=a,this.skipping=!0,this.index=0}_next(l){const a=this.destination;this.skipping&&this.tryCallPredicate(l),this.skipping||a.next(l)}tryCallPredicate(l){try{const a=this.predicate(l,this.index++);this.skipping=Boolean(a)}catch(a){this.destination.error(a)}}}var hr=x(6351),L=(x(9259),x(3942)),J=x(4859),ce=x(5861),be=x(9681),N=x(2090),Ie=x(1877);const at="@firebase/database";let zt="";function sn(u){zt=u}class fn{constructor(l){this.domStorage_=l,this.prefix_="firebase:"}set(l,a){null==a?this.domStorage_.removeItem(this.prefixedName_(l)):this.domStorage_.setItem(this.prefixedName_(l),(0,N.Pz)(a))}get(l){const a=this.domStorage_.getItem(this.prefixedName_(l));return null==a?null:(0,N.cI)(a)}remove(l){this.domStorage_.removeItem(this.prefixedName_(l))}prefixedName_(l){return this.prefix_+l}toString(){return this.domStorage_.toString()}}class Jn{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(l,a){null==a?delete this.cache_[l]:this.cache_[l]=a}get(l){return(0,N.r3)(this.cache_,l)?this.cache_[l]:null}remove(l){delete this.cache_[l]}}const Fn=function(u){try{if("undefined"!=typeof window&&void 0!==window[u]){const l=window[u];return l.setItem("firebase:sentinel","cache"),l.removeItem("firebase:sentinel"),new fn(l)}}catch(l){}return new Jn},Fe=Fn("localStorage"),Le=Fn("sessionStorage"),Xe=new Ie.Yd("@firebase/database"),xt=function(){let u=1;return function(){return u++}}(),pt=function(u){const l=(0,N.dS)(u),a=new N.gQ;a.update(l);const p=a.digest();return N.US.encodeByteArray(p)},pn=function(...u){let l="";for(let a=0;a<u.length;a++){const p=u[a];Array.isArray(p)||p&&"object"==typeof p&&"number"==typeof p.length?l+=pn.apply(null,p):l+="object"==typeof p?(0,N.Pz)(p):p,l+=" "}return l};let In=null,it=!0;const Qe=function(u,l){(0,N.hu)(!l||!0===u||!1===u,"Can't turn on custom loggers persistently."),!0===u?(Xe.logLevel=Ie.in.VERBOSE,In=Xe.log.bind(Xe),l&&Le.set("logging_enabled",!0)):"function"==typeof u?In=u:(In=null,Le.remove("logging_enabled"))},De=function(...u){if(!0===it&&(it=!1,null===In&&!0===Le.get("logging_enabled")&&Qe(!0)),In){const l=pn.apply(null,u);In(l)}},ve=function(u){return function(...l){De(u,...l)}},Ce=function(...u){const l="FIREBASE INTERNAL ERROR: "+pn(...u);Xe.error(l)},ye=function(...u){const l=`FIREBASE FATAL ERROR: ${pn(...u)}`;throw Xe.error(l),new Error(l)},Ke=function(...u){const l="FIREBASE WARNING: "+pn(...u);Xe.warn(l)},ze=function(u){return"number"==typeof u&&(u!=u||u===Number.POSITIVE_INFINITY||u===Number.NEGATIVE_INFINITY)},Se="[MIN_NAME]",ut="[MAX_NAME]",St=function(u,l){if(u===l)return 0;if(u===Se||l===ut)return-1;if(l===Se||u===ut)return 1;{const a=Kn(u),p=Kn(l);return null!==a?null!==p?a-p==0?u.length-l.length:a-p:-1:null!==p?1:u<l?-1:1}},Dn=function(u,l){return u===l?0:u<l?-1:1},Wn=function(u,l){if(l&&u in l)return l[u];throw new Error("Missing required key ("+u+") in object: "+(0,N.Pz)(l))},fr=function(u){if("object"!=typeof u||null===u)return(0,N.Pz)(u);const l=[];for(const p in u)l.push(p);l.sort();let a="{";for(let p=0;p<l.length;p++)0!==p&&(a+=","),a+=(0,N.Pz)(l[p]),a+=":",a+=fr(u[l[p]]);return a+="}",a},Zr=function(u,l){const a=u.length;if(a<=l)return[u];const p=[];for(let I=0;I<a;I+=l)p.push(u.substring(I,I+l>a?a:I+l));return p};function Sr(u,l){for(const a in u)u.hasOwnProperty(a)&&l(a,u[a])}const si=function(u){(0,N.hu)(!ze(u),"Invalid JSON number");const p=1023;let I,k,K,_e,ke;0===u?(k=0,K=0,I=1/u==-1/0?1:0):(I=u<0,(u=Math.abs(u))>=Math.pow(2,1-p)?(_e=Math.min(Math.floor(Math.log(u)/Math.LN2),p),k=_e+p,K=Math.round(u*Math.pow(2,52-_e)-Math.pow(2,52))):(k=0,K=Math.round(u/Math.pow(2,-1074))));const Je=[];for(ke=52;ke;ke-=1)Je.push(K%2?1:0),K=Math.floor(K/2);for(ke=11;ke;ke-=1)Je.push(k%2?1:0),k=Math.floor(k/2);Je.push(I?1:0),Je.reverse();const kt=Je.join("");let Ot="";for(ke=0;ke<64;ke+=8){let Xt=parseInt(kt.substr(ke,8),2).toString(16);1===Xt.length&&(Xt="0"+Xt),Ot+=Xt}return Ot.toLowerCase()},to=new RegExp("^-?(0*)\\d{1,10}$"),pi=-2147483648,yn=2147483647,Kn=function(u){if(to.test(u)){const l=Number(u);if(l>=pi&&l<=yn)return l}return null},ur=function(u){try{u()}catch(l){setTimeout(()=>{throw Ke("Exception was thrown by user callback.",l.stack||""),l},Math.floor(0))}},ji=function(u,l){const a=setTimeout(u,l);return"object"==typeof a&&a.unref&&a.unref(),a};class Rr{constructor(l,a){this.appName_=l,this.appCheckProvider=a,this.appCheck=null==a?void 0:a.getImmediate({optional:!0}),this.appCheck||null==a||a.get().then(p=>this.appCheck=p)}getToken(l){return this.appCheck?this.appCheck.getToken(l):new Promise((a,p)=>{setTimeout(()=>{this.appCheck?this.getToken(l).then(a,p):a(null)},0)})}addTokenChangeListener(l){var a;null===(a=this.appCheckProvider)||void 0===a||a.get().then(p=>p.addTokenListener(l))}notifyForInvalidToken(){Ke(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Br{constructor(l,a,p){this.appName_=l,this.firebaseOptions_=a,this.authProvider_=p,this.auth_=null,this.auth_=p.getImmediate({optional:!0}),this.auth_||p.onInit(I=>this.auth_=I)}getToken(l){return this.auth_?this.auth_.getToken(l).catch(a=>a&&"auth/token-not-initialized"===a.code?(De("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(a)):new Promise((a,p)=>{setTimeout(()=>{this.auth_?this.getToken(l).then(a,p):a(null)},0)})}addTokenChangeListener(l){this.auth_?this.auth_.addAuthTokenListener(l):this.authProvider_.get().then(a=>a.addAuthTokenListener(l))}removeTokenChangeListener(l){this.authProvider_.get().then(a=>a.removeAuthTokenListener(l))}notifyForInvalidToken(){let l='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';l+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ke(l)}}let mr=(()=>{class u{constructor(a){this.accessToken=a}getToken(a){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(a){a(this.accessToken)}removeTokenChangeListener(a){}notifyForInvalidToken(){}}return u.OWNER="owner",u})();const Ji=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,mi="websocket",ri="long_polling";class tr{constructor(l,a,p,I,k=!1,K="",_e=!1){this.secure=a,this.namespace=p,this.webSocketOnly=I,this.nodeAdmin=k,this.persistenceKey=K,this.includeNamespaceInQueryParams=_e,this._host=l.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Fe.get("host:"+l)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(l){l!==this.internalHost&&(this.internalHost=l,this.isCacheableHost()&&Fe.set("host:"+this._host,this.internalHost))}toString(){let l=this.toURLString();return this.persistenceKey&&(l+="<"+this.persistenceKey+">"),l}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Ki(u,l,a){let p;if((0,N.hu)("string"==typeof l,"typeof type must == string"),(0,N.hu)("object"==typeof a,"typeof params must == object"),l===mi)p=(u.secure?"wss://":"ws://")+u.internalHost+"/.ws?";else{if(l!==ri)throw new Error("Unknown connection type: "+l);p=(u.secure?"https://":"http://")+u.internalHost+"/.lp?"}(function(u){return u.host!==u.internalHost||u.isCustomHost()||u.includeNamespaceInQueryParams})(u)&&(a.ns=u.namespace);const I=[];return Sr(a,(k,K)=>{I.push(k+"="+K)}),p+I.join("&")}class Hi{constructor(){this.counters_={}}incrementCounter(l,a=1){(0,N.r3)(this.counters_,l)||(this.counters_[l]=0),this.counters_[l]+=a}get(){return(0,N.p$)(this.counters_)}}const _i={},qr={};function Ri(u){const l=u.toString();return _i[l]||(_i[l]=new Hi),_i[l]}class Ti{constructor(l){this.onMessage_=l,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(l,a){this.closeAfterResponse=l,this.onClose=a,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(l,a){for(this.pendingResponses[l]=a;this.pendingResponses[this.currentResponseNum];){const p=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let I=0;I<p.length;++I)p[I]&&ur(()=>{this.onMessage_(p[I])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class cs{constructor(l,a,p,I,k,K,_e){this.connId=l,this.repoInfo=a,this.applicationId=p,this.appCheckToken=I,this.authToken=k,this.transportSessionId=K,this.lastSessionId=_e,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ve(l),this.stats_=Ri(a),this.urlFn=ke=>(this.appCheckToken&&(ke.ac=this.appCheckToken),Ki(a,ri,ke))}open(l,a){this.curSegmentNum=0,this.onDisconnect_=a,this.myPacketOrderer=new Ti(l),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(u){if((0,N.Yr)()||"complete"===document.readyState)u();else{let l=!1;const a=function(){document.body?l||(l=!0,u()):setTimeout(a,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",a,!1),window.addEventListener("load",a,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&a()}),window.attachEvent("onload",a))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Gi((...k)=>{const[K,_e,ke,Je,kt]=k;if(this.incrementIncomingBytes_(k),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===K)this.id=_e,this.password=ke;else{if("close"!==K)throw new Error("Unrecognized command received: "+K);_e?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(_e,()=>{this.onClosed_()})):this.onClosed_()}},(...k)=>{const[K,_e]=k;this.incrementIncomingBytes_(k),this.myPacketOrderer.handleResponse(K,_e)},()=>{this.onClosed_()},this.urlFn);const p={start:"t"};p.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(p.cb=this.scriptTagHolder.uniqueCallbackIdentifier),p.v="5",this.transportSessionId&&(p.s=this.transportSessionId),this.lastSessionId&&(p.ls=this.lastSessionId),this.applicationId&&(p.p=this.applicationId),this.appCheckToken&&(p.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&Ji.test(location.hostname)&&(p.r="f");const I=this.urlFn(p);this.log_("Connecting via long-poll to "+I),this.scriptTagHolder.addTag(I,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){cs.forceAllow_=!0}static forceDisallow(){cs.forceDisallow_=!0}static isAvailable(){return!((0,N.Yr)()||!cs.forceAllow_&&(cs.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(l){const a=(0,N.Pz)(l);this.bytesSent+=a.length,this.stats_.incrementCounter("bytes_sent",a.length);const p=(0,N.h$)(a),I=Zr(p,1840);for(let k=0;k<I.length;k++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,I.length,I[k]),this.curSegmentNum++}addDisconnectPingFrame(l,a){if((0,N.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const p={dframe:"t"};p.id=l,p.pw=a,this.myDisconnFrame.src=this.urlFn(p),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(l){const a=(0,N.Pz)(l).length;this.bytesReceived+=a,this.stats_.incrementCounter("bytes_received",a)}}class Gi{constructor(l,a,p,I){if(this.onDisconnect=p,this.urlFn=I,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,N.Yr)())this.commandCB=l,this.onMessageCB=a;else{this.uniqueCallbackIdentifier=xt(),window["pLPCommand"+this.uniqueCallbackIdentifier]=l,window["pRTLPCB"+this.uniqueCallbackIdentifier]=a,this.myIFrame=Gi.createIFrame_();let k="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(k='<script>document.domain="'+document.domain+'";<\/script>');const K="<html><body>"+k+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(K),this.myIFrame.doc.close()}catch(_e){De("frame writing exception"),_e.stack&&De(_e.stack),De(_e)}}}static createIFrame_(){const l=document.createElement("iframe");if(l.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(l);try{l.contentWindow.document||De("No IE domain setting required")}catch(a){const p=document.domain;l.src="javascript:void((function(){document.open();document.domain='"+p+"';document.close();})())"}return l.contentDocument?l.doc=l.contentDocument:l.contentWindow?l.doc=l.contentWindow.document:l.document&&(l.doc=l.document),l}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const l=this.onDisconnect;l&&(this.onDisconnect=null,l())}startLongPoll(l,a){for(this.myID=l,this.myPW=a,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const l={};l.id=this.myID,l.pw=this.myPW,l.ser=this.currentSerial;let a=this.urlFn(l),p="",I=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+p.length<=1870;){const K=this.pendingSegs.shift();p=p+"&seg"+I+"="+K.seg+"&ts"+I+"="+K.ts+"&d"+I+"="+K.d,I++}return a+=p,this.addLongPollTag_(a,this.currentSerial),!0}return!1}enqueueSegment(l,a,p){this.pendingSegs.push({seg:l,ts:a,d:p}),this.alive&&this.newRequest_()}addLongPollTag_(l,a){this.outstandingRequests.add(a);const p=()=>{this.outstandingRequests.delete(a),this.newRequest_()},I=setTimeout(p,Math.floor(25e3));this.addTag(l,()=>{clearTimeout(I),p()})}addTag(l,a){(0,N.Yr)()?this.doNodeLongPoll(l,a):setTimeout(()=>{try{if(!this.sendNewPolls)return;const p=this.myIFrame.doc.createElement("script");p.type="text/javascript",p.async=!0,p.src=l,p.onload=p.onreadystatechange=function(){const I=p.readyState;(!I||"loaded"===I||"complete"===I)&&(p.onload=p.onreadystatechange=null,p.parentNode&&p.parentNode.removeChild(p),a())},p.onerror=()=>{De("Long-poll script failed to load: "+l),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(p)}catch(p){}},Math.floor(1))}}let Ts=null;"undefined"!=typeof MozWebSocket?Ts=MozWebSocket:"undefined"!=typeof WebSocket&&(Ts=WebSocket);let vo=(()=>{class u{constructor(a,p,I,k,K,_e,ke){this.connId=a,this.applicationId=I,this.appCheckToken=k,this.authToken=K,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ve(this.connId),this.stats_=Ri(p),this.connURL=u.connectionURL_(p,_e,ke,k),this.nodeAdmin=p.nodeAdmin}static connectionURL_(a,p,I,k){const K={v:"5"};return!(0,N.Yr)()&&"undefined"!=typeof location&&location.hostname&&Ji.test(location.hostname)&&(K.r="f"),p&&(K.s=p),I&&(K.ls=I),k&&(K.ac=k),Ki(a,mi,K)}open(a,p){this.onDisconnect=p,this.onMessage=a,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Fe.set("previous_websocket_failure",!0);try{if((0,N.Yr)()){const k={headers:{"User-Agent":`Firebase/5/${zt}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(k.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(k.headers["X-Firebase-AppCheck"]=this.appCheckToken);const K=process.env,_e=0===this.connURL.indexOf("wss://")?K.HTTPS_PROXY||K.https_proxy:K.HTTP_PROXY||K.http_proxy;_e&&(k.proxy={origin:_e}),this.mySock=new Ts(this.connURL,[],k)}else this.mySock=new Ts(this.connURL,[],{headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(I){this.log_("Error instantiating WebSocket.");const k=I.message||I.data;return k&&this.log_(k),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=I=>{this.handleIncomingFrame(I)},this.mySock.onerror=I=>{this.log_("WebSocket error.  Closing connection.");const k=I.message||I.data;k&&this.log_(k),this.onClosed_()}}start(){}static forceDisallow(){u.forceDisallow_=!0}static isAvailable(){let a=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const I=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);I&&I.length>1&&parseFloat(I[1])<4.4&&(a=!0)}return!a&&null!==Ts&&!u.forceDisallow_}static previouslyFailed(){return Fe.isInMemoryStorage||!0===Fe.get("previous_websocket_failure")}markConnectionHealthy(){Fe.remove("previous_websocket_failure")}appendFrame_(a){if(this.frames.push(a),this.frames.length===this.totalFrames){const p=this.frames.join("");this.frames=null;const I=(0,N.cI)(p);this.onMessage(I)}}handleNewFrameCount_(a){this.totalFrames=a,this.frames=[]}extractFrameCount_(a){if((0,N.hu)(null===this.frames,"We already have a frame buffer"),a.length<=6){const p=Number(a);if(!isNaN(p))return this.handleNewFrameCount_(p),null}return this.handleNewFrameCount_(1),a}handleIncomingFrame(a){if(null===this.mySock)return;const p=a.data;if(this.bytesReceived+=p.length,this.stats_.incrementCounter("bytes_received",p.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(p);else{const I=this.extractFrameCount_(p);null!==I&&this.appendFrame_(I)}}send(a){this.resetKeepAlive();const p=(0,N.Pz)(a);this.bytesSent+=p.length,this.stats_.incrementCounter("bytes_sent",p.length);const I=Zr(p,16384);I.length>1&&this.sendString_(String(I.length));for(let k=0;k<I.length;k++)this.sendString_(I[k])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(a){try{this.mySock.send(a)}catch(p){this.log_("Exception thrown from WebSocket.send():",p.message||p.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return u.responsesRequiredToBeHealthy=2,u.healthyTimeout=3e4,u})();class es{constructor(l){this.initTransports_(l)}static get ALL_TRANSPORTS(){return[cs,vo]}initTransports_(l){const a=vo&&vo.isAvailable();let p=a&&!vo.previouslyFailed();if(l.webSocketOnly&&(a||Ke("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),p=!0),p)this.transports_=[vo];else{const I=this.transports_=[];for(const k of es.ALL_TRANSPORTS)k&&k.isAvailable()&&I.push(k)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}class Qo{constructor(l,a,p,I,k,K,_e,ke,Je,kt){this.id=l,this.repoInfo_=a,this.applicationId_=p,this.appCheckToken_=I,this.authToken_=k,this.onMessage_=K,this.onReady_=_e,this.onDisconnect_=ke,this.onKill_=Je,this.lastSessionId=kt,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ve("c:"+this.id+":"),this.transportManager_=new es(a),this.log_("Connection created"),this.start_()}start_(){const l=this.transportManager_.initialTransport();this.conn_=new l(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=l.responsesRequiredToBeHealthy||0;const a=this.connReceiver_(this.conn_),p=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(a,p)},Math.floor(0));const I=l.healthyTimeout||0;I>0&&(this.healthyTimeout_=ji(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(I)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(l){return a=>{l===this.conn_?this.onConnectionLost_(a):l===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(l){return a=>{2!==this.state_&&(l===this.rx_?this.onPrimaryMessageReceived_(a):l===this.secondaryConn_?this.onSecondaryMessageReceived_(a):this.log_("message on old connection"))}}sendRequest(l){this.sendData_({t:"d",d:l})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(l){if("t"in l){const a=l.t;"a"===a?this.upgradeIfSecondaryHealthy_():"r"===a?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===a&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(l){const a=Wn("t",l),p=Wn("d",l);if("c"===a)this.onSecondaryControl_(p);else{if("d"!==a)throw new Error("Unknown protocol layer: "+a);this.pendingDataMessages.push(p)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(l){const a=Wn("t",l),p=Wn("d",l);"c"===a?this.onControl_(p):"d"===a&&this.onDataMessage_(p)}onDataMessage_(l){this.onPrimaryResponse_(),this.onMessage_(l)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(l){const a=Wn("t",l);if("d"in l){const p=l.d;if("h"===a)this.onHandshake_(p);else if("n"===a){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let I=0;I<this.pendingDataMessages.length;++I)this.onDataMessage_(this.pendingDataMessages[I]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===a?this.onConnectionShutdown_(p):"r"===a?this.onReset_(p):"e"===a?Ce("Server Error: "+p):"o"===a?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Ce("Unknown control packet command: "+a)}}onHandshake_(l){const a=l.ts,p=l.v,I=l.h;this.sessionId=l.s,this.repoInfo_.host=I,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,a),"5"!==p&&Ke("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const l=this.transportManager_.upgradeTransport();l&&this.startUpgrade_(l)}startUpgrade_(l){this.secondaryConn_=new l(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=l.responsesRequiredToBeHealthy||0;const a=this.connReceiver_(this.secondaryConn_),p=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(a,p),ji(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(l){this.log_("Reset packet received.  New host: "+l),this.repoInfo_.host=l,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(l,a){this.log_("Realtime connection established."),this.conn_=l,this.state_=1,this.onReady_&&(this.onReady_(a,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ji(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const l=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===l||this.rx_===l)&&this.close()}onConnectionLost_(l){this.conn_=null,l||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Fe.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(l){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(l),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(l){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(l)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Ls{put(l,a,p,I){}merge(l,a,p,I){}refreshAuthToken(l){}refreshAppCheckToken(l){}onDisconnectPut(l,a,p){}onDisconnectMerge(l,a,p){}onDisconnectCancel(l,a){}reportStats(l){}}class Fi{constructor(l){this.allowedEvents_=l,this.listeners_={},(0,N.hu)(Array.isArray(l)&&l.length>0,"Requires a non-empty array")}trigger(l,...a){if(Array.isArray(this.listeners_[l])){const p=[...this.listeners_[l]];for(let I=0;I<p.length;I++)p[I].callback.apply(p[I].context,a)}}on(l,a,p){this.validateEventType_(l),this.listeners_[l]=this.listeners_[l]||[],this.listeners_[l].push({callback:a,context:p});const I=this.getInitialEvent(l);I&&a.apply(p,I)}off(l,a,p){this.validateEventType_(l);const I=this.listeners_[l]||[];for(let k=0;k<I.length;k++)if(I[k].callback===a&&(!p||p===I[k].context))return void I.splice(k,1)}validateEventType_(l){(0,N.hu)(this.allowedEvents_.find(a=>a===l),"Unknown event: "+l)}}class _r extends Fi{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,N.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new _r}getInitialEvent(l){return(0,N.hu)("online"===l,"Unknown event type: "+l),[this.online_]}currentlyOnline(){return this.online_}}class G{constructor(l,a){if(void 0===a){this.pieces_=l.split("/");let p=0;for(let I=0;I<this.pieces_.length;I++)this.pieces_[I].length>0&&(this.pieces_[p]=this.pieces_[I],p++);this.pieces_.length=p,this.pieceNum_=0}else this.pieces_=l,this.pieceNum_=a}toString(){let l="";for(let a=this.pieceNum_;a<this.pieces_.length;a++)""!==this.pieces_[a]&&(l+="/"+this.pieces_[a]);return l||"/"}}function S(){return new G("")}function y(u){return u.pieceNum_>=u.pieces_.length?null:u.pieces_[u.pieceNum_]}function C(u){return u.pieces_.length-u.pieceNum_}function H(u){let l=u.pieceNum_;return l<u.pieces_.length&&l++,new G(u.pieces_,l)}function je(u){return u.pieceNum_<u.pieces_.length?u.pieces_[u.pieces_.length-1]:null}function hn(u,l=0){return u.pieces_.slice(u.pieceNum_+l)}function Pn(u){if(u.pieceNum_>=u.pieces_.length)return null;const l=[];for(let a=u.pieceNum_;a<u.pieces_.length-1;a++)l.push(u.pieces_[a]);return new G(l,0)}function Gn(u,l){const a=[];for(let p=u.pieceNum_;p<u.pieces_.length;p++)a.push(u.pieces_[p]);if(l instanceof G)for(let p=l.pieceNum_;p<l.pieces_.length;p++)a.push(l.pieces_[p]);else{const p=l.split("/");for(let I=0;I<p.length;I++)p[I].length>0&&a.push(p[I])}return new G(a,0)}function Sn(u){return u.pieceNum_>=u.pieces_.length}function rr(u,l){const a=y(u),p=y(l);if(null===a)return l;if(a===p)return rr(H(u),H(l));throw new Error("INTERNAL ERROR: innerPath ("+l+") is not within outerPath ("+u+")")}function Wr(u,l){const a=hn(u,0),p=hn(l,0);for(let I=0;I<a.length&&I<p.length;I++){const k=St(a[I],p[I]);if(0!==k)return k}return a.length===p.length?0:a.length<p.length?-1:1}function Ur(u,l){if(C(u)!==C(l))return!1;for(let a=u.pieceNum_,p=l.pieceNum_;a<=u.pieces_.length;a++,p++)if(u.pieces_[a]!==l.pieces_[p])return!1;return!0}function xr(u,l){let a=u.pieceNum_,p=l.pieceNum_;if(C(u)>C(l))return!1;for(;a<u.pieces_.length;){if(u.pieces_[a]!==l.pieces_[p])return!1;++a,++p}return!0}class Tn{constructor(l,a){this.errorPrefix_=a,this.parts_=hn(l,0),this.byteLength_=Math.max(1,this.parts_.length);for(let p=0;p<this.parts_.length;p++)this.byteLength_+=(0,N.ug)(this.parts_[p]);Ys(this)}}function Ys(u){if(u.byteLength_>768)throw new Error(u.errorPrefix_+"has a key path longer than 768 bytes ("+u.byteLength_+").");if(u.parts_.length>32)throw new Error(u.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Ei(u))}function Ei(u){return 0===u.parts_.length?"":"in property '"+u.parts_.join(".")+"'"}class To extends Fi{constructor(){let l,a;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(a="visibilitychange",l="hidden"):void 0!==document.mozHidden?(a="mozvisibilitychange",l="mozHidden"):void 0!==document.msHidden?(a="msvisibilitychange",l="msHidden"):void 0!==document.webkitHidden&&(a="webkitvisibilitychange",l="webkitHidden")),this.visible_=!0,a&&document.addEventListener(a,()=>{const p=!document[l];p!==this.visible_&&(this.visible_=p,this.trigger("visible",p))},!1)}static getInstance(){return new To}getInitialEvent(l){return(0,N.hu)("visible"===l,"Unknown event type: "+l),[this.visible_]}}const ms=1e3;let nt,re=(()=>{class u extends Ls{constructor(a,p,I,k,K,_e,ke,Je){if(super(),this.repoInfo_=a,this.applicationId_=p,this.onDataUpdate_=I,this.onConnectStatus_=k,this.onServerInfoUpdate_=K,this.authTokenProvider_=_e,this.appCheckTokenProvider_=ke,this.authOverride_=Je,this.id=u.nextPersistentConnectionId_++,this.log_=ve("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ms,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,Je&&!(0,N.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");To.getInstance().on("visible",this.onVisible_,this),-1===a.host.indexOf("fblocal")&&_r.getInstance().on("online",this.onOnline_,this)}sendRequest(a,p,I){const k=++this.requestNumber_,K={r:k,a,b:p};this.log_((0,N.Pz)(K)),(0,N.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(K),I&&(this.requestCBHash_[k]=I)}get(a){this.initConnection_();const p=new N.BH,I={p:a._path.toString(),q:a._queryObject},k={action:"g",request:I,onComplete:_e=>{const ke=_e.d;"ok"===_e.s?(this.onDataUpdate_(I.p,ke,!1,null),p.resolve(ke)):p.reject(ke)}};this.outstandingGets_.push(k),this.outstandingGetCount_++;const K=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const _e=this.outstandingGets_[K];void 0===_e||k!==_e||(delete this.outstandingGets_[K],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+K+" timed out on connection"),p.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(K),p.promise}listen(a,p,I,k){this.initConnection_();const K=a._queryIdentifier,_e=a._path.toString();this.log_("Listen called for "+_e+" "+K),this.listens.has(_e)||this.listens.set(_e,new Map),(0,N.hu)(a._queryParams.isDefault()||!a._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,N.hu)(!this.listens.get(_e).has(K),"listen() called twice for same path/queryId.");const ke={onComplete:k,hashFn:p,query:a,tag:I};this.listens.get(_e).set(K,ke),this.connected_&&this.sendListen_(ke)}sendGet_(a){const p=this.outstandingGets_[a];this.sendRequest("g",p.request,I=>{delete this.outstandingGets_[a],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),p.onComplete&&p.onComplete(I)})}sendListen_(a){const p=a.query,I=p._path.toString(),k=p._queryIdentifier;this.log_("Listen on "+I+" for "+k);const K={p:I};a.tag&&(K.q=p._queryObject,K.t=a.tag),K.h=a.hashFn(),this.sendRequest("q",K,ke=>{const Je=ke.d,kt=ke.s;u.warnOnListenWarnings_(Je,p),(this.listens.get(I)&&this.listens.get(I).get(k))===a&&(this.log_("listen response",ke),"ok"!==kt&&this.removeListen_(I,k),a.onComplete&&a.onComplete(kt,Je))})}static warnOnListenWarnings_(a,p){if(a&&"object"==typeof a&&(0,N.r3)(a,"w")){const I=(0,N.DV)(a,"w");if(Array.isArray(I)&&~I.indexOf("no_index")){const k='".indexOn": "'+p._queryParams.getIndex().toString()+'"',K=p._path.toString();Ke(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${k} at ${K} to your security rules for better performance.`)}}}refreshAuthToken(a){this.authToken_=a,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(a)}reduceReconnectDelayIfAdminCredential_(a){(a&&40===a.length||(0,N.GJ)(a))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(a){this.appCheckToken_=a,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const a=this.authToken_,p=(0,N.w9)(a)?"auth":"gauth",I={cred:a};null===this.authOverride_?I.noauth=!0:"object"==typeof this.authOverride_&&(I.authvar=this.authOverride_),this.sendRequest(p,I,k=>{const K=k.s,_e=k.d||"error";this.authToken_===a&&("ok"===K?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(K,_e))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},a=>{const p=a.s,I=a.d||"error";"ok"===p?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(p,I)})}unlisten(a,p){const I=a._path.toString(),k=a._queryIdentifier;this.log_("Unlisten called for "+I+" "+k),(0,N.hu)(a._queryParams.isDefault()||!a._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(I,k)&&this.connected_&&this.sendUnlisten_(I,k,a._queryObject,p)}sendUnlisten_(a,p,I,k){this.log_("Unlisten on "+a+" for "+p);const K={p:a};k&&(K.q=I,K.t=k),this.sendRequest("n",K)}onDisconnectPut(a,p,I){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",a,p,I):this.onDisconnectRequestQueue_.push({pathString:a,action:"o",data:p,onComplete:I})}onDisconnectMerge(a,p,I){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",a,p,I):this.onDisconnectRequestQueue_.push({pathString:a,action:"om",data:p,onComplete:I})}onDisconnectCancel(a,p){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",a,null,p):this.onDisconnectRequestQueue_.push({pathString:a,action:"oc",data:null,onComplete:p})}sendOnDisconnect_(a,p,I,k){const K={p,d:I};this.log_("onDisconnect "+a,K),this.sendRequest(a,K,_e=>{k&&setTimeout(()=>{k(_e.s,_e.d)},Math.floor(0))})}put(a,p,I,k){this.putInternal("p",a,p,I,k)}merge(a,p,I,k){this.putInternal("m",a,p,I,k)}putInternal(a,p,I,k,K){this.initConnection_();const _e={p,d:I};void 0!==K&&(_e.h=K),this.outstandingPuts_.push({action:a,request:_e,onComplete:k}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+p)}sendPut_(a){const p=this.outstandingPuts_[a].action,I=this.outstandingPuts_[a].request,k=this.outstandingPuts_[a].onComplete;this.outstandingPuts_[a].queued=this.connected_,this.sendRequest(p,I,K=>{this.log_(p+" response",K),delete this.outstandingPuts_[a],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),k&&k(K.s,K.d)})}reportStats(a){if(this.connected_){const p={c:a};this.log_("reportStats",p),this.sendRequest("s",p,I=>{"ok"!==I.s&&this.log_("reportStats","Error sending stats: "+I.d)})}}onDataMessage_(a){if("r"in a){this.log_("from server: "+(0,N.Pz)(a));const p=a.r,I=this.requestCBHash_[p];I&&(delete this.requestCBHash_[p],I(a.b))}else{if("error"in a)throw"A server-side error has occurred: "+a.error;"a"in a&&this.onDataPush_(a.a,a.b)}}onDataPush_(a,p){this.log_("handleServerMessage",a,p),"d"===a?this.onDataUpdate_(p.p,p.d,!1,p.t):"m"===a?this.onDataUpdate_(p.p,p.d,!0,p.t):"c"===a?this.onListenRevoked_(p.p,p.q):"ac"===a?this.onAuthRevoked_(p.s,p.d):"apc"===a?this.onAppCheckRevoked_(p.s,p.d):"sd"===a?this.onSecurityDebugPacket_(p):Ce("Unrecognized action received from server: "+(0,N.Pz)(a)+"\nAre you using the latest client?")}onReady_(a,p){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(a),this.lastSessionId=p,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(a){(0,N.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(a))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(a){a&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ms,this.realtime_||this.scheduleConnect_(0)),this.visible_=a}onOnline_(a){a?(this.log_("Browser went online."),this.reconnectDelay_=ms,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=ms),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const a=(new Date).getTime()-this.lastConnectionAttemptTime_;let p=Math.max(0,this.reconnectDelay_-a);p=Math.random()*p,this.log_("Trying to reconnect in "+p+"ms"),this.scheduleConnect_(p),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var a=this;return(0,ce.Z)(function*(){if(a.shouldReconnect_()){a.log_("Making a connection attempt"),a.lastConnectionAttemptTime_=(new Date).getTime(),a.lastConnectionEstablishedTime_=null;const p=a.onDataMessage_.bind(a),I=a.onReady_.bind(a),k=a.onRealtimeDisconnect_.bind(a),K=a.id+":"+u.nextConnectionId_++,_e=a.lastSessionId;let ke=!1,Je=null;const kt=function(){Je?Je.close():(ke=!0,k())};a.realtime_={close:kt,sendRequest:function(Hn){(0,N.hu)(Je,"sendRequest call when we're not connected not allowed."),Je.sendRequest(Hn)}};const Xt=a.forceTokenRefresh_;a.forceTokenRefresh_=!1;try{const[Hn,cr]=yield Promise.all([a.authTokenProvider_.getToken(Xt),a.appCheckTokenProvider_.getToken(Xt)]);ke?De("getToken() completed but was canceled"):(De("getToken() completed. Creating connection."),a.authToken_=Hn&&Hn.accessToken,a.appCheckToken_=cr&&cr.token,Je=new Qo(K,a.repoInfo_,a.applicationId_,a.appCheckToken_,a.authToken_,p,I,k,Ii=>{Ke(Ii+" ("+a.repoInfo_.toString()+")"),a.interrupt("server_kill")},_e))}catch(Hn){a.log_("Failed to get token: "+Hn),ke||(a.repoInfo_.nodeAdmin&&Ke(Hn),kt())}}})()}interrupt(a){De("Interrupting connection for reason: "+a),this.interruptReasons_[a]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(a){De("Resuming connection for reason: "+a),delete this.interruptReasons_[a],(0,N.xb)(this.interruptReasons_)&&(this.reconnectDelay_=ms,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(a){const p=a-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:p})}cancelSentTransactions_(){for(let a=0;a<this.outstandingPuts_.length;a++){const p=this.outstandingPuts_[a];p&&"h"in p.request&&p.queued&&(p.onComplete&&p.onComplete("disconnect"),delete this.outstandingPuts_[a],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(a,p){let I;I=p?p.map(K=>fr(K)).join("$"):"default";const k=this.removeListen_(a,I);k&&k.onComplete&&k.onComplete("permission_denied")}removeListen_(a,p){const I=new G(a).toString();let k;if(this.listens.has(I)){const K=this.listens.get(I);k=K.get(p),K.delete(p),0===K.size&&this.listens.delete(I)}else k=void 0;return k}onAuthRevoked_(a,p){De("Auth token revoked: "+a+"/"+p),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===a||"permission_denied"===a)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(a,p){De("App check token revoked: "+a+"/"+p),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===a||"permission_denied"===a)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(a){this.securityDebugCallback_?this.securityDebugCallback_(a):"msg"in a&&console.log("FIREBASE: "+a.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const a of this.listens.values())for(const p of a.values())this.sendListen_(p);for(let a=0;a<this.outstandingPuts_.length;a++)this.outstandingPuts_[a]&&this.sendPut_(a);for(;this.onDisconnectRequestQueue_.length;){const a=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(a.action,a.pathString,a.data,a.onComplete)}for(let a=0;a<this.outstandingGets_.length;a++)this.outstandingGets_[a]&&this.sendGet_(a)}sendConnectStats_(){const a={};let p="js";(0,N.Yr)()&&(p=this.repoInfo_.nodeAdmin?"admin_node":"node"),a["sdk."+p+"."+zt.replace(/\./g,"-")]=1,(0,N.uI)()?a["framework.cordova"]=1:(0,N.b$)()&&(a["framework.reactnative"]=1),this.reportStats(a)}shouldReconnect_(){const a=_r.getInstance().currentlyOnline();return(0,N.xb)(this.interruptReasons_)&&a}}return u.nextPersistentConnectionId_=0,u.nextConnectionId_=0,u})();class me{constructor(l,a){this.name=l,this.node=a}static Wrap(l,a){return new me(l,a)}}class We{getCompare(){return this.compare.bind(this)}indexedValueChanged(l,a){const p=new me(Se,l),I=new me(Se,a);return 0!==this.compare(p,I)}minPost(){return me.MIN}}class vt extends We{static get __EMPTY_NODE(){return nt}static set __EMPTY_NODE(l){nt=l}compare(l,a){return St(l.name,a.name)}isDefinedOn(l){throw(0,N.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(l,a){return!1}minPost(){return me.MIN}maxPost(){return new me(ut,nt)}makePost(l,a){return(0,N.hu)("string"==typeof l,"KeyIndex indexValue must always be a string."),new me(l,nt)}toString(){return".key"}}const Ft=new vt;class un{constructor(l,a,p,I,k=null){this.isReverse_=I,this.resultGenerator_=k,this.nodeStack_=[];let K=1;for(;!l.isEmpty();)if(l=l,K=a?p(l.key,a):1,I&&(K*=-1),K<0)l=this.isReverse_?l.left:l.right;else{if(0===K){this.nodeStack_.push(l);break}this.nodeStack_.push(l),l=this.isReverse_?l.right:l.left}}getNext(){if(0===this.nodeStack_.length)return null;let a,l=this.nodeStack_.pop();if(a=this.resultGenerator_?this.resultGenerator_(l.key,l.value):{key:l.key,value:l.value},this.isReverse_)for(l=l.left;!l.isEmpty();)this.nodeStack_.push(l),l=l.right;else for(l=l.right;!l.isEmpty();)this.nodeStack_.push(l),l=l.left;return a}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const l=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(l.key,l.value):{key:l.key,value:l.value}}}let Dr,_n=(()=>{class u{constructor(a,p,I,k,K){this.key=a,this.value=p,this.color=null!=I?I:u.RED,this.left=null!=k?k:ir.EMPTY_NODE,this.right=null!=K?K:ir.EMPTY_NODE}copy(a,p,I,k,K){return new u(null!=a?a:this.key,null!=p?p:this.value,null!=I?I:this.color,null!=k?k:this.left,null!=K?K:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(a){return this.left.inorderTraversal(a)||!!a(this.key,this.value)||this.right.inorderTraversal(a)}reverseTraversal(a){return this.right.reverseTraversal(a)||a(this.key,this.value)||this.left.reverseTraversal(a)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(a,p,I){let k=this;const K=I(a,k.key);return k=K<0?k.copy(null,null,null,k.left.insert(a,p,I),null):0===K?k.copy(null,p,null,null,null):k.copy(null,null,null,null,k.right.insert(a,p,I)),k.fixUp_()}removeMin_(){if(this.left.isEmpty())return ir.EMPTY_NODE;let a=this;return!a.left.isRed_()&&!a.left.left.isRed_()&&(a=a.moveRedLeft_()),a=a.copy(null,null,null,a.left.removeMin_(),null),a.fixUp_()}remove(a,p){let I,k;if(I=this,p(a,I.key)<0)!I.left.isEmpty()&&!I.left.isRed_()&&!I.left.left.isRed_()&&(I=I.moveRedLeft_()),I=I.copy(null,null,null,I.left.remove(a,p),null);else{if(I.left.isRed_()&&(I=I.rotateRight_()),!I.right.isEmpty()&&!I.right.isRed_()&&!I.right.left.isRed_()&&(I=I.moveRedRight_()),0===p(a,I.key)){if(I.right.isEmpty())return ir.EMPTY_NODE;k=I.right.min_(),I=I.copy(k.key,k.value,null,null,I.right.removeMin_())}I=I.copy(null,null,null,null,I.right.remove(a,p))}return I.fixUp_()}isRed_(){return this.color}fixUp_(){let a=this;return a.right.isRed_()&&!a.left.isRed_()&&(a=a.rotateLeft_()),a.left.isRed_()&&a.left.left.isRed_()&&(a=a.rotateRight_()),a.left.isRed_()&&a.right.isRed_()&&(a=a.colorFlip_()),a}moveRedLeft_(){let a=this.colorFlip_();return a.right.left.isRed_()&&(a=a.copy(null,null,null,null,a.right.rotateRight_()),a=a.rotateLeft_(),a=a.colorFlip_()),a}moveRedRight_(){let a=this.colorFlip_();return a.left.left.isRed_()&&(a=a.rotateRight_(),a=a.colorFlip_()),a}rotateLeft_(){const a=this.copy(null,null,u.RED,null,this.right.left);return this.right.copy(null,null,this.color,a,null)}rotateRight_(){const a=this.copy(null,null,u.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,a)}colorFlip_(){const a=this.left.copy(null,null,!this.left.color,null,null),p=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,a,p)}checkMaxDepth_(){const a=this.check_();return Math.pow(2,a)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const a=this.left.check_();if(a!==this.right.check_())throw new Error("Black depths differ");return a+(this.isRed_()?0:1)}}return u.RED=!0,u.BLACK=!1,u})();class ir{constructor(l,a=ir.EMPTY_NODE){this.comparator_=l,this.root_=a}insert(l,a){return new ir(this.comparator_,this.root_.insert(l,a,this.comparator_).copy(null,null,_n.BLACK,null,null))}remove(l){return new ir(this.comparator_,this.root_.remove(l,this.comparator_).copy(null,null,_n.BLACK,null,null))}get(l){let a,p=this.root_;for(;!p.isEmpty();){if(a=this.comparator_(l,p.key),0===a)return p.value;a<0?p=p.left:a>0&&(p=p.right)}return null}getPredecessorKey(l){let a,p=this.root_,I=null;for(;!p.isEmpty();){if(a=this.comparator_(l,p.key),0===a){if(p.left.isEmpty())return I?I.key:null;for(p=p.left;!p.right.isEmpty();)p=p.right;return p.key}a<0?p=p.left:a>0&&(I=p,p=p.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(l){return this.root_.inorderTraversal(l)}reverseTraversal(l){return this.root_.reverseTraversal(l)}getIterator(l){return new un(this.root_,null,this.comparator_,!1,l)}getIteratorFrom(l,a){return new un(this.root_,l,this.comparator_,!1,a)}getReverseIteratorFrom(l,a){return new un(this.root_,l,this.comparator_,!0,a)}getReverseIterator(l){return new un(this.root_,null,this.comparator_,!0,l)}}function Ln(u,l){return St(u.name,l.name)}function zn(u,l){return St(u,l)}ir.EMPTY_NODE=new class{copy(l,a,p,I,k){return this}insert(l,a,p){return new _n(l,a,null)}remove(l,a){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(l){return!1}reverseTraversal(l){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const zr=function(u){return"number"==typeof u?"number:"+si(u):"string:"+u},$i=function(u){if(u.isLeafNode()){const l=u.val();(0,N.hu)("string"==typeof l||"number"==typeof l||"object"==typeof l&&(0,N.r3)(l,".sv"),"Priority must be a string or number.")}else(0,N.hu)(u===Dr||u.isEmpty(),"priority of unexpected type.");(0,N.hu)(u===Dr||u.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let bi,Bs,Li,_s=(()=>{class u{constructor(a,p=u.__childrenNodeConstructor.EMPTY_NODE){this.value_=a,this.priorityNode_=p,this.lazyHash_=null,(0,N.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),$i(this.priorityNode_)}static set __childrenNodeConstructor(a){bi=a}static get __childrenNodeConstructor(){return bi}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(a){return new u(this.value_,a)}getImmediateChild(a){return".priority"===a?this.priorityNode_:u.__childrenNodeConstructor.EMPTY_NODE}getChild(a){return Sn(a)?this:".priority"===y(a)?this.priorityNode_:u.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(a,p){return null}updateImmediateChild(a,p){return".priority"===a?this.updatePriority(p):p.isEmpty()&&".priority"!==a?this:u.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(a,p).updatePriority(this.priorityNode_)}updateChild(a,p){const I=y(a);return null===I?p:p.isEmpty()&&".priority"!==I?this:((0,N.hu)(".priority"!==I||1===C(a),".priority must be the last token in a path"),this.updateImmediateChild(I,u.__childrenNodeConstructor.EMPTY_NODE.updateChild(H(a),p)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(a,p){return!1}val(a){return a&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let a="";this.priorityNode_.isEmpty()||(a+="priority:"+zr(this.priorityNode_.val())+":");const p=typeof this.value_;a+=p+":",a+="number"===p?si(this.value_):this.value_,this.lazyHash_=pt(a)}return this.lazyHash_}getValue(){return this.value_}compareTo(a){return a===u.__childrenNodeConstructor.EMPTY_NODE?1:a instanceof u.__childrenNodeConstructor?-1:((0,N.hu)(a.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(a))}compareToLeafNode_(a){const p=typeof a.value_,I=typeof this.value_,k=u.VALUE_TYPE_ORDER.indexOf(p),K=u.VALUE_TYPE_ORDER.indexOf(I);return(0,N.hu)(k>=0,"Unknown leaf type: "+p),(0,N.hu)(K>=0,"Unknown leaf type: "+I),k===K?"object"===I?0:this.value_<a.value_?-1:this.value_===a.value_?0:1:K-k}withIndex(){return this}isIndexed(){return!0}equals(a){if(a===this)return!0;if(a.isLeafNode()){const p=a;return this.value_===p.value_&&this.priorityNode_.equals(p.priorityNode_)}return!1}}return u.VALUE_TYPE_ORDER=["object","boolean","number","string"],u})();const Fr=new class extends We{compare(l,a){const p=l.node.getPriority(),I=a.node.getPriority(),k=p.compareTo(I);return 0===k?St(l.name,a.name):k}isDefinedOn(l){return!l.getPriority().isEmpty()}indexedValueChanged(l,a){return!l.getPriority().equals(a.getPriority())}minPost(){return me.MIN}maxPost(){return new me(ut,new _s("[PRIORITY-POST]",Li))}makePost(l,a){const p=Bs(l);return new me(a,new _s("[PRIORITY-POST]",p))}toString(){return".priority"}},Rs=Math.log(2);class io{constructor(l){this.count=parseInt(Math.log(l+1)/Rs,10),this.current_=this.count-1;const I=(k=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=l+1&I}nextBitIsOne(){const l=!(this.bits_&1<<this.current_);return this.current_--,l}}const $o=function(u,l,a,p){u.sort(l);const I=function(ke,Je){const kt=Je-ke;let Ot,Xt;if(0===kt)return null;if(1===kt)return Ot=u[ke],Xt=a?a(Ot):Ot,new _n(Xt,Ot.node,_n.BLACK,null,null);{const Hn=parseInt(kt/2,10)+ke,cr=I(ke,Hn),Ii=I(Hn+1,Je);return Ot=u[Hn],Xt=a?a(Ot):Ot,new _n(Xt,Ot.node,_n.BLACK,cr,Ii)}},_e=function(ke){let Je=null,kt=null,Ot=u.length;const Xt=function(cr,Ii){const eo=Ot-cr,Vl=Ot;Ot-=cr;const Ul=I(eo+1,Vl),ac=u[eo],Sh=a?a(ac):ac;Hn(new _n(Sh,ac.node,Ii,null,Ul))},Hn=function(cr){Je?(Je.left=cr,Je=cr):(kt=cr,Je=cr)};for(let cr=0;cr<ke.count;++cr){const Ii=ke.nextBitIsOne(),eo=Math.pow(2,ke.count-(cr+1));Ii?Xt(eo,_n.BLACK):(Xt(eo,_n.BLACK),Xt(eo,_n.RED))}return kt}(new io(u.length));return new ir(p||l,_e)};let so;const An={};class Bn{constructor(l,a){this.indexes_=l,this.indexSet_=a}static get Default(){return(0,N.hu)(An&&Fr,"ChildrenNode.ts has not been loaded"),so=so||new Bn({".priority":An},{".priority":Fr}),so}get(l){const a=(0,N.DV)(this.indexes_,l);if(!a)throw new Error("No index defined for "+l);return a instanceof ir?a:null}hasIndex(l){return(0,N.r3)(this.indexSet_,l.toString())}addIndex(l,a){(0,N.hu)(l!==Ft,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const p=[];let I=!1;const k=a.getIterator(me.Wrap);let _e,K=k.getNext();for(;K;)I=I||l.isDefinedOn(K.node),p.push(K),K=k.getNext();_e=I?$o(p,l.getCompare()):An;const ke=l.toString(),Je=Object.assign({},this.indexSet_);Je[ke]=l;const kt=Object.assign({},this.indexes_);return kt[ke]=_e,new Bn(kt,Je)}addToIndexes(l,a){const p=(0,N.UI)(this.indexes_,(I,k)=>{const K=(0,N.DV)(this.indexSet_,k);if((0,N.hu)(K,"Missing index implementation for "+k),I===An){if(K.isDefinedOn(l.node)){const _e=[],ke=a.getIterator(me.Wrap);let Je=ke.getNext();for(;Je;)Je.name!==l.name&&_e.push(Je),Je=ke.getNext();return _e.push(l),$o(_e,K.getCompare())}return An}{const _e=a.get(l.name);let ke=I;return _e&&(ke=ke.remove(new me(l.name,_e))),ke.insert(l,l.node)}});return new Bn(p,this.indexSet_)}removeFromIndexes(l,a){const p=(0,N.UI)(this.indexes_,I=>{if(I===An)return I;{const k=a.get(l.name);return k?I.remove(new me(l.name,k)):I}});return new Bn(p,this.indexSet_)}}let xn,vn=(()=>{class u{constructor(a,p,I){this.children_=a,this.priorityNode_=p,this.indexMap_=I,this.lazyHash_=null,this.priorityNode_&&$i(this.priorityNode_),this.children_.isEmpty()&&(0,N.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return xn||(xn=new u(new ir(zn),null,Bn.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||xn}updatePriority(a){return this.children_.isEmpty()?this:new u(this.children_,a,this.indexMap_)}getImmediateChild(a){if(".priority"===a)return this.getPriority();{const p=this.children_.get(a);return null===p?xn:p}}getChild(a){const p=y(a);return null===p?this:this.getImmediateChild(p).getChild(H(a))}hasChild(a){return null!==this.children_.get(a)}updateImmediateChild(a,p){if((0,N.hu)(p,"We should always be passing snapshot nodes"),".priority"===a)return this.updatePriority(p);{const I=new me(a,p);let k,K;p.isEmpty()?(k=this.children_.remove(a),K=this.indexMap_.removeFromIndexes(I,this.children_)):(k=this.children_.insert(a,p),K=this.indexMap_.addToIndexes(I,this.children_));const _e=k.isEmpty()?xn:this.priorityNode_;return new u(k,_e,K)}}updateChild(a,p){const I=y(a);if(null===I)return p;{(0,N.hu)(".priority"!==y(a)||1===C(a),".priority must be the last token in a path");const k=this.getImmediateChild(I).updateChild(H(a),p);return this.updateImmediateChild(I,k)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(a){if(this.isEmpty())return null;const p={};let I=0,k=0,K=!0;if(this.forEachChild(Fr,(_e,ke)=>{p[_e]=ke.val(a),I++,K&&u.INTEGER_REGEXP_.test(_e)?k=Math.max(k,Number(_e)):K=!1}),!a&&K&&k<2*I){const _e=[];for(const ke in p)_e[ke]=p[ke];return _e}return a&&!this.getPriority().isEmpty()&&(p[".priority"]=this.getPriority().val()),p}hash(){if(null===this.lazyHash_){let a="";this.getPriority().isEmpty()||(a+="priority:"+zr(this.getPriority().val())+":"),this.forEachChild(Fr,(p,I)=>{const k=I.hash();""!==k&&(a+=":"+p+":"+k)}),this.lazyHash_=""===a?"":pt(a)}return this.lazyHash_}getPredecessorChildName(a,p,I){const k=this.resolveIndex_(I);if(k){const K=k.getPredecessorKey(new me(a,p));return K?K.name:null}return this.children_.getPredecessorKey(a)}getFirstChildName(a){const p=this.resolveIndex_(a);if(p){const I=p.minKey();return I&&I.name}return this.children_.minKey()}getFirstChild(a){const p=this.getFirstChildName(a);return p?new me(p,this.children_.get(p)):null}getLastChildName(a){const p=this.resolveIndex_(a);if(p){const I=p.maxKey();return I&&I.name}return this.children_.maxKey()}getLastChild(a){const p=this.getLastChildName(a);return p?new me(p,this.children_.get(p)):null}forEachChild(a,p){const I=this.resolveIndex_(a);return I?I.inorderTraversal(k=>p(k.name,k.node)):this.children_.inorderTraversal(p)}getIterator(a){return this.getIteratorFrom(a.minPost(),a)}getIteratorFrom(a,p){const I=this.resolveIndex_(p);if(I)return I.getIteratorFrom(a,k=>k);{const k=this.children_.getIteratorFrom(a.name,me.Wrap);let K=k.peek();for(;null!=K&&p.compare(K,a)<0;)k.getNext(),K=k.peek();return k}}getReverseIterator(a){return this.getReverseIteratorFrom(a.maxPost(),a)}getReverseIteratorFrom(a,p){const I=this.resolveIndex_(p);if(I)return I.getReverseIteratorFrom(a,k=>k);{const k=this.children_.getReverseIteratorFrom(a.name,me.Wrap);let K=k.peek();for(;null!=K&&p.compare(K,a)>0;)k.getNext(),K=k.peek();return k}}compareTo(a){return this.isEmpty()?a.isEmpty()?0:-1:a.isLeafNode()||a.isEmpty()?1:a===qi?-1:0}withIndex(a){if(a===Ft||this.indexMap_.hasIndex(a))return this;{const p=this.indexMap_.addIndex(a,this.children_);return new u(this.children_,this.priorityNode_,p)}}isIndexed(a){return a===Ft||this.indexMap_.hasIndex(a)}equals(a){if(a===this)return!0;if(a.isLeafNode())return!1;{const p=a;if(this.getPriority().equals(p.getPriority())){if(this.children_.count()===p.children_.count()){const I=this.getIterator(Fr),k=p.getIterator(Fr);let K=I.getNext(),_e=k.getNext();for(;K&&_e;){if(K.name!==_e.name||!K.node.equals(_e.node))return!1;K=I.getNext(),_e=k.getNext()}return null===K&&null===_e}return!1}return!1}}resolveIndex_(a){return a===Ft?null:this.indexMap_.get(a.toString())}}return u.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,u})();const qi=new class extends vn{constructor(){super(new ir(zn),vn.EMPTY_NODE,Bn.Default)}compareTo(l){return l===this?0:1}equals(l){return l===this}getPriority(){return this}getImmediateChild(l){return vn.EMPTY_NODE}isEmpty(){return!1}};function pr(u,l=null){if(null===u)return vn.EMPTY_NODE;if("object"==typeof u&&".priority"in u&&(l=u[".priority"]),(0,N.hu)(null===l||"string"==typeof l||"number"==typeof l||"object"==typeof l&&".sv"in l,"Invalid priority type found: "+typeof l),"object"==typeof u&&".value"in u&&null!==u[".value"]&&(u=u[".value"]),"object"!=typeof u||".sv"in u)return new _s(u,pr(l));if(u instanceof Array){let a=vn.EMPTY_NODE;return Sr(u,(p,I)=>{if((0,N.r3)(u,p)&&"."!==p.substring(0,1)){const k=pr(I);(k.isLeafNode()||!k.isEmpty())&&(a=a.updateImmediateChild(p,k))}}),a.updatePriority(pr(l))}{const a=[];let p=!1;if(Sr(u,(K,_e)=>{if("."!==K.substring(0,1)){const ke=pr(_e);ke.isEmpty()||(p=p||!ke.getPriority().isEmpty(),a.push(new me(K,ke)))}}),0===a.length)return vn.EMPTY_NODE;const k=$o(a,Ln,K=>K.name,zn);if(p){const K=$o(a,Fr.getCompare());return new vn(k,pr(l),new Bn({".priority":K},{".priority":Fr}))}return new vn(k,pr(l),Bn.Default)}}Object.defineProperties(me,{MIN:{value:new me(Se,vn.EMPTY_NODE)},MAX:{value:new me(ut,qi)}}),vt.__EMPTY_NODE=vn.EMPTY_NODE,_s.__childrenNodeConstructor=vn,Dr=qi,Li=qi,function(u){Bs=u}(pr);class Qr extends We{constructor(l){super(),this.indexPath_=l,(0,N.hu)(!Sn(l)&&".priority"!==y(l),"Can't create PathIndex with empty path or .priority key")}extractChild(l){return l.getChild(this.indexPath_)}isDefinedOn(l){return!l.getChild(this.indexPath_).isEmpty()}compare(l,a){const p=this.extractChild(l.node),I=this.extractChild(a.node),k=p.compareTo(I);return 0===k?St(l.name,a.name):k}makePost(l,a){const p=pr(l),I=vn.EMPTY_NODE.updateChild(this.indexPath_,p);return new me(a,I)}maxPost(){const l=vn.EMPTY_NODE.updateChild(this.indexPath_,qi);return new me(ut,l)}toString(){return hn(this.indexPath_,0).join("/")}}const ks=new class extends We{compare(l,a){const p=l.node.compareTo(a.node);return 0===p?St(l.name,a.name):p}isDefinedOn(l){return!0}indexedValueChanged(l,a){return!l.equals(a)}minPost(){return me.MIN}maxPost(){return me.MAX}makePost(l,a){const p=pr(l);return new me(a,p)}toString(){return".value"}},Ai="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",oa=function(){let u=0;const l=[];return function(a){const p=a===u;let I;u=a;const k=new Array(8);for(I=7;I>=0;I--)k[I]=Ai.charAt(a%64),a=Math.floor(a/64);(0,N.hu)(0===a,"Cannot push at time == 0");let K=k.join("");if(p){for(I=11;I>=0&&63===l[I];I--)l[I]=0;l[I]++}else for(I=0;I<12;I++)l[I]=Math.floor(64*Math.random());for(I=0;I<12;I++)K+=Ai.charAt(l[I]);return(0,N.hu)(20===K.length,"nextPushId: Length should be 20."),K}}(),dl=function(u){if(u===""+yn)return"-";const l=Kn(u);if(null!=l)return""+(l+1);const a=new Array(u.length);for(let K=0;K<a.length;K++)a[K]=u.charAt(K);if(a.length<786)return a.push("-"),a.join("");let p=a.length-1;for(;p>=0&&"z"===a[p];)p--;if(-1===p)return ut;const k=Ai.charAt(Ai.indexOf(a[p])+1);return a[p]=k,a.slice(0,p+1).join("")},Jr=function(u){if(u===""+pi)return Se;const l=Kn(u);if(null!=l)return""+(l-1);const a=new Array(u.length);for(let p=0;p<a.length;p++)a[p]=u.charAt(p);return"-"===a[a.length-1]?1===a.length?""+yn:(delete a[a.length-1],a.join("")):(a[a.length-1]=Ai.charAt(Ai.indexOf(a[a.length-1])-1),a.join("")+"z".repeat(786-a.length))};function oo(u){return{type:"value",snapshotNode:u}}function Xo(u,l){return{type:"child_added",snapshotNode:l,childName:u}}function Ra(u,l){return{type:"child_removed",snapshotNode:l,childName:u}}function Es(u,l,a){return{type:"child_changed",snapshotNode:l,childName:u,oldSnap:a}}class Lo{constructor(l){this.index_=l}updateChild(l,a,p,I,k,K){(0,N.hu)(l.isIndexed(this.index_),"A node must be indexed if only a child is updated");const _e=l.getImmediateChild(a);return _e.getChild(I).equals(p.getChild(I))&&_e.isEmpty()===p.isEmpty()||(null!=K&&(p.isEmpty()?l.hasChild(a)?K.trackChildChange(Ra(a,_e)):(0,N.hu)(l.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):_e.isEmpty()?K.trackChildChange(Xo(a,p)):K.trackChildChange(Es(a,p,_e))),l.isLeafNode()&&p.isEmpty())?l:l.updateImmediateChild(a,p).withIndex(this.index_)}updateFullNode(l,a,p){return null!=p&&(l.isLeafNode()||l.forEachChild(Fr,(I,k)=>{a.hasChild(I)||p.trackChildChange(Ra(I,k))}),a.isLeafNode()||a.forEachChild(Fr,(I,k)=>{if(l.hasChild(I)){const K=l.getImmediateChild(I);K.equals(k)||p.trackChildChange(Es(I,k,K))}else p.trackChildChange(Xo(I,k))})),a.withIndex(this.index_)}updatePriority(l,a){return l.isEmpty()?vn.EMPTY_NODE:l.updatePriority(a)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class rs{constructor(l){this.indexedFilter_=new Lo(l.getIndex()),this.index_=l.getIndex(),this.startPost_=rs.getStartPost_(l),this.endPost_=rs.getEndPost_(l)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(l){return this.index_.compare(this.getStartPost(),l)<=0&&this.index_.compare(l,this.getEndPost())<=0}updateChild(l,a,p,I,k,K){return this.matches(new me(a,p))||(p=vn.EMPTY_NODE),this.indexedFilter_.updateChild(l,a,p,I,k,K)}updateFullNode(l,a,p){a.isLeafNode()&&(a=vn.EMPTY_NODE);let I=a.withIndex(this.index_);I=I.updatePriority(vn.EMPTY_NODE);const k=this;return a.forEachChild(Fr,(K,_e)=>{k.matches(new me(K,_e))||(I=I.updateImmediateChild(K,vn.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(l,I,p)}updatePriority(l,a){return l}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(l){if(l.hasStart()){const a=l.getIndexStartName();return l.getIndex().makePost(l.getIndexStartValue(),a)}return l.getIndex().minPost()}static getEndPost_(l){if(l.hasEnd()){const a=l.getIndexEndName();return l.getIndex().makePost(l.getIndexEndValue(),a)}return l.getIndex().maxPost()}}class qc{constructor(l){this.rangedFilter_=new rs(l),this.index_=l.getIndex(),this.limit_=l.getLimit(),this.reverse_=!l.isViewFromLeft()}updateChild(l,a,p,I,k,K){return this.rangedFilter_.matches(new me(a,p))||(p=vn.EMPTY_NODE),l.getImmediateChild(a).equals(p)?l:l.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(l,a,p,I,k,K):this.fullLimitUpdateChild_(l,a,p,k,K)}updateFullNode(l,a,p){let I;if(a.isLeafNode()||a.isEmpty())I=vn.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<a.numChildren()&&a.isIndexed(this.index_)){let k;I=vn.EMPTY_NODE.withIndex(this.index_),k=this.reverse_?a.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):a.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let K=0;for(;k.hasNext()&&K<this.limit_;){const _e=k.getNext();let ke;if(ke=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),_e)<=0:this.index_.compare(_e,this.rangedFilter_.getEndPost())<=0,!ke)break;I=I.updateImmediateChild(_e.name,_e.node),K++}}else{let k,K,_e,ke;if(I=a.withIndex(this.index_),I=I.updatePriority(vn.EMPTY_NODE),this.reverse_){ke=I.getReverseIterator(this.index_),k=this.rangedFilter_.getEndPost(),K=this.rangedFilter_.getStartPost();const Ot=this.index_.getCompare();_e=(Xt,Hn)=>Ot(Hn,Xt)}else ke=I.getIterator(this.index_),k=this.rangedFilter_.getStartPost(),K=this.rangedFilter_.getEndPost(),_e=this.index_.getCompare();let Je=0,kt=!1;for(;ke.hasNext();){const Ot=ke.getNext();!kt&&_e(k,Ot)<=0&&(kt=!0),kt&&Je<this.limit_&&_e(Ot,K)<=0?Je++:I=I.updateImmediateChild(Ot.name,vn.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(l,I,p)}updatePriority(l,a){return l}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(l,a,p,I,k){let K;if(this.reverse_){const Ot=this.index_.getCompare();K=(Xt,Hn)=>Ot(Hn,Xt)}else K=this.index_.getCompare();const _e=l;(0,N.hu)(_e.numChildren()===this.limit_,"");const ke=new me(a,p),Je=this.reverse_?_e.getFirstChild(this.index_):_e.getLastChild(this.index_),kt=this.rangedFilter_.matches(ke);if(_e.hasChild(a)){const Ot=_e.getImmediateChild(a);let Xt=I.getChildAfterChild(this.index_,Je,this.reverse_);for(;null!=Xt&&(Xt.name===a||_e.hasChild(Xt.name));)Xt=I.getChildAfterChild(this.index_,Xt,this.reverse_);const Hn=null==Xt?1:K(Xt,ke);if(kt&&!p.isEmpty()&&Hn>=0)return null!=k&&k.trackChildChange(Es(a,p,Ot)),_e.updateImmediateChild(a,p);{null!=k&&k.trackChildChange(Ra(a,Ot));const Ii=_e.updateImmediateChild(a,vn.EMPTY_NODE);return null!=Xt&&this.rangedFilter_.matches(Xt)?(null!=k&&k.trackChildChange(Xo(Xt.name,Xt.node)),Ii.updateImmediateChild(Xt.name,Xt.node)):Ii}}return p.isEmpty()?l:kt&&K(Je,ke)>=0?(null!=k&&(k.trackChildChange(Ra(Je.name,Je.node)),k.trackChildChange(Xo(a,p))),_e.updateImmediateChild(a,p).updateImmediateChild(Je.name,vn.EMPTY_NODE)):l}}class hl{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Fr}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,N.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,N.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Se}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,N.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,N.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ut}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,N.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Fr}copy(){const l=new hl;return l.limitSet_=this.limitSet_,l.limit_=this.limit_,l.startSet_=this.startSet_,l.indexStartValue_=this.indexStartValue_,l.startNameSet_=this.startNameSet_,l.indexStartName_=this.indexStartName_,l.endSet_=this.endSet_,l.indexEndValue_=this.indexEndValue_,l.endNameSet_=this.endNameSet_,l.indexEndName_=this.indexEndName_,l.index_=this.index_,l.viewFrom_=this.viewFrom_,l}}function ma(u,l,a){const p=u.copy();return p.startSet_=!0,void 0===l&&(l=null),p.indexStartValue_=l,null!=a?(p.startNameSet_=!0,p.indexStartName_=a):(p.startNameSet_=!1,p.indexStartName_=""),p}function Hl(u,l,a){const p=u.copy();return p.endSet_=!0,void 0===l&&(l=null),p.indexEndValue_=l,void 0!==a?(p.endNameSet_=!0,p.indexEndName_=a):(p.endNameSet_=!1,p.indexEndName_=""),p}function Gl(u,l){const a=u.copy();return a.index_=l,a}function na(u){const l={};if(u.isDefault())return l;let a;return u.index_===Fr?a="$priority":u.index_===ks?a="$value":u.index_===Ft?a="$key":((0,N.hu)(u.index_ instanceof Qr,"Unrecognized index type!"),a=u.index_.toString()),l.orderBy=(0,N.Pz)(a),u.startSet_&&(l.startAt=(0,N.Pz)(u.indexStartValue_),u.startNameSet_&&(l.startAt+=","+(0,N.Pz)(u.indexStartName_))),u.endSet_&&(l.endAt=(0,N.Pz)(u.indexEndValue_),u.endNameSet_&&(l.endAt+=","+(0,N.Pz)(u.indexEndName_))),u.limitSet_&&(u.isViewFromLeft()?l.limitToFirst=u.limit_:l.limitToLast=u.limit_),l}function Pa(u){const l={};if(u.startSet_&&(l.sp=u.indexStartValue_,u.startNameSet_&&(l.sn=u.indexStartName_)),u.endSet_&&(l.ep=u.indexEndValue_,u.endNameSet_&&(l.en=u.indexEndName_)),u.limitSet_){l.l=u.limit_;let a=u.viewFrom_;""===a&&(a=u.isViewFromLeft()?"l":"r"),l.vf=a}return u.index_!==Fr&&(l.i=u.index_.toString()),l}class Wo extends Ls{constructor(l,a,p,I){super(),this.repoInfo_=l,this.onDataUpdate_=a,this.authTokenProvider_=p,this.appCheckTokenProvider_=I,this.log_=ve("p:rest:"),this.listens_={}}reportStats(l){throw new Error("Method not implemented.")}static getListenId_(l,a){return void 0!==a?"tag$"+a:((0,N.hu)(l._queryParams.isDefault(),"should have a tag if it's not a default query."),l._path.toString())}listen(l,a,p,I){const k=l._path.toString();this.log_("Listen called for "+k+" "+l._queryIdentifier);const K=Wo.getListenId_(l,p),_e={};this.listens_[K]=_e;const ke=na(l._queryParams);this.restRequest_(k+".json",ke,(Je,kt)=>{let Ot=kt;if(404===Je&&(Ot=null,Je=null),null===Je&&this.onDataUpdate_(k,Ot,!1,p),(0,N.DV)(this.listens_,K)===_e){let Xt;Xt=Je?401===Je?"permission_denied":"rest_error:"+Je:"ok",I(Xt,null)}})}unlisten(l,a){const p=Wo.getListenId_(l,a);delete this.listens_[p]}get(l){const a=na(l._queryParams),p=l._path.toString(),I=new N.BH;return this.restRequest_(p+".json",a,(k,K)=>{let _e=K;404===k&&(_e=null,k=null),null===k?(this.onDataUpdate_(p,_e,!1,null),I.resolve(_e)):I.reject(new Error(_e))}),I.promise}refreshAuthToken(l){}restRequest_(l,a={},p){return a.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([I,k])=>{I&&I.accessToken&&(a.auth=I.accessToken),k&&k.token&&(a.ac=k.token);const K=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+l+"?ns="+this.repoInfo_.namespace+(0,N.xO)(a);this.log_("Sending REST request for "+K);const _e=new XMLHttpRequest;_e.onreadystatechange=()=>{if(p&&4===_e.readyState){this.log_("REST Response for "+K+" received. status:",_e.status,"response:",_e.responseText);let ke=null;if(_e.status>=200&&_e.status<300){try{ke=(0,N.cI)(_e.responseText)}catch(Je){Ke("Failed to parse JSON response for "+K+": "+_e.responseText)}p(null,ke)}else 401!==_e.status&&404!==_e.status&&Ke("Got unsuccessful REST response for "+K+" Status: "+_e.status),p(_e.status);p=null}},_e.open("GET",K,!0),_e.send()})}}class Bi{constructor(){this.rootNode_=vn.EMPTY_NODE}getNode(l){return this.rootNode_.getChild(l)}updateSnapshot(l,a){this.rootNode_=this.rootNode_.updateChild(l,a)}}function F(){return{value:null,children:new Map}}function R(u,l,a){if(Sn(l))u.value=a,u.children.clear();else if(null!==u.value)u.value=u.value.updateChild(l,a);else{const p=y(l);u.children.has(p)||u.children.set(p,F()),R(u.children.get(p),l=H(l),a)}}function M(u,l){if(Sn(l))return u.value=null,u.children.clear(),!0;if(null!==u.value){if(u.value.isLeafNode())return!1;{const a=u.value;return u.value=null,a.forEachChild(Fr,(p,I)=>{R(u,new G(p),I)}),M(u,l)}}if(u.children.size>0){const a=y(l);return l=H(l),u.children.has(a)&&M(u.children.get(a),l)&&u.children.delete(a),0===u.children.size}return!0}function z(u,l,a){null!==u.value?a(l,u.value):function(u,l){u.children.forEach((a,p)=>{l(p,a)})}(u,(p,I)=>{z(I,new G(l.toString()+"/"+p),a)})}class pe{constructor(l){this.collection_=l,this.last_=null}get(){const l=this.collection_.get(),a=Object.assign({},l);return this.last_&&Sr(this.last_,(p,I)=>{a[p]=a[p]-I}),this.last_=l,a}}class Jt{constructor(l,a){this.server_=a,this.statsToReport_={},this.statsListener_=new pe(l);const p=1e4+2e4*Math.random();ji(this.reportStats_.bind(this),Math.floor(p))}reportStats_(){const l=this.statsListener_.get(),a={};let p=!1;Sr(l,(I,k)=>{k>0&&(0,N.r3)(this.statsToReport_,I)&&(a[I]=k,p=!0)}),p&&this.server_.reportStats(a),ji(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var sr=(()=>(function(u){u[u.OVERWRITE=0]="OVERWRITE",u[u.MERGE=1]="MERGE",u[u.ACK_USER_WRITE=2]="ACK_USER_WRITE",u[u.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(sr||(sr={})),sr))();function Bt(u){return{fromUser:!1,fromServer:!0,queryId:u,tagged:!0}}class Xr{constructor(l,a,p){this.path=l,this.affectedTree=a,this.revert=p,this.type=sr.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(l){if(Sn(this.path)){if(null!=this.affectedTree.value)return(0,N.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const a=this.affectedTree.subtree(new G(l));return new Xr(S(),a,this.revert)}}return(0,N.hu)(y(this.path)===l,"operationForChild called for unrelated child."),new Xr(H(this.path),this.affectedTree,this.revert)}}class ao{constructor(l,a){this.source=l,this.path=a,this.type=sr.LISTEN_COMPLETE}operationForChild(l){return Sn(this.path)?new ao(this.source,S()):new ao(this.source,H(this.path))}}class ei{constructor(l,a,p){this.source=l,this.path=a,this.snap=p,this.type=sr.OVERWRITE}operationForChild(l){return Sn(this.path)?new ei(this.source,S(),this.snap.getImmediateChild(l)):new ei(this.source,H(this.path),this.snap)}}class ds{constructor(l,a,p){this.source=l,this.path=a,this.children=p,this.type=sr.MERGE}operationForChild(l){if(Sn(this.path)){const a=this.children.subtree(new G(l));return a.isEmpty()?null:a.value?new ei(this.source,S(),a.value):new ds(this.source,S(),a)}return(0,N.hu)(y(this.path)===l,"Can't get a merge for a child not on the path of the operation"),new ds(this.source,H(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class zo{constructor(l,a,p){this.node_=l,this.fullyInitialized_=a,this.filtered_=p}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(l){if(Sn(l))return this.isFullyInitialized()&&!this.filtered_;const a=y(l);return this.isCompleteForChild(a)}isCompleteForChild(l){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(l)}getNode(){return this.node_}}class lo{constructor(l){this.query_=l,this.index_=this.query_._queryParams.getIndex()}}function ti(u,l,a,p,I,k){const K=p.filter(_e=>_e.type===a);K.sort((_e,ke)=>function(u,l,a){if(null==l.childName||null==a.childName)throw(0,N.g5)("Should only compare child_ events.");const p=new me(l.childName,l.snapshotNode),I=new me(a.childName,a.snapshotNode);return u.index_.compare(p,I)}(u,_e,ke)),K.forEach(_e=>{const ke=function(u,l,a){return"value"===l.type||"child_removed"===l.type||(l.prevName=a.getPredecessorChildName(l.childName,l.snapshotNode,u.index_)),l}(u,_e,k);I.forEach(Je=>{Je.respondsTo(_e.type)&&l.push(Je.createEvent(ke,u.query_))})})}function bs(u,l){return{eventCache:u,serverCache:l}}function Ko(u,l,a,p){return bs(new zo(l,a,p),u.serverCache)}function aa(u,l,a,p){return bs(u.eventCache,new zo(l,a,p))}function Tr(u){return u.eventCache.isFullyInitialized()?u.eventCache.getNode():null}function co(u){return u.serverCache.isFullyInitialized()?u.serverCache.getNode():null}let fl;class $n{constructor(l,a=(()=>(fl||(fl=new ir(Dn)),fl))()){this.value=l,this.children=a}static fromObject(l){let a=new $n(null);return Sr(l,(p,I)=>{a=a.set(new G(p),I)}),a}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(l,a){if(null!=this.value&&a(this.value))return{path:S(),value:this.value};if(Sn(l))return null;{const p=y(l),I=this.children.get(p);if(null!==I){const k=I.findRootMostMatchingPathAndValue(H(l),a);return null!=k?{path:Gn(new G(p),k.path),value:k.value}:null}return null}}findRootMostValueAndPath(l){return this.findRootMostMatchingPathAndValue(l,()=>!0)}subtree(l){if(Sn(l))return this;{const a=y(l),p=this.children.get(a);return null!==p?p.subtree(H(l)):new $n(null)}}set(l,a){if(Sn(l))return new $n(a,this.children);{const p=y(l),k=(this.children.get(p)||new $n(null)).set(H(l),a),K=this.children.insert(p,k);return new $n(this.value,K)}}remove(l){if(Sn(l))return this.children.isEmpty()?new $n(null):new $n(null,this.children);{const a=y(l),p=this.children.get(a);if(p){const I=p.remove(H(l));let k;return k=I.isEmpty()?this.children.remove(a):this.children.insert(a,I),null===this.value&&k.isEmpty()?new $n(null):new $n(this.value,k)}return this}}get(l){if(Sn(l))return this.value;{const a=y(l),p=this.children.get(a);return p?p.get(H(l)):null}}setTree(l,a){if(Sn(l))return a;{const p=y(l),k=(this.children.get(p)||new $n(null)).setTree(H(l),a);let K;return K=k.isEmpty()?this.children.remove(p):this.children.insert(p,k),new $n(this.value,K)}}fold(l){return this.fold_(S(),l)}fold_(l,a){const p={};return this.children.inorderTraversal((I,k)=>{p[I]=k.fold_(Gn(l,I),a)}),a(l,this.value,p)}findOnPath(l,a){return this.findOnPath_(l,S(),a)}findOnPath_(l,a,p){const I=!!this.value&&p(a,this.value);if(I)return I;if(Sn(l))return null;{const k=y(l),K=this.children.get(k);return K?K.findOnPath_(H(l),Gn(a,k),p):null}}foreachOnPath(l,a){return this.foreachOnPath_(l,S(),a)}foreachOnPath_(l,a,p){if(Sn(l))return this;{this.value&&p(a,this.value);const I=y(l),k=this.children.get(I);return k?k.foreachOnPath_(H(l),Gn(a,I),p):new $n(null)}}foreach(l){this.foreach_(S(),l)}foreach_(l,a){this.children.inorderTraversal((p,I)=>{I.foreach_(Gn(l,p),a)}),this.value&&a(l,this.value)}foreachChild(l){this.children.inorderTraversal((a,p)=>{p.value&&l(a,p.value)})}}class uo{constructor(l){this.writeTree_=l}static empty(){return new uo(new $n(null))}}function jr(u,l,a){if(Sn(l))return new uo(new $n(a));{const p=u.writeTree_.findRootMostValueAndPath(l);if(null!=p){const I=p.path;let k=p.value;const K=rr(I,l);return k=k.updateChild(K,a),new uo(u.writeTree_.set(I,k))}{const I=new $n(a),k=u.writeTree_.setTree(l,I);return new uo(k)}}}function pl(u,l,a){let p=u;return Sr(a,(I,k)=>{p=jr(p,Gn(l,I),k)}),p}function gl(u,l){if(Sn(l))return uo.empty();{const a=u.writeTree_.setTree(l,new $n(null));return new uo(a)}}function Kr(u,l){return null!=qa(u,l)}function qa(u,l){const a=u.writeTree_.findRootMostValueAndPath(l);return null!=a?u.writeTree_.get(a.path).getChild(rr(a.path,l)):null}function ho(u){const l=[],a=u.writeTree_.value;return null!=a?a.isLeafNode()||a.forEachChild(Fr,(p,I)=>{l.push(new me(p,I))}):u.writeTree_.children.inorderTraversal((p,I)=>{null!=I.value&&l.push(new me(p,I.value))}),l}function So(u,l){if(Sn(l))return u;{const a=qa(u,l);return new uo(null!=a?new $n(a):u.writeTree_.subtree(l))}}function _c(u){return u.writeTree_.isEmpty()}function hi(u,l){return fd(S(),u.writeTree_,l)}function fd(u,l,a){if(null!=l.value)return a.updateChild(u,l.value);{let p=null;return l.children.inorderTraversal((I,k)=>{".priority"===I?((0,N.hu)(null!==k.value,"Priority writes must always be leaf nodes"),p=k.value):a=fd(Gn(u,I),k,a)}),!a.getChild(u).isEmpty()&&null!==p&&(a=a.updateChild(Gn(u,".priority"),p)),a}}function fi(u,l){return _l(l,u)}function Us(u,l){if(u.snap)return xr(u.path,l);for(const a in u.children)if(u.children.hasOwnProperty(a)&&xr(Gn(u.path,a),l))return!0;return!1}function ka(u){return u.visible}function Na(u,l,a){let p=uo.empty();for(let I=0;I<u.length;++I){const k=u[I];if(l(k)){const K=k.path;let _e;if(k.snap)xr(a,K)?(_e=rr(a,K),p=jr(p,_e,k.snap)):xr(K,a)&&(_e=rr(K,a),p=jr(p,S(),k.snap.getChild(_e)));else{if(!k.children)throw(0,N.g5)("WriteRecord should have .snap or .children");if(xr(a,K))_e=rr(a,K),p=pl(p,_e,k.children);else if(xr(K,a))if(_e=rr(K,a),Sn(_e))p=pl(p,S(),k.children);else{const ke=(0,N.DV)(k.children,y(_e));if(ke){const Je=ke.getChild(H(_e));p=jr(p,S(),Je)}}}}}return p}function Vn(u,l,a,p,I){if(p||I){const k=So(u.visibleWrites,l);return!I&&_c(k)?a:I||null!=a||Kr(k,S())?hi(Na(u.allWrites,function(Je){return(Je.visible||I)&&(!p||!~p.indexOf(Je.writeId))&&(xr(Je.path,l)||xr(l,Je.path))},l),a||vn.EMPTY_NODE):null}{const k=qa(u.visibleWrites,l);if(null!=k)return k;{const K=So(u.visibleWrites,l);return _c(K)?a:null!=a||Kr(K,S())?hi(K,a||vn.EMPTY_NODE):null}}}function js(u,l,a,p){return Vn(u.writeTree,u.treePath,l,a,p)}function Fa(u,l){return function(u,l,a){let p=vn.EMPTY_NODE;const I=qa(u.visibleWrites,l);if(I)return I.isLeafNode()||I.forEachChild(Fr,(k,K)=>{p=p.updateImmediateChild(k,K)}),p;if(a){const k=So(u.visibleWrites,l);return a.forEachChild(Fr,(K,_e)=>{const ke=hi(So(k,new G(K)),_e);p=p.updateImmediateChild(K,ke)}),ho(k).forEach(K=>{p=p.updateImmediateChild(K.name,K.node)}),p}return ho(So(u.visibleWrites,l)).forEach(K=>{p=p.updateImmediateChild(K.name,K.node)}),p}(u.writeTree,u.treePath,l)}function Ao(u,l,a,p){return function(u,l,a,p,I){(0,N.hu)(p||I,"Either existingEventSnap or existingServerSnap must exist");const k=Gn(l,a);if(Kr(u.visibleWrites,k))return null;{const K=So(u.visibleWrites,k);return _c(K)?I.getChild(a):hi(K,I.getChild(a))}}(u.writeTree,u.treePath,l,a,p)}function ml(u,l){return function(u,l){return qa(u.visibleWrites,l)}(u.writeTree,Gn(u.treePath,l))}function Wl(u,l,a){return function(u,l,a,p){const I=Gn(l,a),k=qa(u.visibleWrites,I);return null!=k?k:p.isCompleteForChild(a)?hi(So(u.visibleWrites,I),p.getNode().getImmediateChild(a)):null}(u.writeTree,u.treePath,l,a)}function ra(u,l){return _l(Gn(u.treePath,l),u.writeTree)}function _l(u,l){return{treePath:u,writeTree:l}}class is{constructor(){this.changeMap=new Map}trackChildChange(l){const a=l.type,p=l.childName;(0,N.hu)("child_added"===a||"child_changed"===a||"child_removed"===a,"Only child changes supported for tracking"),(0,N.hu)(".priority"!==p,"Only non-priority child changes can be tracked.");const I=this.changeMap.get(p);if(I){const k=I.type;if("child_added"===a&&"child_removed"===k)this.changeMap.set(p,Es(p,l.snapshotNode,I.snapshotNode));else if("child_removed"===a&&"child_added"===k)this.changeMap.delete(p);else if("child_removed"===a&&"child_changed"===k)this.changeMap.set(p,Ra(p,I.oldSnap));else if("child_changed"===a&&"child_added"===k)this.changeMap.set(p,Xo(p,l.snapshotNode));else{if("child_changed"!==a||"child_changed"!==k)throw(0,N.g5)("Illegal combination of changes: "+l+" occurred after "+I);this.changeMap.set(p,Es(p,l.snapshotNode,I.oldSnap))}}else this.changeMap.set(p,l)}getChanges(){return Array.from(this.changeMap.values())}}const Vi=new class{getCompleteChild(l){return null}getChildAfterChild(l,a,p){return null}};class La{constructor(l,a,p=null){this.writes_=l,this.viewCache_=a,this.optCompleteServerCache_=p}getCompleteChild(l){const a=this.viewCache_.eventCache;if(a.isCompleteForChild(l))return a.getNode().getImmediateChild(l);{const p=null!=this.optCompleteServerCache_?new zo(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Wl(this.writes_,l,p)}}getChildAfterChild(l,a,p){const I=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:co(this.viewCache_),k=function(u,l,a,p,I,k){return function(u,l,a,p,I,k,K){let _e;const ke=So(u.visibleWrites,l),Je=qa(ke,S());if(null!=Je)_e=Je;else{if(null==a)return[];_e=hi(ke,a)}if(_e=_e.withIndex(K),_e.isEmpty()||_e.isLeafNode())return[];{const kt=[],Ot=K.getCompare(),Xt=k?_e.getReverseIteratorFrom(p,K):_e.getIteratorFrom(p,K);let Hn=Xt.getNext();for(;Hn&&kt.length<I;)0!==Ot(Hn,p)&&kt.push(Hn),Hn=Xt.getNext();return kt}}(u.writeTree,u.treePath,l,a,p,I,k)}(this.writes_,I,a,1,p,l);return 0===k.length?null:k[0]}}function Z(u,l,a,p,I,k){const K=l.eventCache;if(null!=ml(p,a))return l;{let _e,ke;if(Sn(a))if((0,N.hu)(l.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),l.serverCache.isFiltered()){const Je=co(l),Ot=Fa(p,Je instanceof vn?Je:vn.EMPTY_NODE);_e=u.filter.updateFullNode(l.eventCache.getNode(),Ot,k)}else{const Je=js(p,co(l));_e=u.filter.updateFullNode(l.eventCache.getNode(),Je,k)}else{const Je=y(a);if(".priority"===Je){(0,N.hu)(1===C(a),"Can't have a priority with additional path components");const kt=K.getNode();ke=l.serverCache.getNode();const Ot=Ao(p,a,kt,ke);_e=null!=Ot?u.filter.updatePriority(kt,Ot):K.getNode()}else{const kt=H(a);let Ot;if(K.isCompleteForChild(Je)){ke=l.serverCache.getNode();const Xt=Ao(p,a,K.getNode(),ke);Ot=null!=Xt?K.getNode().getImmediateChild(Je).updateChild(kt,Xt):K.getNode().getImmediateChild(Je)}else Ot=Wl(p,Je,l.serverCache);_e=null!=Ot?u.filter.updateChild(K.getNode(),Je,Ot,kt,I,k):K.getNode()}}return Ko(l,_e,K.isFullyInitialized()||Sn(a),u.filter.filtersNodes())}}function ge(u,l,a,p,I,k,K,_e){const ke=l.serverCache;let Je;const kt=K?u.filter:u.filter.getIndexedFilter();if(Sn(a))Je=kt.updateFullNode(ke.getNode(),p,null);else if(kt.filtersNodes()&&!ke.isFiltered()){const Hn=ke.getNode().updateChild(a,p);Je=kt.updateFullNode(ke.getNode(),Hn,null)}else{const Hn=y(a);if(!ke.isCompleteForPath(a)&&C(a)>1)return l;const cr=H(a),eo=ke.getNode().getImmediateChild(Hn).updateChild(cr,p);Je=".priority"===Hn?kt.updatePriority(ke.getNode(),eo):kt.updateChild(ke.getNode(),Hn,eo,cr,Vi,null)}const Ot=aa(l,Je,ke.isFullyInitialized()||Sn(a),kt.filtersNodes());return Z(u,Ot,a,I,new La(I,Ot,k),_e)}function Ge(u,l,a,p,I,k,K){const _e=l.eventCache;let ke,Je;const kt=new La(I,l,k);if(Sn(a))Je=u.filter.updateFullNode(l.eventCache.getNode(),p,K),ke=Ko(l,Je,!0,u.filter.filtersNodes());else{const Ot=y(a);if(".priority"===Ot)Je=u.filter.updatePriority(l.eventCache.getNode(),p),ke=Ko(l,Je,_e.isFullyInitialized(),_e.isFiltered());else{const Xt=H(a),Hn=_e.getNode().getImmediateChild(Ot);let cr;if(Sn(Xt))cr=p;else{const Ii=kt.getCompleteChild(Ot);cr=null!=Ii?".priority"===je(Xt)&&Ii.getChild(Pn(Xt)).isEmpty()?Ii:Ii.updateChild(Xt,p):vn.EMPTY_NODE}ke=Hn.equals(cr)?l:Ko(l,u.filter.updateChild(_e.getNode(),Ot,cr,Xt,kt,K),_e.isFullyInitialized(),u.filter.filtersNodes())}}return ke}function _t(u,l){return u.eventCache.isCompleteForChild(l)}function nn(u,l,a){return a.foreach((p,I)=>{l=l.updateChild(p,I)}),l}function On(u,l,a,p,I,k,K,_e){if(l.serverCache.getNode().isEmpty()&&!l.serverCache.isFullyInitialized())return l;let Je,ke=l;Je=Sn(a)?p:new $n(null).setTree(a,p);const kt=l.serverCache.getNode();return Je.children.inorderTraversal((Ot,Xt)=>{if(kt.hasChild(Ot)){const cr=nn(0,l.serverCache.getNode().getImmediateChild(Ot),Xt);ke=ge(u,ke,new G(Ot),cr,I,k,K,_e)}}),Je.children.inorderTraversal((Ot,Xt)=>{const Hn=!l.serverCache.isCompleteForChild(Ot)&&void 0===Xt.value;if(!kt.hasChild(Ot)&&!Hn){const Ii=nn(0,l.serverCache.getNode().getImmediateChild(Ot),Xt);ke=ge(u,ke,new G(Ot),Ii,I,k,K,_e)}}),ke}class fo{constructor(l,a){this.query_=l,this.eventRegistrations_=[];const p=this.query_._queryParams,I=new Lo(p.getIndex()),k=function(u){return u.loadsAllData()?new Lo(u.getIndex()):u.hasLimit()?new qc(u):new rs(u)}(p);this.processor_=function(u){return{filter:u}}(k);const K=a.serverCache,_e=a.eventCache,ke=I.updateFullNode(vn.EMPTY_NODE,K.getNode(),null),Je=k.updateFullNode(vn.EMPTY_NODE,_e.getNode(),null),kt=new zo(ke,K.isFullyInitialized(),I.filtersNodes()),Ot=new zo(Je,_e.isFullyInitialized(),k.filtersNodes());this.viewCache_=bs(Ot,kt),this.eventGenerator_=new lo(this.query_)}get query(){return this.query_}}function Bo(u,l){const a=co(u.viewCache_);return a&&(u.query._queryParams.loadsAllData()||!Sn(l)&&!a.getImmediateChild(y(l)).isEmpty())?a.getChild(l):null}function vl(u){return 0===u.eventRegistrations_.length}function ia(u,l,a){const p=[];if(a){(0,N.hu)(null==l,"A cancel should cancel all event registrations.");const I=u.query._path;u.eventRegistrations_.forEach(k=>{const K=k.createCancelEvent(a,I);K&&p.push(K)})}if(l){let I=[];for(let k=0;k<u.eventRegistrations_.length;++k){const K=u.eventRegistrations_[k];if(K.matches(l)){if(l.hasAnyCallback()){I=I.concat(u.eventRegistrations_.slice(k+1));break}}else I.push(K)}u.eventRegistrations_=I}else u.eventRegistrations_=[];return p}function Ns(u,l,a,p){l.type===sr.MERGE&&null!==l.source.queryId&&((0,N.hu)(co(u.viewCache_),"We should always have a full cache before handling merges"),(0,N.hu)(Tr(u.viewCache_),"Missing event cache, even though we have a server cache"));const I=u.viewCache_,k=function(u,l,a,p,I){const k=new is;let K,_e;if(a.type===sr.OVERWRITE){const Je=a;Je.source.fromUser?K=Ge(u,l,Je.path,Je.snap,p,I,k):((0,N.hu)(Je.source.fromServer,"Unknown source."),_e=Je.source.tagged||l.serverCache.isFiltered()&&!Sn(Je.path),K=ge(u,l,Je.path,Je.snap,p,I,_e,k))}else if(a.type===sr.MERGE){const Je=a;Je.source.fromUser?K=function(u,l,a,p,I,k,K){let _e=l;return p.foreach((ke,Je)=>{const kt=Gn(a,ke);_t(l,y(kt))&&(_e=Ge(u,_e,kt,Je,I,k,K))}),p.foreach((ke,Je)=>{const kt=Gn(a,ke);_t(l,y(kt))||(_e=Ge(u,_e,kt,Je,I,k,K))}),_e}(u,l,Je.path,Je.children,p,I,k):((0,N.hu)(Je.source.fromServer,"Unknown source."),_e=Je.source.tagged||l.serverCache.isFiltered(),K=On(u,l,Je.path,Je.children,p,I,_e,k))}else if(a.type===sr.ACK_USER_WRITE){const Je=a;K=Je.revert?function(u,l,a,p,I,k){let K;if(null!=ml(p,a))return l;{const _e=new La(p,l,I),ke=l.eventCache.getNode();let Je;if(Sn(a)||".priority"===y(a)){let kt;if(l.serverCache.isFullyInitialized())kt=js(p,co(l));else{const Ot=l.serverCache.getNode();(0,N.hu)(Ot instanceof vn,"serverChildren would be complete if leaf node"),kt=Fa(p,Ot)}kt=kt,Je=u.filter.updateFullNode(ke,kt,k)}else{const kt=y(a);let Ot=Wl(p,kt,l.serverCache);null==Ot&&l.serverCache.isCompleteForChild(kt)&&(Ot=ke.getImmediateChild(kt)),Je=null!=Ot?u.filter.updateChild(ke,kt,Ot,H(a),_e,k):l.eventCache.getNode().hasChild(kt)?u.filter.updateChild(ke,kt,vn.EMPTY_NODE,H(a),_e,k):ke,Je.isEmpty()&&l.serverCache.isFullyInitialized()&&(K=js(p,co(l)),K.isLeafNode()&&(Je=u.filter.updateFullNode(Je,K,k)))}return K=l.serverCache.isFullyInitialized()||null!=ml(p,S()),Ko(l,Je,K,u.filter.filtersNodes())}}(u,l,Je.path,p,I,k):function(u,l,a,p,I,k,K){if(null!=ml(I,a))return l;const _e=l.serverCache.isFiltered(),ke=l.serverCache;if(null!=p.value){if(Sn(a)&&ke.isFullyInitialized()||ke.isCompleteForPath(a))return ge(u,l,a,ke.getNode().getChild(a),I,k,_e,K);if(Sn(a)){let Je=new $n(null);return ke.getNode().forEachChild(Ft,(kt,Ot)=>{Je=Je.set(new G(kt),Ot)}),On(u,l,a,Je,I,k,_e,K)}return l}{let Je=new $n(null);return p.foreach((kt,Ot)=>{const Xt=Gn(a,kt);ke.isCompleteForPath(Xt)&&(Je=Je.set(kt,ke.getNode().getChild(Xt)))}),On(u,l,a,Je,I,k,_e,K)}}(u,l,Je.path,Je.affectedTree,p,I,k)}else{if(a.type!==sr.LISTEN_COMPLETE)throw(0,N.g5)("Unknown operation type: "+a.type);K=function(u,l,a,p,I){const k=l.serverCache;return Z(u,aa(l,k.getNode(),k.isFullyInitialized()||Sn(a),k.isFiltered()),a,p,Vi,I)}(u,l,a.path,p,k)}const ke=k.getChanges();return function(u,l,a){const p=l.eventCache;if(p.isFullyInitialized()){const I=p.getNode().isLeafNode()||p.getNode().isEmpty(),k=Tr(u);(a.length>0||!u.eventCache.isFullyInitialized()||I&&!p.getNode().equals(k)||!p.getNode().getPriority().equals(k.getPriority()))&&a.push(oo(Tr(l)))}}(l,K,ke),{viewCache:K,changes:ke}}(u.processor_,I,l,a,p);return function(u,l){(0,N.hu)(l.eventCache.getNode().isIndexed(u.filter.getIndex()),"Event snap not indexed"),(0,N.hu)(l.serverCache.getNode().isIndexed(u.filter.getIndex()),"Server snap not indexed")}(u.processor_,k.viewCache),(0,N.hu)(k.viewCache.serverCache.isFullyInitialized()||!I.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),u.viewCache_=k.viewCache,Ba(u,k.changes,k.viewCache.eventCache.getNode(),null)}function Ba(u,l,a,p){return function(u,l,a,p){const I=[],k=[];return l.forEach(K=>{"child_changed"===K.type&&u.index_.indexedValueChanged(K.oldSnap,K.snapshotNode)&&k.push(function(u,l){return{type:"child_moved",snapshotNode:l,childName:u}}(K.childName,K.snapshotNode))}),ti(u,I,"child_removed",l,p,a),ti(u,I,"child_added",l,p,a),ti(u,I,"child_moved",k,p,a),ti(u,I,"child_changed",l,p,a),ti(u,I,"value",l,p,a),I}(u.eventGenerator_,l,a,p?[p]:u.eventRegistrations_)}let ca,Kl;class bl{constructor(){this.views=new Map}}function va(u,l,a,p){const I=l.source.queryId;if(null!==I){const k=u.views.get(I);return(0,N.hu)(null!=k,"SyncTree gave us an op for an invalid query."),Ns(k,l,a,p)}{let k=[];for(const K of u.views.values())k=k.concat(Ns(K,l,a,p));return k}}function Vo(u,l,a,p,I){const K=u.views.get(l._queryIdentifier);if(!K){let _e=js(a,I?p:null),ke=!1;_e?ke=!0:p instanceof vn?(_e=Fa(a,p),ke=!1):(_e=vn.EMPTY_NODE,ke=!1);const Je=bs(new zo(_e,ke,!1),new zo(p,I,!1));return new fo(l,Je)}return K}function Cl(u){const l=[];for(const a of u.views.values())a.query._queryParams.loadsAllData()||l.push(a);return l}function Va(u,l){let a=null;for(const p of u.views.values())a=a||Bo(p,l);return a}function tu(u,l){return l._queryParams.loadsAllData()?Bu(u):u.views.get(l._queryIdentifier)}function Ec(u,l){return null!=tu(u,l)}function Il(u){return null!=Bu(u)}function Bu(u){for(const l of u.views.values())if(l.query._queryParams.loadsAllData())return l;return null}let bc=1;class Uu{constructor(l){this.listenProvider_=l,this.syncPointTree_=new $n(null),this.pendingWriteTree_={visibleWrites:uo.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function ba(u,l,a,p,I){return function(u,l,a,p,I){(0,N.hu)(p>u.lastWriteId,"Stacking an older write on top of newer ones"),void 0===I&&(I=!0),u.allWrites.push({path:l,snap:a,writeId:p,visible:I}),I&&(u.visibleWrites=jr(u.visibleWrites,l,a)),u.lastWriteId=p}(u.pendingWriteTree_,l,a,p,I),I?Xa(u,new ei({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},l,a)):[]}function Mo(u,l,a=!1){const p=function(u,l){for(let a=0;a<u.allWrites.length;a++){const p=u.allWrites[a];if(p.writeId===l)return p}return null}(u.pendingWriteTree_,l);if(function(u,l){const a=u.allWrites.findIndex(_e=>_e.writeId===l);(0,N.hu)(a>=0,"removeWrite called with nonexistent writeId.");const p=u.allWrites[a];u.allWrites.splice(a,1);let I=p.visible,k=!1,K=u.allWrites.length-1;for(;I&&K>=0;){const _e=u.allWrites[K];_e.visible&&(K>=a&&Us(_e,p.path)?I=!1:xr(p.path,_e.path)&&(k=!0)),K--}return!!I&&(k?(function(u){u.visibleWrites=Na(u.allWrites,ka,S()),u.lastWriteId=u.allWrites.length>0?u.allWrites[u.allWrites.length-1].writeId:-1}(u),!0):(p.snap?u.visibleWrites=gl(u.visibleWrites,p.path):Sr(p.children,ke=>{u.visibleWrites=gl(u.visibleWrites,Gn(p.path,ke))}),!0))}(u.pendingWriteTree_,l)){let k=new $n(null);return null!=p.snap?k=k.set(S(),!0):Sr(p.children,K=>{k=k.set(new G(K),!0)}),Xa(u,new Xr(p.path,k,a))}return[]}function wc(u,l,a){return Xa(u,new ei({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},l,a))}function Cc(u,l,a,p){const I=l._path,k=u.syncPointTree_.get(I);let K=[];if(k&&("default"===l._queryIdentifier||Ec(k,l))){const _e=function(u,l,a,p){const I=l._queryIdentifier,k=[];let K=[];const _e=Il(u);if("default"===I)for(const[ke,Je]of u.views.entries())K=K.concat(ia(Je,a,p)),vl(Je)&&(u.views.delete(ke),Je.query._queryParams.loadsAllData()||k.push(Je.query));else{const ke=u.views.get(I);ke&&(K=K.concat(ia(ke,a,p)),vl(ke)&&(u.views.delete(I),ke.query._queryParams.loadsAllData()||k.push(ke.query)))}return _e&&!Il(u)&&k.push(new((0,N.hu)(ca,"Reference.ts has not been loaded"),ca)(l._repo,l._path)),{removed:k,events:K}}(k,l,a,p);(function(u){return 0===u.views.size})(k)&&(u.syncPointTree_=u.syncPointTree_.remove(I));const ke=_e.removed;K=_e.events;const Je=-1!==ke.findIndex(Ot=>Ot._queryParams.loadsAllData()),kt=u.syncPointTree_.findOnPath(I,(Ot,Xt)=>Il(Xt));if(Je&&!kt){const Ot=u.syncPointTree_.subtree(I);if(!Ot.isEmpty()){const Xt=function(u){return u.fold((l,a,p)=>{if(a&&Il(a))return[Bu(a)];{let I=[];return a&&(I=Cl(a)),Sr(p,(k,K)=>{I=I.concat(K)}),I}})}(Ot);for(let Hn=0;Hn<Xt.length;++Hn){const cr=Xt[Hn],Ii=cr.query,eo=el(u,cr);u.listenProvider_.startListening(Yl(Ii),ru(u,Ii),eo.hashFn,eo.onComplete)}}}if(!kt&&ke.length>0&&!p)if(Je){const Ot=null;u.listenProvider_.stopListening(Yl(l),Ot)}else ke.forEach(Ot=>{const Xt=u.queryToTagMap.get(Dc(Ot));u.listenProvider_.stopListening(Yl(Ot),Xt)});!function(u,l){for(let a=0;a<l.length;++a){const p=l[a];if(!p._queryParams.loadsAllData()){const I=Dc(p),k=u.queryToTagMap.get(I);u.queryToTagMap.delete(I),u.tagToQueryMap.delete(k)}}}(u,ke)}return K}function pd(u,l,a){const p=l._path;let I=null,k=!1;u.syncPointTree_.foreachOnPath(p,(Ot,Xt)=>{const Hn=rr(Ot,p);I=I||Va(Xt,Hn),k=k||Il(Xt)});let _e,K=u.syncPointTree_.get(p);K?(k=k||Il(K),I=I||Va(K,S())):(K=new bl,u.syncPointTree_=u.syncPointTree_.set(p,K)),null!=I?_e=!0:(_e=!1,I=vn.EMPTY_NODE,u.syncPointTree_.subtree(p).foreachChild((Xt,Hn)=>{const cr=Va(Hn,S());cr&&(I=I.updateImmediateChild(Xt,cr))}));const ke=Ec(K,l);if(!ke&&!l._queryParams.loadsAllData()){const Ot=Dc(l);(0,N.hu)(!u.queryToTagMap.has(Ot),"View does not exist, but we have a tag");const Xt=bc++;u.queryToTagMap.set(Ot,Xt),u.tagToQueryMap.set(Xt,Ot)}let kt=function(u,l,a,p,I,k){const K=Vo(u,l,p,I,k);return u.views.has(l._queryIdentifier)||u.views.set(l._queryIdentifier,K),function(u,l){u.eventRegistrations_.push(l)}(K,a),function(u,l){const a=u.viewCache_.eventCache,p=[];return a.getNode().isLeafNode()||a.getNode().forEachChild(Fr,(k,K)=>{p.push(Xo(k,K))}),a.isFullyInitialized()&&p.push(oo(a.getNode())),Ba(u,p,a.getNode(),l)}(K,a)}(K,l,a,fi(u.pendingWriteTree_,p),I,_e);if(!ke&&!k){const Ot=tu(K,l);kt=kt.concat(function(u,l,a){const p=l._path,I=ru(u,l),k=el(u,a),K=u.listenProvider_.startListening(Yl(l),I,k.hashFn,k.onComplete),_e=u.syncPointTree_.subtree(p);if(I)(0,N.hu)(!Il(_e.value),"If we're adding a query, it shouldn't be shadowed");else{const ke=_e.fold((Je,kt,Ot)=>{if(!Sn(Je)&&kt&&Il(kt))return[Bu(kt).query];{let Xt=[];return kt&&(Xt=Xt.concat(Cl(kt).map(Hn=>Hn.query))),Sr(Ot,(Hn,cr)=>{Xt=Xt.concat(cr)}),Xt}});for(let Je=0;Je<ke.length;++Je){const kt=ke[Je];u.listenProvider_.stopListening(Yl(kt),ru(u,kt))}}return K}(u,l,Ot))}return kt}function Ic(u,l,a){const I=u.pendingWriteTree_,k=u.syncPointTree_.findOnPath(l,(K,_e)=>{const Je=Va(_e,rr(K,l));if(Je)return Je});return Vn(I,l,k,a,!0)}function Xa(u,l){return nu(l,u.syncPointTree_,null,fi(u.pendingWriteTree_,S()))}function nu(u,l,a,p){if(Sn(u.path))return da(u,l,a,p);{const I=l.get(S());null==a&&null!=I&&(a=Va(I,S()));let k=[];const K=y(u.path),_e=u.operationForChild(K),ke=l.children.get(K);if(ke&&_e){const Je=a?a.getImmediateChild(K):null,kt=ra(p,K);k=k.concat(nu(_e,ke,Je,kt))}return I&&(k=k.concat(va(I,u,p,a))),k}}function da(u,l,a,p){const I=l.get(S());null==a&&null!=I&&(a=Va(I,S()));let k=[];return l.children.inorderTraversal((K,_e)=>{const ke=a?a.getImmediateChild(K):null,Je=ra(p,K),kt=u.operationForChild(K);kt&&(k=k.concat(da(kt,_e,ke,Je)))}),I&&(k=k.concat(va(I,u,p,a))),k}function el(u,l){const a=l.query,p=ru(u,a);return{hashFn:()=>(function(u){return u.viewCache_.serverCache.getNode()}(l)||vn.EMPTY_NODE).hash(),onComplete:I=>{if("ok"===I)return p?function(u,l,a){const p=Gu(u,a);if(p){const I=Ua(p),k=I.path,K=I.queryId,_e=rr(k,l);return ja(u,k,new ao(Bt(K),_e))}return[]}(u,a._path,p):function(u,l){return Xa(u,new ao({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},l))}(u,a._path);{const k=function(u,l){let a="Unknown Error";"too_big"===u?a="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===u?a="Client doesn't have permission to access the desired data.":"unavailable"===u&&(a="The service is unavailable");const p=new Error(u+" at "+l._path.toString()+": "+a);return p.code=u.toUpperCase(),p}(I,a);return Cc(u,a,null,k)}}}}function ru(u,l){const a=Dc(l);return u.queryToTagMap.get(a)}function Dc(u){return u._path.toString()+"$"+u._queryIdentifier}function Gu(u,l){return u.tagToQueryMap.get(l)}function Ua(u){const l=u.indexOf("$");return(0,N.hu)(-1!==l&&l<u.length-1,"Bad queryKey."),{queryId:u.substr(l+1),path:new G(u.substr(0,l))}}function ja(u,l,a){const p=u.syncPointTree_.get(l);return(0,N.hu)(p,"Missing sync point for query tag that we're tracking"),va(p,a,fi(u.pendingWriteTree_,l),null)}function Yl(u){return u._queryParams.loadsAllData()&&!u._queryParams.isDefault()?new((0,N.hu)(Kl,"Reference.ts has not been loaded"),Kl)(u._repo,u._path):u}class md{constructor(l){this.node_=l}getImmediateChild(l){const a=this.node_.getImmediateChild(l);return new md(a)}node(){return this.node_}}class Fs{constructor(l,a){this.syncTree_=l,this.path_=a}getImmediateChild(l){const a=Gn(this.path_,l);return new Fs(this.syncTree_,a)}node(){return Ic(this.syncTree_,this.path_)}}const Zl=function(u,l,a){return u&&"object"==typeof u?((0,N.hu)(".sv"in u,"Unexpected leaf node or priority contents"),"string"==typeof u[".sv"]?_d(u[".sv"],l,a):"object"==typeof u[".sv"]?xi(u[".sv"],l):void(0,N.hu)(!1,"Unexpected server value: "+JSON.stringify(u,null,2))):u},_d=function(u,l,a){if("timestamp"===u)return a.timestamp;(0,N.hu)(!1,"Unexpected server value: "+u)},xi=function(u,l,a){u.hasOwnProperty("increment")||(0,N.hu)(!1,"Unexpected server value: "+JSON.stringify(u,null,2));const p=u.increment;"number"!=typeof p&&(0,N.hu)(!1,"Unexpected increment value: "+p);const I=l.node();if((0,N.hu)(null!=I,"Expected ChildrenNode.EMPTY_NODE for nulls"),!I.isLeafNode())return p;const K=I.getValue();return"number"!=typeof K?p:K+p},tl=function(u,l,a,p){return Wi(l,new Fs(a,u),p)},Gs=function(u,l,a){return Wi(u,new md(l),a)};function Wi(u,l,a){const p=u.getPriority().val(),I=Zl(p,l.getImmediateChild(".priority"),a);let k;if(u.isLeafNode()){const K=u,_e=Zl(K.getValue(),l,a);return _e!==K.getValue()||I!==K.getPriority().val()?new _s(_e,pr(I)):u}{const K=u;return k=K,I!==K.getPriority().val()&&(k=k.updatePriority(new _s(I))),K.forEachChild(Fr,(_e,ke)=>{const Je=Wi(ke,l.getImmediateChild(_e),a);Je!==ke&&(k=k.updateImmediateChild(_e,Je))}),k}}class su{constructor(l="",a=null,p={children:{},childCount:0}){this.name=l,this.parent=a,this.node=p}}function yd(u,l){let a=l instanceof G?l:new G(l),p=u,I=y(a);for(;null!==I;){const k=(0,N.DV)(p.node.children,I)||{children:{},childCount:0};p=new su(I,p,k),a=H(a),I=y(a)}return p}function bo(u){return u.node.value}function ch(u,l){u.node.value=l,Sl(u)}function Tl(u){return u.node.childCount>0}function nl(u,l){Sr(u.node.children,(a,p)=>{l(new su(a,u,p))})}function Vh(u,l,a,p){a&&!p&&l(u),nl(u,I=>{Vh(I,l,!0,p)}),a&&p&&l(u)}function Tc(u){return new G(null===u.parent?u.name:Tc(u.parent)+"/"+u.name)}function Sl(u){null!==u.parent&&function(u,l,a){const p=function(u){return void 0===bo(u)&&!Tl(u)}(a),I=(0,N.r3)(u.node.children,l);p&&I?(delete u.node.children[l],u.node.childCount--,Sl(u)):!p&&!I&&(u.node.children[l]=a.node,u.node.childCount++,Sl(u))}(u.parent,u.name,u)}const Sc=/[\[\].#$\/\u0000-\u001F\u007F]/,au=/[\[\].#$\u0000-\u001F\u007F]/,lu=10485760,Al=function(u){return"string"==typeof u&&0!==u.length&&!Sc.test(u)},$u=function(u){return"string"==typeof u&&0!==u.length&&!au.test(u)},ha=function(u){return null===u||"string"==typeof u||"number"==typeof u&&!ze(u)||u&&"object"==typeof u&&(0,N.r3)(u,".sv")},oi=function(u,l,a,p){p&&void 0===l||cu((0,N.gK)(u,"value"),l,a)},cu=function(u,l,a){const p=a instanceof G?new Tn(a,u):a;if(void 0===l)throw new Error(u+"contains undefined "+Ei(p));if("function"==typeof l)throw new Error(u+"contains a function "+Ei(p)+" with contents = "+l.toString());if(ze(l))throw new Error(u+"contains "+l.toString()+" "+Ei(p));if("string"==typeof l&&l.length>lu/3&&(0,N.ug)(l)>lu)throw new Error(u+"contains a string greater than "+lu+" utf8 bytes "+Ei(p)+" ('"+l.substring(0,50)+"...')");if(l&&"object"==typeof l){let I=!1,k=!1;if(Sr(l,(K,_e)=>{if(".value"===K)I=!0;else if(".priority"!==K&&".sv"!==K&&(k=!0,!Al(K)))throw new Error(u+" contains an invalid key ("+K+") "+Ei(p)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function(u,l){u.parts_.length>0&&(u.byteLength_+=1),u.parts_.push(l),u.byteLength_+=(0,N.ug)(l),Ys(u)})(p,K),cu(u,_e,p),function(u){const l=u.parts_.pop();u.byteLength_-=(0,N.ug)(l),u.parts_.length>0&&(u.byteLength_-=1)}(p)}),I&&k)throw new Error(u+' contains ".value" child '+Ei(p)+" in addition to actual children.")}},Wu=function(u,l,a,p){if(p&&void 0===l)return;const I=(0,N.gK)(u,"values");if(!l||"object"!=typeof l||Array.isArray(l))throw new Error(I+" must be an object containing the children to replace.");const k=[];Sr(l,(K,_e)=>{const ke=new G(K);if(cu(I,_e,Gn(a,ke)),".priority"===je(ke)&&!ha(_e))throw new Error(I+"contains an invalid value for '"+ke.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");k.push(ke)}),function(u,l){let a,p;for(a=0;a<l.length;a++){p=l[a];const k=hn(p);for(let K=0;K<k.length;K++)if((".priority"!==k[K]||K!==k.length-1)&&!Al(k[K]))throw new Error(u+"contains an invalid key ("+k[K]+") in path "+p.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}l.sort(Wr);let I=null;for(a=0;a<l.length;a++){if(p=l[a],null!==I&&xr(I,p))throw new Error(u+"contains a path "+I.toString()+" that is ancestor of another path "+p.toString());I=p}}(I,k)},Ha=function(u,l,a){if(!a||void 0!==l){if(ze(l))throw new Error((0,N.gK)(u,"priority")+"is "+l.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!ha(l))throw new Error((0,N.gK)(u,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Ac=function(u,l,a,p){if(!(p&&void 0===a||Al(a)))throw new Error((0,N.gK)(u,l)+'was an invalid key = "'+a+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},uu=function(u,l,a,p){if(!(p&&void 0===a||$u(a)))throw new Error((0,N.gK)(u,l)+'was an invalid path = "'+a+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Yo=function(u,l){if(".info"===y(l))throw new Error(u+" failed = Can't modify data under /.info/")},bd=function(u,l){const a=l.path.toString();if("string"!=typeof l.repoInfo.host||0===l.repoInfo.host.length||!Al(l.repoInfo.namespace)&&"localhost"!==l.repoInfo.host.split(":")[0]||0!==a.length&&!function(u){return u&&(u=u.replace(/^\/*\.info(\/|$)/,"/")),$u(u)}(a))throw new Error((0,N.gK)(u,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Mc{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function fa(u,l){let a=null;for(let p=0;p<l.length;p++){const I=l[p],k=I.getPath();null!==a&&!Ur(k,a.path)&&(u.eventLists_.push(a),a=null),null===a&&(a={events:[],path:k}),a.events.push(I)}a&&u.eventLists_.push(a)}function rl(u,l,a){fa(u,a),Ml(u,p=>Ur(p,l))}function Ui(u,l,a){fa(u,a),Ml(u,p=>xr(p,l)||xr(l,p))}function Ml(u,l){u.recursionDepth_++;let a=!0;for(let p=0;p<u.eventLists_.length;p++){const I=u.eventLists_[p];I&&(l(I.path)?(wd(u.eventLists_[p]),u.eventLists_[p]=null):a=!1)}a&&(u.eventLists_=[]),u.recursionDepth_--}function wd(u){for(let l=0;l<u.events.length;l++){const a=u.events[l];if(null!==a){u.events[l]=null;const p=a.getEventRunner();In&&De("event: "+a.toString()),ur(p)}}}const du="repo_interrupt";class hu{constructor(l,a,p,I){this.repoInfo_=l,this.forceRestClient_=a,this.authTokenProvider_=p,this.appCheckProvider_=I,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Mc,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=F(),this.transactionQueueTree_=new su,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function ql(u){const a=u.infoData_.getNode(new G(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+a}function xl(u){return function(u){return(u=u||{}).timestamp=u.timestamp||(new Date).getTime(),u}({timestamp:ql(u)})}function Id(u,l,a,p,I){u.dataUpdateCount++;const k=new G(l);a=u.interceptServerDataCallback_?u.interceptServerDataCallback_(l,a):a;let K=[];if(I)if(p){const ke=(0,N.UI)(a,Je=>pr(Je));K=function(u,l,a,p){const I=Gu(u,p);if(I){const k=Ua(I),K=k.path,_e=k.queryId,ke=rr(K,l),Je=$n.fromObject(a);return ja(u,K,new ds(Bt(_e),ke,Je))}return[]}(u.serverSyncTree_,k,ke,I)}else{const ke=pr(a);K=function(u,l,a,p){const I=Gu(u,p);if(null!=I){const k=Ua(I),K=k.path,_e=k.queryId,ke=rr(K,l);return ja(u,K,new ei(Bt(_e),ke,a))}return[]}(u.serverSyncTree_,k,ke,I)}else if(p){const ke=(0,N.UI)(a,Je=>pr(Je));K=function(u,l,a){const p=$n.fromObject(a);return Xa(u,new ds({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},l,p))}(u.serverSyncTree_,k,ke)}else{const ke=pr(a);K=wc(u.serverSyncTree_,k,ke)}let _e=k;K.length>0&&(_e=ii(u,k)),Ui(u.eventQueue_,_e,K)}function Dd(u,l){zu(u,"connected",l),!1===l&&function(u){Oc(u,"onDisconnectEvents");const l=xl(u),a=F();z(u.onDisconnect_,S(),(I,k)=>{const K=tl(I,k,u.serverSyncTree_,l);R(a,I,K)});let p=[];z(a,S(),(I,k)=>{p=p.concat(wc(u.serverSyncTree_,I,k));const K=go(u,I);ii(u,K)}),u.onDisconnect_=F(),Ui(u.eventQueue_,S(),p)}(u)}function zu(u,l,a){const p=new G("/.info/"+l),I=pr(a);u.infoData_.updateSnapshot(p,I);const k=wc(u.infoSyncTree_,p,I);Ui(u.eventQueue_,p,k)}function fu(u){return u.nextWriteId_++}function pu(u,l,a,p,I){Oc(u,"set",{path:l.toString(),value:a,priority:p});const k=xl(u),K=pr(a,p),_e=Ic(u.serverSyncTree_,l),ke=Gs(K,_e,k),Je=fu(u),kt=ba(u.serverSyncTree_,l,ke,Je,!0);fa(u.eventQueue_,kt),u.server_.put(l.toString(),K.val(!0),(Xt,Hn)=>{const cr="ok"===Xt;cr||Ke("set at "+l+" failed: "+Xt);const Ii=Mo(u.serverSyncTree_,Je,!cr);Ui(u.eventQueue_,l,Ii),Ga(0,I,Xt,Hn)});const Ot=go(u,l);ii(u,Ot),Ui(u.eventQueue_,Ot,[])}function Uh(u,l,a){u.server_.onDisconnectCancel(l.toString(),(p,I)=>{"ok"===p&&M(u.onDisconnect_,l),Ga(0,a,p,I)})}function Ql(u,l,a,p){const I=pr(a);u.server_.onDisconnectPut(l.toString(),I.val(!0),(k,K)=>{"ok"===k&&R(u.onDisconnect_,l,I),Ga(0,p,k,K)})}function Ad(u,l,a){let p;p=".info"===y(l._path)?Cc(u.infoSyncTree_,l,a):Cc(u.serverSyncTree_,l,a),rl(u.eventQueue_,l._path,p)}function Jl(u){u.persistentConnection_&&u.persistentConnection_.interrupt(du)}function Oc(u,...l){let a="";u.persistentConnection_&&(a=u.persistentConnection_.id+":"),De(a,...l)}function Ga(u,l,a,p){l&&ur(()=>{if("ok"===a)l(null);else{const I=(a||"error").toUpperCase();let k=I;p&&(k+=": "+p);const K=new Error(k);K.code=I,l(K)}})}function gu(u,l,a){return Ic(u.serverSyncTree_,l,a)||vn.EMPTY_NODE}function po(u,l=u.transactionQueueTree_){if(l||Uo(u,l),bo(l)){const a=Ku(u,l);(0,N.hu)(a.length>0,"Sending zero length transaction queue"),a.every(I=>0===I.status)&&function(u,l,a){const p=a.map(Je=>Je.currentWriteId),I=gu(u,l,p);let k=I;const K=I.hash();for(let Je=0;Je<a.length;Je++){const kt=a[Je];(0,N.hu)(0===kt.status,"tryToSendTransactionQueue_: items in queue should all be run."),kt.status=1,kt.retryCount++;const Ot=rr(l,kt.path);k=k.updateChild(Ot,kt.currentOutputSnapshotRaw)}const _e=k.val(!0),ke=l;u.server_.put(ke.toString(),_e,Je=>{Oc(u,"transaction put response",{path:ke.toString(),status:Je});let kt=[];if("ok"===Je){const Ot=[];for(let Xt=0;Xt<a.length;Xt++)a[Xt].status=2,kt=kt.concat(Mo(u.serverSyncTree_,a[Xt].currentWriteId)),a[Xt].onComplete&&Ot.push(()=>a[Xt].onComplete(null,!0,a[Xt].currentOutputSnapshotResolved)),a[Xt].unwatcher();Uo(u,yd(u.transactionQueueTree_,l)),po(u,u.transactionQueueTree_),Ui(u.eventQueue_,l,kt);for(let Xt=0;Xt<Ot.length;Xt++)ur(Ot[Xt])}else{if("datastale"===Je)for(let Ot=0;Ot<a.length;Ot++)a[Ot].status=3===a[Ot].status?4:0;else{Ke("transaction at "+ke.toString()+" failed: "+Je);for(let Ot=0;Ot<a.length;Ot++)a[Ot].status=4,a[Ot].abortReason=Je}ii(u,l)}},K)}(u,Tc(l),a)}else Tl(l)&&nl(l,a=>{po(u,a)})}function ii(u,l){const a=Rc(u,l),p=Tc(a);return function(u,l,a){if(0===l.length)return;const p=[];let I=[];const K=l.filter(_e=>0===_e.status).map(_e=>_e.currentWriteId);for(let _e=0;_e<l.length;_e++){const ke=l[_e],Je=rr(a,ke.path);let Ot,kt=!1;if((0,N.hu)(null!==Je,"rerunTransactionsUnderNode_: relativePath should not be null."),4===ke.status)kt=!0,Ot=ke.abortReason,I=I.concat(Mo(u.serverSyncTree_,ke.currentWriteId,!0));else if(0===ke.status)if(ke.retryCount>=25)kt=!0,Ot="maxretry",I=I.concat(Mo(u.serverSyncTree_,ke.currentWriteId,!0));else{const Xt=gu(u,ke.path,K);ke.currentInputSnapshot=Xt;const Hn=l[_e].update(Xt.val());if(void 0!==Hn){cu("transaction failed: Data returned ",Hn,ke.path);let cr=pr(Hn);"object"==typeof Hn&&null!=Hn&&(0,N.r3)(Hn,".priority")||(cr=cr.updatePriority(Xt.getPriority()));const eo=ke.currentWriteId,Vl=xl(u),Ul=Gs(cr,Xt,Vl);ke.currentOutputSnapshotRaw=cr,ke.currentOutputSnapshotResolved=Ul,ke.currentWriteId=fu(u),K.splice(K.indexOf(eo),1),I=I.concat(ba(u.serverSyncTree_,ke.path,Ul,ke.currentWriteId,ke.applyLocally)),I=I.concat(Mo(u.serverSyncTree_,eo,!0))}else kt=!0,Ot="nodata",I=I.concat(Mo(u.serverSyncTree_,ke.currentWriteId,!0))}Ui(u.eventQueue_,a,I),I=[],kt&&(l[_e].status=2,setTimeout(l[_e].unwatcher,Math.floor(0)),l[_e].onComplete&&p.push("nodata"===Ot?()=>l[_e].onComplete(null,!1,l[_e].currentInputSnapshot):()=>l[_e].onComplete(new Error(Ot),!1,null)))}Uo(u,u.transactionQueueTree_);for(let _e=0;_e<p.length;_e++)ur(p[_e]);po(u,u.transactionQueueTree_)}(u,Ku(u,a),p),p}function Rc(u,l){let a,p=u.transactionQueueTree_;for(a=y(l);null!==a&&void 0===bo(p);)p=yd(p,a),a=y(l=H(l));return p}function Ku(u,l){const a=[];return hs(u,l,a),a.sort((p,I)=>p.order-I.order),a}function hs(u,l,a){const p=bo(l);if(p)for(let I=0;I<p.length;I++)a.push(p[I]);nl(l,I=>{hs(u,I,a)})}function Uo(u,l){const a=bo(l);if(a){let p=0;for(let I=0;I<a.length;I++)2!==a[I].status&&(a[p]=a[I],p++);a.length=p,ch(l,a.length>0?a:void 0)}nl(l,p=>{Uo(u,p)})}function go(u,l){const a=Tc(Rc(u,l)),p=yd(u.transactionQueueTree_,l);return function(u,l,a){let p=u.parent;for(;null!==p;){if(l(p))return!0;p=p.parent}}(p,I=>{os(u,I)}),os(u,p),Vh(p,I=>{os(u,I)}),a}function os(u,l){const a=bo(l);if(a){const p=[];let I=[],k=-1;for(let K=0;K<a.length;K++)3===a[K].status||(1===a[K].status?((0,N.hu)(k===K-1,"All SENT items should be at beginning of queue."),k=K,a[K].status=3,a[K].abortReason="set"):((0,N.hu)(0===a[K].status,"Unexpected transaction status in abort"),a[K].unwatcher(),I=I.concat(Mo(u.serverSyncTree_,a[K].currentWriteId,!0)),a[K].onComplete&&p.push(a[K].onComplete.bind(null,new Error("set"),!1,null))));-1===k?ch(l,void 0):a.length=k+1,Ui(u.eventQueue_,Tc(l),I);for(let K=0;K<p.length;K++)ur(p[K])}}const wo=function(u,l){const a=Pl(u),p=a.namespace;return"firebase.com"===a.domain&&ye(a.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!p||"undefined"===p)&&"localhost"!==a.domain&&ye("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),a.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Ke("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new tr(a.host,a.secure,p,l,"ws"===a.scheme||"wss"===a.scheme,"",p!==a.subdomain),path:new G(a.pathString)}},Pl=function(u){let l="",a="",p="",I="",k="",K=!0,_e="https",ke=443;if("string"==typeof u){let Je=u.indexOf("//");Je>=0&&(_e=u.substring(0,Je-1),u=u.substring(Je+2));let kt=u.indexOf("/");-1===kt&&(kt=u.length);let Ot=u.indexOf("?");-1===Ot&&(Ot=u.length),l=u.substring(0,Math.min(kt,Ot)),kt<Ot&&(I=function(u){let l="";const a=u.split("/");for(let p=0;p<a.length;p++)if(a[p].length>0){let I=a[p];try{I=decodeURIComponent(I.replace(/\+/g," "))}catch(k){}l+="/"+I}return l}(u.substring(kt,Ot)));const Xt=function(u){const l={};"?"===u.charAt(0)&&(u=u.substring(1));for(const a of u.split("&")){if(0===a.length)continue;const p=a.split("=");2===p.length?l[decodeURIComponent(p[0])]=decodeURIComponent(p[1]):Ke(`Invalid query segment '${a}' in query '${u}'`)}return l}(u.substring(Math.min(u.length,Ot)));Je=l.indexOf(":"),Je>=0?(K="https"===_e||"wss"===_e,ke=parseInt(l.substring(Je+1),10)):Je=l.length;const Hn=l.slice(0,Je);if("localhost"===Hn.toLowerCase())a="localhost";else if(Hn.split(".").length<=2)a=Hn;else{const cr=l.indexOf(".");p=l.substring(0,cr).toLowerCase(),a=l.substring(cr+1),k=p}"ns"in Xt&&(k=Xt.ns)}return{host:l,port:ke,domain:a,subdomain:p,secure:K,scheme:_e,pathString:I,namespace:k}};class kc{constructor(l,a,p,I){this.eventType=l,this.eventRegistration=a,this.snapshot=p,this.prevName=I}getPath(){const l=this.snapshot.ref;return"value"===this.eventType?l._path:l.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,N.Pz)(this.snapshot.exportVal())}}class Da{constructor(l,a,p){this.eventRegistration=l,this.error=a,this.path=p}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class mu{constructor(l,a){this.snapshotCallback=l,this.cancelCallback=a}onValue(l,a){this.snapshotCallback.call(null,l,a)}onCancel(l){return(0,N.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,l)}get hasCancelCallback(){return!!this.cancelCallback}matches(l){return this.snapshotCallback===l.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===l.snapshotCallback.userCallback&&this.snapshotCallback.context===l.snapshotCallback.context}}class Nc{constructor(l,a){this._repo=l,this._path=a}cancel(){const l=new N.BH;return Uh(this._repo,this._path,l.wrapCallback(()=>{})),l.promise}remove(){Yo("OnDisconnect.remove",this._path);const l=new N.BH;return Ql(this._repo,this._path,null,l.wrapCallback(()=>{})),l.promise}set(l){Yo("OnDisconnect.set",this._path),oi("OnDisconnect.set",l,this._path,!1);const a=new N.BH;return Ql(this._repo,this._path,l,a.wrapCallback(()=>{})),a.promise}setWithPriority(l,a){Yo("OnDisconnect.setWithPriority",this._path),oi("OnDisconnect.setWithPriority",l,this._path,!1),Ha("OnDisconnect.setWithPriority",a,!1);const p=new N.BH;return function(u,l,a,p,I){const k=pr(a,p);u.server_.onDisconnectPut(l.toString(),k.val(!0),(K,_e)=>{"ok"===K&&R(u.onDisconnect_,l,k),Ga(0,I,K,_e)})}(this._repo,this._path,l,a,p.wrapCallback(()=>{})),p.promise}update(l){Yo("OnDisconnect.update",this._path),Wu("OnDisconnect.update",l,this._path,!1);const a=new N.BH;return function(u,l,a,p){if((0,N.xb)(a))return De("onDisconnect().update() called with empty data.  Don't do anything."),void Ga(0,p,"ok",void 0);u.server_.onDisconnectMerge(l.toString(),a,(I,k)=>{"ok"===I&&Sr(a,(K,_e)=>{const ke=pr(_e);R(u.onDisconnect_,Gn(l,K),ke)}),Ga(0,p,I,k)})}(this._repo,this._path,l,a.wrapCallback(()=>{})),a.promise}}class Ht{constructor(l,a,p,I){this._repo=l,this._path=a,this._queryParams=p,this._orderByCalled=I}get key(){return Sn(this._path)?null:je(this._path)}get ref(){return new Qi(this._repo,this._path)}get _queryIdentifier(){const l=Pa(this._queryParams),a=fr(l);return"{}"===a?"default":a}get _queryObject(){return Pa(this._queryParams)}isEqual(l){if(!((l=(0,N.m9)(l))instanceof Ht))return!1;const a=this._repo===l._repo,p=Ur(this._path,l._path);return a&&p&&this._queryIdentifier===l._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(u){let l="";for(let a=u.pieceNum_;a<u.pieces_.length;a++)""!==u.pieces_[a]&&(l+="/"+encodeURIComponent(String(u.pieces_[a])));return l||"/"}(this._path)}}function $a(u,l){if(!0===u._orderByCalled)throw new Error(l+": You can't combine multiple orderBy calls.")}function as(u){let l=null,a=null;if(u.hasStart()&&(l=u.getIndexStartValue()),u.hasEnd()&&(a=u.getIndexEndValue()),u.getIndex()===Ft){const p="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",I="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(u.hasStart()){if(u.getIndexStartName()!==Se)throw new Error(p);if("string"!=typeof l)throw new Error(I)}if(u.hasEnd()){if(u.getIndexEndName()!==ut)throw new Error(p);if("string"!=typeof a)throw new Error(I)}}else if(u.getIndex()===Fr){if(null!=l&&!ha(l)||null!=a&&!ha(a))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,N.hu)(u.getIndex()instanceof Qr||u.getIndex()===ks,"unknown index type."),null!=l&&"object"==typeof l||null!=a&&"object"==typeof a)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function _u(u){if(u.hasStart()&&u.hasEnd()&&u.hasLimit()&&!u.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Qi extends Ht{constructor(l,a){super(l,a,new hl,!1)}get parent(){const l=Pn(this._path);return null===l?null:new Qi(this._repo,l)}get root(){let l=this;for(;null!==l.parent;)l=l.parent;return l}}class Xs{constructor(l,a,p){this._node=l,this.ref=a,this._index=p}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(l){const a=new G(l),p=il(this.ref,l);return new Xs(this._node.getChild(a),p,Fr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(l){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(p,I)=>l(new Xs(I,il(this.ref,p),Fr)))}hasChild(l){const a=new G(l);return!this._node.getChild(a).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function yu(u,l){return(u=(0,N.m9)(u))._checkNotDeleted("ref"),void 0!==l?il(u._root,l):u._root}function Wa(u,l){(u=(0,N.m9)(u))._checkNotDeleted("refFromURL");const a=wo(l,u._repo.repoInfo_.nodeAdmin);bd("refFromURL",a);const p=a.repoInfo;return!u._repo.repoInfo_.isCustomHost()&&p.host!==u._repo.repoInfo_.host&&ye("refFromURL: Host name does not match the current database: (found "+p.host+" but expected "+u._repo.repoInfo_.host+")"),yu(u,a.path.toString())}function il(u,l){return null===y((u=(0,N.m9)(u))._path)?(a=l,a&&(a=a.replace(/^\/*\.info(\/|$)/,"/")),uu("child","path",a,!1)):uu("child","path",l,!1),new Qi(u._repo,Gn(u._path,l));var a}function vu(u,l){u=(0,N.m9)(u),Yo("set",u._path),oi("set",l,u._path,!1);const a=new N.BH;return pu(u._repo,u._path,l,null,a.wrapCallback(()=>{})),a.promise}function m(u,l){Wu("update",l,u._path,!1);const a=new N.BH;return function(u,l,a,p){Oc(u,"update",{path:l.toString(),value:a});let I=!0;const k=xl(u),K={};if(Sr(a,(_e,ke)=>{I=!1,K[_e]=tl(Gn(l,_e),pr(ke),u.serverSyncTree_,k)}),I)De("update() called with empty data.  Don't do anything."),Ga(0,p,"ok",void 0);else{const _e=fu(u),ke=function(u,l,a,p){!function(u,l,a,p){(0,N.hu)(p>u.lastWriteId,"Stacking an older merge on top of newer ones"),u.allWrites.push({path:l,children:a,writeId:p,visible:!0}),u.visibleWrites=pl(u.visibleWrites,l,a),u.lastWriteId=p}(u.pendingWriteTree_,l,a,p);const I=$n.fromObject(a);return Xa(u,new ds({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},l,I))}(u.serverSyncTree_,l,K,_e);fa(u.eventQueue_,ke),u.server_.merge(l.toString(),a,(Je,kt)=>{const Ot="ok"===Je;Ot||Ke("update at "+l+" failed: "+Je);const Xt=Mo(u.serverSyncTree_,_e,!Ot),Hn=Xt.length>0?ii(u,l):l;Ui(u.eventQueue_,Hn,Xt),Ga(0,p,Je,kt)}),Sr(a,Je=>{const kt=go(u,Gn(l,Je));ii(u,kt)}),Ui(u.eventQueue_,l,[])}}(u._repo,u._path,l,a.wrapCallback(()=>{})),a.promise}function A(u){return function(u,l){const a=function(u,l){const a=l._path;let p=null;u.syncPointTree_.foreachOnPath(a,(Je,kt)=>{const Ot=rr(Je,a);p=p||Va(kt,Ot)});let I=u.syncPointTree_.get(a);I?p=p||Va(I,S()):(I=new bl,u.syncPointTree_=u.syncPointTree_.set(a,I));const k=null!=p,K=k?new zo(p,!0,!1):null;return function(u){return Tr(u.viewCache_)}(Vo(I,l,fi(u.pendingWriteTree_,l._path),k?K.getNode():vn.EMPTY_NODE,k))}(u.serverSyncTree_,l);return null!=a?Promise.resolve(a):u.server_.get(l).then(p=>{const I=pr(p).withIndex(l._queryParams.getIndex()),k=wc(u.serverSyncTree_,l._path,I);return rl(u.eventQueue_,l._path,k),Promise.resolve(I)},p=>(Oc(u,"get for query "+(0,N.Pz)(l)+" failed: "+p),Promise.reject(new Error(p))))}((u=(0,N.m9)(u))._repo,u).then(l=>new Xs(l,new Qi(u._repo,u._path),u._queryParams.getIndex()))}class Y{constructor(l){this.callbackContext=l}respondsTo(l){return"value"===l}createEvent(l,a){const p=a._queryParams.getIndex();return new kc("value",this,new Xs(l.snapshotNode,new Qi(a._repo,a._path),p))}getEventRunner(l){return"cancel"===l.getEventType()?()=>this.callbackContext.onCancel(l.error):()=>this.callbackContext.onValue(l.snapshot,null)}createCancelEvent(l,a){return this.callbackContext.hasCancelCallback?new Da(this,l,a):null}matches(l){return l instanceof Y&&(!l.callbackContext||!this.callbackContext||l.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class le{constructor(l,a){this.eventType=l,this.callbackContext=a}respondsTo(l){let a="children_added"===l?"child_added":l;return a="children_removed"===a?"child_removed":a,this.eventType===a}createCancelEvent(l,a){return this.callbackContext.hasCancelCallback?new Da(this,l,a):null}createEvent(l,a){(0,N.hu)(null!=l.childName,"Child events should have a childName.");const p=il(new Qi(a._repo,a._path),l.childName),I=a._queryParams.getIndex();return new kc(l.type,this,new Xs(l.snapshotNode,p,I),l.prevName)}getEventRunner(l){return"cancel"===l.getEventType()?()=>this.callbackContext.onCancel(l.error):()=>this.callbackContext.onValue(l.snapshot,l.prevName)}matches(l){return l instanceof le&&this.eventType===l.eventType&&(!this.callbackContext||!l.callbackContext||this.callbackContext.matches(l.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function tt(u,l,a,p,I){let k;if("object"==typeof p&&(k=void 0,I=p),"function"==typeof p&&(k=p),I&&I.onlyOnce){const ke=a,Je=(kt,Ot)=>{Ad(u._repo,u,_e),ke(kt,Ot)};Je.userCallback=a.userCallback,Je.context=a.context,a=Je}const K=new mu(a,k||void 0),_e="value"===l?new Y(K):new le(l,K);return function(u,l,a){let p;p=".info"===y(l._path)?pd(u.infoSyncTree_,l,a):pd(u.serverSyncTree_,l,a),rl(u.eventQueue_,l._path,p)}(u._repo,u,_e),()=>Ad(u._repo,u,_e)}function Tt(u,l,a,p){return tt(u,"value",l,a,p)}function gn(u,l,a,p){return tt(u,"child_added",l,a,p)}function ln(u,l,a,p){return tt(u,"child_changed",l,a,p)}function jn(u,l,a,p){return tt(u,"child_moved",l,a,p)}function Zn(u,l,a,p){return tt(u,"child_removed",l,a,p)}function Lr(u,l,a){let p=null;const I=a?new mu(a):null;"value"===l?p=new Y(I):l&&(p=new le(l,I)),Ad(u._repo,u,p)}class Ci{}class Ta extends Ci{constructor(l,a){super(),this._value=l,this._key=a}_apply(l){oi("endAt",this._value,l._path,!0);const a=Hl(l._queryParams,this._value,this._key);if(_u(a),as(a),l._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ht(l._repo,l._path,a,l._orderByCalled)}}class Zu extends Ci{constructor(l,a){super(),this._value=l,this._key=a}_apply(l){oi("endBefore",this._value,l._path,!1);const a=function(u,l,a){let p,I;return u.index_===Ft?("string"==typeof l&&(l=Jr(l)),I=Hl(u,l,a)):(p=null==a?Se:Jr(a),I=Hl(u,l,p)),I.endBeforeSet_=!0,I}(l._queryParams,this._value,this._key);if(_u(a),as(a),l._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ht(l._repo,l._path,a,l._orderByCalled)}}class Md extends Ci{constructor(l,a){super(),this._value=l,this._key=a}_apply(l){oi("startAt",this._value,l._path,!0);const a=ma(l._queryParams,this._value,this._key);if(_u(a),as(a),l._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Ht(l._repo,l._path,a,l._orderByCalled)}}class xd extends Ci{constructor(l,a){super(),this._value=l,this._key=a}_apply(l){oi("startAfter",this._value,l._path,!1);const a=function(u,l,a){let p;if(u.index_===Ft)"string"==typeof l&&(l=dl(l)),p=ma(u,l,a);else{let I;I=null==a?ut:dl(a),p=ma(u,l,I)}return p.startAfterSet_=!0,p}(l._queryParams,this._value,this._key);if(_u(a),as(a),l._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Ht(l._repo,l._path,a,l._orderByCalled)}}class bu extends Ci{constructor(l){super(),this._limit=l}_apply(l){if(l._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ht(l._repo,l._path,function(u,l){const a=u.copy();return a.limitSet_=!0,a.limit_=l,a.viewFrom_="l",a}(l._queryParams,this._limit),l._orderByCalled)}}class wu extends Ci{constructor(l){super(),this._limit=l}_apply(l){if(l._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ht(l._repo,l._path,function(u,l){const a=u.copy();return a.limitSet_=!0,a.limit_=l,a.viewFrom_="r",a}(l._queryParams,this._limit),l._orderByCalled)}}class Aa extends Ci{constructor(l){super(),this._path=l}_apply(l){$a(l,"orderByChild");const a=new G(this._path);if(Sn(a))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const p=new Qr(a),I=Gl(l._queryParams,p);return as(I),new Ht(l._repo,l._path,I,!0)}}class jh extends Ci{_apply(l){$a(l,"orderByKey");const a=Gl(l._queryParams,Ft);return as(a),new Ht(l._repo,l._path,a,!0)}}class Af extends Ci{_apply(l){$a(l,"orderByPriority");const a=Gl(l._queryParams,Fr);return as(a),new Ht(l._repo,l._path,a,!0)}}class qu extends Ci{_apply(l){$a(l,"orderByValue");const a=Gl(l._queryParams,ks);return as(a),new Ht(l._repo,l._path,a,!0)}}class Vc extends Ci{constructor(l,a){super(),this._value=l,this._key=a}_apply(l){if(oi("equalTo",this._value,l._path,!1),l._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(l._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Ta(this._value,this._key)._apply(new Md(this._value,this._key)._apply(l))}}function za(u,...l){let a=(0,N.m9)(u);for(const p of l)a=p._apply(a);return a}(function(u){(0,N.hu)(!ca,"__referenceConstructor has already been defined"),ca=u})(Qi),function(u){(0,N.hu)(!Kl,"__referenceConstructor has already been defined"),Kl=u}(Qi);const Od={};function Qu(u,l,a,p,I){let k=p||u.options.databaseURL;void 0===k&&(u.options.projectId||ye("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),De("Using default host for project ",u.options.projectId),k=`${u.options.projectId}-default-rtdb.firebaseio.com`);let ke,Je,K=wo(k,I),_e=K.repoInfo;"undefined"!=typeof process&&(Je=process.env.FIREBASE_DATABASE_EMULATOR_HOST),Je?(ke=!0,k=`http://${Je}?ns=${_e.namespace}`,K=wo(k,I),_e=K.repoInfo):ke=!K.repoInfo.secure;const kt=I&&ke?new mr(mr.OWNER):new Br(u.name,u.options,l);bd("Invalid Firebase Database URL",K),Sn(K.path)||ye("Database URL must point to the root of a Firebase Database (not including a child path).");const Ot=function(u,l,a,p){let I=Od[l.name];I||(I={},Od[l.name]=I);let k=I[u.toURLString()];return k&&ye("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),k=new hu(u,false,a,p),I[u.toURLString()]=k,k}(_e,u,kt,new Rr(u.name,a));return new Pp(Ot,u)}class Pp{constructor(l,a){this._repoInternal=l,this.app=a,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function(u,l,a){if(u.stats_=Ri(u.repoInfo_),u.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)u.server_=new Wo(u.repoInfo_,(p,I,k,K)=>{Id(u,p,I,k,K)},u.authTokenProvider_,u.appCheckProvider_),setTimeout(()=>Dd(u,!0),0);else{if(null!=a){if("object"!=typeof a)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,N.Pz)(a)}catch(p){throw new Error("Invalid authOverride provided: "+p)}}u.persistentConnection_=new re(u.repoInfo_,l,(p,I,k,K)=>{Id(u,p,I,k,K)},p=>{Dd(u,p)},p=>{!function(u,l){Sr(l,(a,p)=>{zu(u,a,p)})}(u,p)},u.authTokenProvider_,u.appCheckProvider_,a),u.server_=u.persistentConnection_}u.authTokenProvider_.addTokenChangeListener(p=>{u.server_.refreshAuthToken(p)}),u.appCheckProvider_.addTokenChangeListener(p=>{u.server_.refreshAppCheckToken(p.token)}),u.statsReporter_=function(u,l){const a=u.toString();return qr[a]||(qr[a]=l()),qr[a]}(u.repoInfo_,()=>new Jt(u.stats_,u.server_)),u.infoData_=new Bi,u.infoSyncTree_=new Uu({startListening:(p,I,k,K)=>{let _e=[];const ke=u.infoData_.getNode(p._path);return ke.isEmpty()||(_e=wc(u.infoSyncTree_,p._path,ke),setTimeout(()=>{K("ok")},0)),_e},stopListening:()=>{}}),zu(u,"connected",!1),u.serverSyncTree_=new Uu({startListening:(p,I,k,K)=>(u.server_.listen(p,k,I,(_e,ke)=>{const Je=K(_e,ke);Ui(u.eventQueue_,p._path,Je)}),[]),stopListening:(p,I)=>{u.server_.unlisten(p,I)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Qi(this._repo,S())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function(u,l){const a=Od[l];(!a||a[u.key]!==u)&&ye(`Database ${l}(${u.repoInfo_}) has already been deleted.`),Jl(u),delete a[u.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(l){null===this._rootInternal&&ye("Cannot call "+l+" on a deleted database.")}}function xf(u,l){Qe(u,l)}class Kh{constructor(l,a){this.committed=l,this.snapshot=a}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}re.prototype.simpleListen=function(u,l){this.sendRequest("q",{p:u},l)},re.prototype.echo=function(u,l){this.sendRequest("echo",{d:u},l)},sn(be.SDK_VERSION),(0,be._registerComponent)(new J.wA("database",(l,{instanceIdentifier:a})=>Qu(l.getProvider("app").getImmediate(),l.getProvider("auth-internal"),l.getProvider("app-check-internal"),a),"PUBLIC").setMultipleInstances(!0)),(0,be.registerVersion)(at,"0.12.4",void 0),(0,be.registerVersion)(at,"0.12.4","esm2017");const Pd=new Ie.Yd("@firebase/database-compat"),Ma=function(u){Pd.warn("FIREBASE WARNING: "+u)};class mh{constructor(l){this._delegate=l}cancel(l){(0,N.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,N.Wj)("OnDisconnect.cancel","onComplete",l,!0);const a=this._delegate.cancel();return l&&a.then(()=>l(null),p=>l(p)),a}remove(l){(0,N.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,N.Wj)("OnDisconnect.remove","onComplete",l,!0);const a=this._delegate.remove();return l&&a.then(()=>l(null),p=>l(p)),a}set(l,a){(0,N.Dv)("OnDisconnect.set",1,2,arguments.length),(0,N.Wj)("OnDisconnect.set","onComplete",a,!0);const p=this._delegate.set(l);return a&&p.then(()=>a(null),I=>a(I)),p}setWithPriority(l,a,p){(0,N.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,N.Wj)("OnDisconnect.setWithPriority","onComplete",p,!0);const I=this._delegate.setWithPriority(l,a);return p&&I.then(()=>p(null),k=>p(k)),I}update(l,a){if((0,N.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(l)){const I={};for(let k=0;k<l.length;++k)I[""+k]=l[k];l=I,Ma("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,N.Wj)("OnDisconnect.update","onComplete",a,!0);const p=this._delegate.update(l);return a&&p.then(()=>a(null),I=>a(I)),p}}class rc{constructor(l,a){this.committed=l,this.snapshot=a}toJSON(){return(0,N.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class ol{constructor(l,a){this._database=l,this._delegate=a}val(){return(0,N.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,N.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,N.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,N.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(l){return(0,N.Dv)("DataSnapshot.child",0,1,arguments.length),l=String(l),uu("DataSnapshot.child","path",l,!1),new ol(this._database,this._delegate.child(l))}hasChild(l){return(0,N.Dv)("DataSnapshot.hasChild",1,1,arguments.length),uu("DataSnapshot.hasChild","path",l,!1),this._delegate.hasChild(l)}getPriority(){return(0,N.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(l){return(0,N.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,N.Wj)("DataSnapshot.forEach","action",l,!1),this._delegate.forEach(a=>l(new ol(this._database,a)))}hasChildren(){return(0,N.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,N.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,N.Dv)("DataSnapshot.ref",0,0,arguments.length),new mo(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Oo{constructor(l,a){this.database=l,this._delegate=a}on(l,a,p,I){var k;(0,N.Dv)("Query.on",2,4,arguments.length),(0,N.Wj)("Query.on","callback",a,!1);const K=Oo.getCancelAndContextArgs_("Query.on",p,I),_e=(Je,kt)=>{a.call(K.context,new ol(this.database,Je),kt)};_e.userCallback=a,_e.context=K.context;const ke=null===(k=K.cancel)||void 0===k?void 0:k.bind(K.context);switch(l){case"value":return Tt(this._delegate,_e,ke),a;case"child_added":return gn(this._delegate,_e,ke),a;case"child_removed":return Zn(this._delegate,_e,ke),a;case"child_changed":return ln(this._delegate,_e,ke),a;case"child_moved":return jn(this._delegate,_e,ke),a;default:throw new Error((0,N.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(l,a,p){if((0,N.Dv)("Query.off",0,3,arguments.length),function(u,l,a){if(void 0!==l)switch(l){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,N.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,l),(0,N.Wj)("Query.off","callback",a,!0),(0,N.lb)("Query.off","context",p,!0),a){const I=()=>{};I.userCallback=a,I.context=p,Lr(this._delegate,l,I)}else Lr(this._delegate,l)}get(){return A(this._delegate).then(l=>new ol(this.database,l))}once(l,a,p,I){(0,N.Dv)("Query.once",1,4,arguments.length),(0,N.Wj)("Query.once","callback",a,!0);const k=Oo.getCancelAndContextArgs_("Query.once",p,I),K=new N.BH,_e=(Je,kt)=>{const Ot=new ol(this.database,Je);a&&a.call(k.context,Ot,kt),K.resolve(Ot)};_e.userCallback=a,_e.context=k.context;const ke=Je=>{k.cancel&&k.cancel.call(k.context,Je),K.reject(Je)};switch(l){case"value":Tt(this._delegate,_e,ke,{onlyOnce:!0});break;case"child_added":gn(this._delegate,_e,ke,{onlyOnce:!0});break;case"child_removed":Zn(this._delegate,_e,ke,{onlyOnce:!0});break;case"child_changed":ln(this._delegate,_e,ke,{onlyOnce:!0});break;case"child_moved":jn(this._delegate,_e,ke,{onlyOnce:!0});break;default:throw new Error((0,N.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return K.promise}limitToFirst(l){return(0,N.Dv)("Query.limitToFirst",1,1,arguments.length),new Oo(this.database,za(this._delegate,function(u){if("number"!=typeof u||Math.floor(u)!==u||u<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new bu(u)}(l)))}limitToLast(l){return(0,N.Dv)("Query.limitToLast",1,1,arguments.length),new Oo(this.database,za(this._delegate,function(u){if("number"!=typeof u||Math.floor(u)!==u||u<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new wu(u)}(l)))}orderByChild(l){return(0,N.Dv)("Query.orderByChild",1,1,arguments.length),new Oo(this.database,za(this._delegate,function(u){if("$key"===u)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===u)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===u)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return uu("orderByChild","path",u,!1),new Aa(u)}(l)))}orderByKey(){return(0,N.Dv)("Query.orderByKey",0,0,arguments.length),new Oo(this.database,za(this._delegate,new jh))}orderByPriority(){return(0,N.Dv)("Query.orderByPriority",0,0,arguments.length),new Oo(this.database,za(this._delegate,new Af))}orderByValue(){return(0,N.Dv)("Query.orderByValue",0,0,arguments.length),new Oo(this.database,za(this._delegate,new qu))}startAt(l=null,a){return(0,N.Dv)("Query.startAt",0,2,arguments.length),new Oo(this.database,za(this._delegate,function(u=null,l){return Ac("startAt","key",l,!0),new Md(u,l)}(l,a)))}startAfter(l=null,a){return(0,N.Dv)("Query.startAfter",0,2,arguments.length),new Oo(this.database,za(this._delegate,function(u,l){return Ac("startAfter","key",l,!0),new xd(u,l)}(l,a)))}endAt(l=null,a){return(0,N.Dv)("Query.endAt",0,2,arguments.length),new Oo(this.database,za(this._delegate,function(u,l){return Ac("endAt","key",l,!0),new Ta(u,l)}(l,a)))}endBefore(l=null,a){return(0,N.Dv)("Query.endBefore",0,2,arguments.length),new Oo(this.database,za(this._delegate,function(u,l){return Ac("endBefore","key",l,!0),new Zu(u,l)}(l,a)))}equalTo(l,a){return(0,N.Dv)("Query.equalTo",1,2,arguments.length),new Oo(this.database,za(this._delegate,function(u,l){return Ac("equalTo","key",l,!0),new Vc(u,l)}(l,a)))}toString(){return(0,N.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,N.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(l){if((0,N.Dv)("Query.isEqual",1,1,arguments.length),!(l instanceof Oo))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(l._delegate)}static getCancelAndContextArgs_(l,a,p){const I={cancel:void 0,context:void 0};if(a&&p)I.cancel=a,(0,N.Wj)(l,"cancel",I.cancel,!0),I.context=p,(0,N.lb)(l,"context",I.context,!0);else if(a)if("object"==typeof a&&null!==a)I.context=a;else{if("function"!=typeof a)throw new Error((0,N.gK)(l,"cancelOrContext")+" must either be a cancel callback or a context object.");I.cancel=a}return I}get ref(){return new mo(this.database,new Qi(this._delegate._repo,this._delegate._path))}}class mo extends Oo{constructor(l,a){super(l,new Ht(a._repo,a._path,new hl,!1)),this.database=l,this._delegate=a}getKey(){return(0,N.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(l){return(0,N.Dv)("Reference.child",1,1,arguments.length),"number"==typeof l&&(l=String(l)),new mo(this.database,il(this._delegate,l))}getParent(){(0,N.Dv)("Reference.parent",0,0,arguments.length);const l=this._delegate.parent;return l?new mo(this.database,l):null}getRoot(){return(0,N.Dv)("Reference.root",0,0,arguments.length),new mo(this.database,this._delegate.root)}set(l,a){(0,N.Dv)("Reference.set",1,2,arguments.length),(0,N.Wj)("Reference.set","onComplete",a,!0);const p=vu(this._delegate,l);return a&&p.then(()=>a(null),I=>a(I)),p}update(l,a){if((0,N.Dv)("Reference.update",1,2,arguments.length),Array.isArray(l)){const I={};for(let k=0;k<l.length;++k)I[""+k]=l[k];l=I,Ma("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Yo("Reference.update",this._delegate._path),(0,N.Wj)("Reference.update","onComplete",a,!0);const p=m(this._delegate,l);return a&&p.then(()=>a(null),I=>a(I)),p}setWithPriority(l,a,p){(0,N.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,N.Wj)("Reference.setWithPriority","onComplete",p,!0);const I=function(u,l,a){if(Yo("setWithPriority",u._path),oi("setWithPriority",l,u._path,!1),Ha("setWithPriority",a,!1),".length"===u.key||".keys"===u.key)throw"setWithPriority failed: "+u.key+" is a read-only object.";const p=new N.BH;return pu(u._repo,u._path,l,a,p.wrapCallback(()=>{})),p.promise}(this._delegate,l,a);return p&&I.then(()=>p(null),k=>p(k)),I}remove(l){(0,N.Dv)("Reference.remove",0,1,arguments.length),(0,N.Wj)("Reference.remove","onComplete",l,!0);const a=function(u){return Yo("remove",u._path),vu(u,null)}(this._delegate);return l&&a.then(()=>l(null),p=>l(p)),a}transaction(l,a,p){(0,N.Dv)("Reference.transaction",1,3,arguments.length),(0,N.Wj)("Reference.transaction","transactionUpdate",l,!1),(0,N.Wj)("Reference.transaction","onComplete",a,!0),function(u,l,a,p){if(void 0!==a&&"boolean"!=typeof a)throw new Error((0,N.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,p);const I=function(u,l,a){var p;if(u=(0,N.m9)(u),Yo("Reference.transaction",u._path),".length"===u.key||".keys"===u.key)throw"Reference.transaction failed: "+u.key+" is a read-only object.";const I=null===(p=null==a?void 0:a.applyLocally)||void 0===p||p,k=new N.BH,_e=Tt(u,()=>{});return function(u,l,a,p,I,k){Oc(u,"transaction on "+l);const K={path:l,update:a,onComplete:p,status:null,order:xt(),applyLocally:k,retryCount:0,unwatcher:I,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},_e=gu(u,l,void 0);K.currentInputSnapshot=_e;const ke=K.update(_e.val());if(void 0===ke)K.unwatcher(),K.currentOutputSnapshotRaw=null,K.currentOutputSnapshotResolved=null,K.onComplete&&K.onComplete(null,!1,K.currentInputSnapshot);else{cu("transaction failed: Data returned ",ke,K.path),K.status=0;const Je=yd(u.transactionQueueTree_,l),kt=bo(Je)||[];let Ot;kt.push(K),ch(Je,kt),"object"==typeof ke&&null!==ke&&(0,N.r3)(ke,".priority")?(Ot=(0,N.DV)(ke,".priority"),(0,N.hu)(ha(Ot),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):Ot=(Ic(u.serverSyncTree_,l)||vn.EMPTY_NODE).getPriority().val();const Xt=xl(u),Hn=pr(ke,Ot),cr=Gs(Hn,_e,Xt);K.currentOutputSnapshotRaw=Hn,K.currentOutputSnapshotResolved=cr,K.currentWriteId=fu(u);const Ii=ba(u.serverSyncTree_,l,cr,K.currentWriteId,K.applyLocally);Ui(u.eventQueue_,l,Ii),po(u,u.transactionQueueTree_)}}(u._repo,u._path,l,(ke,Je,kt)=>{let Ot=null;ke?k.reject(ke):(Ot=new Xs(kt,new Qi(u._repo,u._path),Fr),k.resolve(new Kh(Je,Ot)))},_e,I),k.promise}(this._delegate,l,{applyLocally:p}).then(k=>new rc(k.committed,new ol(this.database,k.snapshot)));return a&&I.then(k=>a(null,k.committed,k.snapshot),k=>a(k,!1,null)),I}setPriority(l,a){(0,N.Dv)("Reference.setPriority",1,2,arguments.length),(0,N.Wj)("Reference.setPriority","onComplete",a,!0);const p=function(u,l){u=(0,N.m9)(u),Yo("setPriority",u._path),Ha("setPriority",l,!1);const a=new N.BH;return pu(u._repo,Gn(u._path,".priority"),l,null,a.wrapCallback(()=>{})),a.promise}(this._delegate,l);return a&&p.then(()=>a(null),I=>a(I)),p}push(l,a){(0,N.Dv)("Reference.push",0,2,arguments.length),(0,N.Wj)("Reference.push","onComplete",a,!0);const p=function(u,l){u=(0,N.m9)(u),Yo("push",u._path),oi("push",l,u._path,!0);const a=ql(u._repo),p=oa(a),I=il(u,p),k=il(u,p);let K;return K=null!=l?vu(k,l).then(()=>k):Promise.resolve(k),I.then=K.then.bind(K),I.catch=K.then.bind(K,void 0),I}(this._delegate,l),I=p.then(K=>new mo(this.database,K));a&&I.then(()=>a(null),K=>a(K));const k=new mo(this.database,p);return k.then=I.then.bind(I),k.catch=I.catch.bind(I,void 0),k}onDisconnect(){return Yo("Reference.onDisconnect",this._delegate._path),new mh(new Nc(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class ic{constructor(l,a){this._delegate=l,this.app=a,this.INTERNAL={delete:()=>this._delegate._delete()}}useEmulator(l,a,p={}){!function(u,l,a,p={}){(u=(0,N.m9)(u))._checkNotDeleted("useEmulator"),u._instanceStarted&&ye("Cannot call useEmulator() after instance has already been initialized.");const I=u._repoInternal;let k;if(I.repoInfo_.nodeAdmin)p.mockUserToken&&ye('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),k=new mr(mr.OWNER);else if(p.mockUserToken){const K="string"==typeof p.mockUserToken?p.mockUserToken:(0,N.Sg)(p.mockUserToken,u.app.options.projectId);k=new mr(K)}!function(u,l,a,p){u.repoInfo_=new tr(`${l}:${a}`,!1,u.repoInfo_.namespace,u.repoInfo_.webSocketOnly,u.repoInfo_.nodeAdmin,u.repoInfo_.persistenceKey,u.repoInfo_.includeNamespaceInQueryParams),p&&(u.authTokenProvider_=p)}(I,l,a,k)}(this._delegate,l,a,p)}ref(l){if((0,N.Dv)("database.ref",0,1,arguments.length),l instanceof mo){const a=Wa(this._delegate,l.toString());return new mo(this,a)}{const a=yu(this._delegate,l);return new mo(this,a)}}refFromURL(l){(0,N.Dv)("database.refFromURL",1,1,arguments.length);const p=Wa(this._delegate,l);return new mo(this,p)}goOffline(){return(0,N.Dv)("database.goOffline",0,0,arguments.length),function(u){(u=(0,N.m9)(u))._checkNotDeleted("goOffline"),Jl(u._repo)}(this._delegate)}goOnline(){return(0,N.Dv)("database.goOnline",0,0,arguments.length),function(u){(u=(0,N.m9)(u))._checkNotDeleted("goOnline"),function(u){u.persistentConnection_&&u.persistentConnection_.resume(du)}(u._repo)}(this._delegate)}}ic.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:u=>function(u){return{".sv":{increment:u}}}(u)};var qh=Object.freeze({__proto__:null,initStandalone:function({app:u,url:l,version:a,customAuthImpl:p,namespace:I,nodeAdmin:k=!1}){sn(a);const K=new J.zt("auth-internal",new J.H0("database-standalone"));return K.setComponent(new J.wA("auth-internal",()=>p,"PRIVATE")),{instance:new ic(Qu(u,K,void 0,l,k),u),namespace:I}}});const kd=ic.ServerValue;!function(u){u.INTERNAL.registerComponent(new J.wA("database-compat",(l,{instanceIdentifier:a})=>{const p=l.getProvider("app-compat").getImmediate(),I=l.getProvider("database").getImmediate({identifier:a});return new ic(I,p)},"PUBLIC").setServiceProps({Reference:mo,Query:Oo,Database:ic,DataSnapshot:ol,enableLogging:xf,INTERNAL:qh,ServerValue:kd}).setMultipleInstances(!0)),u.registerVersion("@firebase/database-compat","0.1.4")}(L.Z);var kl=x(7451),Fd=x(440),Qh=x(127);function yh(u){return null==u}function Pf(u){return"function"==typeof u.set}function vh(u,l){return Pf(l)?l:u.ref(l)}function _o(u,l){if(function(u){return"string"==typeof u}(u))return l.stringCase();if(Pf(u))return l.firebaseCase();if(function(u){return"function"==typeof u.exportVal}(u))return l.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof u)}function Eh(u,l,a="on",p=kn.z){return new gt.y(I=>{let k=null;return k=u[a](l,(K,_e)=>{p.schedule(()=>{I.next({snapshot:K,prevKey:_e})}),"once"===a&&p.schedule(()=>I.complete())},K=>{p.schedule(()=>I.error(K))}),"on"===a?{unsubscribe(){null!=k&&u.off(l,k)}}:{unsubscribe(){}}}).pipe((0,Ee.U)(I=>{const{snapshot:k,prevKey:K}=I;let _e=null;return k.exists()&&(_e=k.key),{type:l,payload:k,prevKey:K,key:_e}}),(0,mt.B)())}function Vp(u,l){const a=u.length;for(let p=0;p<a;p++)if(u[p].payload.key===l)return p;return-1}function Nf(u,l){const{payload:a,prevKey:p,key:I}=l,k=Vp(u,I),K=function(u,l){if(yh(l))return 0;{const a=Vp(u,l);return-1===a?u.length:a+1}}(u,p);switch(l.type){case"value":if(l.payload&&l.payload.exists()){let _e=null;l.payload.forEach(ke=>{const Je={payload:ke,type:"value",prevKey:_e,key:ke.key};return _e=ke.key,u=[...u,Je],!1})}return u;case"child_added":if(k>-1){const _e=u[k-1];(_e&&_e.key||null)!==p&&(u=u.filter(ke=>ke.payload.key!==a.key)).splice(K,0,l)}else{if(null==p)return[l,...u];(u=u.slice()).splice(K,0,l)}return u;case"child_removed":return u.filter(_e=>_e.payload.key!==a.key);case"child_changed":return u.map(_e=>_e.payload.key===I?l:_e);case"child_moved":if(k>-1){const _e=u.splice(k,1)[0];return(u=u.slice()).splice(K,0,_e),u}return u;default:return u}}function Ff(u){return(yh(u)||0===u.length)&&(u=["child_added","child_removed","child_changed","child_moved"]),u}function ed(u,l,a){return function(u,l,a){return Eh(u,"value","once",a).pipe((0,Nt.w)(p=>{const I=[(0,Ye.of)(p)];return l.forEach(k=>I.push(Eh(u,k,"on",a))),(0,Ct.T)(...I).pipe((0,Mt.R)(Nf,[]))}),(0,rn.x)())}(u,l=Ff(l),a)}function Lf(u,l,a){const p=(l=Ff(l)).map(I=>Eh(u,I,"on",a));return(0,Ct.T)(...p)}function Ld(u,l){return function(p,I){return _o(p,{stringCase:()=>u.child(p)[l](I),firebaseCase:()=>p[l](I),snapshotCase:()=>p.ref[l](I)})}}function Xh(u){return function(a){return a?_o(a,{stringCase:()=>u.child(a).remove(),firebaseCase:()=>a.remove(),snapshotCase:()=>a.ref.remove()}):u.remove()}}function ef(u,l){return function(){return Eh(u,"value","on",l)}}const jp=new E.OlP("angularfire2.realtimeDatabaseURL"),jc=new E.OlP("angularfire2.database.use-emulator");let bh=(()=>{class u{constructor(a,p,I,k,K,_e,ke,Je,kt,Ot,Xt,Hn,cr,Ii,eo){this.schedulers=_e;const Vl=ke,Ul=(0,Wt.on)(a,K,p);Je&&(0,kl.nw)(Ul,K,kt,Xt,Hn,cr,Ot,Ii),this.database=(0,Wt.cc)(`${Ul.name}.database.${I}`,"AngularFireDatabase",Ul.name,()=>{const ac=K.runOutsideAngular(()=>Ul.database(I||void 0));return Vl&&ac.useEmulator(...Vl),ac},[Vl])}list(a,p){const I=this.schedulers.ngZone.runOutsideAngular(()=>vh(this.database,a));let k=I;return p&&(k=p(I)),function(u,l){const a=l.schedulers.outsideAngular,p=l.schedulers.ngZone.run(()=>u.ref);return{query:u,update:Ld(p,"update"),set:Ld(p,"set"),push:I=>p.push(I),remove:Xh(p),snapshotChanges:I=>ed(u,I,a).pipe(hr.iC),stateChanges:I=>Lf(u,I,a).pipe(hr.iC),auditTrail:I=>function(u,l,a){return function(u,l,a){return function(u,l){return Eh(u,"value","on",l).pipe((0,Ee.U)(a=>{let p;return a.payload.forEach(I=>(p=I.key,!1)),{data:a,lastKeyToLoad:p}}))}(u,a).pipe(function(...u){return l=>{let a;return"function"==typeof u[u.length-1]&&(a=u.pop()),l.lift(new Rt(u,a))}}(l),(0,Ee.U)(([I,k])=>{const K=I.lastKeyToLoad,_e=k.map(ke=>ke.key);return{actions:k,lastKeyToLoad:K,loadedKeys:_e}}),function(u){return l=>l.lift(new Yn(u))}(I=>-1===I.loadedKeys.indexOf(I.lastKeyToLoad)),(0,Ee.U)(I=>I.actions))}(u,Lf(u,l).pipe((0,Mt.R)((I,k)=>[...I,k],[])),a)}(u,I,a).pipe(hr.iC),valueChanges:(I,k)=>ed(u,I,a).pipe((0,Ee.U)(_e=>_e.map(ke=>k&&k.idField?Object.assign(Object.assign({},ke.payload.val()),{[k.idField]:ke.key}):ke.payload.val())),hr.iC)}}(k,this)}object(a){return function(u,l){return{query:u,snapshotChanges:()=>ef(u,l.schedulers.outsideAngular)().pipe(hr.iC),update:a=>u.ref.update(a),set:a=>u.ref.set(a),remove:()=>u.ref.remove(),valueChanges:()=>ef(u,l.schedulers.outsideAngular)().pipe(hr.iC,(0,Ee.U)(p=>p.payload.exists()?p.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>vh(this.database,a)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return u.\u0275fac=function(a){return new(a||u)(E.LFG(Wt.Dh),E.LFG(Wt.xv,8),E.LFG(jp,8),E.LFG(E.Lbi),E.LFG(E.R0b),E.LFG(hr.HU),E.LFG(jc,8),E.LFG(kl.zQ,8),E.LFG(kl.Qv,8),E.LFG(kl.L6,8),E.LFG(kl._Q,8),E.LFG(kl.rT,8),E.LFG(kl.lh,8),E.LFG(kl.f7,8),E.LFG(Fd.nm,8))},u.\u0275prov=E.Yz7({token:u,factory:u.\u0275fac,providedIn:"any"}),u})(),Hp=(()=>{class u{constructor(){Qh.Z.registerVersion("angularfire",hr.q4.full,"rtdb-compat")}}return u.\u0275fac=function(a){return new(a||u)},u.\u0275mod=E.oAB({type:u}),u.\u0275inj=E.cJS({providers:[bh]}),u})();var jf=x(3586);x(4865),x(3887);let Wf=(()=>{class u{}return u.\u0275fac=function(a){return new(a||u)},u.\u0275mod=E.oAB({type:u}),u.\u0275inj=E.cJS({imports:[[ie.uc,ie.BQ],ie.uc,ie.BQ]}),u})(),lf=(()=>{class u{}return u.\u0275fac=function(a){return new(a||u)},u.\u0275mod=E.oAB({type:u}),u.\u0275inj=E.cJS({imports:[[ie.BQ],ie.BQ]}),u})();var cf=x(5205),Th=x(5278),nd=x(3482);let oc=(()=>{class u{}return u.\u0275fac=function(a){return new(a||u)},u.\u0275mod=E.oAB({type:u,bootstrap:[jt]}),u.\u0275inj=E.cJS({providers:[],imports:[[g.b2,qe,tn.PW,qt.Ps,Wt.hO.initializeApp(dn),Hp,Q.u5,Nn,Qn.m,ie.si,jf.U8,Wf,lf,cf.Tx,He.ot,Th.xu,nd.p9]]}),u})();(0,E.G48)(),g.q6().bootstrapModule(oc).catch(u=>console.error(u))},5867:($t,$e,x)=>{"use strict";x.d($e,{Mq:()=>g.getApp,C6:()=>g.getApps});var g=x(9681);(0,g.registerVersion)("firebase","9.6.1","app")},127:($t,$e,x)=>{"use strict";x.d($e,{Z:()=>g.Z});var g=x(3942);g.Z.registerVersion("firebase","9.6.1","app-compat")},9259:($t,$e,x)=>{"use strict";x.r($e);var g=x(5861),E=x(3942),B=x(2090),ne=x(9681);function X(b,f){var m={};for(var A in b)Object.prototype.hasOwnProperty.call(b,A)&&f.indexOf(A)<0&&(m[A]=b[A]);if(null!=b&&"function"==typeof Object.getOwnPropertySymbols){var Y=0;for(A=Object.getOwnPropertySymbols(b);Y<A.length;Y++)f.indexOf(A[Y])<0&&Object.prototype.propertyIsEnumerable.call(b,A[Y])&&(m[A[Y]]=b[A[Y]])}return m}var tn=x(1877),qt=x(4859);const gt=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Ye=function(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ct=new B.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),mt=new tn.Yd("@firebase/auth");function Nt(b,...f){mt.logLevel<=tn.in.ERROR&&mt.error(`Auth (${ne.SDK_VERSION}): ${b}`,...f)}function Mt(b,...f){throw mn(b,...f)}function rn(b,...f){return mn(b,...f)}function En(b,f,m){const A=Object.assign(Object.assign({},Ye()),{[f]:m});return new B.LL("auth","Firebase",A).create(f,{appName:b.name})}function bn(b,f,m){if(!(f instanceof m))throw m.name!==f.constructor.name&&Mt(b,"argument-error"),En(b,"argument-error",`Type of ${f.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function mn(b,...f){if("string"!=typeof b){const m=f[0],A=[...f.slice(1)];return A[0]&&(A[0].appName=b.name),b._errorFactory.create(m,...A)}return Ct.create(b,...f)}function Rt(b,f,...m){if(!b)throw mn(f,...m)}function br(b){const f="INTERNAL ASSERTION FAILED: "+b;throw Nt(f),new Error(f)}function gr(b,f){b||br(f)}const Qt=new Map;function Yn(b){gr(b instanceof Function,"Expected a class definition");let f=Qt.get(b);return f?(gr(f instanceof b,"Instance stored in cache mismatched with class"),f):(f=new b,Qt.set(b,f),f)}function Re(){var b;return"undefined"!=typeof self&&(null===(b=self.location)||void 0===b?void 0:b.href)||""}function L(){return"http:"===J()||"https:"===J()}function J(){var b;return"undefined"!=typeof self&&(null===(b=self.location)||void 0===b?void 0:b.protocol)||null}class N{constructor(f,m){this.shortDelay=f,this.longDelay=m,gr(m>f,"Short delay should be less than long delay!"),this.isMobile=(0,B.uI)()||(0,B.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(L()||(0,B.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function Ie(b,f){gr(b.emulator,"Emulator should always be set here");const{url:m}=b.emulator;return f?`${m}${f.startsWith("/")?f.slice(1):f}`:m}class at{static initialize(f,m,A){this.fetchImpl=f,m&&(this.headersImpl=m),A&&(this.responseImpl=A)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void br("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void br("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void br("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Pt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},zt=new N(3e4,6e4);function sn(b,f){return b.tenantId&&!f.tenantId?Object.assign(Object.assign({},f),{tenantId:b.tenantId}):f}function fn(b,f,m,A){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,g.Z)(function*(b,f,m,A,Y={}){return Fn(b,Y,(0,g.Z)(function*(){let le={},tt={};A&&("GET"===f?tt=A:le={body:JSON.stringify(A)});const Tt=(0,B.xO)(Object.assign({key:b.config.apiKey},tt)).slice(1),gn=yield b._getAdditionalHeaders();return gn["Content-Type"]="application/json",b.languageCode&&(gn["X-Firebase-Locale"]=b.languageCode),at.fetch()(xt(b,b.config.apiHost,m,Tt),Object.assign({method:f,headers:gn,referrerPolicy:"no-referrer"},le))}))})).apply(this,arguments)}function Fn(b,f,m){return Fe.apply(this,arguments)}function Fe(){return(Fe=(0,g.Z)(function*(b,f,m){b._canInitEmulator=!1;const A=Object.assign(Object.assign({},Pt),f);try{const Y=new pt(b),le=yield Promise.race([m(),Y.promise]);Y.clearNetworkTimeout();const tt=yield le.json();if("needConfirmation"in tt)throw pn(b,"account-exists-with-different-credential",tt);if(le.ok&&!("errorMessage"in tt))return tt;{const Tt=le.ok?tt.errorMessage:tt.error.message,[gn,ln]=Tt.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===gn)throw pn(b,"credential-already-in-use",tt);if("EMAIL_EXISTS"===gn)throw pn(b,"email-already-in-use",tt);const jn=A[gn]||gn.toLowerCase().replace(/[_\s]+/g,"-");if(ln)throw En(b,jn,ln);Mt(b,jn)}}catch(Y){if(Y instanceof B.ZR)throw Y;Mt(b,"network-request-failed")}})).apply(this,arguments)}function Le(b,f,m,A){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,g.Z)(function*(b,f,m,A,Y={}){const le=yield fn(b,f,m,A,Y);return"mfaPendingCredential"in le&&Mt(b,"multi-factor-auth-required",{_serverResponse:le}),le})).apply(this,arguments)}function xt(b,f,m,A){const Y=`${f}${m}?${A}`;return b.config.emulator?Ie(b.config,Y):`${b.config.apiScheme}://${Y}`}class pt{constructor(f){this.auth=f,this.timer=null,this.promise=new Promise((m,A)=>{this.timer=setTimeout(()=>A(rn(this.auth,"timeout")),zt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function pn(b,f,m){const A={appName:b.name};m.email&&(A.email=m.email),m.phoneNumber&&(A.phoneNumber=m.phoneNumber);const Y=rn(b,f,A);return Y.customData._tokenResponse=m,Y}function it(){return(it=(0,g.Z)(function*(b,f){return fn(b,"POST","/v1/accounts:delete",f)})).apply(this,arguments)}function Qe(b,f){return De.apply(this,arguments)}function De(){return(De=(0,g.Z)(function*(b,f){return fn(b,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function ve(b,f){return Ce.apply(this,arguments)}function Ce(){return(Ce=(0,g.Z)(function*(b,f){return fn(b,"POST","/v1/accounts:lookup",f)})).apply(this,arguments)}function ye(b){if(b)try{const f=new Date(Number(b));if(!isNaN(f.getTime()))return f.toUTCString()}catch(f){}}function ze(){return(ze=(0,g.Z)(function*(b,f=!1){const m=(0,B.m9)(b),A=yield m.getIdToken(f),Y=Se(A);Rt(Y&&Y.exp&&Y.auth_time&&Y.iat,m.auth,"internal-error");const le="object"==typeof Y.firebase?Y.firebase:void 0,tt=null==le?void 0:le.sign_in_provider;return{claims:Y,token:A,authTime:ye(Ue(Y.auth_time)),issuedAtTime:ye(Ue(Y.iat)),expirationTime:ye(Ue(Y.exp)),signInProvider:tt||null,signInSecondFactor:(null==le?void 0:le.sign_in_second_factor)||null}})).apply(this,arguments)}function Ue(b){return 1e3*Number(b)}function Se(b){const[f,m,A]=b.split(".");if(void 0===f||void 0===m||void 0===A)return Nt("JWT malformed, contained fewer than 3 sections"),null;try{const Y=(0,B.tV)(m);return Y?JSON.parse(Y):(Nt("Failed to decode base64 JWT payload"),null)}catch(Y){return Nt("Caught error parsing JWT payload as JSON",Y),null}}function St(b,f){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,g.Z)(function*(b,f,m=!1){if(m)return f;try{return yield f}catch(A){throw A instanceof B.ZR&&Wn(A)&&b.auth.currentUser===b&&(yield b.auth.signOut()),A}})).apply(this,arguments)}function Wn({code:b}){return"auth/user-disabled"===b||"auth/user-token-expired"===b}class fr{constructor(f){this.user=f,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(f){var m;if(f){const A=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),A}{this.errorBackoff=3e4;const Y=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,Y)}}schedule(f=!1){var m=this;if(!this.isRunning)return;const A=this.getInterval(f);this.timerId=setTimeout((0,g.Z)(function*(){yield m.iteration()}),A)}iteration(){var f=this;return(0,g.Z)(function*(){try{yield f.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===m.code&&f.schedule(!0))}f.schedule()})()}}class Zr{constructor(f,m){this.createdAt=f,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=ye(this.lastLoginAt),this.creationTime=ye(this.createdAt)}_copy(f){this.createdAt=f.createdAt,this.lastLoginAt=f.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Sr(b){return si.apply(this,arguments)}function si(){return(si=(0,g.Z)(function*(b){var f;const m=b.auth,A=yield b.getIdToken(),Y=yield St(b,ve(m,{idToken:A}));Rt(null==Y?void 0:Y.users.length,m,"internal-error");const le=Y.users[0];b._notifyReloadListener(le);const tt=(null===(f=le.providerUserInfo)||void 0===f?void 0:f.length)?to(le.providerUserInfo):[],Tt=or(b.providerData,tt),jn=!!b.isAnonymous&&!(b.email&&le.passwordHash||(null==Tt?void 0:Tt.length)),Zn={uid:le.localId,displayName:le.displayName||null,photoURL:le.photoUrl||null,email:le.email||null,emailVerified:le.emailVerified||!1,phoneNumber:le.phoneNumber||null,tenantId:le.tenantId||null,providerData:Tt,metadata:new Zr(le.createdAt,le.lastLoginAt),isAnonymous:jn};Object.assign(b,Zn)})).apply(this,arguments)}function Mr(){return(Mr=(0,g.Z)(function*(b){const f=(0,B.m9)(b);yield Sr(f),yield f.auth._persistUserIfCurrent(f),f.auth._notifyListenersIfCurrent(f)})).apply(this,arguments)}function or(b,f){return[...b.filter(A=>!f.some(Y=>Y.providerId===A.providerId)),...f]}function to(b){return b.map(f=>{var{providerId:m}=f,A=X(f,["providerId"]);return{providerId:m,uid:A.rawId||"",displayName:A.displayName||null,email:A.email||null,phoneNumber:A.phoneNumber||null,photoURL:A.photoUrl||null}})}function yn(){return(yn=(0,g.Z)(function*(b,f){const m=yield Fn(b,{},(0,g.Z)(function*(){const A=(0,B.xO)({grant_type:"refresh_token",refresh_token:f}).slice(1),{tokenApiHost:Y,apiKey:le}=b.config,tt=xt(b,Y,"/v1/token",`key=${le}`),Tt=yield b._getAdditionalHeaders();return Tt["Content-Type"]="application/x-www-form-urlencoded",at.fetch()(tt,{method:"POST",headers:Tt,body:A})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class Kn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(f){Rt(f.idToken,"internal-error"),Rt(void 0!==f.idToken,"internal-error"),Rt(void 0!==f.refreshToken,"internal-error");const m="expiresIn"in f&&void 0!==f.expiresIn?Number(f.expiresIn):function(b){const f=Se(b);return Rt(f,"internal-error"),Rt(void 0!==f.exp,"internal-error"),Rt(void 0!==f.iat,"internal-error"),Number(f.exp)-Number(f.iat)}(f.idToken);this.updateTokensAndExpiration(f.idToken,f.refreshToken,m)}getToken(f,m=!1){var A=this;return(0,g.Z)(function*(){return Rt(!A.accessToken||A.refreshToken,f,"user-token-expired"),m||!A.accessToken||A.isExpired?A.refreshToken?(yield A.refresh(f,A.refreshToken),A.accessToken):null:A.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(f,m){var A=this;return(0,g.Z)(function*(){const{accessToken:Y,refreshToken:le,expiresIn:tt}=yield function(b,f){return yn.apply(this,arguments)}(f,m);A.updateTokensAndExpiration(Y,le,Number(tt))})()}updateTokensAndExpiration(f,m,A){this.refreshToken=m||null,this.accessToken=f||null,this.expirationTime=Date.now()+1e3*A}static fromJSON(f,m){const{refreshToken:A,accessToken:Y,expirationTime:le}=m,tt=new Kn;return A&&(Rt("string"==typeof A,"internal-error",{appName:f}),tt.refreshToken=A),Y&&(Rt("string"==typeof Y,"internal-error",{appName:f}),tt.accessToken=Y),le&&(Rt("number"==typeof le,"internal-error",{appName:f}),tt.expirationTime=le),tt}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(f){this.accessToken=f.accessToken,this.refreshToken=f.refreshToken,this.expirationTime=f.expirationTime}_clone(){return Object.assign(new Kn,this.toJSON())}_performRefresh(){return br("not implemented")}}function ur(b,f){Rt("string"==typeof b||void 0===b,"internal-error",{appName:f})}class Gr{constructor(f){var{uid:m,auth:A,stsTokenManager:Y}=f,le=X(f,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new fr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=A,this.stsTokenManager=Y,this.accessToken=Y.accessToken,this.displayName=le.displayName||null,this.email=le.email||null,this.emailVerified=le.emailVerified||!1,this.phoneNumber=le.phoneNumber||null,this.photoURL=le.photoURL||null,this.isAnonymous=le.isAnonymous||!1,this.tenantId=le.tenantId||null,this.metadata=new Zr(le.createdAt||void 0,le.lastLoginAt||void 0)}getIdToken(f){var m=this;return(0,g.Z)(function*(){const A=yield St(m,m.stsTokenManager.getToken(m.auth,f));return Rt(A,m.auth,"internal-error"),m.accessToken!==A&&(m.accessToken=A,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),A})()}getIdTokenResult(f){return function(b){return ze.apply(this,arguments)}(this,f)}reload(){return function(b){return Mr.apply(this,arguments)}(this)}_assign(f){this!==f&&(Rt(this.uid===f.uid,this.auth,"internal-error"),this.displayName=f.displayName,this.photoURL=f.photoURL,this.email=f.email,this.emailVerified=f.emailVerified,this.phoneNumber=f.phoneNumber,this.isAnonymous=f.isAnonymous,this.tenantId=f.tenantId,this.providerData=f.providerData.map(m=>Object.assign({},m)),this.metadata._copy(f.metadata),this.stsTokenManager._assign(f.stsTokenManager))}_clone(f){return new Gr(Object.assign(Object.assign({},this),{auth:f,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(f){Rt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=f,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(f){this.reloadListener?this.reloadListener(f):this.reloadUserInfo=f}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(f,m=!1){var A=this;return(0,g.Z)(function*(){let Y=!1;f.idToken&&f.idToken!==A.stsTokenManager.accessToken&&(A.stsTokenManager.updateFromServerResponse(f),Y=!0),m&&(yield Sr(A)),yield A.auth._persistUserIfCurrent(A),Y&&A.auth._notifyListenersIfCurrent(A)})()}delete(){var f=this;return(0,g.Z)(function*(){const m=yield f.getIdToken();return yield St(f,function(b,f){return it.apply(this,arguments)}(f.auth,{idToken:m})),f.stsTokenManager.clearRefreshToken(),f.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(f=>Object.assign({},f)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(f,m){var A,Y,le,tt,Tt,gn,ln,jn;const Zn=null!==(A=m.displayName)&&void 0!==A?A:void 0,Lr=null!==(Y=m.email)&&void 0!==Y?Y:void 0,Ci=null!==(le=m.phoneNumber)&&void 0!==le?le:void 0,Ta=null!==(tt=m.photoURL)&&void 0!==tt?tt:void 0,Sa=null!==(Tt=m.tenantId)&&void 0!==Tt?Tt:void 0,Zu=null!==(gn=m._redirectEventId)&&void 0!==gn?gn:void 0,Eu=null!==(ln=m.createdAt)&&void 0!==ln?ln:void 0,Md=null!==(jn=m.lastLoginAt)&&void 0!==jn?jn:void 0,{uid:ec,emailVerified:xd,isAnonymous:xo,providerData:bu,stsTokenManager:Fc}=m;Rt(ec&&Fc,f,"internal-error");const wu=Kn.fromJSON(this.name,Fc);Rt("string"==typeof ec,f,"internal-error"),ur(Zn,f.name),ur(Lr,f.name),Rt("boolean"==typeof xd,f,"internal-error"),Rt("boolean"==typeof xo,f,"internal-error"),ur(Ci,f.name),ur(Ta,f.name),ur(Sa,f.name),ur(Zu,f.name),ur(Eu,f.name),ur(Md,f.name);const Cu=new Gr({uid:ec,auth:f,email:Lr,emailVerified:xd,displayName:Zn,isAnonymous:xo,photoURL:Ta,phoneNumber:Ci,tenantId:Sa,stsTokenManager:wu,createdAt:Eu,lastLoginAt:Md});return bu&&Array.isArray(bu)&&(Cu.providerData=bu.map(Aa=>Object.assign({},Aa))),Zu&&(Cu._redirectEventId=Zu),Cu}static _fromIdTokenResponse(f,m,A=!1){return(0,g.Z)(function*(){const Y=new Kn;Y.updateFromServerResponse(m);const le=new Gr({uid:m.localId,auth:f,stsTokenManager:Y,isAnonymous:A});return yield Sr(le),le})()}}const Rr=(()=>{class b{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,g.Z)(function*(){return!0})()}_set(m,A){var Y=this;return(0,g.Z)(function*(){Y.storage[m]=A})()}_get(m){var A=this;return(0,g.Z)(function*(){const Y=A.storage[m];return void 0===Y?null:Y})()}_remove(m){var A=this;return(0,g.Z)(function*(){delete A.storage[m]})()}_addListener(m,A){}_removeListener(m,A){}}return b.type="NONE",b})();function Br(b,f,m){return`firebase:${b}:${f}:${m}`}class mr{constructor(f,m,A){this.persistence=f,this.auth=m,this.userKey=A;const{config:Y,name:le}=this.auth;this.fullUserKey=Br(this.userKey,Y.apiKey,le),this.fullPersistenceKey=Br("persistence",Y.apiKey,le),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(f){return this.persistence._set(this.fullUserKey,f.toJSON())}getCurrentUser(){var f=this;return(0,g.Z)(function*(){const m=yield f.persistence._get(f.fullUserKey);return m?Gr._fromJSON(f.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(f){var m=this;return(0,g.Z)(function*(){if(m.persistence===f)return;const A=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=f,A?m.setCurrentUser(A):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(f,m,A="authUser"){return(0,g.Z)(function*(){if(!m.length)return new mr(Yn(Rr),f,A);const Y=(yield Promise.all(m.map(function(){var ln=(0,g.Z)(function*(jn){if(yield jn._isAvailable())return jn});return function(jn){return ln.apply(this,arguments)}}()))).filter(ln=>ln);let le=Y[0]||Yn(Rr);const tt=Br(A,f.config.apiKey,f.name);let Tt=null;for(const ln of m)try{const jn=yield ln._get(tt);if(jn){const Zn=Gr._fromJSON(f,jn);ln!==le&&(Tt=Zn),le=ln;break}}catch(jn){}const gn=Y.filter(ln=>ln._shouldAllowMigration);return le._shouldAllowMigration&&gn.length?(le=gn[0],Tt&&(yield le._set(tt,Tt.toJSON())),yield Promise.all(m.map(function(){var ln=(0,g.Z)(function*(jn){if(jn!==le)try{yield jn._remove(tt)}catch(Zn){}});return function(jn){return ln.apply(this,arguments)}}())),new mr(le,f,A)):new mr(le,f,A)})()}}function Vr(b){const f=b.toLowerCase();if(f.includes("opera/")||f.includes("opr/")||f.includes("opios/"))return"Opera";if(Di(f))return"IEMobile";if(f.includes("msie")||f.includes("trident/"))return"IE";if(f.includes("edge/"))return"Edge";if(Cs(f))return"Firefox";if(f.includes("silk/"))return"Silk";if(gi(f))return"Blackberry";if(ci(f))return"Webos";if(er(f))return"Safari";if((f.includes("chrome/")||li(f))&&!f.includes("edge/"))return"Chrome";if(Ji(f))return"Android";{const A=b.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==A?void 0:A.length))return A[1]}return"Other"}function Cs(b=(0,B.z$)()){return/firefox\//i.test(b)}function er(b=(0,B.z$)()){const f=b.toLowerCase();return f.includes("safari/")&&!f.includes("chrome/")&&!f.includes("crios/")&&!f.includes("android")}function li(b=(0,B.z$)()){return/crios\//i.test(b)}function Di(b=(0,B.z$)()){return/iemobile/i.test(b)}function Ji(b=(0,B.z$)()){return/android/i.test(b)}function gi(b=(0,B.z$)()){return/blackberry/i.test(b)}function ci(b=(0,B.z$)()){return/webos/i.test(b)}function ni(b=(0,B.z$)()){return/iphone|ipad|ipod/i.test(b)}function Xi(b=(0,B.z$)()){return ni(b)||Ji(b)||ci(b)||gi(b)||/windows phone/i.test(b)||Di(b)}function Hi(b,f=[]){let m;switch(b){case"Browser":m=Vr((0,B.z$)());break;case"Worker":m=`${Vr((0,B.z$)())}-${b}`;break;default:m=b}const A=f.length?f.join(","):"FirebaseCore-web";return`${m}/JsCore/${ne.SDK_VERSION}/${A}`}class _i{constructor(f,m){this.app=f,this.config=m,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ri(this),this.idTokenSubscription=new Ri(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ct,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=f.name,this.clientVersion=m.sdkClientVersion}_initializeWithPersistence(f,m){var A=this;return m&&(this._popupRedirectResolver=Yn(m)),this._initializationPromise=this.queue((0,g.Z)(function*(){var Y,le;if(!A._deleted&&(A.persistenceManager=yield mr.create(A,f),!A._deleted)){if(null===(Y=A._popupRedirectResolver)||void 0===Y?void 0:Y._shouldInitProactively)try{yield A._popupRedirectResolver._initialize(A)}catch(tt){}yield A.initializeCurrentUser(m),A.lastNotifiedUid=(null===(le=A.currentUser)||void 0===le?void 0:le.uid)||null,!A._deleted&&(A._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var f=this;return(0,g.Z)(function*(){if(f._deleted)return;const m=yield f.assertedPersistence.getCurrentUser();if(f.currentUser||m){if(f.currentUser&&m&&f.currentUser.uid===m.uid)return f._currentUser._assign(m),void(yield f.currentUser.getIdToken());yield f._updateCurrentUser(m)}})()}initializeCurrentUser(f){var m=this;return(0,g.Z)(function*(){var A;let Y=yield m.assertedPersistence.getCurrentUser();if(f&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const le=null===(A=m.redirectUser)||void 0===A?void 0:A._redirectEventId,tt=null==Y?void 0:Y._redirectEventId,Tt=yield m.tryRedirectSignIn(f);(!le||le===tt)&&(null==Tt?void 0:Tt.user)&&(Y=Tt.user)}return Y?Y._redirectEventId?(Rt(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===Y._redirectEventId?m.directlySetCurrentUser(Y):m.reloadAndSetCurrentUserOrClear(Y)):m.reloadAndSetCurrentUserOrClear(Y):m.directlySetCurrentUser(null)})()}tryRedirectSignIn(f){var m=this;return(0,g.Z)(function*(){let A=null;try{A=yield m._popupRedirectResolver._completeRedirectFn(m,f,!0)}catch(Y){yield m._setRedirectUser(null)}return A})()}reloadAndSetCurrentUserOrClear(f){var m=this;return(0,g.Z)(function*(){try{yield Sr(f)}catch(A){if("auth/network-request-failed"!==A.code)return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(f)})()}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const b=navigator;return b.languages&&b.languages[0]||b.language||null}()}_delete(){var f=this;return(0,g.Z)(function*(){f._deleted=!0})()}updateCurrentUser(f){var m=this;return(0,g.Z)(function*(){const A=f?(0,B.m9)(f):null;return A&&Rt(A.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(A&&A._clone(m))})()}_updateCurrentUser(f){var m=this;return(0,g.Z)(function*(){if(!m._deleted)return f&&Rt(m.tenantId===f.tenantId,m,"tenant-id-mismatch"),m.queue((0,g.Z)(function*(){yield m.directlySetCurrentUser(f),m.notifyAuthListeners()}))})()}signOut(){var f=this;return(0,g.Z)(function*(){return(f.redirectPersistenceManager||f._popupRedirectResolver)&&(yield f._setRedirectUser(null)),f._updateCurrentUser(null)})()}setPersistence(f){var m=this;return this.queue((0,g.Z)(function*(){yield m.assertedPersistence.setPersistence(Yn(f))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(f){this._errorFactory=new B.LL("auth","Firebase",f())}onAuthStateChanged(f,m,A){return this.registerStateListener(this.authStateSubscription,f,m,A)}onIdTokenChanged(f,m,A){return this.registerStateListener(this.idTokenSubscription,f,m,A)}toJSON(){var f;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(f=this._currentUser)||void 0===f?void 0:f.toJSON()}}_setRedirectUser(f,m){var A=this;return(0,g.Z)(function*(){const Y=yield A.getOrInitRedirectPersistenceManager(m);return null===f?Y.removeCurrentUser():Y.setCurrentUser(f)})()}getOrInitRedirectPersistenceManager(f){var m=this;return(0,g.Z)(function*(){if(!m.redirectPersistenceManager){const A=f&&Yn(f)||m._popupRedirectResolver;Rt(A,m,"argument-error"),m.redirectPersistenceManager=yield mr.create(m,[Yn(A._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(f){var m=this;return(0,g.Z)(function*(){var A,Y;return m._isInitialized&&(yield m.queue((0,g.Z)(function*(){}))),(null===(A=m._currentUser)||void 0===A?void 0:A._redirectEventId)===f?m._currentUser:(null===(Y=m.redirectUser)||void 0===Y?void 0:Y._redirectEventId)===f?m.redirectUser:null})()}_persistUserIfCurrent(f){var m=this;return(0,g.Z)(function*(){if(f===m.currentUser)return m.queue((0,g.Z)(function*(){return m.directlySetCurrentUser(f)}))})()}_notifyListenersIfCurrent(f){f===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var f,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const A=null!==(m=null===(f=this.currentUser)||void 0===f?void 0:f.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==A&&(this.lastNotifiedUid=A,this.authStateSubscription.next(this.currentUser))}registerStateListener(f,m,A,Y){if(this._deleted)return()=>{};const le="function"==typeof m?m:m.next.bind(m),tt=this._isInitialized?Promise.resolve():this._initializationPromise;return Rt(tt,this,"internal-error"),tt.then(()=>le(this.currentUser)),"function"==typeof m?f.addObserver(m,A,Y):f.addObserver(m)}directlySetCurrentUser(f){var m=this;return(0,g.Z)(function*(){m.currentUser&&m.currentUser!==f&&(m._currentUser._stopProactiveRefresh(),f&&m.isProactiveRefreshEnabled&&f._startProactiveRefresh()),m.currentUser=f,f?yield m.assertedPersistence.setCurrentUser(f):yield m.assertedPersistence.removeCurrentUser()})()}queue(f){return this.operations=this.operations.then(f,f),this.operations}get assertedPersistence(){return Rt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(f){!f||this.frameworks.includes(f)||(this.frameworks.push(f),this.frameworks.sort(),this.clientVersion=Hi(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var f=this;return(0,g.Z)(function*(){const m={"X-Client-Version":f.clientVersion};return f.app.options.appId&&(m["X-Firebase-gmpid"]=f.app.options.appId),m})()}}function qr(b){return(0,B.m9)(b)}class Ri{constructor(f){this.auth=f,this.observer=null,this.addObserver=(0,B.ne)(m=>this.observer=m)}get next(){return Rt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ti(b){const f=b.indexOf(":");return f<0?"":b.substr(0,f+1)}function qo(b){if(!b)return null;const f=Number(b);return isNaN(f)?null:f}class gs{constructor(f,m){this.providerId=f,this.signInMethod=m}toJSON(){return br("not implemented")}_getIdTokenResponse(f){return br("not implemented")}_linkToIdToken(f,m){return br("not implemented")}_getReauthenticationResolver(f){return br("not implemented")}}function Si(b,f){return lt.apply(this,arguments)}function lt(){return(lt=(0,g.Z)(function*(b,f){return fn(b,"POST","/v1/accounts:resetPassword",sn(b,f))})).apply(this,arguments)}function ot(b,f){return It.apply(this,arguments)}function It(){return(It=(0,g.Z)(function*(b,f){return fn(b,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Kt(b,f){return cn.apply(this,arguments)}function cn(){return(cn=(0,g.Z)(function*(b,f){return fn(b,"POST","/v1/accounts:update",sn(b,f))})).apply(this,arguments)}function Nr(){return(Nr=(0,g.Z)(function*(b,f){return Le(b,"POST","/v1/accounts:signInWithPassword",sn(b,f))})).apply(this,arguments)}function Pr(b,f){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,g.Z)(function*(b,f){return fn(b,"POST","/v1/accounts:sendOobCode",sn(b,f))})).apply(this,arguments)}function zs(b,f){return Is.apply(this,arguments)}function Is(){return(Is=(0,g.Z)(function*(b,f){return Pr(b,f)})).apply(this,arguments)}function yo(b,f){return cs.apply(this,arguments)}function cs(){return(cs=(0,g.Z)(function*(b,f){return Pr(b,f)})).apply(this,arguments)}function Gi(b,f){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,g.Z)(function*(b,f){return Pr(b,f)})).apply(this,arguments)}function Ds(b,f){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,g.Z)(function*(b,f){return Pr(b,f)})).apply(this,arguments)}function es(){return(es=(0,g.Z)(function*(b,f){return Le(b,"POST","/v1/accounts:signInWithEmailLink",sn(b,f))})).apply(this,arguments)}function ts(){return(ts=(0,g.Z)(function*(b,f){return Le(b,"POST","/v1/accounts:signInWithEmailLink",sn(b,f))})).apply(this,arguments)}class Yi extends gs{constructor(f,m,A,Y=null){super("password",A),this._email=f,this._password=m,this._tenantId=Y}static _fromEmailAndPassword(f,m){return new Yi(f,m,"password")}static _fromEmailAndCode(f,m,A=null){return new Yi(f,m,"emailLink",A)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f;if((null==m?void 0:m.email)&&(null==m?void 0:m.password)){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(f){var m=this;return(0,g.Z)(function*(){switch(m.signInMethod){case"password":return function(b,f){return Nr.apply(this,arguments)}(f,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function(b,f){return es.apply(this,arguments)}(f,{email:m._email,oobCode:m._password});default:Mt(f,"internal-error")}})()}_linkToIdToken(f,m){var A=this;return(0,g.Z)(function*(){switch(A.signInMethod){case"password":return ot(f,{idToken:m,returnSecureToken:!0,email:A._email,password:A._password});case"emailLink":return function(b,f){return ts.apply(this,arguments)}(f,{idToken:m,email:A._email,oobCode:A._password});default:Mt(f,"internal-error")}})()}_getReauthenticationResolver(f){return this._getIdTokenResponse(f)}}function Zi(b,f){return us.apply(this,arguments)}function us(){return(us=(0,g.Z)(function*(b,f){return Le(b,"POST","/v1/accounts:signInWithIdp",sn(b,f))})).apply(this,arguments)}class ui extends gs{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(f){const m=new ui(f.providerId,f.signInMethod);return f.idToken||f.accessToken?(f.idToken&&(m.idToken=f.idToken),f.accessToken&&(m.accessToken=f.accessToken),f.nonce&&!f.pendingToken&&(m.nonce=f.nonce),f.pendingToken&&(m.pendingToken=f.pendingToken)):f.oauthToken&&f.oauthTokenSecret?(m.accessToken=f.oauthToken,m.secret=f.oauthTokenSecret):Mt("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f,{providerId:A,signInMethod:Y}=m,le=X(m,["providerId","signInMethod"]);if(!A||!Y)return null;const tt=new ui(A,Y);return tt.idToken=le.idToken||void 0,tt.accessToken=le.accessToken||void 0,tt.secret=le.secret,tt.nonce=le.nonce,tt.pendingToken=le.pendingToken||null,tt}_getIdTokenResponse(f){return Zi(f,this.buildRequest())}_linkToIdToken(f,m){const A=this.buildRequest();return A.idToken=m,Zi(f,A)}_getReauthenticationResolver(f){const m=this.buildRequest();return m.autoCreate=!1,Zi(f,m)}buildRequest(){const f={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)f.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),f.postBody=(0,B.xO)(m)}return f}}function vi(b,f){return no.apply(this,arguments)}function no(){return(no=(0,g.Z)(function*(b,f){return fn(b,"POST","/v1/accounts:sendVerificationCode",sn(b,f))})).apply(this,arguments)}function ki(){return(ki=(0,g.Z)(function*(b,f){return Le(b,"POST","/v1/accounts:signInWithPhoneNumber",sn(b,f))})).apply(this,arguments)}function Ni(){return(Ni=(0,g.Z)(function*(b,f){const m=yield Le(b,"POST","/v1/accounts:signInWithPhoneNumber",sn(b,f));if(m.temporaryProof)throw pn(b,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const Ms={USER_NOT_FOUND:"user-not-found"};function Ls(){return(Ls=(0,g.Z)(function*(b,f){return Le(b,"POST","/v1/accounts:signInWithPhoneNumber",sn(b,Object.assign(Object.assign({},f),{operation:"REAUTH"})),Ms)})).apply(this,arguments)}class Fi extends gs{constructor(f){super("phone","phone"),this.params=f}static _fromVerification(f,m){return new Fi({verificationId:f,verificationCode:m})}static _fromTokenResponse(f,m){return new Fi({phoneNumber:f,temporaryProof:m})}_getIdTokenResponse(f){return function(b,f){return ki.apply(this,arguments)}(f,this._makeVerificationRequest())}_linkToIdToken(f,m){return function(b,f){return Ni.apply(this,arguments)}(f,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(f){return function(b,f){return Ls.apply(this,arguments)}(f,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:f,phoneNumber:m,verificationId:A,verificationCode:Y}=this.params;return f&&m?{temporaryProof:f,phoneNumber:m}:{sessionInfo:A,code:Y}}toJSON(){const f={providerId:this.providerId};return this.params.phoneNumber&&(f.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(f.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(f.verificationCode=this.params.verificationCode),this.params.verificationId&&(f.verificationId=this.params.verificationId),f}static fromJSON(f){"string"==typeof f&&(f=JSON.parse(f));const{verificationId:m,verificationCode:A,phoneNumber:Y,temporaryProof:le}=f;return A||m||Y||le?new Fi({verificationId:m,verificationCode:A,phoneNumber:Y,temporaryProof:le}):null}}class xs{constructor(f){var m,A,Y,le,tt,Tt;const gn=(0,B.zd)((0,B.pd)(f)),ln=null!==(m=gn.apiKey)&&void 0!==m?m:null,jn=null!==(A=gn.oobCode)&&void 0!==A?A:null,Zn=function(b){switch(b){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(Y=gn.mode)&&void 0!==Y?Y:null);Rt(ln&&jn&&Zn,"argument-error"),this.apiKey=ln,this.operation=Zn,this.code=jn,this.continueUrl=null!==(le=gn.continueUrl)&&void 0!==le?le:null,this.languageCode=null!==(tt=gn.languageCode)&&void 0!==tt?tt:null,this.tenantId=null!==(Tt=gn.tenantId)&&void 0!==Tt?Tt:null}static parseLink(f){const m=function(b){const f=(0,B.zd)((0,B.pd)(b)).link,m=f?(0,B.zd)((0,B.pd)(f)).deep_link_id:null,A=(0,B.zd)((0,B.pd)(b)).deep_link_id;return(A?(0,B.zd)((0,B.pd)(A)).link:null)||A||m||f||b}(f);try{return new xs(m)}catch(A){return null}}}let S=(()=>{class b{constructor(){this.providerId=b.PROVIDER_ID}static credential(m,A){return Yi._fromEmailAndPassword(m,A)}static credentialWithLink(m,A){const Y=xs.parseLink(A);return Rt(Y,"argument-error"),Yi._fromEmailAndCode(m,Y.code,Y.tenantId)}}return b.PROVIDER_ID="password",b.EMAIL_PASSWORD_SIGN_IN_METHOD="password",b.EMAIL_LINK_SIGN_IN_METHOD="emailLink",b})();class y{constructor(f){this.providerId=f,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(f){this.defaultLanguageCode=f}setCustomParameters(f){return this.customParameters=f,this}getCustomParameters(){return this.customParameters}}class C extends y{constructor(){super(...arguments),this.scopes=[]}addScope(f){return this.scopes.includes(f)||this.scopes.push(f),this}getScopes(){return[...this.scopes]}}class H extends C{static credentialFromJSON(f){const m="string"==typeof f?JSON.parse(f):f;return Rt("providerId"in m&&"signInMethod"in m,"argument-error"),ui._fromParams(m)}credential(f){return this._credential(Object.assign(Object.assign({},f),{nonce:f.rawNonce}))}_credential(f){return Rt(f.idToken||f.accessToken,"argument-error"),ui._fromParams(Object.assign(Object.assign({},f),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(f){return H.oauthCredentialFromTaggedObject(f)}static credentialFromError(f){return H.oauthCredentialFromTaggedObject(f.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{oauthIdToken:m,oauthAccessToken:A,oauthTokenSecret:Y,pendingToken:le,nonce:tt,providerId:Tt}=f;if(!A&&!Y&&!m&&!le||!Tt)return null;try{return new H(Tt)._credential({idToken:m,accessToken:A,nonce:tt,pendingToken:le})}catch(gn){return null}}}let je=(()=>{class b extends C{constructor(){super("facebook.com")}static credential(m){return ui._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return b.credentialFromTaggedObject(m)}static credentialFromError(m){return b.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return b.credential(m.oauthAccessToken)}catch(A){return null}}}return b.FACEBOOK_SIGN_IN_METHOD="facebook.com",b.PROVIDER_ID="facebook.com",b})(),wt=(()=>{class b extends C{constructor(){super("google.com"),this.addScope("profile")}static credential(m,A){return ui._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:A})}static credentialFromResult(m){return b.credentialFromTaggedObject(m)}static credentialFromError(m){return b.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:A,oauthAccessToken:Y}=m;if(!A&&!Y)return null;try{return b.credential(A,Y)}catch(le){return null}}}return b.GOOGLE_SIGN_IN_METHOD="google.com",b.PROVIDER_ID="google.com",b})(),hn=(()=>{class b extends C{constructor(){super("github.com")}static credential(m){return ui._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return b.credentialFromTaggedObject(m)}static credentialFromError(m){return b.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return b.credential(m.oauthAccessToken)}catch(A){return null}}}return b.GITHUB_SIGN_IN_METHOD="github.com",b.PROVIDER_ID="github.com",b})();class Gn extends gs{constructor(f,m){super(f,f),this.pendingToken=m}_getIdTokenResponse(f){return Zi(f,this.buildRequest())}_linkToIdToken(f,m){const A=this.buildRequest();return A.idToken=m,Zi(f,A)}_getReauthenticationResolver(f){const m=this.buildRequest();return m.autoCreate=!1,Zi(f,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(f){const m="string"==typeof f?JSON.parse(f):f,{providerId:A,signInMethod:Y,pendingToken:le}=m;return A&&Y&&le&&A===Y?new Gn(A,le):null}static _create(f,m){return new Gn(f,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class rr extends y{constructor(f){Rt(f.startsWith("saml."),"argument-error"),super(f)}static credentialFromResult(f){return rr.samlCredentialFromTaggedObject(f)}static credentialFromError(f){return rr.samlCredentialFromTaggedObject(f.customData||{})}static credentialFromJSON(f){const m=Gn.fromJSON(f);return Rt(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:f}){if(!f)return null;const{pendingToken:m,providerId:A}=f;if(!m||!A)return null;try{return Gn._create(A,m)}catch(Y){return null}}}let Wr=(()=>{class b extends C{constructor(){super("twitter.com")}static credential(m,A){return ui._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:A})}static credentialFromResult(m){return b.credentialFromTaggedObject(m)}static credentialFromError(m){return b.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:A,oauthTokenSecret:Y}=m;if(!A||!Y)return null;try{return b.credential(A,Y)}catch(le){return null}}}return b.TWITTER_SIGN_IN_METHOD="twitter.com",b.PROVIDER_ID="twitter.com",b})();function Ur(b,f){return xr.apply(this,arguments)}function xr(){return(xr=(0,g.Z)(function*(b,f){return Le(b,"POST","/v1/accounts:signUp",sn(b,f))})).apply(this,arguments)}class Tn{constructor(f){this.user=f.user,this.providerId=f.providerId,this._tokenResponse=f._tokenResponse,this.operationType=f.operationType}static _fromIdTokenResponse(f,m,A,Y=!1){return(0,g.Z)(function*(){const le=yield Gr._fromIdTokenResponse(f,A,Y),tt=Os(A);return new Tn({user:le,providerId:tt,_tokenResponse:A,operationType:m})})()}static _forOperation(f,m,A){return(0,g.Z)(function*(){yield f._updateTokensIfNecessary(A,!0);const Y=Os(A);return new Tn({user:f,providerId:Y,_tokenResponse:A,operationType:m})})()}}function Os(b){return b.providerId?b.providerId:"phoneNumber"in b?"phone":null}function Ys(){return(Ys=(0,g.Z)(function*(b){var f;const m=qr(b);if(yield m._initializationPromise,null===(f=m.currentUser)||void 0===f?void 0:f.isAnonymous)return new Tn({user:m.currentUser,providerId:null,operationType:"signIn"});const A=yield Ur(m,{returnSecureToken:!0}),Y=yield Tn._fromIdTokenResponse(m,"signIn",A,!0);return yield m._updateCurrentUser(Y.user),Y})).apply(this,arguments)}class Ei extends B.ZR{constructor(f,m,A,Y){var le;super(m.code,m.message),this.operationType=A,this.user=Y,Object.setPrototypeOf(this,Ei.prototype),this.customData={appName:f.name,tenantId:null!==(le=f.tenantId)&&void 0!==le?le:void 0,_serverResponse:m.customData._serverResponse,operationType:A}}static _fromErrorAndOperation(f,m,A,Y){return new Ei(f,m,A,Y)}}function To(b,f,m,A){return("reauthenticate"===f?m._getReauthenticationResolver(b):m._getIdTokenResponse(b)).catch(le=>{throw"auth/multi-factor-auth-required"===le.code?Ei._fromErrorAndOperation(b,le,f,A):le})}function ms(b){return new Set(b.map(({providerId:f})=>f).filter(f=>!!f))}function en(){return(en=(0,g.Z)(function*(b,f){const m=(0,B.m9)(b);yield w(!0,m,f);const{providerUserInfo:A}=yield Qe(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[f]}),Y=ms(A||[]);return m.providerData=m.providerData.filter(le=>Y.has(le.providerId)),Y.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function Ir(b,f){return de.apply(this,arguments)}function de(){return(de=(0,g.Z)(function*(b,f,m=!1){const A=yield St(b,f._linkToIdToken(b.auth,yield b.getIdToken()),m);return Tn._forOperation(b,"link",A)})).apply(this,arguments)}function w(b,f,m){return D.apply(this,arguments)}function D(){return(D=(0,g.Z)(function*(b,f,m){yield Sr(f);const Y=!1===b?"provider-already-linked":"no-such-provider";Rt(ms(f.providerData).has(m)===b,f.auth,Y)})).apply(this,arguments)}function V(b,f){return re.apply(this,arguments)}function re(){return(re=(0,g.Z)(function*(b,f,m=!1){const{auth:A}=b,Y="reauthenticate";try{const le=yield St(b,To(A,Y,f,b),m);Rt(le.idToken,A,"internal-error");const tt=Se(le.idToken);Rt(tt,A,"internal-error");const{sub:Tt}=tt;return Rt(b.uid===Tt,A,"user-mismatch"),Tn._forOperation(b,Y,le)}catch(le){throw"auth/user-not-found"===(null==le?void 0:le.code)&&Mt(A,"user-mismatch"),le}})).apply(this,arguments)}function me(b,f){return We.apply(this,arguments)}function We(){return(We=(0,g.Z)(function*(b,f,m=!1){const A="signIn",Y=yield To(b,A,f),le=yield Tn._fromIdTokenResponse(b,A,Y);return m||(yield b._updateCurrentUser(le.user)),le})).apply(this,arguments)}function nt(b,f){return vt.apply(this,arguments)}function vt(){return(vt=(0,g.Z)(function*(b,f){return me(qr(b),f)})).apply(this,arguments)}function Ft(b,f){return un.apply(this,arguments)}function un(){return(un=(0,g.Z)(function*(b,f){const m=(0,B.m9)(b);return yield w(!1,m,f.providerId),Ir(m,f)})).apply(this,arguments)}function _n(b,f){return Xn.apply(this,arguments)}function Xn(){return(Xn=(0,g.Z)(function*(b,f){return V((0,B.m9)(b),f)})).apply(this,arguments)}function ir(b,f){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,g.Z)(function*(b,f){return Le(b,"POST","/v1/accounts:signInWithCustomToken",sn(b,f))})).apply(this,arguments)}function Dr(){return(Dr=(0,g.Z)(function*(b,f){const m=qr(b),A=yield ir(m,{token:f,returnSecureToken:!0}),Y=yield Tn._fromIdTokenResponse(m,"signIn",A);return yield m._updateCurrentUser(Y.user),Y})).apply(this,arguments)}class dr{constructor(f,m){this.factorId=f,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(f,m){return"phoneInfo"in m?zr._fromServerResponse(f,m):Mt(f,"internal-error")}}class zr extends dr{constructor(f){super("phone",f),this.phoneNumber=f.phoneInfo}static _fromServerResponse(f,m){return new zr(m)}}function $i(b,f,m){var A;Rt((null===(A=m.url)||void 0===A?void 0:A.length)>0,b,"invalid-continue-uri"),Rt(void 0===m.dynamicLinkDomain||m.dynamicLinkDomain.length>0,b,"invalid-dynamic-link-domain"),f.continueUrl=m.url,f.dynamicLinkDomain=m.dynamicLinkDomain,f.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(Rt(m.iOS.bundleId.length>0,b,"missing-ios-bundle-id"),f.iOSBundleId=m.iOS.bundleId),m.android&&(Rt(m.android.packageName.length>0,b,"missing-android-pkg-name"),f.androidInstallApp=m.android.installApp,f.androidMinimumVersionCode=m.android.minimumVersion,f.androidPackageName=m.android.packageName)}function _s(){return(_s=(0,g.Z)(function*(b,f,m){const A=(0,B.m9)(b),Y={requestType:"PASSWORD_RESET",email:f};m&&$i(A,Y,m),yield yo(A,Y)})).apply(this,arguments)}function Li(){return(Li=(0,g.Z)(function*(b,f,m){yield Si((0,B.m9)(b),{oobCode:f,newPassword:m})})).apply(this,arguments)}function Zs(){return(Zs=(0,g.Z)(function*(b,f){yield Kt((0,B.m9)(b),{oobCode:f})})).apply(this,arguments)}function ns(b,f){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,g.Z)(function*(b,f){const m=(0,B.m9)(b),A=yield Si(m,{oobCode:f}),Y=A.requestType;switch(Rt(Y,m,"internal-error"),Y){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Rt(A.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Rt(A.mfaInfo,m,"internal-error");default:Rt(A.email,m,"internal-error")}let le=null;return A.mfaInfo&&(le=dr._fromServerResponse(qr(m),A.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===A.requestType?A.newEmail:A.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===A.requestType?A.email:A.newEmail)||null,multiFactorInfo:le},operation:Y}})).apply(this,arguments)}function io(){return(io=(0,g.Z)(function*(b,f){const{data:m}=yield ns((0,B.m9)(b),f);return m.email})).apply(this,arguments)}function so(){return(so=(0,g.Z)(function*(b,f,m){const A=qr(b),Y=yield Ur(A,{returnSecureToken:!0,email:f,password:m}),le=yield Tn._fromIdTokenResponse(A,"signIn",Y);return yield A._updateCurrentUser(le.user),le})).apply(this,arguments)}function xn(){return(xn=(0,g.Z)(function*(b,f,m){const A=(0,B.m9)(b),Y={requestType:"EMAIL_SIGNIN",email:f};Rt(m.handleCodeInApp,A,"argument-error"),m&&$i(A,Y,m),yield Gi(A,Y)})).apply(this,arguments)}function qi(){return(qi=(0,g.Z)(function*(b,f,m){const A=(0,B.m9)(b),Y=S.credentialWithLink(f,m||Re());return Rt(Y._tenantId===(A.tenantId||null),A,"tenant-id-mismatch"),nt(A,Y)})).apply(this,arguments)}function Ps(b,f){return pr.apply(this,arguments)}function pr(){return(pr=(0,g.Z)(function*(b,f){return fn(b,"POST","/v1/accounts:createAuthUri",sn(b,f))})).apply(this,arguments)}function Fo(){return(Fo=(0,g.Z)(function*(b,f){const A={identifier:f,continueUri:L()?Re():"http://localhost"},{signinMethods:Y}=yield Ps((0,B.m9)(b),A);return Y||[]})).apply(this,arguments)}function Ai(){return(Ai=(0,g.Z)(function*(b,f){const m=(0,B.m9)(b),Y={requestType:"VERIFY_EMAIL",idToken:yield b.getIdToken()};f&&$i(m.auth,Y,f);const{email:le}=yield zs(m.auth,Y);le!==b.email&&(yield b.reload())})).apply(this,arguments)}function vs(){return(vs=(0,g.Z)(function*(b,f,m){const A=(0,B.m9)(b),le={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield b.getIdToken(),newEmail:f};m&&$i(A.auth,le,m);const{email:tt}=yield Ds(A.auth,le);tt!==b.email&&(yield b.reload())})).apply(this,arguments)}function Jo(b,f){return oa.apply(this,arguments)}function oa(){return(oa=(0,g.Z)(function*(b,f){return fn(b,"POST","/v1/accounts:update",f)})).apply(this,arguments)}function Jr(){return(Jr=(0,g.Z)(function*(b,{displayName:f,photoURL:m}){if(void 0===f&&void 0===m)return;const A=(0,B.m9)(b),le={idToken:yield A.getIdToken(),displayName:f,photoUrl:m,returnSecureToken:!0},tt=yield St(A,Jo(A.auth,le));A.displayName=tt.displayName||null,A.photoURL=tt.photoUrl||null;const Tt=A.providerData.find(({providerId:gn})=>"password"===gn);Tt&&(Tt.displayName=A.displayName,Tt.photoURL=A.photoURL),yield A._updateTokensIfNecessary(tt)})).apply(this,arguments)}function Ra(b,f,m){return Es.apply(this,arguments)}function Es(){return(Es=(0,g.Z)(function*(b,f,m){const{auth:A}=b,le={idToken:yield b.getIdToken(),returnSecureToken:!0};f&&(le.email=f),m&&(le.password=m);const tt=yield St(b,ot(A,le));yield b._updateTokensIfNecessary(tt,!0)})).apply(this,arguments)}class Lo{constructor(f,m,A={}){this.isNewUser=f,this.providerId=m,this.profile=A}}class rs extends Lo{constructor(f,m,A,Y){super(f,m,A),this.username=Y}}class qc extends Lo{constructor(f,m){super(f,"facebook.com",m)}}class hl extends rs{constructor(f,m){super(f,"github.com",m,"string"==typeof(null==m?void 0:m.login)?null==m?void 0:m.login:null)}}class ea extends Lo{constructor(f,m){super(f,"google.com",m)}}class pc extends rs{constructor(f,m,A){super(f,"twitter.com",m,A)}}function Vs(b){const{user:f,_tokenResponse:m}=b;return f.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function(b){var f,m;if(!b)return null;const{providerId:A}=b,Y=b.rawUserInfo?JSON.parse(b.rawUserInfo):{},le=b.isNewUser||"identitytoolkit#SignupNewUserResponse"===b.kind;if(!A&&(null==b?void 0:b.idToken)){const tt=null===(m=null===(f=Se(b.idToken))||void 0===f?void 0:f.firebase)||void 0===m?void 0:m.sign_in_provider;if(tt)return new Lo(le,"anonymous"!==tt&&"custom"!==tt?tt:null)}if(!A)return null;switch(A){case"facebook.com":return new qc(le,Y);case"github.com":return new hl(le,Y);case"google.com":return new ea(le,Y);case"twitter.com":return new pc(le,Y,b.screenName||null);case"custom":case"anonymous":return new Lo(le,null);default:return new Lo(le,A,Y)}}(m)}class Bi{constructor(f,m){this.type=f,this.credential=m}static _fromIdtoken(f){return new Bi("enroll",f)}static _fromMfaPendingCredential(f){return new Bi("signin",f)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(f){var m,A;if(null==f?void 0:f.multiFactorSession){if(null===(m=f.multiFactorSession)||void 0===m?void 0:m.pendingCredential)return Bi._fromMfaPendingCredential(f.multiFactorSession.pendingCredential);if(null===(A=f.multiFactorSession)||void 0===A?void 0:A.idToken)return Bi._fromIdtoken(f.multiFactorSession.idToken)}return null}}class F{constructor(f,m,A){this.session=f,this.hints=m,this.signInResolver=A}static _fromError(f,m){const A=qr(f),Y=m.customData._serverResponse,le=(Y.mfaInfo||[]).map(Tt=>dr._fromServerResponse(A,Tt));Rt(Y.mfaPendingCredential,A,"internal-error");const tt=Bi._fromMfaPendingCredential(Y.mfaPendingCredential);return new F(tt,le,function(){var Tt=(0,g.Z)(function*(gn){const ln=yield gn._process(A,tt);delete Y.mfaInfo,delete Y.mfaPendingCredential;const jn=Object.assign(Object.assign({},Y),{idToken:ln.idToken,refreshToken:ln.refreshToken});switch(m.operationType){case"signIn":const Zn=yield Tn._fromIdTokenResponse(A,m.operationType,jn);return yield A._updateCurrentUser(Zn.user),Zn;case"reauthenticate":return Rt(m.user,A,"internal-error"),Tn._forOperation(m.user,m.operationType,jn);default:Mt(A,"internal-error")}});return function(gn){return Tt.apply(this,arguments)}}())}resolveSignIn(f){var m=this;return(0,g.Z)(function*(){return m.signInResolver(f)})()}}function M(b,f){return fn(b,"POST","/v2/accounts/mfaEnrollment:start",sn(b,f))}class pe{constructor(f){this.user=f,this.enrolledFactors=[],f._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(A=>dr._fromServerResponse(f.auth,A)))})}static _fromUser(f){return new pe(f)}getSession(){var f=this;return(0,g.Z)(function*(){return Bi._fromIdtoken(yield f.user.getIdToken())})()}enroll(f,m){var A=this;return(0,g.Z)(function*(){const Y=f,le=yield A.getSession(),tt=yield St(A.user,Y._process(A.user.auth,le,m));return yield A.user._updateTokensIfNecessary(tt),A.user.reload()})()}unenroll(f){var m=this;return(0,g.Z)(function*(){const A="string"==typeof f?f:f.uid,Y=yield m.user.getIdToken(),le=yield St(m.user,function(b,f){return fn(b,"POST","/v2/accounts/mfaEnrollment:withdraw",sn(b,f))}(m.user.auth,{idToken:Y,mfaEnrollmentId:A}));m.enrolledFactors=m.enrolledFactors.filter(({uid:tt})=>tt!==A),yield m.user._updateTokensIfNecessary(le);try{yield m.user.reload()}catch(tt){if("auth/user-token-expired"!==tt.code)throw tt}})()}}const Be=new WeakMap,ht="__sak";class Jt{constructor(f,m){this.storageRetriever=f,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(ht,"1"),this.storage.removeItem(ht),Promise.resolve(!0)):Promise.resolve(!1)}catch(f){return Promise.resolve(!1)}}_set(f,m){return this.storage.setItem(f,JSON.stringify(m)),Promise.resolve()}_get(f){const m=this.storage.getItem(f);return Promise.resolve(m?JSON.parse(m):null)}_remove(f){return this.storage.removeItem(f),Promise.resolve()}get storage(){return this.storageRetriever()}}const Xr=(()=>{class b extends Jt{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,A)=>this.onStorageEvent(m,A),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const b=(0,B.z$)();return er(b)||ni(b)}()&&function(){try{return!(!window||window===window.top)}catch(b){return!1}}(),this.fallbackToPolling=Xi(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const A of Object.keys(this.listeners)){const Y=this.storage.getItem(A),le=this.localCache[A];Y!==le&&m(A,le,Y)}}onStorageEvent(m,A=!1){if(!m.key)return void this.forAllChangedKeys((Tt,gn,ln)=>{this.notifyListeners(Tt,ln)});const Y=m.key;if(A?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Tt=this.storage.getItem(Y);if(m.newValue!==Tt)null!==m.newValue?this.storage.setItem(Y,m.newValue):this.storage.removeItem(Y);else if(this.localCache[Y]===m.newValue&&!A)return}const le=()=>{const Tt=this.storage.getItem(Y);!A&&this.localCache[Y]===Tt||this.notifyListeners(Y,Tt)},tt=this.storage.getItem(Y);(0,B.w1)()&&10===document.documentMode&&tt!==m.newValue&&m.newValue!==m.oldValue?setTimeout(le,10):le()}notifyListeners(m,A){this.localCache[m]=A;const Y=this.listeners[m];if(Y)for(const le of Array.from(Y))le(A&&JSON.parse(A))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,A,Y)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:A,newValue:Y}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,A){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(A)}_removeListener(m,A){this.listeners[m]&&(this.listeners[m].delete(A),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,A){var Y=()=>super._set,le=this;return(0,g.Z)(function*(){yield Y().call(le,m,A),le.localCache[m]=JSON.stringify(A)})()}_get(m){var A=()=>super._get,Y=this;return(0,g.Z)(function*(){const le=yield A().call(Y,m);return Y.localCache[m]=JSON.stringify(le),le})()}_remove(m){var A=()=>super._remove,Y=this;return(0,g.Z)(function*(){yield A().call(Y,m),delete Y.localCache[m]})()}}return b.type="LOCAL",b})(),ei=(()=>{class b extends Jt{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,A){}_removeListener(m,A){}}return b.type="SESSION",b})();let zo=(()=>{class b{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const A=this.receivers.find(le=>le.isListeningto(m));if(A)return A;const Y=new b(m);return this.receivers.push(Y),Y}isListeningto(m){return this.eventTarget===m}handleEvent(m){var A=this;return(0,g.Z)(function*(){const Y=m,{eventId:le,eventType:tt,data:Tt}=Y.data,gn=A.handlersMap[tt];if(!(null==gn?void 0:gn.size))return;Y.ports[0].postMessage({status:"ack",eventId:le,eventType:tt});const ln=Array.from(gn).map(function(){var Zn=(0,g.Z)(function*(Lr){return Lr(Y.origin,Tt)});return function(Lr){return Zn.apply(this,arguments)}}()),jn=yield function(b){return Promise.all(b.map(function(){var f=(0,g.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(A){return{fulfilled:!1,reason:A}}});return function(m){return f.apply(this,arguments)}}()))}(ln);Y.ports[0].postMessage({status:"done",eventId:le,eventType:tt,response:jn})})()}_subscribe(m,A){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(A)}_unsubscribe(m,A){this.handlersMap[m]&&A&&this.handlersMap[m].delete(A),(!A||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return b.receivers=[],b})();function lo(b="",f=10){let m="";for(let A=0;A<f;A++)m+=Math.floor(10*Math.random());return b+m}class _a{constructor(f){this.target=f,this.handlers=new Set}removeMessageHandler(f){f.messageChannel&&(f.messageChannel.port1.removeEventListener("message",f.onMessage),f.messageChannel.port1.close()),this.handlers.delete(f)}_send(f,m,A=50){var Y=this;return(0,g.Z)(function*(){const le="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!le)throw new Error("connection_unavailable");let tt,Tt;return new Promise((gn,ln)=>{const jn=lo("",20);le.port1.start();const Zn=setTimeout(()=>{ln(new Error("unsupported_event"))},A);Tt={messageChannel:le,onMessage(Lr){const Ci=Lr;if(Ci.data.eventId===jn)switch(Ci.data.status){case"ack":clearTimeout(Zn),tt=setTimeout(()=>{ln(new Error("timeout"))},3e3);break;case"done":clearTimeout(tt),gn(Ci.data.response);break;default:clearTimeout(Zn),clearTimeout(tt),ln(new Error("invalid_response"))}}},Y.handlers.add(Tt),le.port1.addEventListener("message",Tt.onMessage),Y.target.postMessage({eventType:f,eventId:jn,data:m},[le.port2])}).finally(()=>{Tt&&Y.removeMessageHandler(Tt)})})()}}function ti(){return window}function mc(){return void 0!==ti().WorkerGlobalScope&&"function"==typeof ti().importScripts}function Ko(){return(Ko=(0,g.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(b){return null}})).apply(this,arguments)}const co="firebaseLocalStorageDb",di="firebaseLocalStorage",$n="fbase_key";class uo{constructor(f){this.request=f}toPromise(){return new Promise((f,m)=>{this.request.addEventListener("success",()=>{f(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function jr(b,f){return b.transaction([di],f?"readwrite":"readonly").objectStore(di)}function gl(){const b=indexedDB.open(co,1);return new Promise((f,m)=>{b.addEventListener("error",()=>{m(b.error)}),b.addEventListener("upgradeneeded",()=>{const A=b.result;try{A.createObjectStore(di,{keyPath:$n})}catch(Y){m(Y)}}),b.addEventListener("success",(0,g.Z)(function*(){const A=b.result;A.objectStoreNames.contains(di)?f(A):(A.close(),yield function(){const b=indexedDB.deleteDatabase(co);return new uo(b).toPromise()}(),f(yield gl()))}))})}function Kr(b,f,m){return qa.apply(this,arguments)}function qa(){return(qa=(0,g.Z)(function*(b,f,m){const A=jr(b,!0).put({[$n]:f,value:m});return new uo(A).toPromise()})).apply(this,arguments)}function So(){return(So=(0,g.Z)(function*(b,f){const m=jr(b,!1).get(f),A=yield new uo(m).toPromise();return void 0===A?null:A.value})).apply(this,arguments)}function _c(b,f){const m=jr(b,!0).delete(f);return new uo(m).toPromise()}const Mi=(()=>{class b{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,g.Z)(function*(){return m.db||(m.db=yield gl()),m.db})()}_withRetries(m){var A=this;return(0,g.Z)(function*(){let Y=0;for(;;)try{const le=yield A._openDb();return yield m(le)}catch(le){if(Y++>3)throw le;A.db&&(A.db.close(),A.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,g.Z)(function*(){return mc()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,g.Z)(function*(){m.receiver=zo._getInstance(mc()?self:null),m.receiver._subscribe("keyChanged",function(){var A=(0,g.Z)(function*(Y,le){return{keyProcessed:(yield m._poll()).includes(le.key)}});return function(Y,le){return A.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var A=(0,g.Z)(function*(Y,le){return["keyChanged"]});return function(Y,le){return A.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,g.Z)(function*(){var A,Y;if(m.activeServiceWorker=yield function(){return Ko.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new _a(m.activeServiceWorker);const le=yield m.sender._send("ping",{},800);!le||(null===(A=le[0])||void 0===A?void 0:A.fulfilled)&&(null===(Y=le[0])||void 0===Y?void 0:Y.value.includes("keyChanged"))&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var A=this;return(0,g.Z)(function*(){if(A.sender&&A.activeServiceWorker&&function(){var b;return(null===(b=null==navigator?void 0:navigator.serviceWorker)||void 0===b?void 0:b.controller)||null}()===A.activeServiceWorker)try{yield A.sender._send("keyChanged",{key:m},A.serviceWorkerReceiverAvailable?800:50)}catch(Y){}})()}_isAvailable(){return(0,g.Z)(function*(){try{if(!indexedDB)return!1;const m=yield gl();return yield Kr(m,ht,"1"),yield _c(m,ht),!0}catch(m){}return!1})()}_withPendingWrite(m){var A=this;return(0,g.Z)(function*(){A.pendingWrites++;try{yield m()}finally{A.pendingWrites--}})()}_set(m,A){var Y=this;return(0,g.Z)(function*(){return Y._withPendingWrite((0,g.Z)(function*(){return yield Y._withRetries(le=>Kr(le,m,A)),Y.localCache[m]=A,Y.notifyServiceWorker(m)}))})()}_get(m){var A=this;return(0,g.Z)(function*(){const Y=yield A._withRetries(le=>function(b,f){return So.apply(this,arguments)}(le,m));return A.localCache[m]=Y,Y})()}_remove(m){var A=this;return(0,g.Z)(function*(){return A._withPendingWrite((0,g.Z)(function*(){return yield A._withRetries(Y=>_c(Y,m)),delete A.localCache[m],A.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,g.Z)(function*(){const A=yield m._withRetries(tt=>{const Tt=jr(tt,!1).getAll();return new uo(Tt).toPromise()});if(!A)return[];if(0!==m.pendingWrites)return[];const Y=[],le=new Set;for(const{fbase_key:tt,value:Tt}of A)le.add(tt),JSON.stringify(m.localCache[tt])!==JSON.stringify(Tt)&&(m.notifyListeners(tt,Tt),Y.push(tt));for(const tt of Object.keys(m.localCache))m.localCache[tt]&&!le.has(tt)&&(m.notifyListeners(tt,null),Y.push(tt));return Y})()}notifyListeners(m,A){this.localCache[m]=A;const Y=this.listeners[m];if(Y)for(const le of Array.from(Y))le(A)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,g.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,A){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(A)}_removeListener(m,A){this.listeners[m]&&(this.listeners[m].delete(A),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return b.type="LOCAL",b})();function la(b,f){return fn(b,"POST","/v2/accounts/mfaSignIn:start",sn(b,f))}function Us(){return(Us=(0,g.Z)(function*(b){return(yield fn(b,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function ka(b){return new Promise((f,m)=>{const A=document.createElement("script");A.setAttribute("src",b),A.onload=f,A.onerror=Y=>{const le=rn("internal-error");le.customData=Y,m(le)},A.type="text/javascript",A.charset="UTF-8",function(){var b,f;return null!==(f=null===(b=document.getElementsByTagName("head"))||void 0===b?void 0:b[0])&&void 0!==f?f:document}().appendChild(A)})}function Na(b){return`__${b}${Math.floor(1e6*Math.random())}`}const Eo=1e12;class Qa{constructor(f){this.auth=f,this.counter=Eo,this._widgets=new Map}render(f,m){const A=this.counter;return this._widgets.set(A,new yc(f,this.auth.name,m||{})),this.counter++,A}reset(f){var m;const A=f||Eo;null===(m=this._widgets.get(A))||void 0===m||m.delete(),this._widgets.delete(A)}getResponse(f){var m;return(null===(m=this._widgets.get(f||Eo))||void 0===m?void 0:m.getResponse())||""}execute(f){var m=this;return(0,g.Z)(function*(){var A;return null===(A=m._widgets.get(f||Eo))||void 0===A||A.execute(),""})()}}class yc{constructor(f,m,A){this.params=A,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const Y="string"==typeof f?document.getElementById(f):f;Rt(Y,"argument-error",{appName:m}),this.container=Y,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function(b){const f=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let A=0;A<50;A++)f.push(m.charAt(Math.floor(Math.random()*m.length)));return f.join("")}();const{callback:f,"expired-callback":m}=this.params;if(f)try{f(this.responseToken)}catch(A){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch(A){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const $l=Na("rcb"),js=new N(3e4,6e4);class Ao{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!ti().grecaptcha}load(f,m=""){return Rt((b=m).length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(b),f,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve(ti().grecaptcha):new Promise((A,Y)=>{const le=ti().setTimeout(()=>{Y(rn(f,"network-request-failed"))},js.get());ti()[$l]=()=>{ti().clearTimeout(le),delete ti()[$l];const Tt=ti().grecaptcha;if(!Tt)return void Y(rn(f,"internal-error"));const gn=Tt.render;Tt.render=(ln,jn)=>{const Zn=gn(ln,jn);return this.counter++,Zn},this.hostLanguage=m,A(Tt)},ka(`https://www.google.com/recaptcha/api.js??${(0,B.xO)({onload:$l,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(le),Y(rn(f,"internal-error"))})});var b}clearedOneInstance(){this.counter--}shouldResolveImmediately(f){return!!ti().grecaptcha&&(f===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Jc{load(f){return(0,g.Z)(function*(){return new Qa(f)})()}clearedOneInstance(){}}const Wl="recaptcha",ra={theme:"light",type:"image"};class _l{constructor(f,m=Object.assign({},ra),A){this.parameters=m,this.type=Wl,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=qr(A),this.isInvisible="invisible"===this.parameters.size,Rt("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const Y="string"==typeof f?document.getElementById(f):f;Rt(Y,this.auth,"argument-error"),this.container=Y,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Jc:new Ao,this.validateStartingState()}verify(){var f=this;return(0,g.Z)(function*(){f.assertNotDestroyed();const m=yield f.render(),A=f.getAssertedRecaptcha();return A.getResponse(m)||new Promise(le=>{const tt=Tt=>{!Tt||(f.tokenChangeListeners.delete(tt),le(Tt))};f.tokenChangeListeners.add(tt),f.isInvisible&&A.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(f){return Promise.reject(f)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(f=>{throw this.renderPromise=null,f})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(f=>{this.container.removeChild(f)})}validateStartingState(){Rt(!this.parameters.sitekey,this.auth,"argument-error"),Rt(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Rt("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(f){return m=>{if(this.tokenChangeListeners.forEach(A=>A(m)),"function"==typeof f)f(m);else if("string"==typeof f){const A=ti()[f];"function"==typeof A&&A(m)}}}assertNotDestroyed(){Rt(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var f=this;return(0,g.Z)(function*(){if(yield f.init(),!f.widgetId){let m=f.container;if(!f.isInvisible){const A=document.createElement("div");m.appendChild(A),m=A}f.widgetId=f.getAssertedRecaptcha().render(m,f.parameters)}return f.widgetId})()}init(){var f=this;return(0,g.Z)(function*(){Rt(L()&&!mc(),f.auth,"internal-error"),yield function(){let b=null;return new Promise(f=>{"complete"!==document.readyState?(b=()=>f(),window.addEventListener("load",b)):f()}).catch(f=>{throw b&&window.removeEventListener("load",b),f})}(),f.recaptcha=yield f._recaptchaLoader.load(f.auth,f.auth.languageCode||void 0);const m=yield function(b){return Us.apply(this,arguments)}(f.auth);Rt(m,f.auth,"internal-error"),f.parameters.sitekey=m})()}getAssertedRecaptcha(){return Rt(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Xc{constructor(f,m){this.verificationId=f,this.onConfirmation=m}confirm(f){const m=Fi._fromVerification(this.verificationId,f);return this.onConfirmation(m)}}function La(){return(La=(0,g.Z)(function*(b,f,m){const A=qr(b),Y=yield Z(A,f,(0,B.m9)(m));return new Xc(Y,le=>nt(A,le))})).apply(this,arguments)}function yl(){return(yl=(0,g.Z)(function*(b,f,m){const A=(0,B.m9)(b);yield w(!1,A,"phone");const Y=yield Z(A.auth,f,(0,B.m9)(m));return new Xc(Y,le=>Ft(A,le))})).apply(this,arguments)}function j(){return(j=(0,g.Z)(function*(b,f,m){const A=(0,B.m9)(b),Y=yield Z(A.auth,f,(0,B.m9)(m));return new Xc(Y,le=>_n(A,le))})).apply(this,arguments)}function Z(b,f,m){return ge.apply(this,arguments)}function ge(){return(ge=(0,g.Z)(function*(b,f,m){var A;const Y=yield m.verify();try{let le;if(Rt("string"==typeof Y,b,"argument-error"),Rt(m.type===Wl,b,"argument-error"),le="string"==typeof f?{phoneNumber:f}:f,"session"in le){const tt=le.session;if("phoneNumber"in le)return Rt("enroll"===tt.type,b,"internal-error"),(yield M(b,{idToken:tt.credential,phoneEnrollmentInfo:{phoneNumber:le.phoneNumber,recaptchaToken:Y}})).phoneSessionInfo.sessionInfo;{Rt("signin"===tt.type,b,"internal-error");const Tt=(null===(A=le.multiFactorHint)||void 0===A?void 0:A.uid)||le.multiFactorUid;return Rt(Tt,b,"missing-multi-factor-info"),(yield la(b,{mfaPendingCredential:tt.credential,mfaEnrollmentId:Tt,phoneSignInInfo:{recaptchaToken:Y}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:tt}=yield vi(b,{phoneNumber:le.phoneNumber,recaptchaToken:Y});return tt}}finally{m._reset()}})).apply(this,arguments)}function _t(){return(_t=(0,g.Z)(function*(b,f){yield Ir((0,B.m9)(b),f)})).apply(this,arguments)}let Lt=(()=>{class b{constructor(m){this.providerId=b.PROVIDER_ID,this.auth=qr(m)}verifyPhoneNumber(m,A){return Z(this.auth,m,(0,B.m9)(A))}static credential(m,A){return Fi._fromVerification(m,A)}static credentialFromResult(m){return b.credentialFromTaggedObject(m)}static credentialFromError(m){return b.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:A,temporaryProof:Y}=m;return A&&Y?Fi._fromTokenResponse(A,Y):null}}return b.PROVIDER_ID="phone",b.PHONE_SIGN_IN_METHOD="phone",b})();function nn(b,f){return f?Yn(f):(Rt(b._popupRedirectResolver,b,"argument-error"),b._popupRedirectResolver)}class On extends gs{constructor(f){super("custom","custom"),this.params=f}_getIdTokenResponse(f){return Zi(f,this._buildIdpRequest())}_linkToIdToken(f,m){return Zi(f,this._buildIdpRequest(m))}_getReauthenticationResolver(f){return Zi(f,this._buildIdpRequest())}_buildIdpRequest(f){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return f&&(m.idToken=f),m}}function Un(b){return me(b.auth,new On(b),b.bypassAuthState)}function Yr(b){const{auth:f,user:m}=b;return Rt(m,f,"internal-error"),V(m,new On(b),b.bypassAuthState)}function Ar(b){return fo.apply(this,arguments)}function fo(){return(fo=(0,g.Z)(function*(b){const{auth:f,user:m}=b;return Rt(m,f,"internal-error"),Ir(m,new On(b),b.bypassAuthState)})).apply(this,arguments)}class Qs{constructor(f,m,A,Y,le=!1){this.auth=f,this.resolver=A,this.user=Y,this.bypassAuthState=le,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var f=this;return new Promise(function(){var m=(0,g.Z)(function*(A,Y){f.pendingPromise={resolve:A,reject:Y};try{f.eventManager=yield f.resolver._initialize(f.auth),yield f.onExecution(),f.eventManager.registerConsumer(f)}catch(le){f.reject(le)}});return function(A,Y){return m.apply(this,arguments)}}())}onAuthEvent(f){var m=this;return(0,g.Z)(function*(){const{urlResponse:A,sessionId:Y,postBody:le,tenantId:tt,error:Tt,type:gn}=f;if(Tt)return void m.reject(Tt);const ln={auth:m.auth,requestUri:A,sessionId:Y,tenantId:tt||void 0,postBody:le||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(gn)(ln))}catch(jn){m.reject(jn)}})()}onError(f){this.reject(f)}getIdpTask(f){switch(f){case"signInViaPopup":case"signInViaRedirect":return Un;case"linkViaPopup":case"linkViaRedirect":return Ar;case"reauthViaPopup":case"reauthViaRedirect":return Yr;default:Mt(this.auth,"internal-error")}}resolve(f){gr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(f),this.unregisterAndCleanUp()}reject(f){gr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(f),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ss=new N(2e3,1e4);function vl(){return(vl=(0,g.Z)(function*(b,f,m){const A=qr(b);bn(b,f,y);const Y=nn(A,m);return new Ba(A,"signInViaPopup",f,Y).executeNotNull()})).apply(this,arguments)}function ia(){return(ia=(0,g.Z)(function*(b,f,m){const A=(0,B.m9)(b);bn(A.auth,f,y);const Y=nn(A.auth,m);return new Ba(A.auth,"reauthViaPopup",f,Y,A).executeNotNull()})).apply(this,arguments)}function sa(){return(sa=(0,g.Z)(function*(b,f,m){const A=(0,B.m9)(b);bn(A.auth,f,y);const Y=nn(A.auth,m);return new Ba(A.auth,"linkViaPopup",f,Y,A).executeNotNull()})).apply(this,arguments)}let Ba=(()=>{class b extends Qs{constructor(m,A,Y,le,tt){super(m,A,le,tt),this.provider=Y,this.authWindow=null,this.pollId=null,b.currentPopupAction&&b.currentPopupAction.cancel(),b.currentPopupAction=this}executeNotNull(){var m=this;return(0,g.Z)(function*(){const A=yield m.execute();return Rt(A,m.auth,"internal-error"),A})()}onExecution(){var m=this;return(0,g.Z)(function*(){gr(1===m.filter.length,"Popup operations only handle one event");const A=lo();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],A),m.authWindow.associatedEvent=A,m.resolver._originValidation(m.auth).catch(Y=>{m.reject(Y)}),m.resolver._isIframeWebStorageSupported(m.auth,Y=>{Y||m.reject(rn(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(rn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,b.currentPopupAction=null}pollUserCancellation(){const m=()=>{var A,Y;this.pollId=(null===(Y=null===(A=this.authWindow)||void 0===A?void 0:A.window)||void 0===Y?void 0:Y.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(rn(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,ss.get())};m()}}return b.currentPopupAction=null,b})();const bl=new Map;class Lu extends Qs{constructor(f,m,A=!1){super(f,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,A),this.eventId=null}execute(){var f=()=>super.execute,m=this;return(0,g.Z)(function*(){let A=bl.get(m.auth._key());if(!A){try{const le=(yield function(b,f){return wl.apply(this,arguments)}(m.resolver,m.auth))?yield f().call(m):null;A=()=>Promise.resolve(le)}catch(Y){A=()=>Promise.reject(Y)}bl.set(m.auth._key(),A)}return m.bypassAuthState||bl.set(m.auth._key(),()=>Promise.resolve(null)),A()})()}onAuthEvent(f){var m=()=>super.onAuthEvent,A=this;return(0,g.Z)(function*(){if("signInViaRedirect"===f.type)return m().call(A,f);if("unknown"!==f.type){if(f.eventId){const Y=yield A.auth._redirectUserForId(f.eventId);if(Y)return A.user=Y,m().call(A,f);A.resolve(null)}}else A.resolve(null)})()}onExecution(){return(0,g.Z)(function*(){})()}cleanUp(){}}function wl(){return(wl=(0,g.Z)(function*(b,f){const m=Cl(f),A=Ea(b);if(!(yield A._isAvailable()))return!1;const Y="true"===(yield A._get(m));return yield A._remove(m),Y})).apply(this,arguments)}function va(b,f){return Vo.apply(this,arguments)}function Vo(){return(Vo=(0,g.Z)(function*(b,f){return Ea(b)._set(Cl(f),"true")})).apply(this,arguments)}function Ea(b){return Yn(b._redirectPersistence)}function Cl(b){return Br("pendingRedirect",b.config.apiKey,b.name)}function Ec(){return(Ec=(0,g.Z)(function*(b,f,m){const A=qr(b);bn(b,f,y);const Y=nn(A,m);return yield va(Y,A),Y._openRedirect(A,f,"signInViaRedirect")})).apply(this,arguments)}function Kl(){return(Kl=(0,g.Z)(function*(b,f,m){const A=(0,B.m9)(b);bn(A.auth,f,y);const Y=nn(A.auth,m);yield va(Y,A.auth);const le=yield wc(A);return Y._openRedirect(A.auth,f,"reauthViaRedirect",le)})).apply(this,arguments)}function bc(){return(bc=(0,g.Z)(function*(b,f,m){const A=(0,B.m9)(b);bn(A.auth,f,y);const Y=nn(A.auth,m);yield w(!1,A,f.providerId),yield va(Y,A.auth);const le=yield wc(A);return Y._openRedirect(A.auth,f,"linkViaRedirect",le)})).apply(this,arguments)}function ba(){return(ba=(0,g.Z)(function*(b,f){return yield qr(b)._initializationPromise,Ja(b,f,!1)})).apply(this,arguments)}function Ja(b,f){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,g.Z)(function*(b,f,m=!1){const A=qr(b),Y=nn(A,f),tt=yield new Lu(A,Y,m).execute();return tt&&!m&&(delete tt.user._redirectEventId,yield A._persistUserIfCurrent(tt.user),yield A._setRedirectUser(null,f)),tt})).apply(this,arguments)}function wc(b){return ua.apply(this,arguments)}function ua(){return(ua=(0,g.Z)(function*(b){const f=lo(`${b.uid}:::`);return b._redirectEventId=f,yield b.auth._setRedirectUser(b),yield b.auth._persistUserIfCurrent(b),f})).apply(this,arguments)}class Dl{constructor(f){this.auth=f,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(f){this.consumers.add(f),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,f)&&(this.sendToConsumer(this.queuedRedirectEvent,f),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(f){this.consumers.delete(f)}onEvent(f){if(this.hasEventBeenHandled(f))return!1;let m=!1;return this.consumers.forEach(A=>{this.isEventForConsumer(f,A)&&(m=!0,this.sendToConsumer(f,A),this.saveEventToCache(f))}),this.hasHandledPotentialRedirect||!function(b){switch(b.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Hu(b);default:return!1}}(f)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=f,m=!0)),m}sendToConsumer(f,m){var A;if(f.error&&!Hu(f)){const Y=(null===(A=f.error.code)||void 0===A?void 0:A.split("auth/")[1])||"internal-error";m.onError(rn(this.auth,Y))}else m.onAuthEvent(f)}isEventForConsumer(f,m){const A=null===m.eventId||!!f.eventId&&f.eventId===m.eventId;return m.filter.includes(f.type)&&A}hasEventBeenHandled(f){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Cc(f))}saveEventToCache(f){this.cachedEventUids.add(Cc(f)),this.lastProcessedEventTime=Date.now()}}function Cc(b){return[b.type,b.eventId,b.sessionId,b.tenantId].filter(f=>f).join("-")}function Hu({type:b,error:f}){return"unknown"===b&&"auth/no-auth-event"===(null==f?void 0:f.code)}function pd(b){return Ic.apply(this,arguments)}function Ic(){return(Ic=(0,g.Z)(function*(b,f={}){return fn(b,"GET","/v1/projects",f)})).apply(this,arguments)}const Hs=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Xa=/^https?/;function da(){return(da=(0,g.Z)(function*(b){if(b.config.emulator)return;const{authorizedDomains:f}=yield pd(b);for(const m of f)try{if(el(m))return}catch(A){}Mt(b,"unauthorized-domain")})).apply(this,arguments)}function el(b){const f=Re(),{protocol:m,hostname:A}=new URL(f);if(b.startsWith("chrome-extension://")){const tt=new URL(b);return""===tt.hostname&&""===A?"chrome-extension:"===m&&b.replace("chrome-extension://","")===f.replace("chrome-extension://",""):"chrome-extension:"===m&&tt.hostname===A}if(!Xa.test(m))return!1;if(Hs.test(b))return A===b;const Y=b.replace(/\./g,"\\.");return new RegExp("^(.+\\."+Y+"|"+Y+")$","i").test(A)}const ru=new N(3e4,6e4);function Dc(){const b=ti().___jsl;if(null==b?void 0:b.H)for(const f of Object.keys(b.H))if(b.H[f].r=b.H[f].r||[],b.H[f].L=b.H[f].L||[],b.H[f].r=[...b.H[f].L],b.CP)for(let m=0;m<b.CP.length;m++)b.CP[m]=null}let Ua=null;function ja(b){return Ua=Ua||function(b){return new Promise((f,m)=>{var A,Y,le;function tt(){Dc(),gapi.load("gapi.iframes",{callback:()=>{f(gapi.iframes.getContext())},ontimeout:()=>{Dc(),m(rn(b,"network-request-failed"))},timeout:ru.get()})}if(null===(Y=null===(A=ti().gapi)||void 0===A?void 0:A.iframes)||void 0===Y?void 0:Y.Iframe)f(gapi.iframes.getContext());else{if(!(null===(le=ti().gapi)||void 0===le?void 0:le.load)){const Tt=Na("iframefcb");return ti()[Tt]=()=>{gapi.load?tt():m(rn(b,"network-request-failed"))},ka(`https://apis.google.com/js/api.js?onload=${Tt}`).catch(gn=>m(gn))}tt()}}).catch(f=>{throw Ua=null,f})}(b),Ua}const ah=new N(5e3,15e3),iu={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},gd=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function md(b){const f=b.config;Rt(f.authDomain,b,"auth-domain-config-required");const m=f.emulator?Ie(f,"emulator/auth/iframe"):`https://${b.config.authDomain}/__/auth/iframe`,A={apiKey:f.apiKey,appName:b.name,v:ne.SDK_VERSION},Y=gd.get(b.config.apiHost);Y&&(A.eid=Y);const le=b._getFrameworks();return le.length&&(A.fw=le.join(",")),`${m}?${(0,B.xO)(A).slice(1)}`}function Hr(){return Hr=(0,g.Z)(function*(b){const f=yield ja(b),m=ti().gapi;return Rt(m,b,"internal-error"),f.open({where:document.body,url:md(b),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:iu,dontclear:!0},A=>new Promise(function(){var Y=(0,g.Z)(function*(le,tt){yield A.restyle({setHideOnLeave:!1});const Tt=rn(b,"network-request-failed"),gn=ti().setTimeout(()=>{tt(Tt)},ah.get());function ln(){ti().clearTimeout(gn),le(A)}A.ping(ln).then(ln,()=>{tt(Tt)})});return function(le,tt){return Y.apply(this,arguments)}}()))}),Hr.apply(this,arguments)}const Zl={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Wi{constructor(f){this.window=f,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(f){}}}function Tl(b,f,m,A,Y,le){Rt(b.config.authDomain,b,"auth-domain-config-required"),Rt(b.config.apiKey,b,"invalid-api-key");const tt={apiKey:b.config.apiKey,appName:b.name,authType:m,redirectUrl:A,v:ne.SDK_VERSION,eventId:Y};if(f instanceof y){f.setDefaultLanguage(b.languageCode),tt.providerId=f.providerId||"",(0,B.xb)(f.getCustomParameters())||(tt.customParameters=JSON.stringify(f.getCustomParameters()));for(const[gn,ln]of Object.entries(le||{}))tt[gn]=ln}if(f instanceof C){const gn=f.getScopes().filter(ln=>""!==ln);gn.length>0&&(tt.scopes=gn.join(","))}b.tenantId&&(tt.tid=b.tenantId);const Tt=tt;for(const gn of Object.keys(Tt))void 0===Tt[gn]&&delete Tt[gn];return`${function({config:b}){return b.emulator?Ie(b,"emulator/auth/handler"):`https://${b.authDomain}/__/auth/handler`}(b)}?${(0,B.xO)(Tt).slice(1)}`}const nl="webStorageSupport";class Sl extends class{constructor(f){this.factorId=f}_process(f,m,A){switch(m.type){case"enroll":return this._finalizeEnroll(f,m.credential,A);case"signin":return this._finalizeSignIn(f,m.credential);default:return br("unexpected MultiFactorSessionType")}}}{constructor(f){super("phone"),this.credential=f}static _fromCredential(f){return new Sl(f)}_finalizeEnroll(f,m,A){return function(b,f){return fn(b,"POST","/v2/accounts/mfaEnrollment:finalize",sn(b,f))}(f,{idToken:m,displayName:A,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(f,m){return function(b,f){return fn(b,"POST","/v2/accounts/mfaSignIn:finalize",sn(b,f))}(f,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let ou=(()=>{class b{constructor(){}static assertion(m){return Sl._fromCredential(m)}}return b.FACTOR_ID="phone",b})();var b,Sc="@firebase/auth";class lu{constructor(f){this.auth=f,this.internalListeners=new Map}getUid(){var f;return this.assertAuthConfigured(),(null===(f=this.auth.currentUser)||void 0===f?void 0:f.uid)||null}getToken(f){var m=this;return(0,g.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(f)}:null})()}addAuthTokenListener(f){if(this.assertAuthConfigured(),this.internalListeners.has(f))return;const m=this.auth.onIdTokenChanged(A=>{var Y;f((null===(Y=A)||void 0===Y?void 0:Y.stsTokenManager.accessToken)||null)});this.internalListeners.set(f,m),this.updateProactiveRefresh()}removeAuthTokenListener(f){this.assertAuthConfigured();const m=this.internalListeners.get(f);!m||(this.internalListeners.delete(f),m(),this.updateProactiveRefresh())}assertAuthConfigured(){Rt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function ha(){return window}function Ed(){return Ed=(0,g.Z)(function*(b,f,m){var A;const{BuildInfo:Y}=ha();gr(f.sessionId,"AuthEvent did not contain a session ID");const le=yield bd(f.sessionId),tt={};return ni()?tt.ibi=Y.packageName:Ji()?tt.apn=Y.packageName:Mt(b,"operation-not-supported-in-this-environment"),Y.displayName&&(tt.appDisplayName=Y.displayName),tt.sessionId=le,Tl(b,m,f.type,void 0,null!==(A=f.eventId)&&void 0!==A?A:void 0,tt)}),Ed.apply(this,arguments)}function Ha(){return Ha=(0,g.Z)(function*(b){const{BuildInfo:f}=ha(),m={};ni()?m.iosBundleId=f.packageName:Ji()?m.androidPackageName=f.packageName:Mt(b,"operation-not-supported-in-this-environment"),yield pd(b,m)}),Ha.apply(this,arguments)}function $s(){return $s=(0,g.Z)(function*(b,f,m){const{cordova:A}=ha();let Y=()=>{};try{yield new Promise((le,tt)=>{let Tt=null;function gn(){var Zn;le();const Lr=null===(Zn=A.plugins.browsertab)||void 0===Zn?void 0:Zn.close;"function"==typeof Lr&&Lr(),"function"==typeof(null==m?void 0:m.close)&&m.close()}function ln(){Tt||(Tt=window.setTimeout(()=>{tt(rn(b,"redirect-cancelled-by-user"))},2e3))}function jn(){"visible"===(null==document?void 0:document.visibilityState)&&ln()}f.addPassiveListener(gn),document.addEventListener("resume",ln,!1),Ji()&&document.addEventListener("visibilitychange",jn,!1),Y=()=>{f.removePassiveListener(gn),document.removeEventListener("resume",ln,!1),document.removeEventListener("visibilitychange",jn,!1),Tt&&window.clearTimeout(Tt)}})}finally{Y()}}),$s.apply(this,arguments)}function bd(b){return Mc.apply(this,arguments)}function Mc(){return Mc=(0,g.Z)(function*(b){const f=fa(b),m=yield crypto.subtle.digest("SHA-256",f);return Array.from(new Uint8Array(m)).map(Y=>Y.toString(16).padStart(2,"0")).join("")}),Mc.apply(this,arguments)}function fa(b){if(gr(/[0-9a-zA-Z]+/.test(b),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(b);const f=new ArrayBuffer(b.length),m=new Uint8Array(f);for(let A=0;A<b.length;A++)m[A]=b.charCodeAt(A);return m}b="Browser",(0,ne._registerComponent)(new qt.wA("auth",(f,{options:m})=>{const A=f.getProvider("app").getImmediate(),{apiKey:Y,authDomain:le}=A.options;return(tt=>{Rt(Y&&!Y.includes(":"),"invalid-api-key",{appName:tt.name}),Rt(!(null==le?void 0:le.includes(":")),"argument-error",{appName:tt.name});const Tt={apiKey:Y,authDomain:le,clientPlatform:b,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Hi(b)},gn=new _i(tt,Tt);return function(b,f){const m=(null==f?void 0:f.persistence)||[],A=(Array.isArray(m)?m:[m]).map(Yn);(null==f?void 0:f.errorMap)&&b._updateErrorMap(f.errorMap),b._initializeWithPersistence(A,null==f?void 0:f.popupRedirectResolver)}(gn,m),gn})(A)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((f,m,A)=>{f.getProvider("auth-internal").initialize()})),(0,ne._registerComponent)(new qt.wA("auth-internal",f=>{const m=qr(f.getProvider("auth").getImmediate());return new lu(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ne.registerVersion)(Sc,"0.19.4",void 0),(0,ne.registerVersion)(Sc,"0.19.4","esm2017");class Ui extends Dl{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(f=>{this.resolveInialized=f})}addPassiveListener(f){this.passiveListeners.add(f)}removePassiveListener(f){this.passiveListeners.delete(f)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(f){return this.resolveInialized(),this.passiveListeners.forEach(m=>m(f)),super.onEvent(f)}initialized(){var f=this;return(0,g.Z)(function*(){yield f.initPromise})()}}function du(b){return Js.apply(this,arguments)}function Js(){return Js=(0,g.Z)(function*(b){const f=yield ql()._get(xl(b));return f&&(yield ql()._remove(xl(b))),f}),Js.apply(this,arguments)}function Cd(){const b=[],f="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let m=0;m<20;m++){const A=Math.floor(Math.random()*f.length);b.push(f.charAt(A))}return b.join("")}function ql(){return Yn(Xr)}function xl(b){return Br("authEvent",b.config.apiKey,b.name)}function xc(b){if(!(null==b?void 0:b.includes("?")))return{};const[f,...m]=b.split("?");return(0,B.zd)(m.join("?"))}function pu(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:rn("no-auth-event")}}function Ol(){var b;return(null===(b=null==self?void 0:self.location)||void 0===b?void 0:b.protocol)||null}function fh(b=(0,B.z$)()){return!("file:"!==Ol()&&"ionic:"!==Ol()||!b.toLowerCase().match(/iphone|ipad|ipod|android/))}function Ga(){try{const b=self.localStorage,f=lo();if(b)return b.setItem(f,"1"),b.removeItem(f),!function(b=(0,B.z$)()){return(0,B.w1)()&&11===(null==document?void 0:document.documentMode)||function(b=(0,B.z$)()){return/Edge\/\d+/.test(b)}(b)}()||(0,B.hl)()}catch(b){return Ia()&&(0,B.hl)()}return!1}function Ia(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function gu(){return("http:"===Ol()||"https:"===Ol()||(0,B.ru)()||fh())&&!((0,B.b$)()||(0,B.UG)())&&Ga()&&!Ia()}function po(){return fh()&&"undefined"!=typeof document}function ii(){return ii=(0,g.Z)(function*(){return!!po()&&new Promise(b=>{const f=setTimeout(()=>{b(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(f),b(!0)})})}),ii.apply(this,arguments)}const Oi={LOCAL:"local",NONE:"none",SESSION:"session"},Rc=Rt,Ku="persistence";function Uo(b){return go.apply(this,arguments)}function go(){return go=(0,g.Z)(function*(b){yield b._initializationPromise;const f=fs(),m=Br(Ku,b.config.apiKey,b.name);(null==f?void 0:f.sessionStorage)&&f.sessionStorage.setItem(m,b._getPersistence())}),go.apply(this,arguments)}function fs(){return"undefined"!=typeof window?window:null}const Pc=Rt;class wo{constructor(){this.browserResolver=Yn(class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ei,this._completeRedirectFn=Ja}_openPopup(f,m,A,Y){var le=this;return(0,g.Z)(function*(){var tt;gr(null===(tt=le.eventManagers[f._key()])||void 0===tt?void 0:tt.manager,"_initialize() not called before _openPopup()");const Tt=Tl(f,m,A,Re(),Y);return function(b,f,m,A=500,Y=600){const le=Math.max((window.screen.availHeight-Y)/2,0).toString(),tt=Math.max((window.screen.availWidth-A)/2,0).toString();let Tt="";const gn=Object.assign(Object.assign({},Zl),{width:A.toString(),height:Y.toString(),top:le,left:tt}),ln=(0,B.z$)().toLowerCase();m&&(Tt=li(ln)?"_blank":m),Cs(ln)&&(f=f||"http://localhost",gn.scrollbars="yes");const jn=Object.entries(gn).reduce((Lr,[Ci,Ta])=>`${Lr}${Ci}=${Ta},`,"");if(function(b=(0,B.z$)()){var f;return ni(b)&&!!(null===(f=window.navigator)||void 0===f?void 0:f.standalone)}(ln)&&"_self"!==Tt)return function(b,f){const m=document.createElement("a");m.href=b,m.target=f;const A=document.createEvent("MouseEvent");A.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(A)}(f||"",Tt),new Wi(null);const Zn=window.open(f||"",Tt,jn);Rt(Zn,b,"popup-blocked");try{Zn.focus()}catch(Lr){}return new Wi(Zn)}(f,Tt,lo())})()}_openRedirect(f,m,A,Y){var le=this;return(0,g.Z)(function*(){return yield le._originValidation(f),b=Tl(f,m,A,Re(),Y),ti().location.href=b,new Promise(()=>{});var b})()}_initialize(f){const m=f._key();if(this.eventManagers[m]){const{manager:Y,promise:le}=this.eventManagers[m];return Y?Promise.resolve(Y):(gr(le,"If manager is not set, promise should be"),le)}const A=this.initAndGetManager(f);return this.eventManagers[m]={promise:A},A.catch(()=>{delete this.eventManagers[m]}),A}initAndGetManager(f){var m=this;return(0,g.Z)(function*(){const A=yield function(b){return Hr.apply(this,arguments)}(f),Y=new Dl(f);return A.register("authEvent",le=>(Rt(null==le?void 0:le.authEvent,f,"invalid-auth-event"),{status:Y.onEvent(le.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[f._key()]={manager:Y},m.iframes[f._key()]=A,Y})()}_isIframeWebStorageSupported(f,m){this.iframes[f._key()].send(nl,{type:nl},Y=>{var le;const tt=null===(le=null==Y?void 0:Y[0])||void 0===le?void 0:le[nl];void 0!==tt&&m(!!tt),Mt(f,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(f){const m=f._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function(b){return da.apply(this,arguments)}(f)),this.originValidationPromises[m]}get _shouldInitProactively(){return Xi()||er()||ni()}}),this.cordovaResolver=Yn(class{constructor(){this._redirectPersistence=ei,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Ja}_initialize(f){var m=this;return(0,g.Z)(function*(){const A=f._key();let Y=m.eventManagers.get(A);return Y||(Y=new Ui(f),m.eventManagers.set(A,Y),m.attachCallbackListeners(f,Y)),Y})()}_openPopup(f){Mt(f,"operation-not-supported-in-this-environment")}_openRedirect(f,m,A,Y){var le=this;return(0,g.Z)(function*(){!function(b){var f,m,A,Y,le,tt,Tt,gn,ln,jn;const Zn=ha();Rt("function"==typeof(null===(f=null==Zn?void 0:Zn.universalLinks)||void 0===f?void 0:f.subscribe),b,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Rt(void 0!==(null===(m=null==Zn?void 0:Zn.BuildInfo)||void 0===m?void 0:m.packageName),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Rt("function"==typeof(null===(le=null===(Y=null===(A=null==Zn?void 0:Zn.cordova)||void 0===A?void 0:A.plugins)||void 0===Y?void 0:Y.browsertab)||void 0===le?void 0:le.openUrl),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Rt("function"==typeof(null===(gn=null===(Tt=null===(tt=null==Zn?void 0:Zn.cordova)||void 0===tt?void 0:tt.plugins)||void 0===Tt?void 0:Tt.browsertab)||void 0===gn?void 0:gn.isAvailable),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Rt("function"==typeof(null===(jn=null===(ln=null==Zn?void 0:Zn.cordova)||void 0===ln?void 0:ln.InAppBrowser)||void 0===jn?void 0:jn.open),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(f);const tt=yield le._initialize(f);yield tt.initialized(),tt.resetRedirect(),bl.clear(),yield le._originValidation(f);const Tt=function(b,f,m=null){return{type:f,eventId:m,urlResponse:null,sessionId:Cd(),postBody:null,tenantId:b.tenantId,error:rn(b,"no-auth-event")}}(f,A,Y);yield function(b,f){return ql()._set(xl(b),f)}(f,Tt);const gn=yield function(b,f,m){return Ed.apply(this,arguments)}(f,Tt,m),ln=yield function(b){const{cordova:f}=ha();return new Promise(m=>{f.plugins.browsertab.isAvailable(A=>{let Y=null;A?f.plugins.browsertab.openUrl(b):Y=f.InAppBrowser.open(b,function(b=(0,B.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(b)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(b)}()?"_blank":"_system","location=yes"),m(Y)})})}(gn);return function(b,f,m){return $s.apply(this,arguments)}(f,tt,ln)})()}_isIframeWebStorageSupported(f,m){throw new Error("Method not implemented.")}_originValidation(f){const m=f._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function(b){return Ha.apply(this,arguments)}(f)),this.originValidationPromises[m]}attachCallbackListeners(f,m){const{universalLinks:A,handleOpenURL:Y,BuildInfo:le}=ha(),tt=setTimeout((0,g.Z)(function*(){yield du(f),m.onEvent(pu())}),500),Tt=function(){var jn=(0,g.Z)(function*(Zn){clearTimeout(tt);const Lr=yield du(f);let Ci=null;Lr&&(null==Zn?void 0:Zn.url)&&(Ci=function(b,f){var m,A;const Y=function(b){const f=xc(b),m=f.link?decodeURIComponent(f.link):void 0,A=xc(m).link,Y=f.deep_link_id?decodeURIComponent(f.deep_link_id):void 0;return xc(Y).link||Y||A||m||b}(f);if(Y.includes("/__/auth/callback")){const le=xc(Y),tt=le.firebaseError?function(b){try{return JSON.parse(b)}catch(f){return null}}(decodeURIComponent(le.firebaseError)):null,Tt=null===(A=null===(m=null==tt?void 0:tt.code)||void 0===m?void 0:m.split("auth/"))||void 0===A?void 0:A[1],gn=Tt?rn(Tt):null;return gn?{type:b.type,eventId:b.eventId,tenantId:b.tenantId,error:gn,urlResponse:null,sessionId:null,postBody:null}:{type:b.type,eventId:b.eventId,tenantId:b.tenantId,sessionId:b.sessionId,urlResponse:Y,postBody:null}}return null}(Lr,Zn.url)),m.onEvent(Ci||pu())});return function(Lr){return jn.apply(this,arguments)}}();void 0!==A&&"function"==typeof A.subscribe&&A.subscribe(null,Tt);const gn=Y,ln=`${le.packageName.toLowerCase()}://`;ha().handleOpenURL=function(){var jn=(0,g.Z)(function*(Zn){if(Zn.toLowerCase().startsWith(ln)&&Tt({url:Zn}),"function"==typeof gn)try{gn(Zn)}catch(Lr){console.error(Lr)}});return function(Zn){return jn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=ei,this._completeRedirectFn=Ja}_initialize(f){var m=this;return(0,g.Z)(function*(){return yield m.selectUnderlyingResolver(),m.assertedUnderlyingResolver._initialize(f)})()}_openPopup(f,m,A,Y){var le=this;return(0,g.Z)(function*(){return yield le.selectUnderlyingResolver(),le.assertedUnderlyingResolver._openPopup(f,m,A,Y)})()}_openRedirect(f,m,A,Y){var le=this;return(0,g.Z)(function*(){return yield le.selectUnderlyingResolver(),le.assertedUnderlyingResolver._openRedirect(f,m,A,Y)})()}_isIframeWebStorageSupported(f,m){this.assertedUnderlyingResolver._isIframeWebStorageSupported(f,m)}_originValidation(f){return this.assertedUnderlyingResolver._originValidation(f)}get _shouldInitProactively(){return po()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Pc(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var f=this;return(0,g.Z)(function*(){if(f.underlyingResolver)return;const m=yield function(){return ii.apply(this,arguments)}();f.underlyingResolver=m?f.cordovaResolver:f.browserResolver})()}}function Pl(b){return b.unwrap()}function Da(b){return Nc(b)}function Nc(b){const{_tokenResponse:f}=b instanceof B.ZR?b.customData:b;if(!f)return null;if(!(b instanceof B.ZR)&&"temporaryProof"in f&&"phoneNumber"in f)return Lt.credentialFromResult(b);const m=f.providerId;if(!m||"password"===m)return null;let A;switch(m){case"google.com":A=wt;break;case"facebook.com":A=je;break;case"github.com":A=hn;break;case"twitter.com":A=Wr;break;default:const{oauthIdToken:Y,oauthAccessToken:le,oauthTokenSecret:tt,pendingToken:Tt,nonce:gn}=f;return le||tt||Y||Tt?Tt?m.startsWith("saml.")?Gn._create(m,Tt):ui._fromParams({providerId:m,signInMethod:m,pendingToken:Tt,idToken:Y,accessToken:le}):new H(m).credential({idToken:Y,accessToken:le,rawNonce:gn}):null}return b instanceof B.ZR?A.credentialFromError(b):A.credentialFromResult(b)}function Ht(b,f){return f.catch(m=>{throw m instanceof B.ZR&&function(b,f){var m;const A=null===(m=f.customData)||void 0===m?void 0:m._tokenResponse;if("auth/multi-factor-auth-required"===f.code)f.resolver=new _u(b,function(b,f){var m;const A=(0,B.m9)(b),Y=f;return Rt(f.customData.operationType,A,"argument-error"),Rt(null===(m=Y.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,A,"argument-error"),F._fromError(A,Y)}(b,f));else if(A){const Y=Nc(f),le=f;Y&&(le.credential=Y,le.tenantId=A.tenantId||void 0,le.email=A.email||void 0,le.phoneNumber=A.phoneNumber||void 0)}}(b,m),m}).then(m=>{const Y=m.user;return{operationType:m.operationType,credential:Da(m),additionalUserInfo:Vs(m),user:Qi.getOrCreate(Y)}})}function $a(b,f){return as.apply(this,arguments)}function as(){return as=(0,g.Z)(function*(b,f){const m=yield f;return{verificationId:m.verificationId,confirm:A=>Ht(b,m.confirm(A))}}),as.apply(this,arguments)}class _u{constructor(f,m){this.resolver=m,this.auth=function(b){return b.wrapped()}(f)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(f){return Ht(Pl(this.auth),this.resolver.resolveSignIn(f))}}class Qi{constructor(f){this._delegate=f,this.multiFactor=function(b){const f=(0,B.m9)(b);return Be.has(f)||Be.set(f,pe._fromUser(f)),Be.get(f)}(f)}static getOrCreate(f){return Qi.USER_MAP.has(f)||Qi.USER_MAP.set(f,new Qi(f)),Qi.USER_MAP.get(f)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(f){return this._delegate.getIdTokenResult(f)}getIdToken(f){return this._delegate.getIdToken(f)}linkAndRetrieveDataWithCredential(f){return this.linkWithCredential(f)}linkWithCredential(f){var m=this;return(0,g.Z)(function*(){return Ht(m.auth,Ft(m._delegate,f))})()}linkWithPhoneNumber(f,m){var A=this;return(0,g.Z)(function*(){return $a(A.auth,function(b,f,m){return yl.apply(this,arguments)}(A._delegate,f,m))})()}linkWithPopup(f){var m=this;return(0,g.Z)(function*(){return Ht(m.auth,function(b,f,m){return sa.apply(this,arguments)}(m._delegate,f,wo))})()}linkWithRedirect(f){var m=this;return(0,g.Z)(function*(){return yield Uo(qr(m.auth)),function(b,f,m){return function(b,f,m){return bc.apply(this,arguments)}(b,f,m)}(m._delegate,f,wo)})()}reauthenticateAndRetrieveDataWithCredential(f){return this.reauthenticateWithCredential(f)}reauthenticateWithCredential(f){var m=this;return(0,g.Z)(function*(){return Ht(m.auth,_n(m._delegate,f))})()}reauthenticateWithPhoneNumber(f,m){return $a(this.auth,function(b,f,m){return j.apply(this,arguments)}(this._delegate,f,m))}reauthenticateWithPopup(f){return Ht(this.auth,function(b,f,m){return ia.apply(this,arguments)}(this._delegate,f,wo))}reauthenticateWithRedirect(f){var m=this;return(0,g.Z)(function*(){return yield Uo(qr(m.auth)),function(b,f,m){return function(b,f,m){return Kl.apply(this,arguments)}(b,f,m)}(m._delegate,f,wo)})()}sendEmailVerification(f){return function(b,f){return Ai.apply(this,arguments)}(this._delegate,f)}unlink(f){var m=this;return(0,g.Z)(function*(){return yield function(b,f){return en.apply(this,arguments)}(m._delegate,f),m})()}updateEmail(f){return function(b,f){return Ra((0,B.m9)(b),f,null)}(this._delegate,f)}updatePassword(f){return function(b,f){return Ra((0,B.m9)(b),null,f)}(this._delegate,f)}updatePhoneNumber(f){return function(b,f){return _t.apply(this,arguments)}(this._delegate,f)}updateProfile(f){return function(b,f){return Jr.apply(this,arguments)}(this._delegate,f)}verifyBeforeUpdateEmail(f,m){return function(b,f,m){return vs.apply(this,arguments)}(this._delegate,f,m)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Qi.USER_MAP=new WeakMap;const Xs=Rt;let yu=(()=>{class b{constructor(m,A){if(this.app=m,A.isInitialized())return this._delegate=A.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:Y}=m.options;Xs(Y,"invalid-api-key",{appName:m.name});let le=[Rr];if("undefined"!=typeof window){le=function(b,f){const m=fs();if(!(null==m?void 0:m.sessionStorage))return[];const A=Br(Ku,b,f);switch(m.sessionStorage.getItem(A)){case Oi.NONE:return[Rr];case Oi.LOCAL:return[Mi,ei];case Oi.SESSION:return[ei];default:return[]}}(Y,m.name);for(const Tt of[Mi,Xr,ei])le.includes(Tt)||le.push(Tt)}Xs(Y,"invalid-api-key",{appName:m.name});const tt="undefined"!=typeof window?wo:void 0;this._delegate=A.initialize({options:{persistence:le,popupRedirectResolver:tt}}),this._delegate._updateErrorMap(gt),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Qi.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(m){this._delegate.languageCode=m}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(m){this._delegate.tenantId=m}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(m,A){!function(b,f,m){const A=qr(b);Rt(A._canInitEmulator,A,"emulator-config-failed"),Rt(/^https?:\/\//.test(f),A,"invalid-emulator-scheme");const Y=!!(null==m?void 0:m.disableWarnings),le=Ti(f),{host:tt,port:Tt}=function(b){const f=Ti(b),m=/(\/\/)?([^?#/]+)/.exec(b.substr(f.length));if(!m)return{host:"",port:null};const A=m[2].split("@").pop()||"",Y=/^(\[[^\]]+\])(:|$)/.exec(A);if(Y){const le=Y[1];return{host:le,port:qo(A.substr(le.length+1))}}{const[le,tt]=A.split(":");return{host:le,port:qo(tt)}}}(f);A.config.emulator={url:`${le}//${tt}${null===Tt?"":`:${Tt}`}/`},A.settings.appVerificationDisabledForTesting=!0,A.emulatorConfig=Object.freeze({host:tt,port:Tt,protocol:le.replace(":",""),options:Object.freeze({disableWarnings:Y})}),Y||function(){function b(){const f=document.createElement("p"),m=f.style;f.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",f.classList.add("firebase-emulator-warning"),document.body.appendChild(f)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",b):b())}()}(this._delegate,m,A)}applyActionCode(m){return function(b,f){return Zs.apply(this,arguments)}(this._delegate,m)}checkActionCode(m){return ns(this._delegate,m)}confirmPasswordReset(m,A){return function(b,f,m){return Li.apply(this,arguments)}(this._delegate,m,A)}createUserWithEmailAndPassword(m,A){var Y=this;return(0,g.Z)(function*(){return Ht(Y._delegate,function(b,f,m){return so.apply(this,arguments)}(Y._delegate,m,A))})()}fetchProvidersForEmail(m){return this.fetchSignInMethodsForEmail(m)}fetchSignInMethodsForEmail(m){return function(b,f){return Fo.apply(this,arguments)}(this._delegate,m)}isSignInWithEmailLink(m){return function(b,f){const m=xs.parseLink(f);return"EMAIL_SIGNIN"===(null==m?void 0:m.operation)}(0,m)}getRedirectResult(){var m=this;return(0,g.Z)(function*(){Xs(gu(),m._delegate,"operation-not-supported-in-this-environment");const A=yield function(b,f){return ba.apply(this,arguments)}(m._delegate,wo);return A?Ht(m._delegate,Promise.resolve(A)):{credential:null,user:null}})()}addFrameworkForLogging(m){!function(b,f){qr(b)._logFramework(f)}(this._delegate,m)}onAuthStateChanged(m,A,Y){const{next:le,error:tt,complete:Tt}=Wa(m,A,Y);return this._delegate.onAuthStateChanged(le,tt,Tt)}onIdTokenChanged(m,A,Y){const{next:le,error:tt,complete:Tt}=Wa(m,A,Y);return this._delegate.onIdTokenChanged(le,tt,Tt)}sendSignInLinkToEmail(m,A){return function(b,f,m){return xn.apply(this,arguments)}(this._delegate,m,A)}sendPasswordResetEmail(m,A){return function(b,f,m){return _s.apply(this,arguments)}(this._delegate,m,A||void 0)}setPersistence(m){var A=this;return(0,g.Z)(function*(){let Y;switch(function(b,f){Rc(Object.values(Oi).includes(f),b,"invalid-persistence-type"),(0,B.b$)()?Rc(f!==Oi.SESSION,b,"unsupported-persistence-type"):(0,B.UG)()?Rc(f===Oi.NONE,b,"unsupported-persistence-type"):Ia()?Rc(f===Oi.NONE||f===Oi.LOCAL&&(0,B.hl)(),b,"unsupported-persistence-type"):Rc(f===Oi.NONE||Ga(),b,"unsupported-persistence-type")}(A._delegate,m),m){case Oi.SESSION:Y=ei;break;case Oi.LOCAL:Y=(yield Yn(Mi)._isAvailable())?Mi:Xr;break;case Oi.NONE:Y=Rr;break;default:return Mt("argument-error",{appName:A._delegate.name})}return A._delegate.setPersistence(Y)})()}signInAndRetrieveDataWithCredential(m){return this.signInWithCredential(m)}signInAnonymously(){return Ht(this._delegate,function(b){return Ys.apply(this,arguments)}(this._delegate))}signInWithCredential(m){return Ht(this._delegate,nt(this._delegate,m))}signInWithCustomToken(m){return Ht(this._delegate,function(b,f){return Dr.apply(this,arguments)}(this._delegate,m))}signInWithEmailAndPassword(m,A){return Ht(this._delegate,function(b,f,m){return nt((0,B.m9)(b),S.credential(f,m))}(this._delegate,m,A))}signInWithEmailLink(m,A){return Ht(this._delegate,function(b,f,m){return qi.apply(this,arguments)}(this._delegate,m,A))}signInWithPhoneNumber(m,A){return $a(this._delegate,function(b,f,m){return La.apply(this,arguments)}(this._delegate,m,A))}signInWithPopup(m){var A=this;return(0,g.Z)(function*(){return Xs(gu(),A._delegate,"operation-not-supported-in-this-environment"),Ht(A._delegate,function(b,f,m){return vl.apply(this,arguments)}(A._delegate,m,wo))})()}signInWithRedirect(m){var A=this;return(0,g.Z)(function*(){return Xs(gu(),A._delegate,"operation-not-supported-in-this-environment"),yield Uo(A._delegate),function(b,f,m){return function(b,f,m){return Ec.apply(this,arguments)}(b,f,m)}(A._delegate,m,wo)})()}updateCurrentUser(m){return this._delegate.updateCurrentUser(m)}verifyPasswordResetCode(m){return function(b,f){return io.apply(this,arguments)}(this._delegate,m)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return b.Persistence=Oi,b})();function Wa(b,f,m){let A=b;"function"!=typeof b&&({next:A,error:f,complete:m}=b);const Y=A;return{next:tt=>Y(tt&&Qi.getOrCreate(tt)),error:f,complete:m}}class il{constructor(){this.providerId="phone",this._delegate=new Lt(Pl(E.Z.auth()))}static credential(f,m){return Lt.credential(f,m)}verifyPhoneNumber(f,m){return this._delegate.verifyPhoneNumber(f,m)}unwrap(){return this._delegate}}il.PHONE_SIGN_IN_METHOD=Lt.PHONE_SIGN_IN_METHOD,il.PROVIDER_ID=Lt.PROVIDER_ID;const Xl=Rt;class Yu{constructor(f,m,A=E.Z.app()){var Y;Xl(null===(Y=A.options)||void 0===Y?void 0:Y.apiKey,"invalid-api-key",{appName:A.name}),this._delegate=new _l(f,m,A.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function(b){b.INTERNAL.registerComponent(new qt.wA("auth-compat",f=>{const m=f.getProvider("app-compat").getImmediate(),A=f.getProvider("auth");return new yu(m,A)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:S,FacebookAuthProvider:je,GithubAuthProvider:hn,GoogleAuthProvider:wt,OAuthProvider:H,SAMLAuthProvider:rr,PhoneAuthProvider:il,PhoneMultiFactorGenerator:ou,RecaptchaVerifier:Yu,TwitterAuthProvider:Wr,Auth:yu,AuthCredential:gs,Error:B.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),b.registerVersion("@firebase/auth-compat","0.2.4")}(E.Z)},2940:function($t,$e){!function(x){"use strict";function g(ee){return Array.prototype.slice.call(ee)}function E(ee){return new Promise(function(Te,He){ee.onsuccess=function(){Te(ee.result)},ee.onerror=function(){He(ee.error)}})}function B(ee,Te,He){var yt,rt=new Promise(function(ft,we){E(yt=ee[Te].apply(ee,He)).then(ft,we)});return rt.request=yt,rt}function ne(ee,Te,He){var yt=B(ee,Te,He);return yt.then(function(rt){if(rt)return new Q(rt,yt.request)})}function he(ee,Te,He){He.forEach(function(yt){Object.defineProperty(ee.prototype,yt,{get:function(){return this[Te][yt]},set:function(rt){this[Te][yt]=rt}})})}function q(ee,Te,He,yt){yt.forEach(function(rt){rt in He.prototype&&(ee.prototype[rt]=function(){return B(this[Te],rt,arguments)})})}function se(ee,Te,He,yt){yt.forEach(function(rt){rt in He.prototype&&(ee.prototype[rt]=function(){return this[Te][rt].apply(this[Te],arguments)})})}function X(ee,Te,He,yt){yt.forEach(function(rt){rt in He.prototype&&(ee.prototype[rt]=function(){return ne(this[Te],rt,arguments)})})}function ie(ee){this._index=ee}function Q(ee,Te){this._cursor=ee,this._request=Te}function oe(ee){this._store=ee}function ae(ee){this._tx=ee,this.complete=new Promise(function(Te,He){ee.oncomplete=function(){Te()},ee.onerror=function(){He(ee.error)},ee.onabort=function(){He(ee.error)}})}function Me(ee,Te,He){this._db=ee,this.oldVersion=Te,this.transaction=new ae(He)}function Ve(ee){this._db=ee}he(ie,"_index",["name","keyPath","multiEntry","unique"]),q(ie,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),X(ie,"_index",IDBIndex,["openCursor","openKeyCursor"]),he(Q,"_cursor",["direction","key","primaryKey","value"]),q(Q,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(ee){ee in IDBCursor.prototype&&(Q.prototype[ee]=function(){var Te=this,He=arguments;return Promise.resolve().then(function(){return Te._cursor[ee].apply(Te._cursor,He),E(Te._request).then(function(yt){if(yt)return new Q(yt,Te._request)})})})}),oe.prototype.createIndex=function(){return new ie(this._store.createIndex.apply(this._store,arguments))},oe.prototype.index=function(){return new ie(this._store.index.apply(this._store,arguments))},he(oe,"_store",["name","keyPath","indexNames","autoIncrement"]),q(oe,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),X(oe,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),se(oe,"_store",IDBObjectStore,["deleteIndex"]),ae.prototype.objectStore=function(){return new oe(this._tx.objectStore.apply(this._tx,arguments))},he(ae,"_tx",["objectStoreNames","mode"]),se(ae,"_tx",IDBTransaction,["abort"]),Me.prototype.createObjectStore=function(){return new oe(this._db.createObjectStore.apply(this._db,arguments))},he(Me,"_db",["name","version","objectStoreNames"]),se(Me,"_db",IDBDatabase,["deleteObjectStore","close"]),Ve.prototype.transaction=function(){return new ae(this._db.transaction.apply(this._db,arguments))},he(Ve,"_db",["name","version","objectStoreNames"]),se(Ve,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(ee){[oe,ie].forEach(function(Te){ee in Te.prototype&&(Te.prototype[ee.replace("open","iterate")]=function(){var He=g(arguments),yt=He[He.length-1],rt=this._store||this._index,ft=rt[ee].apply(rt,He.slice(0,-1));ft.onsuccess=function(){yt(ft.result)}})})}),[ie,oe].forEach(function(ee){ee.prototype.getAll||(ee.prototype.getAll=function(Te,He){var yt=this,rt=[];return new Promise(function(ft){yt.iterateCursor(Te,function(we){we?(rt.push(we.value),void 0===He||rt.length!=He?we.continue():ft(rt)):ft(rt)})})})}),x.openDb=function(ee,Te,He){var yt=B(indexedDB,"open",[ee,Te]),rt=yt.request;return rt&&(rt.onupgradeneeded=function(ft){He&&He(new Me(rt.result,ft.oldVersion,rt.transaction))}),yt.then(function(ft){return new Ve(ft)})},x.deleteDb=function(ee){return B(indexedDB,"deleteDatabase",[ee])},Object.defineProperty(x,"__esModule",{value:!0})}($e)},591:($t,$e,x)=>{"use strict";x.d($e,{X:()=>B});var g=x(8929),E=x(5279);class B extends g.xQ{constructor(he){super(),this._value=he}get value(){return this.getValue()}_subscribe(he){const q=super._subscribe(he);return q&&!q.closed&&he.next(this._value),q}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new E.N;return this._value}next(he){super.next(this._value=he)}}},9312:($t,$e,x)=>{"use strict";x.d($e,{P:()=>he});var g=x(8896),E=x(1086),B=x(1737);class he{constructor(se,X,ie){this.kind=se,this.value=X,this.error=ie,this.hasValue="N"===se}observe(se){switch(this.kind){case"N":return se.next&&se.next(this.value);case"E":return se.error&&se.error(this.error);case"C":return se.complete&&se.complete()}}do(se,X,ie){switch(this.kind){case"N":return se&&se(this.value);case"E":return X&&X(this.error);case"C":return ie&&ie()}}accept(se,X,ie){return se&&"function"==typeof se.next?this.observe(se):this.do(se,X,ie)}toObservable(){switch(this.kind){case"N":return(0,E.of)(this.value);case"E":return(0,B._)(this.error);case"C":return(0,g.c)()}throw new Error("unexpected notification kind value")}static createNext(se){return void 0!==se?new he("N",se):he.undefinedValueNotification}static createError(se){return new he("E",void 0,se)}static createComplete(){return he.completeNotification}}he.completeNotification=new he("C"),he.undefinedValueNotification=new he("N",void 0)},2916:($t,$e,x)=>{"use strict";x.d($e,{y:()=>oe});var g=x(3489),B=x(7668),ne=x(3292),q=x(3821),se=x(5379);var Q=x(2830);let oe=(()=>{class Me{constructor(xe){this._isScalar=!1,xe&&(this._subscribe=xe)}lift(xe){const Oe=new Me;return Oe.source=this,Oe.operator=xe,Oe}subscribe(xe,Oe,ee){const{operator:Te}=this,He=function(Me,Ve,xe){if(Me){if(Me instanceof g.L)return Me;if(Me[B.b])return Me[B.b]()}return Me||Ve||xe?new g.L(Me,Ve,xe):new g.L(ne.c)}(xe,Oe,ee);if(He.add(Te?Te.call(He,this.source):this.source||Q.v.useDeprecatedSynchronousErrorHandling&&!He.syncErrorThrowable?this._subscribe(He):this._trySubscribe(He)),Q.v.useDeprecatedSynchronousErrorHandling&&He.syncErrorThrowable&&(He.syncErrorThrowable=!1,He.syncErrorThrown))throw He.syncErrorValue;return He}_trySubscribe(xe){try{return this._subscribe(xe)}catch(Oe){Q.v.useDeprecatedSynchronousErrorHandling&&(xe.syncErrorThrown=!0,xe.syncErrorValue=Oe),function(Me){for(;Me;){const{closed:Ve,destination:xe,isStopped:Oe}=Me;if(Ve||Oe)return!1;Me=xe&&xe instanceof g.L?xe:null}return!0}(xe)?xe.error(Oe):console.warn(Oe)}}forEach(xe,Oe){return new(Oe=ae(Oe))((ee,Te)=>{let He;He=this.subscribe(yt=>{try{xe(yt)}catch(rt){Te(rt),He&&He.unsubscribe()}},Te,ee)})}_subscribe(xe){const{source:Oe}=this;return Oe&&Oe.subscribe(xe)}[q.L](){return this}pipe(...xe){return 0===xe.length?this:function(Me){return 0===Me.length?se.y:1===Me.length?Me[0]:function(xe){return Me.reduce((Oe,ee)=>ee(Oe),xe)}}(xe)(this)}toPromise(xe){return new(xe=ae(xe))((Oe,ee)=>{let Te;this.subscribe(He=>Te=He,He=>ee(He),()=>Oe(Te))})}}return Me.create=Ve=>new Me(Ve),Me})();function ae(Me){if(Me||(Me=Q.v.Promise||Promise),!Me)throw new Error("no Promise impl found");return Me}},3292:($t,$e,x)=>{"use strict";x.d($e,{c:()=>B});var g=x(2830),E=x(2782);const B={closed:!0,next(ne){},error(ne){if(g.v.useDeprecatedSynchronousErrorHandling)throw ne;(0,E.z)(ne)},complete(){}}},826:($t,$e,x)=>{"use strict";x.d($e,{L:()=>E});var g=x(3489);class E extends g.L{notifyNext(ne,he,q,se,X){this.destination.next(he)}notifyError(ne,he){this.destination.error(ne)}notifyComplete(ne){this.destination.complete()}}},8929:($t,$e,x)=>{"use strict";x.d($e,{Yc:()=>se,xQ:()=>X});var g=x(2916),E=x(3489),B=x(2654),ne=x(5279),he=x(5283),q=x(7668);class se extends E.L{constructor(oe){super(oe),this.destination=oe}}let X=(()=>{class Q extends g.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[q.b](){return new se(this)}lift(ae){const Me=new ie(this,this);return Me.operator=ae,Me}next(ae){if(this.closed)throw new ne.N;if(!this.isStopped){const{observers:Me}=this,Ve=Me.length,xe=Me.slice();for(let Oe=0;Oe<Ve;Oe++)xe[Oe].next(ae)}}error(ae){if(this.closed)throw new ne.N;this.hasError=!0,this.thrownError=ae,this.isStopped=!0;const{observers:Me}=this,Ve=Me.length,xe=Me.slice();for(let Oe=0;Oe<Ve;Oe++)xe[Oe].error(ae);this.observers.length=0}complete(){if(this.closed)throw new ne.N;this.isStopped=!0;const{observers:ae}=this,Me=ae.length,Ve=ae.slice();for(let xe=0;xe<Me;xe++)Ve[xe].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(ae){if(this.closed)throw new ne.N;return super._trySubscribe(ae)}_subscribe(ae){if(this.closed)throw new ne.N;return this.hasError?(ae.error(this.thrownError),B.w.EMPTY):this.isStopped?(ae.complete(),B.w.EMPTY):(this.observers.push(ae),new he.W(this,ae))}asObservable(){const ae=new g.y;return ae.source=this,ae}}return Q.create=(oe,ae)=>new ie(oe,ae),Q})();class ie extends X{constructor(oe,ae){super(),this.destination=oe,this.source=ae}next(oe){const{destination:ae}=this;ae&&ae.next&&ae.next(oe)}error(oe){const{destination:ae}=this;ae&&ae.error&&this.destination.error(oe)}complete(){const{destination:oe}=this;oe&&oe.complete&&this.destination.complete()}_subscribe(oe){const{source:ae}=this;return ae?this.source.subscribe(oe):B.w.EMPTY}}},5283:($t,$e,x)=>{"use strict";x.d($e,{W:()=>E});var g=x(2654);class E extends g.w{constructor(ne,he){super(),this.subject=ne,this.subscriber=he,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const ne=this.subject,he=ne.observers;if(this.subject=null,!he||0===he.length||ne.isStopped||ne.closed)return;const q=he.indexOf(this.subscriber);-1!==q&&he.splice(q,1)}}},3489:($t,$e,x)=>{"use strict";x.d($e,{L:()=>se});var g=x(7043),E=x(3292),B=x(2654),ne=x(7668),he=x(2830),q=x(2782);class se extends B.w{constructor(Q,oe,ae){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=E.c;break;case 1:if(!Q){this.destination=E.c;break}if("object"==typeof Q){Q instanceof se?(this.syncErrorThrowable=Q.syncErrorThrowable,this.destination=Q,Q.add(this)):(this.syncErrorThrowable=!0,this.destination=new X(this,Q));break}default:this.syncErrorThrowable=!0,this.destination=new X(this,Q,oe,ae)}}[ne.b](){return this}static create(Q,oe,ae){const Me=new se(Q,oe,ae);return Me.syncErrorThrowable=!1,Me}next(Q){this.isStopped||this._next(Q)}error(Q){this.isStopped||(this.isStopped=!0,this._error(Q))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(Q){this.destination.next(Q)}_error(Q){this.destination.error(Q),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:Q}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=Q,this}}class X extends se{constructor(Q,oe,ae,Me){super(),this._parentSubscriber=Q;let Ve,xe=this;(0,g.m)(oe)?Ve=oe:oe&&(Ve=oe.next,ae=oe.error,Me=oe.complete,oe!==E.c&&(xe=Object.create(oe),(0,g.m)(xe.unsubscribe)&&this.add(xe.unsubscribe.bind(xe)),xe.unsubscribe=this.unsubscribe.bind(this))),this._context=xe,this._next=Ve,this._error=ae,this._complete=Me}next(Q){if(!this.isStopped&&this._next){const{_parentSubscriber:oe}=this;he.v.useDeprecatedSynchronousErrorHandling&&oe.syncErrorThrowable?this.__tryOrSetError(oe,this._next,Q)&&this.unsubscribe():this.__tryOrUnsub(this._next,Q)}}error(Q){if(!this.isStopped){const{_parentSubscriber:oe}=this,{useDeprecatedSynchronousErrorHandling:ae}=he.v;if(this._error)ae&&oe.syncErrorThrowable?(this.__tryOrSetError(oe,this._error,Q),this.unsubscribe()):(this.__tryOrUnsub(this._error,Q),this.unsubscribe());else if(oe.syncErrorThrowable)ae?(oe.syncErrorValue=Q,oe.syncErrorThrown=!0):(0,q.z)(Q),this.unsubscribe();else{if(this.unsubscribe(),ae)throw Q;(0,q.z)(Q)}}}complete(){if(!this.isStopped){const{_parentSubscriber:Q}=this;if(this._complete){const oe=()=>this._complete.call(this._context);he.v.useDeprecatedSynchronousErrorHandling&&Q.syncErrorThrowable?(this.__tryOrSetError(Q,oe),this.unsubscribe()):(this.__tryOrUnsub(oe),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(Q,oe){try{Q.call(this._context,oe)}catch(ae){if(this.unsubscribe(),he.v.useDeprecatedSynchronousErrorHandling)throw ae;(0,q.z)(ae)}}__tryOrSetError(Q,oe,ae){if(!he.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{oe.call(this._context,ae)}catch(Me){return he.v.useDeprecatedSynchronousErrorHandling?(Q.syncErrorValue=Me,Q.syncErrorThrown=!0,!0):((0,q.z)(Me),!0)}return!1}_unsubscribe(){const{_parentSubscriber:Q}=this;this._context=null,this._parentSubscriber=null,Q.unsubscribe()}}},2654:($t,$e,x)=>{"use strict";x.d($e,{w:()=>q});var g=x(6688),E=x(7830),B=x(7043);const he=(()=>{function X(ie){return Error.call(this),this.message=ie?`${ie.length} errors occurred during unsubscription:\n${ie.map((Q,oe)=>`${oe+1}) ${Q.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ie,this}return X.prototype=Object.create(Error.prototype),X})();class q{constructor(ie){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,ie&&(this._ctorUnsubscribe=!0,this._unsubscribe=ie)}unsubscribe(){let ie;if(this.closed)return;let{_parentOrParents:Q,_ctorUnsubscribe:oe,_unsubscribe:ae,_subscriptions:Me}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,Q instanceof q)Q.remove(this);else if(null!==Q)for(let Ve=0;Ve<Q.length;++Ve)Q[Ve].remove(this);if((0,B.m)(ae)){oe&&(this._unsubscribe=void 0);try{ae.call(this)}catch(Ve){ie=Ve instanceof he?se(Ve.errors):[Ve]}}if((0,g.k)(Me)){let Ve=-1,xe=Me.length;for(;++Ve<xe;){const Oe=Me[Ve];if((0,E.K)(Oe))try{Oe.unsubscribe()}catch(ee){ie=ie||[],ee instanceof he?ie=ie.concat(se(ee.errors)):ie.push(ee)}}}if(ie)throw new he(ie)}add(ie){let Q=ie;if(!ie)return q.EMPTY;switch(typeof ie){case"function":Q=new q(ie);case"object":if(Q===this||Q.closed||"function"!=typeof Q.unsubscribe)return Q;if(this.closed)return Q.unsubscribe(),Q;if(!(Q instanceof q)){const Me=Q;Q=new q,Q._subscriptions=[Me]}break;default:throw new Error("unrecognized teardown "+ie+" added to Subscription.")}let{_parentOrParents:oe}=Q;if(null===oe)Q._parentOrParents=this;else if(oe instanceof q){if(oe===this)return Q;Q._parentOrParents=[oe,this]}else{if(-1!==oe.indexOf(this))return Q;oe.push(this)}const ae=this._subscriptions;return null===ae?this._subscriptions=[Q]:ae.push(Q),Q}remove(ie){const Q=this._subscriptions;if(Q){const oe=Q.indexOf(ie);-1!==oe&&Q.splice(oe,1)}}}var X;function se(X){return X.reduce((ie,Q)=>ie.concat(Q instanceof he?Q.errors:Q),[])}q.EMPTY=((X=new q).closed=!0,X)},2830:($t,$e,x)=>{"use strict";x.d($e,{v:()=>E});let g=!1;const E={Promise:void 0,set useDeprecatedSynchronousErrorHandling(B){if(B){const ne=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+ne.stack)}else g&&console.log("RxJS: Back to a better error behavior. Thank you. <3");g=B},get useDeprecatedSynchronousErrorHandling(){return g}}},1177:($t,$e,x)=>{"use strict";x.d($e,{IY:()=>ne,Ds:()=>q,ft:()=>X});var g=x(3489),E=x(2916),B=x(9249);class ne extends g.L{constructor(Q){super(),this.parent=Q}_next(Q){this.parent.notifyNext(Q)}_error(Q){this.parent.notifyError(Q),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class q extends g.L{notifyNext(Q){this.destination.next(Q)}notifyError(Q){this.destination.error(Q)}notifyComplete(){this.destination.complete()}}function X(ie,Q){if(Q.closed)return;if(ie instanceof E.y)return ie.subscribe(Q);let oe;try{oe=(0,B.s)(ie)(Q)}catch(ae){Q.error(ae)}return oe}},1762:($t,$e,x)=>{"use strict";x.d($e,{c:()=>he,N:()=>q});var g=x(8929),E=x(2916),B=x(2654),ne=x(4327);class he extends E.y{constructor(oe,ae){super(),this.source=oe,this.subjectFactory=ae,this._refCount=0,this._isComplete=!1}_subscribe(oe){return this.getSubject().subscribe(oe)}getSubject(){const oe=this._subject;return(!oe||oe.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let oe=this._connection;return oe||(this._isComplete=!1,oe=this._connection=new B.w,oe.add(this.source.subscribe(new se(this.getSubject(),this))),oe.closed&&(this._connection=null,oe=B.w.EMPTY)),oe}refCount(){return(0,ne.x)()(this)}}const q=(()=>{const Q=he.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:Q._subscribe},_isComplete:{value:Q._isComplete,writable:!0},getSubject:{value:Q.getSubject},connect:{value:Q.connect},refCount:{value:Q.refCount}}})();class se extends g.Yc{constructor(oe,ae){super(oe),this.connectable=ae}_error(oe){this._unsubscribe(),super._error(oe)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const oe=this.connectable;if(oe){this.connectable=null;const ae=oe._connection;oe._refCount=0,oe._subject=null,oe._connection=null,ae&&ae.unsubscribe()}}}},6053:($t,$e,x)=>{"use strict";x.d($e,{aj:()=>se});var g=x(2866),E=x(6688),B=x(826),ne=x(448),he=x(3009);const q={};function se(...Q){let oe,ae;return(0,g.K)(Q[Q.length-1])&&(ae=Q.pop()),"function"==typeof Q[Q.length-1]&&(oe=Q.pop()),1===Q.length&&(0,E.k)(Q[0])&&(Q=Q[0]),(0,he.n)(Q,ae).lift(new X(oe))}class X{constructor(oe){this.resultSelector=oe}call(oe,ae){return ae.subscribe(new ie(oe,this.resultSelector))}}class ie extends B.L{constructor(oe,ae){super(oe),this.resultSelector=ae,this.active=0,this.values=[],this.observables=[]}_next(oe){this.values.push(q),this.observables.push(oe)}_complete(){const oe=this.observables,ae=oe.length;if(0===ae)this.destination.complete();else{this.active=ae,this.toRespond=ae;for(let Me=0;Me<ae;Me++)this.add((0,ne.D)(this,oe[Me],void 0,Me))}}notifyComplete(oe){0==(this.active-=1)&&this.destination.complete()}notifyNext(oe,ae,Me){const Ve=this.values,Oe=this.toRespond?Ve[Me]===q?--this.toRespond:this.toRespond:0;Ve[Me]=ae,0===Oe&&(this.resultSelector?this._tryResultSelector(Ve):this.destination.next(Ve.slice()))}_tryResultSelector(oe){let ae;try{ae=this.resultSelector.apply(this,oe)}catch(Me){return void this.destination.error(Me)}this.destination.next(ae)}}},1221:($t,$e,x)=>{"use strict";x.d($e,{z:()=>ne});var g=x(1086),E=x(9146);function ne(...he){return(0,E.J)(1)((0,g.of)(...he))}},8896:($t,$e,x)=>{"use strict";x.d($e,{E:()=>E,c:()=>B});var g=x(2916);const E=new g.y(he=>he.complete());function B(he){return he?function(he){return new g.y(q=>he.schedule(()=>q.complete()))}(he):E}},567:($t,$e,x)=>{"use strict";x.d($e,{D:()=>q});var g=x(2916),E=x(6688),B=x(4850),ne=x(7830),he=x(5254);function q(...X){if(1===X.length){const ie=X[0];if((0,E.k)(ie))return se(ie,null);if((0,ne.K)(ie)&&Object.getPrototypeOf(ie)===Object.prototype){const Q=Object.keys(ie);return se(Q.map(oe=>ie[oe]),Q)}}if("function"==typeof X[X.length-1]){const ie=X.pop();return se(X=1===X.length&&(0,E.k)(X[0])?X[0]:X,null).pipe((0,B.U)(Q=>ie(...Q)))}return se(X,null)}function se(X,ie){return new g.y(Q=>{const oe=X.length;if(0===oe)return void Q.complete();const ae=new Array(oe);let Me=0,Ve=0;for(let xe=0;xe<oe;xe++){const Oe=(0,he.D)(X[xe]);let ee=!1;Q.add(Oe.subscribe({next:Te=>{ee||(ee=!0,Ve++),ae[xe]=Te},error:Te=>Q.error(Te),complete:()=>{Me++,(Me===oe||!ee)&&(Ve===oe&&Q.next(ie?ie.reduce((Te,He,yt)=>(Te[He]=ae[yt],Te),{}):ae),Q.complete())}}))}})}},5254:($t,$e,x)=>{"use strict";x.d($e,{D:()=>xe});var g=x(2916),E=x(9249),B=x(2654),ne=x(3821),se=x(6454),X=x(5430),oe=x(8955),ae=x(8515);function xe(Oe,ee){return ee?function(Oe,ee){if(null!=Oe){if(function(Oe){return Oe&&"function"==typeof Oe[ne.L]}(Oe))return function(Oe,ee){return new g.y(Te=>{const He=new B.w;return He.add(ee.schedule(()=>{const yt=Oe[ne.L]();He.add(yt.subscribe({next(rt){He.add(ee.schedule(()=>Te.next(rt)))},error(rt){He.add(ee.schedule(()=>Te.error(rt)))},complete(){He.add(ee.schedule(()=>Te.complete()))}}))})),He})}(Oe,ee);if((0,oe.t)(Oe))return function(Oe,ee){return new g.y(Te=>{const He=new B.w;return He.add(ee.schedule(()=>Oe.then(yt=>{He.add(ee.schedule(()=>{Te.next(yt),He.add(ee.schedule(()=>Te.complete()))}))},yt=>{He.add(ee.schedule(()=>Te.error(yt)))}))),He})}(Oe,ee);if((0,ae.z)(Oe))return(0,se.r)(Oe,ee);if(function(Oe){return Oe&&"function"==typeof Oe[X.hZ]}(Oe)||"string"==typeof Oe)return function(Oe,ee){if(!Oe)throw new Error("Iterable cannot be null");return new g.y(Te=>{const He=new B.w;let yt;return He.add(()=>{yt&&"function"==typeof yt.return&&yt.return()}),He.add(ee.schedule(()=>{yt=Oe[X.hZ](),He.add(ee.schedule(function(){if(Te.closed)return;let rt,ft;try{const we=yt.next();rt=we.value,ft=we.done}catch(we){return void Te.error(we)}ft?Te.complete():(Te.next(rt),this.schedule())}))})),He})}(Oe,ee)}throw new TypeError((null!==Oe&&typeof Oe||Oe)+" is not observable")}(Oe,ee):Oe instanceof g.y?Oe:new g.y((0,E.s)(Oe))}},3009:($t,$e,x)=>{"use strict";x.d($e,{n:()=>ne});var g=x(2916),E=x(3650),B=x(6454);function ne(he,q){return q?(0,B.r)(he,q):new g.y((0,E.V)(he))}},3753:($t,$e,x)=>{"use strict";x.d($e,{R:()=>q});var g=x(2916),E=x(6688),B=x(7043),ne=x(4850);function q(oe,ae,Me,Ve){return(0,B.m)(Me)&&(Ve=Me,Me=void 0),Ve?q(oe,ae,Me).pipe((0,ne.U)(xe=>(0,E.k)(xe)?Ve(...xe):Ve(xe))):new g.y(xe=>{se(oe,ae,function(ee){xe.next(arguments.length>1?Array.prototype.slice.call(arguments):ee)},xe,Me)})}function se(oe,ae,Me,Ve,xe){let Oe;if(function(oe){return oe&&"function"==typeof oe.addEventListener&&"function"==typeof oe.removeEventListener}(oe)){const ee=oe;oe.addEventListener(ae,Me,xe),Oe=()=>ee.removeEventListener(ae,Me,xe)}else if(function(oe){return oe&&"function"==typeof oe.on&&"function"==typeof oe.off}(oe)){const ee=oe;oe.on(ae,Me),Oe=()=>ee.off(ae,Me)}else if(function(oe){return oe&&"function"==typeof oe.addListener&&"function"==typeof oe.removeListener}(oe)){const ee=oe;oe.addListener(ae,Me),Oe=()=>ee.removeListener(ae,Me)}else{if(!oe||!oe.length)throw new TypeError("Invalid event target");for(let ee=0,Te=oe.length;ee<Te;ee++)se(oe[ee],ae,Me,Ve,xe)}Ve.add(Oe)}},6787:($t,$e,x)=>{"use strict";x.d($e,{T:()=>he});var g=x(2916),E=x(2866),B=x(9146),ne=x(3009);function he(...q){let se=Number.POSITIVE_INFINITY,X=null,ie=q[q.length-1];return(0,E.K)(ie)?(X=q.pop(),q.length>1&&"number"==typeof q[q.length-1]&&(se=q.pop())):"number"==typeof ie&&(se=q.pop()),null===X&&1===q.length&&q[0]instanceof g.y?q[0]:(0,B.J)(se)((0,ne.n)(q,X))}},1086:($t,$e,x)=>{"use strict";x.d($e,{of:()=>ne});var g=x(2866),E=x(3009),B=x(6454);function ne(...he){let q=he[he.length-1];return(0,g.K)(q)?(he.pop(),(0,B.r)(he,q)):(0,E.n)(he)}},1737:($t,$e,x)=>{"use strict";x.d($e,{_:()=>E});var g=x(2916);function E(ne,he){return new g.y(he?q=>he.schedule(B,0,{error:ne,subscriber:q}):q=>q.error(ne))}function B({error:ne,subscriber:he}){he.error(ne)}},6926:($t,$e,x)=>{"use strict";x.d($e,{e:()=>oe});var g=x(353),E=x(1177);class ne{constructor(Me){this.durationSelector=Me}call(Me,Ve){return Ve.subscribe(new he(Me,this.durationSelector))}}class he extends E.Ds{constructor(Me,Ve){super(Me),this.durationSelector=Ve,this.hasValue=!1}_next(Me){if(this.value=Me,this.hasValue=!0,!this.throttled){let Ve;try{const{durationSelector:Oe}=this;Ve=Oe(Me)}catch(Oe){return this.destination.error(Oe)}const xe=(0,E.ft)(Ve,new E.IY(this));!xe||xe.closed?this.clearThrottle():this.add(this.throttled=xe)}}clearThrottle(){const{value:Me,hasValue:Ve,throttled:xe}=this;xe&&(this.remove(xe),this.throttled=void 0,xe.unsubscribe()),Ve&&(this.value=void 0,this.hasValue=!1,this.destination.next(Me))}notifyNext(){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}var q=x(2916),se=x(4241),X=x(2866);function Q(ae){const{index:Me,period:Ve,subscriber:xe}=ae;if(xe.next(Me),!xe.closed){if(-1===Ve)return xe.complete();ae.index=Me+1,this.schedule(ae,Ve)}}function oe(ae,Me=g.P){return function(ae){return function(Ve){return Ve.lift(new ne(ae))}}(()=>function(ae=0,Me,Ve){let xe=-1;return(0,se.k)(Me)?xe=Number(Me)<1?1:Number(Me):(0,X.K)(Me)&&(Ve=Me),(0,X.K)(Ve)||(Ve=g.P),new q.y(Oe=>{const ee=(0,se.k)(ae)?ae:+ae-Ve.now();return Ve.schedule(Q,ee,{index:0,period:xe,subscriber:Oe})})}(ae,Me))}},7221:($t,$e,x)=>{"use strict";x.d($e,{K:()=>E});var g=x(1177);function E(he){return function(se){const X=new B(he),ie=se.lift(X);return X.caught=ie}}class B{constructor(q){this.selector=q}call(q,se){return se.subscribe(new ne(q,this.selector,this.caught))}}class ne extends g.Ds{constructor(q,se,X){super(q),this.selector=se,this.caught=X}error(q){if(!this.isStopped){let se;try{se=this.selector(q,this.caught)}catch(Q){return void super.error(Q)}this._unsubscribeAndRecycle();const X=new g.IY(this);this.add(X);const ie=(0,g.ft)(se,X);ie!==X&&this.add(ie)}}}},1406:($t,$e,x)=>{"use strict";x.d($e,{b:()=>E});var g=x(1709);function E(B,ne){return(0,g.zg)(B,ne,1)}},13:($t,$e,x)=>{"use strict";x.d($e,{b:()=>B});var g=x(3489),E=x(353);function B(se,X=E.P){return ie=>ie.lift(new ne(se,X))}class ne{constructor(X,ie){this.dueTime=X,this.scheduler=ie}call(X,ie){return ie.subscribe(new he(X,this.dueTime,this.scheduler))}}class he extends g.L{constructor(X,ie,Q){super(X),this.dueTime=ie,this.scheduler=Q,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(X){this.clearDebounce(),this.lastValue=X,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(q,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:X}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(X)}}clearDebounce(){const X=this.debouncedSubscription;null!==X&&(this.remove(X),X.unsubscribe(),this.debouncedSubscription=null)}}function q(se){se.debouncedNext()}},7314:($t,$e,x)=>{"use strict";x.d($e,{d:()=>E});var g=x(3489);function E(he=null){return q=>q.lift(new B(he))}class B{constructor(q){this.defaultValue=q}call(q,se){return se.subscribe(new ne(q,this.defaultValue))}}class ne extends g.L{constructor(q,se){super(q),this.defaultValue=se,this.isEmpty=!0}_next(q){this.isEmpty=!1,this.destination.next(q)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}},5778:($t,$e,x)=>{"use strict";x.d($e,{x:()=>E});var g=x(3489);function E(he,q){return se=>se.lift(new B(he,q))}class B{constructor(q,se){this.compare=q,this.keySelector=se}call(q,se){return se.subscribe(new ne(q,this.compare,this.keySelector))}}class ne extends g.L{constructor(q,se,X){super(q),this.keySelector=X,this.hasKey=!1,"function"==typeof se&&(this.compare=se)}compare(q,se){return q===se}_next(q){let se;try{const{keySelector:ie}=this;se=ie?ie(q):q}catch(ie){return this.destination.error(ie)}let X=!1;if(this.hasKey)try{const{compare:ie}=this;X=ie(this.key,se)}catch(ie){return this.destination.error(ie)}else this.hasKey=!0;X||(this.key=se,this.destination.next(q))}}},2198:($t,$e,x)=>{"use strict";x.d($e,{h:()=>E});var g=x(3489);function E(he,q){return function(X){return X.lift(new B(he,q))}}class B{constructor(q,se){this.predicate=q,this.thisArg=se}call(q,se){return se.subscribe(new ne(q,this.predicate,this.thisArg))}}class ne extends g.L{constructor(q,se,X){super(q),this.predicate=se,this.thisArg=X,this.count=0}_next(q){let se;try{se=this.predicate.call(this.thisArg,q,this.count++)}catch(X){return void this.destination.error(X)}se&&this.destination.next(q)}}},537:($t,$e,x)=>{"use strict";x.d($e,{x:()=>B});var g=x(3489),E=x(2654);function B(q){return se=>se.lift(new ne(q))}class ne{constructor(se){this.callback=se}call(se,X){return X.subscribe(new he(se,this.callback))}}class he extends g.L{constructor(se,X){super(se),this.add(new E.w(X))}}},7224:($t,$e,x)=>{"use strict";x.d($e,{P:()=>se});var g=x(4450),E=x(2198),B=x(2986),ne=x(7314),he=x(4907),q=x(5379);function se(X,ie){const Q=arguments.length>=2;return oe=>oe.pipe(X?(0,E.h)((ae,Me)=>X(ae,Me,oe)):q.y,(0,B.q)(1),Q?(0,ne.d)(ie):(0,he.T)(()=>new g.K))}},4850:($t,$e,x)=>{"use strict";x.d($e,{U:()=>E});var g=x(3489);function E(he,q){return function(X){if("function"!=typeof he)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return X.lift(new B(he,q))}}class B{constructor(q,se){this.project=q,this.thisArg=se}call(q,se){return se.subscribe(new ne(q,this.project,this.thisArg))}}class ne extends g.L{constructor(q,se,X){super(q),this.project=se,this.count=0,this.thisArg=X||this}_next(q){let se;try{se=this.project.call(this.thisArg,q,this.count++)}catch(X){return void this.destination.error(X)}this.destination.next(se)}}},9146:($t,$e,x)=>{"use strict";x.d($e,{J:()=>B});var g=x(1709),E=x(5379);function B(ne=Number.POSITIVE_INFINITY){return(0,g.zg)(E.y,ne)}},1709:($t,$e,x)=>{"use strict";x.d($e,{zg:()=>ne});var g=x(4850),E=x(5254),B=x(1177);function ne(X,ie,Q=Number.POSITIVE_INFINITY){return"function"==typeof ie?oe=>oe.pipe(ne((ae,Me)=>(0,E.D)(X(ae,Me)).pipe((0,g.U)((Ve,xe)=>ie(ae,Ve,Me,xe))),Q)):("number"==typeof ie&&(Q=ie),oe=>oe.lift(new he(X,Q)))}class he{constructor(ie,Q=Number.POSITIVE_INFINITY){this.project=ie,this.concurrent=Q}call(ie,Q){return Q.subscribe(new q(ie,this.project,this.concurrent))}}class q extends B.Ds{constructor(ie,Q,oe=Number.POSITIVE_INFINITY){super(ie),this.project=Q,this.concurrent=oe,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(ie){this.active<this.concurrent?this._tryNext(ie):this.buffer.push(ie)}_tryNext(ie){let Q;const oe=this.index++;try{Q=this.project(ie,oe)}catch(ae){return void this.destination.error(ae)}this.active++,this._innerSub(Q)}_innerSub(ie){const Q=new B.IY(this),oe=this.destination;oe.add(Q);const ae=(0,B.ft)(ie,Q);ae!==Q&&oe.add(ae)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(ie){this.destination.next(ie)}notifyComplete(){const ie=this.buffer;this.active--,ie.length>0?this._next(ie.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},7770:($t,$e,x)=>{"use strict";x.d($e,{QV:()=>B,ht:()=>he});var g=x(3489),E=x(9312);function B(se,X=0){return function(Q){return Q.lift(new ne(se,X))}}class ne{constructor(X,ie=0){this.scheduler=X,this.delay=ie}call(X,ie){return ie.subscribe(new he(X,this.scheduler,this.delay))}}class he extends g.L{constructor(X,ie,Q=0){super(X),this.scheduler=ie,this.delay=Q}static dispatch(X){const{notification:ie,destination:Q}=X;ie.observe(Q),this.unsubscribe()}scheduleMessage(X){this.destination.add(this.scheduler.schedule(he.dispatch,this.delay,new q(X,this.destination)))}_next(X){this.scheduleMessage(E.P.createNext(X))}_error(X){this.scheduleMessage(E.P.createError(X)),this.unsubscribe()}_complete(){this.scheduleMessage(E.P.createComplete()),this.unsubscribe()}}class q{constructor(X,ie){this.notification=X,this.destination=ie}}},519:($t,$e,x)=>{"use strict";x.d($e,{G:()=>E});var g=x(3489);function E(){return he=>he.lift(new B)}class B{call(q,se){return se.subscribe(new ne(q))}}class ne extends g.L{constructor(q){super(q),this.hasPrev=!1}_next(q){let se;this.hasPrev?se=[this.prev,q]:this.hasPrev=!0,this.prev=q,se&&this.destination.next(se)}}},4327:($t,$e,x)=>{"use strict";x.d($e,{x:()=>E});var g=x(3489);function E(){return function(q){return q.lift(new B(q))}}class B{constructor(q){this.connectable=q}call(q,se){const{connectable:X}=this;X._refCount++;const ie=new ne(q,X),Q=se.subscribe(ie);return ie.closed||(ie.connection=X.connect()),Q}}class ne extends g.L{constructor(q,se){super(q),this.connectable=se}_unsubscribe(){const{connectable:q}=this;if(!q)return void(this.connection=null);this.connectable=null;const se=q._refCount;if(se<=0)return void(this.connection=null);if(q._refCount=se-1,se>1)return void(this.connection=null);const{connection:X}=this,ie=q._connection;this.connection=null,ie&&(!X||ie===X)&&ie.unsubscribe()}}},2014:($t,$e,x)=>{"use strict";x.d($e,{R:()=>E});var g=x(3489);function E(he,q){let se=!1;return arguments.length>=2&&(se=!0),function(ie){return ie.lift(new B(he,q,se))}}class B{constructor(q,se,X=!1){this.accumulator=q,this.seed=se,this.hasSeed=X}call(q,se){return se.subscribe(new ne(q,this.accumulator,this.seed,this.hasSeed))}}class ne extends g.L{constructor(q,se,X,ie){super(q),this.accumulator=se,this._seed=X,this.hasSeed=ie,this.index=0}get seed(){return this._seed}set seed(q){this.hasSeed=!0,this._seed=q}_next(q){if(this.hasSeed)return this._tryNext(q);this.seed=q,this.destination.next(q)}_tryNext(q){const se=this.index++;let X;try{X=this.accumulator(this.seed,q,se)}catch(ie){this.destination.error(ie)}this.seed=X,this.destination.next(X)}}},2474:($t,$e,x)=>{"use strict";x.d($e,{B:()=>se});var g=x(1762);var ne=x(4327),he=x(8929);function q(){return new he.xQ}function se(){return X=>(0,ne.x)()(function(X,ie){return function(oe){let ae;ae="function"==typeof X?X:function(){return X};const Me=Object.create(oe,g.N);return Me.source=oe,Me.subjectFactory=ae,Me}}(q)(X))}},96:($t,$e,x)=>{"use strict";x.d($e,{d:()=>ie});var g=x(8929),E=x(341),B=x(2654),ne=x(7770),he=x(5279),q=x(5283);class se extends g.xQ{constructor(ae=Number.POSITIVE_INFINITY,Me=Number.POSITIVE_INFINITY,Ve){super(),this.scheduler=Ve,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=ae<1?1:ae,this._windowTime=Me<1?1:Me,Me===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(ae){if(!this.isStopped){const Me=this._events;Me.push(ae),Me.length>this._bufferSize&&Me.shift()}super.next(ae)}nextTimeWindow(ae){this.isStopped||(this._events.push(new X(this._getNow(),ae)),this._trimBufferThenGetEvents()),super.next(ae)}_subscribe(ae){const Me=this._infiniteTimeWindow,Ve=Me?this._events:this._trimBufferThenGetEvents(),xe=this.scheduler,Oe=Ve.length;let ee;if(this.closed)throw new he.N;if(this.isStopped||this.hasError?ee=B.w.EMPTY:(this.observers.push(ae),ee=new q.W(this,ae)),xe&&ae.add(ae=new ne.ht(ae,xe)),Me)for(let Te=0;Te<Oe&&!ae.closed;Te++)ae.next(Ve[Te]);else for(let Te=0;Te<Oe&&!ae.closed;Te++)ae.next(Ve[Te].value);return this.hasError?ae.error(this.thrownError):this.isStopped&&ae.complete(),ee}_getNow(){return(this.scheduler||E.c).now()}_trimBufferThenGetEvents(){const ae=this._getNow(),Me=this._bufferSize,Ve=this._windowTime,xe=this._events,Oe=xe.length;let ee=0;for(;ee<Oe&&!(ae-xe[ee].time<Ve);)ee++;return Oe>Me&&(ee=Math.max(ee,Oe-Me)),ee>0&&xe.splice(0,ee),xe}}class X{constructor(ae,Me){this.time=ae,this.value=Me}}function ie(oe,ae,Me){let Ve;return Ve=oe&&"object"==typeof oe?oe:{bufferSize:oe,windowTime:ae,refCount:!1,scheduler:Me},xe=>xe.lift(function({bufferSize:oe=Number.POSITIVE_INFINITY,windowTime:ae=Number.POSITIVE_INFINITY,refCount:Me,scheduler:Ve}){let xe,ee,Oe=0,Te=!1,He=!1;return function(rt){let ft;Oe++,!xe||Te?(Te=!1,xe=new se(oe,ae,Ve),ft=xe.subscribe(this),ee=rt.subscribe({next(we){xe.next(we)},error(we){Te=!0,xe.error(we)},complete(){He=!0,ee=void 0,xe.complete()}}),He&&(ee=void 0)):ft=xe.subscribe(this),this.add(()=>{Oe--,ft.unsubscribe(),ft=void 0,ee&&!He&&Me&&0===Oe&&(ee.unsubscribe(),ee=void 0,xe=void 0)})}}(Ve))}},1307:($t,$e,x)=>{"use strict";x.d($e,{T:()=>E});var g=x(3489);function E(he){return q=>q.lift(new B(he))}class B{constructor(q){this.total=q}call(q,se){return se.subscribe(new ne(q,this.total))}}class ne extends g.L{constructor(q,se){super(q),this.total=se,this.count=0}_next(q){++this.count>this.total&&this.destination.next(q)}}},1059:($t,$e,x)=>{"use strict";x.d($e,{O:()=>B});var g=x(1221),E=x(2866);function B(...ne){const he=ne[ne.length-1];return(0,E.K)(he)?(ne.pop(),q=>(0,g.z)(ne,q,he)):q=>(0,g.z)(ne,q)}},3334:($t,$e,x)=>{"use strict";x.d($e,{R:()=>he});var g=x(2916),E=x(8139),B=x(4241);class ne extends g.y{constructor(X,ie=0,Q=E.e){super(),this.source=X,this.delayTime=ie,this.scheduler=Q,(!(0,B.k)(ie)||ie<0)&&(this.delayTime=0),(!Q||"function"!=typeof Q.schedule)&&(this.scheduler=E.e)}static create(X,ie=0,Q=E.e){return new ne(X,ie,Q)}static dispatch(X){const{source:ie,subscriber:Q}=X;return this.add(ie.subscribe(Q))}_subscribe(X){return this.scheduler.schedule(ne.dispatch,this.delayTime,{source:this.source,subscriber:X})}}function he(se,X=0){return function(Q){return Q.lift(new q(se,X))}}class q{constructor(X,ie){this.scheduler=X,this.delay=ie}call(X,ie){return new ne(ie,this.delay,this.scheduler).subscribe(X)}}},7545:($t,$e,x)=>{"use strict";x.d($e,{w:()=>ne});var g=x(4850),E=x(5254),B=x(1177);function ne(se,X){return"function"==typeof X?ie=>ie.pipe(ne((Q,oe)=>(0,E.D)(se(Q,oe)).pipe((0,g.U)((ae,Me)=>X(Q,ae,oe,Me))))):ie=>ie.lift(new he(se))}class he{constructor(X){this.project=X}call(X,ie){return ie.subscribe(new q(X,this.project))}}class q extends B.Ds{constructor(X,ie){super(X),this.project=ie,this.index=0}_next(X){let ie;const Q=this.index++;try{ie=this.project(X,Q)}catch(oe){return void this.destination.error(oe)}this._innerSub(ie)}_innerSub(X){const ie=this.innerSubscription;ie&&ie.unsubscribe();const Q=new B.IY(this),oe=this.destination;oe.add(Q),this.innerSubscription=(0,B.ft)(X,Q),this.innerSubscription!==Q&&oe.add(this.innerSubscription)}_complete(){const{innerSubscription:X}=this;(!X||X.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(X){this.destination.next(X)}}},2986:($t,$e,x)=>{"use strict";x.d($e,{q:()=>ne});var g=x(3489),E=x(4231),B=x(8896);function ne(se){return X=>0===se?(0,B.c)():X.lift(new he(se))}class he{constructor(X){if(this.total=X,this.total<0)throw new E.W}call(X,ie){return ie.subscribe(new q(X,this.total))}}class q extends g.L{constructor(X,ie){super(X),this.total=ie,this.count=0}_next(X){const ie=this.total,Q=++this.count;Q<=ie&&(this.destination.next(X),Q===ie&&(this.destination.complete(),this.unsubscribe()))}}},7625:($t,$e,x)=>{"use strict";x.d($e,{R:()=>E});var g=x(1177);function E(he){return q=>q.lift(new B(he))}class B{constructor(q){this.notifier=q}call(q,se){const X=new ne(q),ie=(0,g.ft)(this.notifier,new g.IY(X));return ie&&!X.seenValue?(X.add(ie),se.subscribe(X)):X}}class ne extends g.Ds{constructor(q){super(q),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}},2868:($t,$e,x)=>{"use strict";x.d($e,{b:()=>ne});var g=x(3489);function E(){}var B=x(7043);function ne(se,X,ie){return function(oe){return oe.lift(new he(se,X,ie))}}class he{constructor(X,ie,Q){this.nextOrObserver=X,this.error=ie,this.complete=Q}call(X,ie){return ie.subscribe(new q(X,this.nextOrObserver,this.error,this.complete))}}class q extends g.L{constructor(X,ie,Q,oe){super(X),this._tapNext=E,this._tapError=E,this._tapComplete=E,this._tapError=Q||E,this._tapComplete=oe||E,(0,B.m)(ie)?(this._context=this,this._tapNext=ie):ie&&(this._context=ie,this._tapNext=ie.next||E,this._tapError=ie.error||E,this._tapComplete=ie.complete||E)}_next(X){try{this._tapNext.call(this._context,X)}catch(ie){return void this.destination.error(ie)}this.destination.next(X)}_error(X){try{this._tapError.call(this._context,X)}catch(ie){return void this.destination.error(ie)}this.destination.error(X)}_complete(){try{this._tapComplete.call(this._context)}catch(X){return void this.destination.error(X)}return this.destination.complete()}}},4907:($t,$e,x)=>{"use strict";x.d($e,{T:()=>B});var g=x(4450),E=x(3489);function B(se=q){return X=>X.lift(new ne(se))}class ne{constructor(X){this.errorFactory=X}call(X,ie){return ie.subscribe(new he(X,this.errorFactory))}}class he extends E.L{constructor(X,ie){super(X),this.errorFactory=ie,this.hasValue=!1}_next(X){this.hasValue=!0,this.destination.next(X)}_complete(){if(this.hasValue)return this.destination.complete();{let X;try{X=this.errorFactory()}catch(ie){X=ie}this.destination.error(X)}}}function q(){return new g.K}},6454:($t,$e,x)=>{"use strict";x.d($e,{r:()=>B});var g=x(2916),E=x(2654);function B(ne,he){return new g.y(q=>{const se=new E.w;let X=0;return se.add(he.schedule(function(){X!==ne.length?(q.next(ne[X++]),q.closed||se.add(this.schedule())):q.complete()})),se})}},6686:($t,$e,x)=>{"use strict";x.d($e,{o:()=>B});var g=x(2654);class E extends g.w{constructor(he,q){super()}schedule(he,q=0){return this}}class B extends E{constructor(he,q){super(he,q),this.scheduler=he,this.work=q,this.pending=!1}schedule(he,q=0){if(this.closed)return this;this.state=he;const se=this.id,X=this.scheduler;return null!=se&&(this.id=this.recycleAsyncId(X,se,q)),this.pending=!0,this.delay=q,this.id=this.id||this.requestAsyncId(X,this.id,q),this}requestAsyncId(he,q,se=0){return setInterval(he.flush.bind(he,this),se)}recycleAsyncId(he,q,se=0){if(null!==se&&this.delay===se&&!1===this.pending)return q;clearInterval(q)}execute(he,q){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const se=this._execute(he,q);if(se)return se;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(he,q){let X,se=!1;try{this.work(he)}catch(ie){se=!0,X=!!ie&&ie||new Error(ie)}if(se)return this.unsubscribe(),X}_unsubscribe(){const he=this.id,q=this.scheduler,se=q.actions,X=se.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==X&&se.splice(X,1),null!=he&&(this.id=this.recycleAsyncId(q,he,null)),this.delay=null}}},2268:($t,$e,x)=>{"use strict";x.d($e,{v:()=>E});let g=(()=>{class B{constructor(he,q=B.now){this.SchedulerAction=he,this.now=q}schedule(he,q=0,se){return new this.SchedulerAction(this,he).schedule(se,q)}}return B.now=()=>Date.now(),B})();class E extends g{constructor(ne,he=g.now){super(ne,()=>E.delegate&&E.delegate!==this?E.delegate.now():he()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(ne,he=0,q){return E.delegate&&E.delegate!==this?E.delegate.schedule(ne,he,q):super.schedule(ne,he,q)}flush(ne){const{actions:he}=this;if(this.active)return void he.push(ne);let q;this.active=!0;do{if(q=ne.execute(ne.state,ne.delay))break}while(ne=he.shift());if(this.active=!1,q){for(;ne=he.shift();)ne.unsubscribe();throw q}}}},352:($t,$e,x)=>{"use strict";x.d($e,{Z:()=>he});var g=x(6686),B=x(2268);const he=new class extends B.v{flush(X){this.active=!0,this.scheduled=void 0;const{actions:ie}=this;let Q,oe=-1,ae=ie.length;X=X||ie.shift();do{if(Q=X.execute(X.state,X.delay))break}while(++oe<ae&&(X=ie.shift()));if(this.active=!1,Q){for(;++oe<ae&&(X=ie.shift());)X.unsubscribe();throw Q}}}(class extends g.o{constructor(X,ie){super(X,ie),this.scheduler=X,this.work=ie}requestAsyncId(X,ie,Q=0){return null!==Q&&Q>0?super.requestAsyncId(X,ie,Q):(X.actions.push(this),X.scheduled||(X.scheduled=requestAnimationFrame(()=>X.flush(null))))}recycleAsyncId(X,ie,Q=0){if(null!==Q&&Q>0||null===Q&&this.delay>0)return super.recycleAsyncId(X,ie,Q);0===X.actions.length&&(cancelAnimationFrame(ie),X.scheduled=void 0)}})},8139:($t,$e,x)=>{"use strict";x.d($e,{e:()=>ae,E:()=>oe});let g=1;const E=Promise.resolve(),B={};function ne(Me){return Me in B&&(delete B[Me],!0)}const he={setImmediate(Me){const Ve=g++;return B[Ve]=!0,E.then(()=>ne(Ve)&&Me()),Ve},clearImmediate(Me){ne(Me)}};var se=x(6686),ie=x(2268);const oe=new class extends ie.v{flush(Ve){this.active=!0,this.scheduled=void 0;const{actions:xe}=this;let Oe,ee=-1,Te=xe.length;Ve=Ve||xe.shift();do{if(Oe=Ve.execute(Ve.state,Ve.delay))break}while(++ee<Te&&(Ve=xe.shift()));if(this.active=!1,Oe){for(;++ee<Te&&(Ve=xe.shift());)Ve.unsubscribe();throw Oe}}}(class extends se.o{constructor(Ve,xe){super(Ve,xe),this.scheduler=Ve,this.work=xe}requestAsyncId(Ve,xe,Oe=0){return null!==Oe&&Oe>0?super.requestAsyncId(Ve,xe,Oe):(Ve.actions.push(this),Ve.scheduled||(Ve.scheduled=he.setImmediate(Ve.flush.bind(Ve,null))))}recycleAsyncId(Ve,xe,Oe=0){if(null!==Oe&&Oe>0||null===Oe&&this.delay>0)return super.recycleAsyncId(Ve,xe,Oe);0===Ve.actions.length&&(he.clearImmediate(xe),Ve.scheduled=void 0)}}),ae=oe},353:($t,$e,x)=>{"use strict";x.d($e,{z:()=>B,P:()=>ne});var g=x(6686);const B=new(x(2268).v)(g.o),ne=B},341:($t,$e,x)=>{"use strict";x.d($e,{c:()=>q,N:()=>he});var g=x(6686),B=x(2268);const he=new class extends B.v{}(class extends g.o{constructor(X,ie){super(X,ie),this.scheduler=X,this.work=ie}schedule(X,ie=0){return ie>0?super.schedule(X,ie):(this.delay=ie,this.state=X,this.scheduler.flush(this),this)}execute(X,ie){return ie>0||this.closed?super.execute(X,ie):this._execute(X,ie)}requestAsyncId(X,ie,Q=0){return null!==Q&&Q>0||null===Q&&this.delay>0?super.requestAsyncId(X,ie,Q):X.flush(this)}}),q=he},5430:($t,$e,x)=>{"use strict";x.d($e,{hZ:()=>E});const E="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},3821:($t,$e,x)=>{"use strict";x.d($e,{L:()=>g});const g="function"==typeof Symbol&&Symbol.observable||"@@observable"},7668:($t,$e,x)=>{"use strict";x.d($e,{b:()=>g});const g="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},4231:($t,$e,x)=>{"use strict";x.d($e,{W:()=>E});const E=(()=>{function B(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return B.prototype=Object.create(Error.prototype),B})()},4450:($t,$e,x)=>{"use strict";x.d($e,{K:()=>E});const E=(()=>{function B(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return B.prototype=Object.create(Error.prototype),B})()},5279:($t,$e,x)=>{"use strict";x.d($e,{N:()=>E});const E=(()=>{function B(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return B.prototype=Object.create(Error.prototype),B})()},2782:($t,$e,x)=>{"use strict";function g(E){setTimeout(()=>{throw E},0)}x.d($e,{z:()=>g})},5379:($t,$e,x)=>{"use strict";function g(E){return E}x.d($e,{y:()=>g})},6688:($t,$e,x)=>{"use strict";x.d($e,{k:()=>g});const g=Array.isArray||(E=>E&&"number"==typeof E.length)},8515:($t,$e,x)=>{"use strict";x.d($e,{z:()=>g});const g=E=>E&&"number"==typeof E.length&&"function"!=typeof E},7043:($t,$e,x)=>{"use strict";function g(E){return"function"==typeof E}x.d($e,{m:()=>g})},4241:($t,$e,x)=>{"use strict";x.d($e,{k:()=>E});var g=x(6688);function E(B){return!(0,g.k)(B)&&B-parseFloat(B)+1>=0}},7830:($t,$e,x)=>{"use strict";function g(E){return null!==E&&"object"==typeof E}x.d($e,{K:()=>g})},4715:($t,$e,x)=>{"use strict";x.d($e,{b:()=>E});var g=x(2916);function E(B){return!!B&&(B instanceof g.y||"function"==typeof B.lift&&"function"==typeof B.subscribe)}},8955:($t,$e,x)=>{"use strict";function g(E){return!!E&&"function"!=typeof E.subscribe&&"function"==typeof E.then}x.d($e,{t:()=>g})},2866:($t,$e,x)=>{"use strict";function g(E){return E&&"function"==typeof E.schedule}x.d($e,{K:()=>g})},9249:($t,$e,x)=>{"use strict";x.d($e,{s:()=>oe});var g=x(3650),E=x(2782),ne=x(5430),q=x(3821),X=x(8515),ie=x(8955),Q=x(7830);const oe=ae=>{if(ae&&"function"==typeof ae[q.L])return(ae=>Me=>{const Ve=ae[q.L]();if("function"!=typeof Ve.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return Ve.subscribe(Me)})(ae);if((0,X.z)(ae))return(0,g.V)(ae);if((0,ie.t)(ae))return(ae=>Me=>(ae.then(Ve=>{Me.closed||(Me.next(Ve),Me.complete())},Ve=>Me.error(Ve)).then(null,E.z),Me))(ae);if(ae&&"function"==typeof ae[ne.hZ])return(ae=>Me=>{const Ve=ae[ne.hZ]();for(;;){let xe;try{xe=Ve.next()}catch(Oe){return Me.error(Oe),Me}if(xe.done){Me.complete();break}if(Me.next(xe.value),Me.closed)break}return"function"==typeof Ve.return&&Me.add(()=>{Ve.return&&Ve.return()}),Me})(ae);{const Ve=`You provided ${(0,Q.K)(ae)?"an invalid object":`'${ae}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(Ve)}}},3650:($t,$e,x)=>{"use strict";x.d($e,{V:()=>g});const g=E=>B=>{for(let ne=0,he=E.length;ne<he&&!B.closed;ne++)B.next(E[ne]);B.complete()}},448:($t,$e,x)=>{"use strict";x.d($e,{D:()=>he});var g=x(3489);class E extends g.L{constructor(se,X,ie){super(),this.parent=se,this.outerValue=X,this.outerIndex=ie,this.index=0}_next(se){this.parent.notifyNext(this.outerValue,se,this.outerIndex,this.index++,this)}_error(se){this.parent.notifyError(se,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var B=x(9249),ne=x(2916);function he(q,se,X,ie,Q=new E(q,X,ie)){if(!Q.closed)return se instanceof ne.y?se.subscribe(Q):(0,B.s)(se)(Q)}},1777:($t,$e,x)=>{"use strict";x.d($e,{l3:()=>B,_j:()=>g,LC:()=>E,ZN:()=>Te,jt:()=>he,F4:()=>Q,vP:()=>se,SB:()=>ie,oB:()=>X,eR:()=>oe,X$:()=>ne,ZE:()=>He,k1:()=>yt});class g{}class E{}const B="*";function ne(rt,ft){return{type:7,name:rt,definitions:ft,options:{}}}function he(rt,ft=null){return{type:4,styles:ft,timings:rt}}function se(rt,ft=null){return{type:2,steps:rt,options:ft}}function X(rt){return{type:6,styles:rt,offset:null}}function ie(rt,ft,we){return{type:0,name:rt,styles:ft,options:we}}function Q(rt){return{type:5,steps:rt}}function oe(rt,ft,we=null){return{type:1,expr:rt,animation:ft,options:we}}function ee(rt){Promise.resolve(null).then(rt)}class Te{constructor(ft=0,we=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=ft+we}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(ft=>ft()),this._onDoneFns=[])}onStart(ft){this._onStartFns.push(ft)}onDone(ft){this._onDoneFns.push(ft)}onDestroy(ft){this._onDestroyFns.push(ft)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){ee(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(ft=>ft()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(ft=>ft()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(ft){this._position=this.totalTime?ft*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(ft){const we="start"==ft?this._onStartFns:this._onDoneFns;we.forEach(Pe=>Pe()),we.length=0}}class He{constructor(ft){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=ft;let we=0,Pe=0,qe=0;const et=this.players.length;0==et?ee(()=>this._onFinish()):this.players.forEach(At=>{At.onDone(()=>{++we==et&&this._onFinish()}),At.onDestroy(()=>{++Pe==et&&this._onDestroy()}),At.onStart(()=>{++qe==et&&this._onStart()})}),this.totalTime=this.players.reduce((At,Ut)=>Math.max(At,Ut.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(ft=>ft()),this._onDoneFns=[])}init(){this.players.forEach(ft=>ft.init())}onStart(ft){this._onStartFns.push(ft)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(ft=>ft()),this._onStartFns=[])}onDone(ft){this._onDoneFns.push(ft)}onDestroy(ft){this._onDestroyFns.push(ft)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(ft=>ft.play())}pause(){this.players.forEach(ft=>ft.pause())}restart(){this.players.forEach(ft=>ft.restart())}finish(){this._onFinish(),this.players.forEach(ft=>ft.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(ft=>ft.destroy()),this._onDestroyFns.forEach(ft=>ft()),this._onDestroyFns=[])}reset(){this.players.forEach(ft=>ft.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(ft){const we=ft*this.totalTime;this.players.forEach(Pe=>{const qe=Pe.totalTime?Math.min(1,we/Pe.totalTime):1;Pe.setPosition(qe)})}getPosition(){const ft=this.players.reduce((we,Pe)=>null===we||Pe.totalTime>we.totalTime?Pe:we,null);return null!=ft?ft.getPosition():0}beforeDestroy(){this.players.forEach(ft=>{ft.beforeDestroy&&ft.beforeDestroy()})}triggerCallback(ft){const we="start"==ft?this._onStartFns:this._onDoneFns;we.forEach(Pe=>Pe()),we.length=0}}const yt="!"},9808:($t,$e,x)=>{"use strict";x.d($e,{mr:()=>He,Ov:()=>It,ez:()=>us,K0:()=>se,JJ:()=>Ts,Do:()=>rt,V_:()=>Q,Ye:()=>ft,S$:()=>ee,mk:()=>li,sg:()=>gi,O5:()=>mi,PC:()=>Ti,RF:()=>Ki,n9:()=>Hi,b0:()=>yt,lw:()=>X,EM:()=>Qo,JF:()=>xs,NF:()=>Do,PM:()=>ki,w_:()=>q,bD:()=>Ss,q:()=>B,Mx:()=>er,HT:()=>he});var g=x(5e3);let E=null;function B(){return E}function he(G){E||(E=G)}class q{}const se=new g.OlP("DocumentToken");let X=(()=>{class G{historyGo(y){throw new Error("Not implemented")}}return G.\u0275fac=function(y){return new(y||G)},G.\u0275prov=g.Yz7({token:G,factory:function(){return(0,g.LFG)(oe)},providedIn:"platform"}),G})();const Q=new g.OlP("Location Initialized");let oe=(()=>{class G extends X{constructor(y){super(),this._doc=y,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return B().getBaseHref(this._doc)}onPopState(y){const C=B().getGlobalEventTarget(this._doc,"window");return C.addEventListener("popstate",y,!1),()=>C.removeEventListener("popstate",y)}onHashChange(y){const C=B().getGlobalEventTarget(this._doc,"window");return C.addEventListener("hashchange",y,!1),()=>C.removeEventListener("hashchange",y)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(y){this.location.pathname=y}pushState(y,C,H){ae()?this._history.pushState(y,C,H):this.location.hash=H}replaceState(y,C,H){ae()?this._history.replaceState(y,C,H):this.location.hash=H}forward(){this._history.forward()}back(){this._history.back()}historyGo(y=0){this._history.go(y)}getState(){return this._history.state}}return G.\u0275fac=function(y){return new(y||G)(g.LFG(se))},G.\u0275prov=g.Yz7({token:G,factory:function(){return new oe((0,g.LFG)(se))},providedIn:"platform"}),G})();function ae(){return!!window.history.pushState}function Ve(G,S){if(0==G.length)return S;if(0==S.length)return G;let y=0;return G.endsWith("/")&&y++,S.startsWith("/")&&y++,2==y?G+S.substring(1):1==y?G+S:G+"/"+S}function xe(G){const S=G.match(/#|\?|$/),y=S&&S.index||G.length;return G.slice(0,y-("/"===G[y-1]?1:0))+G.slice(y)}function Oe(G){return G&&"?"!==G[0]?"?"+G:G}let ee=(()=>{class G{historyGo(y){throw new Error("Not implemented")}}return G.\u0275fac=function(y){return new(y||G)},G.\u0275prov=g.Yz7({token:G,factory:function(){return function(G){const S=(0,g.LFG)(se).location;return new yt((0,g.LFG)(X),S&&S.origin||"")}()},providedIn:"root"}),G})();const He=new g.OlP("appBaseHref");let yt=(()=>{class G extends ee{constructor(y,C){if(super(),this._platformLocation=y,this._removeListenerFns=[],null==C&&(C=this._platformLocation.getBaseHrefFromDOM()),null==C)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=C}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(y){this._removeListenerFns.push(this._platformLocation.onPopState(y),this._platformLocation.onHashChange(y))}getBaseHref(){return this._baseHref}prepareExternalUrl(y){return Ve(this._baseHref,y)}path(y=!1){const C=this._platformLocation.pathname+Oe(this._platformLocation.search),H=this._platformLocation.hash;return H&&y?`${C}${H}`:C}pushState(y,C,H,je){const wt=this.prepareExternalUrl(H+Oe(je));this._platformLocation.pushState(y,C,wt)}replaceState(y,C,H,je){const wt=this.prepareExternalUrl(H+Oe(je));this._platformLocation.replaceState(y,C,wt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(y=0){var C,H;null===(H=(C=this._platformLocation).historyGo)||void 0===H||H.call(C,y)}}return G.\u0275fac=function(y){return new(y||G)(g.LFG(X),g.LFG(He,8))},G.\u0275prov=g.Yz7({token:G,factory:G.\u0275fac}),G})(),rt=(()=>{class G extends ee{constructor(y,C){super(),this._platformLocation=y,this._baseHref="",this._removeListenerFns=[],null!=C&&(this._baseHref=C)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(y){this._removeListenerFns.push(this._platformLocation.onPopState(y),this._platformLocation.onHashChange(y))}getBaseHref(){return this._baseHref}path(y=!1){let C=this._platformLocation.hash;return null==C&&(C="#"),C.length>0?C.substring(1):C}prepareExternalUrl(y){const C=Ve(this._baseHref,y);return C.length>0?"#"+C:C}pushState(y,C,H,je){let wt=this.prepareExternalUrl(H+Oe(je));0==wt.length&&(wt=this._platformLocation.pathname),this._platformLocation.pushState(y,C,wt)}replaceState(y,C,H,je){let wt=this.prepareExternalUrl(H+Oe(je));0==wt.length&&(wt=this._platformLocation.pathname),this._platformLocation.replaceState(y,C,wt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(y=0){var C,H;null===(H=(C=this._platformLocation).historyGo)||void 0===H||H.call(C,y)}}return G.\u0275fac=function(y){return new(y||G)(g.LFG(X),g.LFG(He,8))},G.\u0275prov=g.Yz7({token:G,factory:G.\u0275fac}),G})(),ft=(()=>{class G{constructor(y,C){this._subject=new g.vpe,this._urlChangeListeners=[],this._platformStrategy=y;const H=this._platformStrategy.getBaseHref();this._platformLocation=C,this._baseHref=xe(qe(H)),this._platformStrategy.onPopState(je=>{this._subject.emit({url:this.path(!0),pop:!0,state:je.state,type:je.type})})}path(y=!1){return this.normalize(this._platformStrategy.path(y))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(y,C=""){return this.path()==this.normalize(y+Oe(C))}normalize(y){return G.stripTrailingSlash(function(G,S){return G&&S.startsWith(G)?S.substring(G.length):S}(this._baseHref,qe(y)))}prepareExternalUrl(y){return y&&"/"!==y[0]&&(y="/"+y),this._platformStrategy.prepareExternalUrl(y)}go(y,C="",H=null){this._platformStrategy.pushState(H,"",y,C),this._notifyUrlChangeListeners(this.prepareExternalUrl(y+Oe(C)),H)}replaceState(y,C="",H=null){this._platformStrategy.replaceState(H,"",y,C),this._notifyUrlChangeListeners(this.prepareExternalUrl(y+Oe(C)),H)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(y=0){var C,H;null===(H=(C=this._platformStrategy).historyGo)||void 0===H||H.call(C,y)}onUrlChange(y){this._urlChangeListeners.push(y),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(C=>{this._notifyUrlChangeListeners(C.url,C.state)}))}_notifyUrlChangeListeners(y="",C){this._urlChangeListeners.forEach(H=>H(y,C))}subscribe(y,C,H){return this._subject.subscribe({next:y,error:C,complete:H})}}return G.normalizeQueryParams=Oe,G.joinWithSlash=Ve,G.stripTrailingSlash=xe,G.\u0275fac=function(y){return new(y||G)(g.LFG(ee),g.LFG(X))},G.\u0275prov=g.Yz7({token:G,factory:function(){return new ft((0,g.LFG)(ee),(0,g.LFG)(X))},providedIn:"root"}),G})();function qe(G){return G.replace(/\/index.html$/,"")}var At=(()=>((At=At||{})[At.Decimal=0]="Decimal",At[At.Percent=1]="Percent",At[At.Currency=2]="Currency",At[At.Scientific=3]="Scientific",At))(),Ut=(()=>((Ut=Ut||{})[Ut.Zero=0]="Zero",Ut[Ut.One=1]="One",Ut[Ut.Two=2]="Two",Ut[Ut.Few=3]="Few",Ut[Ut.Many=4]="Many",Ut[Ut.Other=5]="Other",Ut))(),qt=(()=>((qt=qt||{})[qt.Decimal=0]="Decimal",qt[qt.Group=1]="Group",qt[qt.List=2]="List",qt[qt.PercentSign=3]="PercentSign",qt[qt.PlusSign=4]="PlusSign",qt[qt.MinusSign=5]="MinusSign",qt[qt.Exponential=6]="Exponential",qt[qt.SuperscriptingExponent=7]="SuperscriptingExponent",qt[qt.PerMille=8]="PerMille",qt[qt.Infinity=9]="Infinity",qt[qt.NaN=10]="NaN",qt[qt.TimeSeparator=11]="TimeSeparator",qt[qt.CurrencyDecimal=12]="CurrencyDecimal",qt[qt.CurrencyGroup=13]="CurrencyGroup",qt))();function mt(G,S){const y=(0,g.cg1)(G),C=y[g.wAp.NumberSymbols][S];if(void 0===C){if(S===qt.CurrencyDecimal)return y[g.wAp.NumberSymbols][qt.Decimal];if(S===qt.CurrencyGroup)return y[g.wAp.NumberSymbols][qt.Group]}return C}const mn=g.kL8,St=/^(\d+)?\.((\d+)(-(\d+))?)?$/;function Rr(G){const S=parseInt(G);if(isNaN(S))throw new Error("Invalid integer literal when parsing "+G);return S}class Br{}let Vr=(()=>{class G extends Br{constructor(y){super(),this.locale=y}getPluralCategory(y,C){switch(mn(C||this.locale)(y)){case Ut.Zero:return"zero";case Ut.One:return"one";case Ut.Two:return"two";case Ut.Few:return"few";case Ut.Many:return"many";default:return"other"}}}return G.\u0275fac=function(y){return new(y||G)(g.LFG(g.soG))},G.\u0275prov=g.Yz7({token:G,factory:G.\u0275fac}),G})();function er(G,S){S=encodeURIComponent(S);for(const y of G.split(";")){const C=y.indexOf("="),[H,je]=-1==C?[y,""]:[y.slice(0,C),y.slice(C+1)];if(H.trim()===S)return decodeURIComponent(je)}return null}let li=(()=>{class G{constructor(y,C,H,je){this._iterableDiffers=y,this._keyValueDiffers=C,this._ngEl=H,this._renderer=je,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(y){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof y?y.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(y){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof y?y.split(/\s+/):y,this._rawClass&&((0,g.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const y=this._iterableDiffer.diff(this._rawClass);y&&this._applyIterableChanges(y)}else if(this._keyValueDiffer){const y=this._keyValueDiffer.diff(this._rawClass);y&&this._applyKeyValueChanges(y)}}_applyKeyValueChanges(y){y.forEachAddedItem(C=>this._toggleClass(C.key,C.currentValue)),y.forEachChangedItem(C=>this._toggleClass(C.key,C.currentValue)),y.forEachRemovedItem(C=>{C.previousValue&&this._toggleClass(C.key,!1)})}_applyIterableChanges(y){y.forEachAddedItem(C=>{if("string"!=typeof C.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,g.AaK)(C.item)}`);this._toggleClass(C.item,!0)}),y.forEachRemovedItem(C=>this._toggleClass(C.item,!1))}_applyClasses(y){y&&(Array.isArray(y)||y instanceof Set?y.forEach(C=>this._toggleClass(C,!0)):Object.keys(y).forEach(C=>this._toggleClass(C,!!y[C])))}_removeClasses(y){y&&(Array.isArray(y)||y instanceof Set?y.forEach(C=>this._toggleClass(C,!1)):Object.keys(y).forEach(C=>this._toggleClass(C,!1)))}_toggleClass(y,C){(y=y.trim())&&y.split(/\s+/g).forEach(H=>{C?this._renderer.addClass(this._ngEl.nativeElement,H):this._renderer.removeClass(this._ngEl.nativeElement,H)})}}return G.\u0275fac=function(y){return new(y||G)(g.Y36(g.ZZ4),g.Y36(g.aQg),g.Y36(g.SBq),g.Y36(g.Qsj))},G.\u0275dir=g.lG2({type:G,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),G})();class Ji{constructor(S,y,C,H){this.$implicit=S,this.ngForOf=y,this.index=C,this.count=H}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let gi=(()=>{class G{constructor(y,C,H){this._viewContainer=y,this._template=C,this._differs=H,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(y){this._ngForOf=y,this._ngForOfDirty=!0}set ngForTrackBy(y){this._trackByFn=y}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(y){y&&(this._template=y)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const y=this._ngForOf;!this._differ&&y&&(this._differ=this._differs.find(y).create(this.ngForTrackBy))}if(this._differ){const y=this._differ.diff(this._ngForOf);y&&this._applyChanges(y)}}_applyChanges(y){const C=this._viewContainer;y.forEachOperation((H,je,wt)=>{if(null==H.previousIndex)C.createEmbeddedView(this._template,new Ji(H.item,this._ngForOf,-1,-1),null===wt?void 0:wt);else if(null==wt)C.remove(null===je?void 0:je);else if(null!==je){const hn=C.get(je);C.move(hn,wt),ci(hn,H)}});for(let H=0,je=C.length;H<je;H++){const hn=C.get(H).context;hn.index=H,hn.count=je,hn.ngForOf=this._ngForOf}y.forEachIdentityChange(H=>{ci(C.get(H.currentIndex),H)})}static ngTemplateContextGuard(y,C){return!0}}return G.\u0275fac=function(y){return new(y||G)(g.Y36(g.s_b),g.Y36(g.Rgc),g.Y36(g.ZZ4))},G.\u0275dir=g.lG2({type:G,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),G})();function ci(G,S){G.context.$implicit=S.item}let mi=(()=>{class G{constructor(y,C){this._viewContainer=y,this._context=new ri,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=C}set ngIf(y){this._context.$implicit=this._context.ngIf=y,this._updateView()}set ngIfThen(y){tr("ngIfThen",y),this._thenTemplateRef=y,this._thenViewRef=null,this._updateView()}set ngIfElse(y){tr("ngIfElse",y),this._elseTemplateRef=y,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(y,C){return!0}}return G.\u0275fac=function(y){return new(y||G)(g.Y36(g.s_b),g.Y36(g.Rgc))},G.\u0275dir=g.lG2({type:G,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),G})();class ri{constructor(){this.$implicit=null,this.ngIf=null}}function tr(G,S){if(S&&!S.createEmbeddedView)throw new Error(`${G} must be a TemplateRef, but received '${(0,g.AaK)(S)}'.`)}class Xi{constructor(S,y){this._viewContainerRef=S,this._templateRef=y,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(S){S&&!this._created?this.create():!S&&this._created&&this.destroy()}}let Ki=(()=>{class G{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(y){this._ngSwitch=y,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(y){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(y)}_matchCase(y){const C=y==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||C,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),C}_updateDefaultCases(y){if(this._defaultViews&&y!==this._defaultUsed){this._defaultUsed=y;for(let C=0;C<this._defaultViews.length;C++)this._defaultViews[C].enforceState(y)}}}return G.\u0275fac=function(y){return new(y||G)},G.\u0275dir=g.lG2({type:G,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),G})(),Hi=(()=>{class G{constructor(y,C,H){this.ngSwitch=H,H._addCase(),this._view=new Xi(y,C)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return G.\u0275fac=function(y){return new(y||G)(g.Y36(g.s_b),g.Y36(g.Rgc),g.Y36(Ki,9))},G.\u0275dir=g.lG2({type:G,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),G})(),Ti=(()=>{class G{constructor(y,C,H){this._ngEl=y,this._differs=C,this._renderer=H,this._ngStyle=null,this._differ=null}set ngStyle(y){this._ngStyle=y,!this._differ&&y&&(this._differ=this._differs.find(y).create())}ngDoCheck(){if(this._differ){const y=this._differ.diff(this._ngStyle);y&&this._applyChanges(y)}}_setStyle(y,C){const[H,je]=y.split(".");null!=(C=null!=C&&je?`${C}${je}`:C)?this._renderer.setStyle(this._ngEl.nativeElement,H,C):this._renderer.removeStyle(this._ngEl.nativeElement,H)}_applyChanges(y){y.forEachRemovedItem(C=>this._setStyle(C.key,null)),y.forEachAddedItem(C=>this._setStyle(C.key,C.currentValue)),y.forEachChangedItem(C=>this._setStyle(C.key,C.currentValue))}}return G.\u0275fac=function(y){return new(y||G)(g.Y36(g.SBq),g.Y36(g.aQg),g.Y36(g.Qsj))},G.\u0275dir=g.lG2({type:G,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),G})();function yi(G,S){return Error(`InvalidPipeArgument: '${S}' for pipe '${(0,g.AaK)(G)}'`)}class gs{createSubscription(S,y){return S.subscribe({next:y,error:C=>{throw C}})}dispose(S){S.unsubscribe()}onDestroy(S){S.unsubscribe()}}class Si{createSubscription(S,y){return S.then(y,C=>{throw C})}dispose(S){}onDestroy(S){}}const lt=new Si,ot=new gs;let It=(()=>{class G{constructor(y){this._ref=y,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(y){return this._obj?y!==this._obj?(this._dispose(),this.transform(y)):this._latestValue:(y&&this._subscribe(y),this._latestValue)}_subscribe(y){this._obj=y,this._strategy=this._selectStrategy(y),this._subscription=this._strategy.createSubscription(y,C=>this._updateLatestValue(y,C))}_selectStrategy(y){if((0,g.QGY)(y))return lt;if((0,g.F4k)(y))return ot;throw yi(G,y)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(y,C){y===this._obj&&(this._latestValue=C,this._ref.markForCheck())}}return G.\u0275fac=function(y){return new(y||G)(g.Y36(g.sBO,16))},G.\u0275pipe=g.Yjl({name:"async",type:G,pure:!1}),G})(),Ts=(()=>{class G{constructor(y){this._locale=y}transform(y,C,H){if(!function(G){return!(null==G||""===G||G!=G)}(y))return null;H=H||this._locale;try{return function(G,S,y){return function(G,S,y,C,H,je,wt=!1){let hn="",Pn=!1;if(isFinite(G)){let Gn=function(G){let C,H,je,wt,hn,S=Math.abs(G)+"",y=0;for((H=S.indexOf("."))>-1&&(S=S.replace(".","")),(je=S.search(/e/i))>0?(H<0&&(H=je),H+=+S.slice(je+1),S=S.substring(0,je)):H<0&&(H=S.length),je=0;"0"===S.charAt(je);je++);if(je===(hn=S.length))C=[0],H=1;else{for(hn--;"0"===S.charAt(hn);)hn--;for(H-=je,C=[],wt=0;je<=hn;je++,wt++)C[wt]=Number(S.charAt(je))}return H>22&&(C=C.splice(0,21),y=H-1,H=1),{digits:C,exponent:y,integerLen:H}}(G);wt&&(Gn=function(G){if(0===G.digits[0])return G;const S=G.digits.length-G.integerLen;return G.exponent?G.exponent+=2:(0===S?G.digits.push(0,0):1===S&&G.digits.push(0),G.integerLen+=2),G}(Gn));let Sn=S.minInt,rr=S.minFrac,Wr=S.maxFrac;if(je){const Ys=je.match(St);if(null===Ys)throw new Error(`${je} is not a valid digit info`);const Ei=Ys[1],To=Ys[3],ms=Ys[5];null!=Ei&&(Sn=Rr(Ei)),null!=To&&(rr=Rr(To)),null!=ms?Wr=Rr(ms):null!=To&&rr>Wr&&(Wr=rr)}!function(G,S,y){if(S>y)throw new Error(`The minimum number of digits after fraction (${S}) is higher than the maximum (${y}).`);let C=G.digits,H=C.length-G.integerLen;const je=Math.min(Math.max(S,H),y);let wt=je+G.integerLen,hn=C[wt];if(wt>0){C.splice(Math.max(G.integerLen,wt));for(let rr=wt;rr<C.length;rr++)C[rr]=0}else{H=Math.max(0,H),G.integerLen=1,C.length=Math.max(1,wt=je+1),C[0]=0;for(let rr=1;rr<wt;rr++)C[rr]=0}if(hn>=5)if(wt-1<0){for(let rr=0;rr>wt;rr--)C.unshift(0),G.integerLen++;C.unshift(1),G.integerLen++}else C[wt-1]++;for(;H<Math.max(0,je);H++)C.push(0);let Pn=0!==je;const Gn=S+G.integerLen,Sn=C.reduceRight(function(rr,Wr,Ur,xr){return xr[Ur]=(Wr+=rr)<10?Wr:Wr-10,Pn&&(0===xr[Ur]&&Ur>=Gn?xr.pop():Pn=!1),Wr>=10?1:0},0);Sn&&(C.unshift(Sn),G.integerLen++)}(Gn,rr,Wr);let Ur=Gn.digits,xr=Gn.integerLen;const Tn=Gn.exponent;let Os=[];for(Pn=Ur.every(Ys=>!Ys);xr<Sn;xr++)Ur.unshift(0);for(;xr<0;xr++)Ur.unshift(0);xr>0?Os=Ur.splice(xr,Ur.length):(Os=Ur,Ur=[0]);const No=[];for(Ur.length>=S.lgSize&&No.unshift(Ur.splice(-S.lgSize,Ur.length).join(""));Ur.length>S.gSize;)No.unshift(Ur.splice(-S.gSize,Ur.length).join(""));Ur.length&&No.unshift(Ur.join("")),hn=No.join(mt(y,C)),Os.length&&(hn+=mt(y,H)+Os.join("")),Tn&&(hn+=mt(y,qt.Exponential)+"+"+Tn)}else hn=mt(y,qt.Infinity);return hn=G<0&&!Pn?S.negPre+hn+S.negSuf:S.posPre+hn+S.posSuf,hn}(G,function(G,S="-"){const y={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},C=G.split(";"),H=C[0],je=C[1],wt=-1!==H.indexOf(".")?H.split("."):[H.substring(0,H.lastIndexOf("0")+1),H.substring(H.lastIndexOf("0")+1)],hn=wt[0],Pn=wt[1]||"";y.posPre=hn.substr(0,hn.indexOf("#"));for(let Sn=0;Sn<Pn.length;Sn++){const rr=Pn.charAt(Sn);"0"===rr?y.minFrac=y.maxFrac=Sn+1:"#"===rr?y.maxFrac=Sn+1:y.posSuf+=rr}const Gn=hn.split(",");if(y.gSize=Gn[1]?Gn[1].length:0,y.lgSize=Gn[2]||Gn[1]?(Gn[2]||Gn[1]).length:0,je){const Sn=H.length-y.posPre.length-y.posSuf.length,rr=je.indexOf("#");y.negPre=je.substr(0,rr).replace(/'/g,""),y.negSuf=je.substr(rr+Sn).replace(/'/g,"")}else y.negPre=S+y.posPre,y.negSuf=y.posSuf;return y}(function(G,S){return(0,g.cg1)(G)[g.wAp.NumberFormats][S]}(S,At.Decimal),mt(S,qt.MinusSign)),S,qt.Group,qt.Decimal,y)}(function(G){if("string"==typeof G&&!isNaN(Number(G)-parseFloat(G)))return Number(G);if("number"!=typeof G)throw new Error(`${G} is not a number`);return G}(y),H,C)}catch(je){throw yi(G,je.message)}}}return G.\u0275fac=function(y){return new(y||G)(g.Y36(g.soG,16))},G.\u0275pipe=g.Yjl({name:"number",type:G,pure:!0}),G})();let us=(()=>{class G{}return G.\u0275fac=function(y){return new(y||G)},G.\u0275mod=g.oAB({type:G}),G.\u0275inj=g.cJS({providers:[{provide:Br,useClass:Vr}]}),G})();const Ss="browser";function Do(G){return G===Ss}function ki(G){return"server"===G}let Qo=(()=>{class G{}return G.\u0275prov=(0,g.Yz7)({token:G,providedIn:"root",factory:()=>new Ls((0,g.LFG)(se),window)}),G})();class Ls{constructor(S,y){this.document=S,this.window=y,this.offset=()=>[0,0]}setOffset(S){this.offset=Array.isArray(S)?()=>S:S}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(S){this.supportsScrolling()&&this.window.scrollTo(S[0],S[1])}scrollToAnchor(S){if(!this.supportsScrolling())return;const y=function(G,S){const y=G.getElementById(S)||G.getElementsByName(S)[0];if(y)return y;if("function"==typeof G.createTreeWalker&&G.body&&(G.body.createShadowRoot||G.body.attachShadow)){const C=G.createTreeWalker(G.body,NodeFilter.SHOW_ELEMENT);let H=C.currentNode;for(;H;){const je=H.shadowRoot;if(je){const wt=je.getElementById(S)||je.querySelector(`[name="${S}"]`);if(wt)return wt}H=C.nextNode()}}return null}(this.document,S);y&&(this.scrollToElement(y),this.attemptFocus(y))}setHistoryScrollRestoration(S){if(this.supportScrollRestoration()){const y=this.window.history;y&&y.scrollRestoration&&(y.scrollRestoration=S)}}scrollToElement(S){const y=S.getBoundingClientRect(),C=y.left+this.window.pageXOffset,H=y.top+this.window.pageYOffset,je=this.offset();this.window.scrollTo(C-je[0],H-je[1])}attemptFocus(S){return S.focus(),this.document.activeElement===S}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const S=Fi(this.window.history)||Fi(Object.getPrototypeOf(this.window.history));return!(!S||!S.writable&&!S.set)}catch(S){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(S){return!1}}}function Fi(G){return Object.getOwnPropertyDescriptor(G,"scrollRestoration")}class xs{}},520:($t,$e,x)=>{"use strict";x.d($e,{eN:()=>qt,JF:()=>Yn,UA:()=>jt});var g=x(9808),E=x(5e3),B=x(1086),ne=x(2916),he=x(1406),q=x(2198),se=x(4850);class X{}class ie{}class Q{constructor(L){this.normalizedNames=new Map,this.lazyUpdate=null,L?this.lazyInit="string"==typeof L?()=>{this.headers=new Map,L.split("\n").forEach(J=>{const ce=J.indexOf(":");if(ce>0){const be=J.slice(0,ce),N=be.toLowerCase(),Ie=J.slice(ce+1).trim();this.maybeSetNormalizedName(be,N),this.headers.has(N)?this.headers.get(N).push(Ie):this.headers.set(N,[Ie])}})}:()=>{this.headers=new Map,Object.keys(L).forEach(J=>{let ce=L[J];const be=J.toLowerCase();"string"==typeof ce&&(ce=[ce]),ce.length>0&&(this.headers.set(be,ce),this.maybeSetNormalizedName(J,be))})}:this.headers=new Map}has(L){return this.init(),this.headers.has(L.toLowerCase())}get(L){this.init();const J=this.headers.get(L.toLowerCase());return J&&J.length>0?J[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(L){return this.init(),this.headers.get(L.toLowerCase())||null}append(L,J){return this.clone({name:L,value:J,op:"a"})}set(L,J){return this.clone({name:L,value:J,op:"s"})}delete(L,J){return this.clone({name:L,value:J,op:"d"})}maybeSetNormalizedName(L,J){this.normalizedNames.has(J)||this.normalizedNames.set(J,L)}init(){this.lazyInit&&(this.lazyInit instanceof Q?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(L=>this.applyUpdate(L)),this.lazyUpdate=null))}copyFrom(L){L.init(),Array.from(L.headers.keys()).forEach(J=>{this.headers.set(J,L.headers.get(J)),this.normalizedNames.set(J,L.normalizedNames.get(J))})}clone(L){const J=new Q;return J.lazyInit=this.lazyInit&&this.lazyInit instanceof Q?this.lazyInit:this,J.lazyUpdate=(this.lazyUpdate||[]).concat([L]),J}applyUpdate(L){const J=L.name.toLowerCase();switch(L.op){case"a":case"s":let ce=L.value;if("string"==typeof ce&&(ce=[ce]),0===ce.length)return;this.maybeSetNormalizedName(L.name,J);const be=("a"===L.op?this.headers.get(J):void 0)||[];be.push(...ce),this.headers.set(J,be);break;case"d":const N=L.value;if(N){let Ie=this.headers.get(J);if(!Ie)return;Ie=Ie.filter(at=>-1===N.indexOf(at)),0===Ie.length?(this.headers.delete(J),this.normalizedNames.delete(J)):this.headers.set(J,Ie)}else this.headers.delete(J),this.normalizedNames.delete(J)}}forEach(L){this.init(),Array.from(this.normalizedNames.keys()).forEach(J=>L(this.normalizedNames.get(J),this.headers.get(J)))}}class oe{encodeKey(L){return xe(L)}encodeValue(L){return xe(L)}decodeKey(L){return decodeURIComponent(L)}decodeValue(L){return decodeURIComponent(L)}}const Me=/%(\d[a-f0-9])/gi,Ve={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function xe(Re){return encodeURIComponent(Re).replace(Me,(L,J)=>{var ce;return null!==(ce=Ve[J])&&void 0!==ce?ce:L})}function Oe(Re){return`${Re}`}class ee{constructor(L={}){if(this.updates=null,this.cloneFrom=null,this.encoder=L.encoder||new oe,L.fromString){if(L.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(Re,L){const J=new Map;return Re.length>0&&Re.replace(/^\?/,"").split("&").forEach(be=>{const N=be.indexOf("="),[Ie,at]=-1==N?[L.decodeKey(be),""]:[L.decodeKey(be.slice(0,N)),L.decodeValue(be.slice(N+1))],Pt=J.get(Ie)||[];Pt.push(at),J.set(Ie,Pt)}),J}(L.fromString,this.encoder)}else L.fromObject?(this.map=new Map,Object.keys(L.fromObject).forEach(J=>{const ce=L.fromObject[J];this.map.set(J,Array.isArray(ce)?ce:[ce])})):this.map=null}has(L){return this.init(),this.map.has(L)}get(L){this.init();const J=this.map.get(L);return J?J[0]:null}getAll(L){return this.init(),this.map.get(L)||null}keys(){return this.init(),Array.from(this.map.keys())}append(L,J){return this.clone({param:L,value:J,op:"a"})}appendAll(L){const J=[];return Object.keys(L).forEach(ce=>{const be=L[ce];Array.isArray(be)?be.forEach(N=>{J.push({param:ce,value:N,op:"a"})}):J.push({param:ce,value:be,op:"a"})}),this.clone(J)}set(L,J){return this.clone({param:L,value:J,op:"s"})}delete(L,J){return this.clone({param:L,value:J,op:"d"})}toString(){return this.init(),this.keys().map(L=>{const J=this.encoder.encodeKey(L);return this.map.get(L).map(ce=>J+"="+this.encoder.encodeValue(ce)).join("&")}).filter(L=>""!==L).join("&")}clone(L){const J=new ee({encoder:this.encoder});return J.cloneFrom=this.cloneFrom||this,J.updates=(this.updates||[]).concat(L),J}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(L=>this.map.set(L,this.cloneFrom.map.get(L))),this.updates.forEach(L=>{switch(L.op){case"a":case"s":const J=("a"===L.op?this.map.get(L.param):void 0)||[];J.push(Oe(L.value)),this.map.set(L.param,J);break;case"d":if(void 0===L.value){this.map.delete(L.param);break}{let ce=this.map.get(L.param)||[];const be=ce.indexOf(Oe(L.value));-1!==be&&ce.splice(be,1),ce.length>0?this.map.set(L.param,ce):this.map.delete(L.param)}}}),this.cloneFrom=this.updates=null)}}class He{constructor(){this.map=new Map}set(L,J){return this.map.set(L,J),this}get(L){return this.map.has(L)||this.map.set(L,L.defaultValue()),this.map.get(L)}delete(L){return this.map.delete(L),this}has(L){return this.map.has(L)}keys(){return this.map.keys()}}function rt(Re){return"undefined"!=typeof ArrayBuffer&&Re instanceof ArrayBuffer}function ft(Re){return"undefined"!=typeof Blob&&Re instanceof Blob}function we(Re){return"undefined"!=typeof FormData&&Re instanceof FormData}class qe{constructor(L,J,ce,be){let N;if(this.url=J,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=L.toUpperCase(),function(Re){switch(Re){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||be?(this.body=void 0!==ce?ce:null,N=be):N=ce,N&&(this.reportProgress=!!N.reportProgress,this.withCredentials=!!N.withCredentials,N.responseType&&(this.responseType=N.responseType),N.headers&&(this.headers=N.headers),N.context&&(this.context=N.context),N.params&&(this.params=N.params)),this.headers||(this.headers=new Q),this.context||(this.context=new He),this.params){const Ie=this.params.toString();if(0===Ie.length)this.urlWithParams=J;else{const at=J.indexOf("?");this.urlWithParams=J+(-1===at?"?":at<J.length-1?"&":"")+Ie}}else this.params=new ee,this.urlWithParams=J}serializeBody(){return null===this.body?null:rt(this.body)||ft(this.body)||we(this.body)||"undefined"!=typeof URLSearchParams&&this.body instanceof URLSearchParams||"string"==typeof this.body?this.body:this.body instanceof ee?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||we(this.body)?null:ft(this.body)?this.body.type||null:rt(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof ee?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(L={}){var J;const ce=L.method||this.method,be=L.url||this.url,N=L.responseType||this.responseType,Ie=void 0!==L.body?L.body:this.body,at=void 0!==L.withCredentials?L.withCredentials:this.withCredentials,Pt=void 0!==L.reportProgress?L.reportProgress:this.reportProgress;let zt=L.headers||this.headers,sn=L.params||this.params;const fn=null!==(J=L.context)&&void 0!==J?J:this.context;return void 0!==L.setHeaders&&(zt=Object.keys(L.setHeaders).reduce((Jn,Fn)=>Jn.set(Fn,L.setHeaders[Fn]),zt)),L.setParams&&(sn=Object.keys(L.setParams).reduce((Jn,Fn)=>Jn.set(Fn,L.setParams[Fn]),sn)),new qe(ce,be,Ie,{params:sn,headers:zt,context:fn,reportProgress:Pt,responseType:N,withCredentials:at})}}var et=(()=>((et=et||{})[et.Sent=0]="Sent",et[et.UploadProgress=1]="UploadProgress",et[et.ResponseHeader=2]="ResponseHeader",et[et.DownloadProgress=3]="DownloadProgress",et[et.Response=4]="Response",et[et.User=5]="User",et))();class At{constructor(L,J=200,ce="OK"){this.headers=L.headers||new Q,this.status=void 0!==L.status?L.status:J,this.statusText=L.statusText||ce,this.url=L.url||null,this.ok=this.status>=200&&this.status<300}}class Ut extends At{constructor(L={}){super(L),this.type=et.ResponseHeader}clone(L={}){return new Ut({headers:L.headers||this.headers,status:void 0!==L.status?L.status:this.status,statusText:L.statusText||this.statusText,url:L.url||this.url||void 0})}}class Zt extends At{constructor(L={}){super(L),this.type=et.Response,this.body=void 0!==L.body?L.body:null}clone(L={}){return new Zt({body:void 0!==L.body?L.body:this.body,headers:L.headers||this.headers,status:void 0!==L.status?L.status:this.status,statusText:L.statusText||this.statusText,url:L.url||this.url||void 0})}}class jt extends At{constructor(L){super(L,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${L.url||"(unknown url)"}`:`Http failure response for ${L.url||"(unknown url)"}: ${L.status} ${L.statusText}`,this.error=L.error||null}}function tn(Re,L){return{body:L,headers:Re.headers,context:Re.context,observe:Re.observe,params:Re.params,reportProgress:Re.reportProgress,responseType:Re.responseType,withCredentials:Re.withCredentials}}let qt=(()=>{class Re{constructor(J){this.handler=J}request(J,ce,be={}){let N;if(J instanceof qe)N=J;else{let Pt,zt;Pt=be.headers instanceof Q?be.headers:new Q(be.headers),be.params&&(zt=be.params instanceof ee?be.params:new ee({fromObject:be.params})),N=new qe(J,ce,void 0!==be.body?be.body:null,{headers:Pt,context:be.context,params:zt,reportProgress:be.reportProgress,responseType:be.responseType||"json",withCredentials:be.withCredentials})}const Ie=(0,B.of)(N).pipe((0,he.b)(Pt=>this.handler.handle(Pt)));if(J instanceof qe||"events"===be.observe)return Ie;const at=Ie.pipe((0,q.h)(Pt=>Pt instanceof Zt));switch(be.observe||"body"){case"body":switch(N.responseType){case"arraybuffer":return at.pipe((0,se.U)(Pt=>{if(null!==Pt.body&&!(Pt.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return Pt.body}));case"blob":return at.pipe((0,se.U)(Pt=>{if(null!==Pt.body&&!(Pt.body instanceof Blob))throw new Error("Response is not a Blob.");return Pt.body}));case"text":return at.pipe((0,se.U)(Pt=>{if(null!==Pt.body&&"string"!=typeof Pt.body)throw new Error("Response is not a string.");return Pt.body}));default:return at.pipe((0,se.U)(Pt=>Pt.body))}case"response":return at;default:throw new Error(`Unreachable: unhandled observe type ${be.observe}}`)}}delete(J,ce={}){return this.request("DELETE",J,ce)}get(J,ce={}){return this.request("GET",J,ce)}head(J,ce={}){return this.request("HEAD",J,ce)}jsonp(J,ce){return this.request("JSONP",J,{params:(new ee).append(ce,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(J,ce={}){return this.request("OPTIONS",J,ce)}patch(J,ce,be={}){return this.request("PATCH",J,tn(be,ce))}post(J,ce,be={}){return this.request("POST",J,tn(be,ce))}put(J,ce,be={}){return this.request("PUT",J,tn(be,ce))}}return Re.\u0275fac=function(J){return new(J||Re)(E.LFG(X))},Re.\u0275prov=E.Yz7({token:Re,factory:Re.\u0275fac}),Re})();class wr{constructor(L,J){this.next=L,this.interceptor=J}handle(L){return this.interceptor.intercept(L,this.next)}}const ar=new E.OlP("HTTP_INTERCEPTORS");let Nn=(()=>{class Re{intercept(J,ce){return ce.handle(J)}}return Re.\u0275fac=function(J){return new(J||Re)},Re.\u0275prov=E.Yz7({token:Re,factory:Re.\u0275fac}),Re})();const Ee=/^\)\]\}',?\n/;let Nt=(()=>{class Re{constructor(J){this.xhrFactory=J}handle(J){if("JSONP"===J.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new ne.y(ce=>{const be=this.xhrFactory.build();if(be.open(J.method,J.urlWithParams),J.withCredentials&&(be.withCredentials=!0),J.headers.forEach((Fn,Fe)=>be.setRequestHeader(Fn,Fe.join(","))),J.headers.has("Accept")||be.setRequestHeader("Accept","application/json, text/plain, */*"),!J.headers.has("Content-Type")){const Fn=J.detectContentTypeHeader();null!==Fn&&be.setRequestHeader("Content-Type",Fn)}if(J.responseType){const Fn=J.responseType.toLowerCase();be.responseType="json"!==Fn?Fn:"text"}const N=J.serializeBody();let Ie=null;const at=()=>{if(null!==Ie)return Ie;const Fn=1223===be.status?204:be.status,Fe=be.statusText||"OK",Le=new Q(be.getAllResponseHeaders()),Xe=function(Re){return"responseURL"in Re&&Re.responseURL?Re.responseURL:/^X-Request-URL:/m.test(Re.getAllResponseHeaders())?Re.getResponseHeader("X-Request-URL"):null}(be)||J.url;return Ie=new Ut({headers:Le,status:Fn,statusText:Fe,url:Xe}),Ie},Pt=()=>{let{headers:Fn,status:Fe,statusText:Le,url:Xe}=at(),xt=null;204!==Fe&&(xt=void 0===be.response?be.responseText:be.response),0===Fe&&(Fe=xt?200:0);let pt=Fe>=200&&Fe<300;if("json"===J.responseType&&"string"==typeof xt){const pn=xt;xt=xt.replace(Ee,"");try{xt=""!==xt?JSON.parse(xt):null}catch(In){xt=pn,pt&&(pt=!1,xt={error:In,text:xt})}}pt?(ce.next(new Zt({body:xt,headers:Fn,status:Fe,statusText:Le,url:Xe||void 0})),ce.complete()):ce.error(new jt({error:xt,headers:Fn,status:Fe,statusText:Le,url:Xe||void 0}))},zt=Fn=>{const{url:Fe}=at(),Le=new jt({error:Fn,status:be.status||0,statusText:be.statusText||"Unknown Error",url:Fe||void 0});ce.error(Le)};let sn=!1;const fn=Fn=>{sn||(ce.next(at()),sn=!0);let Fe={type:et.DownloadProgress,loaded:Fn.loaded};Fn.lengthComputable&&(Fe.total=Fn.total),"text"===J.responseType&&!!be.responseText&&(Fe.partialText=be.responseText),ce.next(Fe)},Jn=Fn=>{let Fe={type:et.UploadProgress,loaded:Fn.loaded};Fn.lengthComputable&&(Fe.total=Fn.total),ce.next(Fe)};return be.addEventListener("load",Pt),be.addEventListener("error",zt),be.addEventListener("timeout",zt),be.addEventListener("abort",zt),J.reportProgress&&(be.addEventListener("progress",fn),null!==N&&be.upload&&be.upload.addEventListener("progress",Jn)),be.send(N),ce.next({type:et.Sent}),()=>{be.removeEventListener("error",zt),be.removeEventListener("abort",zt),be.removeEventListener("load",Pt),be.removeEventListener("timeout",zt),J.reportProgress&&(be.removeEventListener("progress",fn),null!==N&&be.upload&&be.upload.removeEventListener("progress",Jn)),be.readyState!==be.DONE&&be.abort()}})}}return Re.\u0275fac=function(J){return new(J||Re)(E.LFG(g.JF))},Re.\u0275prov=E.Yz7({token:Re,factory:Re.\u0275fac}),Re})();const Mt=new E.OlP("XSRF_COOKIE_NAME"),rn=new E.OlP("XSRF_HEADER_NAME");class En{}let bn=(()=>{class Re{constructor(J,ce,be){this.doc=J,this.platform=ce,this.cookieName=be,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const J=this.doc.cookie||"";return J!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,g.Mx)(J,this.cookieName),this.lastCookieString=J),this.lastToken}}return Re.\u0275fac=function(J){return new(J||Re)(E.LFG(g.K0),E.LFG(E.Lbi),E.LFG(Mt))},Re.\u0275prov=E.Yz7({token:Re,factory:Re.\u0275fac}),Re})(),mn=(()=>{class Re{constructor(J,ce){this.tokenService=J,this.headerName=ce}intercept(J,ce){const be=J.url.toLowerCase();if("GET"===J.method||"HEAD"===J.method||be.startsWith("http://")||be.startsWith("https://"))return ce.handle(J);const N=this.tokenService.getToken();return null!==N&&!J.headers.has(this.headerName)&&(J=J.clone({headers:J.headers.set(this.headerName,N)})),ce.handle(J)}}return Re.\u0275fac=function(J){return new(J||Re)(E.LFG(En),E.LFG(rn))},Re.\u0275prov=E.Yz7({token:Re,factory:Re.\u0275fac}),Re})(),Rt=(()=>{class Re{constructor(J,ce){this.backend=J,this.injector=ce,this.chain=null}handle(J){if(null===this.chain){const ce=this.injector.get(ar,[]);this.chain=ce.reduceRight((be,N)=>new wr(be,N),this.backend)}return this.chain.handle(J)}}return Re.\u0275fac=function(J){return new(J||Re)(E.LFG(ie),E.LFG(E.zs3))},Re.\u0275prov=E.Yz7({token:Re,factory:Re.\u0275fac}),Re})(),Qt=(()=>{class Re{static disable(){return{ngModule:Re,providers:[{provide:mn,useClass:Nn}]}}static withOptions(J={}){return{ngModule:Re,providers:[J.cookieName?{provide:Mt,useValue:J.cookieName}:[],J.headerName?{provide:rn,useValue:J.headerName}:[]]}}}return Re.\u0275fac=function(J){return new(J||Re)},Re.\u0275mod=E.oAB({type:Re}),Re.\u0275inj=E.cJS({providers:[mn,{provide:ar,useExisting:mn,multi:!0},{provide:En,useClass:bn},{provide:Mt,useValue:"XSRF-TOKEN"},{provide:rn,useValue:"X-XSRF-TOKEN"}]}),Re})(),Yn=(()=>{class Re{}return Re.\u0275fac=function(J){return new(J||Re)},Re.\u0275mod=E.oAB({type:Re}),Re.\u0275inj=E.cJS({providers:[qt,{provide:X,useClass:Rt},Nt,{provide:ie,useExisting:Nt}],imports:[[Qt.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),Re})()},5e3:($t,$e,x)=>{"use strict";x.d($e,{deG:()=>pl,tb:()=>UE,AFp:()=>LE,ip1:()=>Vy,CZH:()=>Op,hGG:()=>cC,z2F:()=>Kg,sBO:()=>Bw,Sil:()=>jy,_Vd:()=>Ug,EJc:()=>HE,SBq:()=>jg,qLn:()=>Jl,vpe:()=>hd,tBr:()=>Ns,XFs:()=>Qt,OlP:()=>jr,zs3:()=>Ya,ZZ4:()=>m_,aQg:()=>__,soG:()=>p_,YKP:()=>Yv,h0i:()=>Ap,PXZ:()=>xw,R0b:()=>hc,FiY:()=>sa,Lbi:()=>VE,g9A:()=>BE,n_E:()=>l_,Qsj:()=>p0,FYo:()=>Gv,JOm:()=>Da,q3G:()=>oi,tp0:()=>ca,Rgc:()=>Wg,dDg:()=>WE,q4F:()=>Wv,GfV:()=>$v,s_b:()=>u_,ifc:()=>Ie,eFA:()=>YE,G48:()=>Lw,Gpc:()=>oe,f3M:()=>Qs,X6Q:()=>Fw,_c5:()=>nC,VLi:()=>Tw,c2e:()=>jE,zSh:()=>Zp,wAp:()=>qn,vHH:()=>xe,EiD:()=>$u,mCW:()=>Zl,qzn:()=>el,JVY:()=>Dc,pB0:()=>ah,eBb:()=>Ua,L6k:()=>Gu,LAX:()=>ja,cg1:()=>on,kL8:()=>lr,yhl:()=>ru,dqk:()=>fn,sIi:()=>Oh,CqO:()=>Am,QGY:()=>Eg,F4k:()=>Sm,RDi:()=>Qo,AaK:()=>X,z3N:()=>da,qOj:()=>gf,TTD:()=>ts,_Bn:()=>Uv,xp6:()=>Yh,uIk:()=>up,Tol:()=>vp,ekj:()=>Gm,Suo:()=>gE,Xpm:()=>De,lG2:()=>Se,Yz7:()=>Ct,cJS:()=>mt,oAB:()=>bt,Yjl:()=>ut,Y36:()=>ld,_UZ:()=>kh,GkF:()=>Nh,BQk:()=>mp,ynx:()=>gp,qZA:()=>uc,TgZ:()=>Su,EpF:()=>Au,n5z:()=>gc,Ikx:()=>O,LFG:()=>Ar,$8M:()=>bs,$Z:()=>yg,NdJ:()=>bg,CRH:()=>mE,kcU:()=>pr,O4$:()=>qi,oxw:()=>xm,ALo:()=>sE,lcZ:()=>oE,xi3:()=>aE,Hsn:()=>Pm,F$t:()=>Rm,Q6J:()=>eh,DdM:()=>Jv,VKq:()=>Xv,iGM:()=>fE,MAs:()=>U_,CHM:()=>de,LSH:()=>Wu,kYT:()=>ze,Udp:()=>xg,YNc:()=>Ws,W1O:()=>EE,_uU:()=>zm,Oqu:()=>Df,hij:()=>xu,AsE:()=>Ou,Gf:()=>pE});var g=x(8929),E=x(2654),B=x(2916),ne=x(6787),he=x(2474);function q(t){for(let n in t)if(t[n]===q)return n;throw Error("Could not find renamed property on target object.")}function se(t,n){for(const s in n)n.hasOwnProperty(s)&&!t.hasOwnProperty(s)&&(t[s]=n[s])}function X(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(X).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const n=t.toString();if(null==n)return""+n;const s=n.indexOf("\n");return-1===s?n:n.substring(0,s)}function ie(t,n){return null==t||""===t?null===n?"":n:null==n||""===n?t:t+" "+n}const Q=q({__forward_ref__:q});function oe(t){return t.__forward_ref__=oe,t.toString=function(){return X(this())},t}function ae(t){return Me(t)?t():t}function Me(t){return"function"==typeof t&&t.hasOwnProperty(Q)&&t.__forward_ref__===oe}class xe extends Error{constructor(n,s){super(function(t,n){return`${t?`NG0${t}: `:""}${n}`}(n,s)),this.code=n}}function Te(t){return"string"==typeof t?t:null==t?"":String(t)}function He(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Te(t)}function we(t,n){const s=n?` in ${n}`:"";throw new xe("201",`No provider for ${He(t)} found${s}`)}function dn(t,n){null==t&&function(t,n,s,c){throw new Error(`ASSERTION ERROR: ${t}`+(null==c?"":` [Expected=> ${s} ${c} ${n} <=Actual]`))}(n,t,null,"!=")}function Ct(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function mt(t){return{providers:t.providers||[],imports:t.imports||[]}}function Nt(t){return Mt(t,mn)||Mt(t,br)}function Mt(t,n){return t.hasOwnProperty(n)?t[n]:null}function bn(t){return t&&(t.hasOwnProperty(Rt)||t.hasOwnProperty(gr))?t[Rt]:null}const mn=q({\u0275prov:q}),Rt=q({\u0275inj:q}),br=q({ngInjectableDef:q}),gr=q({ngInjectorDef:q});var Qt=(()=>((Qt=Qt||{})[Qt.Default=0]="Default",Qt[Qt.Host=1]="Host",Qt[Qt.Self=2]="Self",Qt[Qt.SkipSelf=4]="SkipSelf",Qt[Qt.Optional=8]="Optional",Qt))();let Yn;function hr(t){const n=Yn;return Yn=t,n}function Re(t,n,s){const c=Nt(t);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:s&Qt.Optional?null:void 0!==n?n:void we(X(t),"Injector")}function J(t){return{toString:t}.toString()}var ce=(()=>((ce=ce||{})[ce.OnPush=0]="OnPush",ce[ce.Default=1]="Default",ce))(),Ie=(()=>{return(t=Ie||(Ie={}))[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",Ie;var t})();const at="undefined"!=typeof globalThis&&globalThis,Pt="undefined"!=typeof window&&window,zt="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,fn=at||"undefined"!=typeof global&&global||Pt||zt,Fe={},Le=[],Xe=q({\u0275cmp:q}),xt=q({\u0275dir:q}),pt=q({\u0275pipe:q}),pn=q({\u0275mod:q}),In=q({\u0275fac:q}),it=q({__NG_ELEMENT_ID__:q});let Qe=0;function De(t){return J(()=>{const s={},c={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:s,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===ce.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||Le,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||Ie.Emulated,id:"c",styles:t.styles||Le,_:null,setInput:null,schemas:t.schemas||null,tView:null},h=t.directives,_=t.features,T=t.pipes;return c.id+=Qe++,c.inputs=Ue(t.inputs,s),c.outputs=Ue(t.outputs),_&&_.forEach(P=>P(c)),c.directiveDefs=h?()=>("function"==typeof h?h():h).map(Ce):null,c.pipeDefs=T?()=>("function"==typeof T?T():T).map(ye):null,c})}function Ce(t){return St(t)||function(t){return t[xt]||null}(t)}function ye(t){return function(t){return t[pt]||null}(t)}const Ke={};function bt(t){return J(()=>{const n={type:t.type,bootstrap:t.bootstrap||Le,declarations:t.declarations||Le,imports:t.imports||Le,exports:t.exports||Le,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&(Ke[t.id]=t.type),n})}function ze(t,n){return J(()=>{const s=fr(t,!0);s.declarations=n.declarations||Le,s.imports=n.imports||Le,s.exports=n.exports||Le})}function Ue(t,n){if(null==t)return Fe;const s={};for(const c in t)if(t.hasOwnProperty(c)){let h=t[c],_=h;Array.isArray(h)&&(_=h[1],h=h[0]),s[h]=c,n&&(n[h]=_)}return s}const Se=De;function ut(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function St(t){return t[Xe]||null}function fr(t,n){const s=t[pn]||null;if(!s&&!0===n)throw new Error(`Type ${X(t)} does not have '\u0275mod' property.`);return s}function Hi(t){return Array.isArray(t)&&"object"==typeof t[1]}function _i(t){return Array.isArray(t)&&!0===t[1]}function qr(t){return 0!=(8&t.flags)}function Ri(t){return 2==(2&t.flags)}function Pi(t){return 1==(1&t.flags)}function Ti(t){return null!==t.template}function ps(t){return 0!=(512&t[2])}function es(t,n){return t.hasOwnProperty(In)?t[In]:null}class Go{constructor(n,s,c){this.previousValue=n,this.currentValue=s,this.firstChange=c}isFirstChange(){return this.firstChange}}function ts(){return Yi}function Yi(t){return t.type.prototype.ngOnChanges&&(t.setInput=us),Zi}function Zi(){const t=ui(this),n=null==t?void 0:t.current;if(n){const s=t.previous;if(s===Fe)t.previous=n;else for(let c in n)s[c]=n[c];t.current=null,this.ngOnChanges(n)}}function us(t,n,s,c){const h=ui(t)||function(t,n){return t[Ss]=n}(t,{previous:Fe,current:null}),_=h.current||(h.current={}),T=h.previous,P=this.declaredInputs[s],U=T[P];_[P]=new Go(U&&U.currentValue,n,T===Fe),t[c]=n}ts.ngInherit=!0;const Ss="__ngSimpleChanges__";function ui(t){return t[Ss]||null}const As="http://www.w3.org/2000/svg";let Ms;function Qo(t){Ms=t}function _r(t){return!!t.listen}const ko={createRenderer:(t,n)=>void 0!==Ms?Ms:"undefined"!=typeof document?document:void 0};function G(t){for(;Array.isArray(t);)t=t[0];return t}function C(t,n){return G(n[t])}function H(t,n){return G(n[t.index])}function wt(t,n){return t.data[n]}function hn(t,n){return t[n]}function Pn(t,n){const s=n[t];return Hi(s)?s:s[0]}function Gn(t){return 4==(4&t[2])}function Sn(t){return 128==(128&t[2])}function Wr(t,n){return null==n?null:t[n]}function Ur(t){t[18]=0}function xr(t,n){t[5]+=n;let s=t,c=t[3];for(;null!==c&&(1===n&&1===s[5]||-1===n&&0===s[5]);)c[5]+=n,s=c,c=c[3]}const Tn={lFrame:Rs(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function To(){return Tn.bindingsEnabled}function en(){return Tn.lFrame.lView}function Ir(){return Tn.lFrame.tView}function de(t){return Tn.lFrame.contextLView=t,t[8]}function w(){let t=D();for(;null!==t&&64===t.type;)t=t.parent;return t}function D(){return Tn.lFrame.currentTNode}function re(t,n){const s=Tn.lFrame;s.currentTNode=t,s.isParent=n}function me(){return Tn.lFrame.isParent}function We(){Tn.lFrame.isParent=!1}function Ft(){return Tn.isInCheckNoChangesMode}function un(t){Tn.isInCheckNoChangesMode=t}function _n(){const t=Tn.lFrame;let n=t.bindingRootIndex;return-1===n&&(n=t.bindingRootIndex=t.tView.bindingStartIndex),n}function Ln(){return Tn.lFrame.bindingIndex++}function zn(t){const n=Tn.lFrame,s=n.bindingIndex;return n.bindingIndex=n.bindingIndex+t,s}function zr(t,n){const s=Tn.lFrame;s.bindingIndex=s.bindingRootIndex=t,bi(n)}function bi(t){Tn.lFrame.currentDirectiveIndex=t}function Bs(){return Tn.lFrame.currentQueryIndex}function Li(t){Tn.lFrame.currentQueryIndex=t}function ro(t){const n=t[1];return 2===n.type?n.declTNode:1===n.type?t[6]:null}function Zs(t,n,s){if(s&Qt.SkipSelf){let h=n,_=t;for(;!(h=h.parent,null!==h||s&Qt.Host||(h=ro(_),null===h||(_=_[15],10&h.type))););if(null===h)return!1;n=h,t=_}const c=Tn.lFrame=Fr();return c.currentTNode=n,c.lView=t,!0}function ns(t){const n=Fr(),s=t[1];Tn.lFrame=n,n.currentTNode=s.firstChild,n.lView=t,n.tView=s,n.contextLView=t,n.bindingIndex=s.bindingStartIndex,n.inI18n=!1}function Fr(){const t=Tn.lFrame,n=null===t?null:t.child;return null===n?Rs(t):n}function Rs(t){const n={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=n),n}function io(){const t=Tn.lFrame;return Tn.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const $o=io;function so(){const t=io();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function xn(){return Tn.lFrame.selectedIndex}function vn(t){Tn.lFrame.selectedIndex=t}function vr(){const t=Tn.lFrame;return wt(t.tView,t.selectedIndex)}function qi(){Tn.lFrame.currentNamespace=As}function pr(){Tn.lFrame.currentNamespace=null}function Ai(t,n){for(let s=n.directiveStart,c=n.directiveEnd;s<c;s++){const _=t.data[s].type.prototype,{ngAfterContentInit:T,ngAfterContentChecked:P,ngAfterViewInit:U,ngAfterViewChecked:te,ngOnDestroy:fe}=_;T&&(t.contentHooks||(t.contentHooks=[])).push(-s,T),P&&((t.contentHooks||(t.contentHooks=[])).push(s,P),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(s,P)),U&&(t.viewHooks||(t.viewHooks=[])).push(-s,U),te&&((t.viewHooks||(t.viewHooks=[])).push(s,te),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(s,te)),null!=fe&&(t.destroyHooks||(t.destroyHooks=[])).push(s,fe)}}function ys(t,n,s){oa(t,n,3,s)}function vs(t,n,s,c){(3&t[2])===s&&oa(t,n,s,c)}function Jo(t,n){let s=t[2];(3&s)===n&&(s&=2047,s+=1,t[2]=s)}function oa(t,n,s,c){const _=null!=c?c:-1,T=n.length-1;let P=0;for(let U=void 0!==c?65535&t[18]:0;U<T;U++)if("number"==typeof n[U+1]){if(P=n[U],null!=c&&P>=c)break}else n[U]<0&&(t[18]+=65536),(P<_||-1==_)&&(dl(t,s,n,U),t[18]=(4294901760&t[18])+U+2),U++}function dl(t,n,s,c){const h=s[c]<0,_=s[c+1],P=t[h?-s[c]:s[c]];if(h){if(t[2]>>11<t[18]>>16&&(3&t[2])===n){t[2]+=2048;try{_.call(P)}finally{}}}else try{_.call(P)}finally{}}class oo{constructor(n,s,c){this.factory=n,this.resolving=!1,this.canSeeViewProviders=s,this.injectImpl=c}}function ea(t,n,s){const c=_r(t);let h=0;for(;h<s.length;){const _=s[h];if("number"==typeof _){if(0!==_)break;h++;const T=s[h++],P=s[h++],U=s[h++];c?t.setAttribute(n,P,U,T):n.setAttributeNS(T,P,U)}else{const T=_,P=s[++h];Vs(T)?c&&t.setProperty(n,T,P):c?t.setAttribute(n,T,P):n.setAttribute(T,P),h++}}return h}function pc(t){return 3===t||4===t||6===t}function Vs(t){return 64===t.charCodeAt(0)}function ma(t,n){if(null!==n&&0!==n.length)if(null===t||0===t.length)t=n.slice();else{let s=-1;for(let c=0;c<n.length;c++){const h=n[c];"number"==typeof h?s=h:0===s||Qc(t,s,h,null,-1===s||2===s?n[++c]:null)}}return t}function Qc(t,n,s,c,h){let _=0,T=t.length;if(-1===n)T=-1;else for(;_<t.length;){const P=t[_++];if("number"==typeof P){if(P===n){T=-1;break}if(P>n){T=_-1;break}}}for(;_<t.length;){const P=t[_];if("number"==typeof P)break;if(P===s){if(null===c)return void(null!==h&&(t[_+1]=h));if(c===t[_+1])return void(t[_+2]=h)}_++,null!==c&&_++,null!==h&&_++}-1!==T&&(t.splice(T,0,n),_=T+1),t.splice(_++,0,s),null!==c&&t.splice(_++,0,c),null!==h&&t.splice(_++,0,h)}function Hl(t){return-1!==t}function ta(t){return 32767&t}function na(t,n){let s=function(t){return t>>16}(t),c=n;for(;s>0;)c=c[15],s--;return c}let Pa=!0;function Wo(t){const n=Pa;return Pa=t,n}let M=0;function W(t,n){const s=Be(t,n);if(-1!==s)return s;const c=n[1];c.firstCreatePass&&(t.injectorIndex=n.length,pe(c.data,t),pe(n,null),pe(c.blueprint,null));const h=st(t,n),_=t.injectorIndex;if(Hl(h)){const T=ta(h),P=na(h,n),U=P[1].data;for(let te=0;te<8;te++)n[_+te]=P[T+te]|U[T+te]}return n[_+8]=h,_}function pe(t,n){t.push(0,0,0,0,0,0,0,0,n)}function Be(t,n){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===n[t.injectorIndex+8]?-1:t.injectorIndex}function st(t,n){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let s=0,c=null,h=n;for(;null!==h;){const _=h[1],T=_.type;if(c=2===T?_.declTNode:1===T?h[6]:null,null===c)return-1;if(s++,h=h[15],-1!==c.injectorIndex)return c.injectorIndex|s<<16}return-1}function ht(t,n,s){!function(t,n,s){let c;"string"==typeof s?c=s.charCodeAt(0)||0:s.hasOwnProperty(it)&&(c=s[it]),null==c&&(c=s[it]=M++);const h=255&c;n.data[t+(h>>5)]|=1<<h}(t,n,s)}function sr(t,n,s){if(s&Qt.Optional)return t;we(n,"NodeInjector")}function Vt(t,n,s,c){if(s&Qt.Optional&&void 0===c&&(c=null),0==(s&(Qt.Self|Qt.Host))){const h=t[9],_=hr(void 0);try{return h?h.get(n,c,s&Qt.Optional):Re(n,c,s&Qt.Optional)}finally{hr(_)}}return sr(c,n,s)}function Et(t,n,s,c=Qt.Default,h){if(null!==t){const _=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const n=t.hasOwnProperty(it)?t[it]:void 0;return"number"==typeof n?n>=0?255&n:Xr:n}(s);if("function"==typeof _){if(!Zs(n,t,c))return c&Qt.Host?sr(h,s,c):Vt(n,s,c,h);try{const T=_(c);if(null!=T||c&Qt.Optional)return T;we(s)}finally{$o()}}else if("number"==typeof _){let T=null,P=Be(t,n),U=-1,te=c&Qt.Host?n[16][6]:null;for((-1===P||c&Qt.SkipSelf)&&(U=-1===P?st(t,n):n[P+8],-1!==U&&_a(c,!1)?(T=n[1],P=ta(U),n=na(U,n)):P=-1);-1!==P;){const fe=n[1];if(lo(_,P,fe.data)){const Ne=ao(P,n,s,T,c,te);if(Ne!==Bt)return Ne}U=n[P+8],-1!==U&&_a(c,n[1].data[P+8]===te)&&lo(_,P,n)?(T=fe,P=ta(U),n=na(U,n)):P=-1}}}return Vt(n,s,c,h)}const Bt={};function Xr(){return new ti(w(),en())}function ao(t,n,s,c,h,_){const T=n[1],P=T.data[t+8],fe=ei(P,T,s,null==c?Ri(P)&&Pa:c!=T&&0!=(3&P.type),h&Qt.Host&&_===P);return null!==fe?ds(n,T,fe,P):Bt}function ei(t,n,s,c,h){const _=t.providerIndexes,T=n.data,P=1048575&_,U=t.directiveStart,fe=_>>20,ct=h?P+fe:t.directiveEnd;for(let Dt=c?P:P+fe;Dt<ct;Dt++){const Yt=T[Dt];if(Dt<U&&s===Yt||Dt>=U&&Yt.type===s)return Dt}if(h){const Dt=T[U];if(Dt&&Ti(Dt)&&Dt.type===s)return U}return null}function ds(t,n,s,c){let h=t[s];const _=n.data;if(function(t){return t instanceof oo}(h)){const T=h;T.resolving&&function(t,n){throw new xe("200",`Circular dependency in DI detected for ${t}`)}(He(_[s]));const P=Wo(T.canSeeViewProviders);T.resolving=!0;const U=T.injectImpl?hr(T.injectImpl):null;Zs(t,c,Qt.Default);try{h=t[s]=T.factory(void 0,_,t,c),n.firstCreatePass&&s>=c.directiveStart&&function(t,n,s){const{ngOnChanges:c,ngOnInit:h,ngDoCheck:_}=n.type.prototype;if(c){const T=Yi(n);(s.preOrderHooks||(s.preOrderHooks=[])).push(t,T),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(t,T)}h&&(s.preOrderHooks||(s.preOrderHooks=[])).push(0-t,h),_&&((s.preOrderHooks||(s.preOrderHooks=[])).push(t,_),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(t,_))}(s,_[s],n)}finally{null!==U&&hr(U),Wo(P),T.resolving=!1,$o()}}return h}function lo(t,n,s){return!!(s[n+(t>>5)]&1<<t)}function _a(t,n){return!(t&Qt.Self||t&Qt.Host&&n)}class ti{constructor(n,s){this._tNode=n,this._lView=s}get(n,s,c){return Et(this._tNode,this._lView,n,c,s)}}function gc(t){return J(()=>{const n=t.prototype.constructor,s=n[In]||mc(n),c=Object.prototype;let h=Object.getPrototypeOf(t.prototype).constructor;for(;h&&h!==c;){const _=h[In]||mc(h);if(_&&_!==s)return _;h=Object.getPrototypeOf(h)}return _=>new _})}function mc(t){return Me(t)?()=>{const n=mc(ae(t));return n&&n()}:es(t)}function bs(t){return function(t,n){if("class"===n)return t.classes;if("style"===n)return t.styles;const s=t.attrs;if(s){const c=s.length;let h=0;for(;h<c;){const _=s[h];if(pc(_))break;if(0===_)h+=2;else if("number"==typeof _)for(h++;h<c&&"string"==typeof s[h];)h++;else{if(_===n)return s[h+1];h+=2}}}return null}(w(),t)}const aa="__parameters__";function di(t,n,s){return J(()=>{const c=function(t){return function(...s){if(t){const c=t(...s);for(const h in c)this[h]=c[h]}}}(n);function h(..._){if(this instanceof h)return c.apply(this,_),this;const T=new h(..._);return P.annotation=T,P;function P(U,te,fe){const Ne=U.hasOwnProperty(aa)?U[aa]:Object.defineProperty(U,aa,{value:[]})[aa];for(;Ne.length<=fe;)Ne.push(null);return(Ne[fe]=Ne[fe]||[]).push(T),U}}return s&&(h.prototype=Object.create(s.prototype)),h.prototype.ngMetadataName=t,h.annotationCls=h,h})}class jr{constructor(n,s){this._desc=n,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof s?this.__NG_ELEMENT_ID__=s:void 0!==s&&(this.\u0275prov=Ct({token:this,providedIn:s.providedIn||"root",factory:s.factory}))}toString(){return`InjectionToken ${this._desc}`}}const pl=new jr("AnalyzeForEntryComponents");function Us(t,n){void 0===n&&(n=t);for(let s=0;s<t.length;s++){let c=t[s];Array.isArray(c)?(n===t&&(n=t.slice(0,s)),Us(c,n)):n!==t&&n.push(c)}return n}function qs(t,n){t.forEach(s=>Array.isArray(s)?qs(s,n):n(s))}function ka(t,n,s){n>=t.length?t.push(s):t.splice(n,0,s)}function Na(t,n){return n>=t.length-1?t.pop():t.splice(n,1)[0]}function Vn(t,n){const s=[];for(let c=0;c<t;c++)s.push(n);return s}function js(t,n,s){let c=Ao(t,n);return c>=0?t[1|c]=s:(c=~c,function(t,n,s,c){let h=t.length;if(h==n)t.push(s,c);else if(1===h)t.push(c,t[0]),t[0]=s;else{for(h--,t.push(t[h-1],t[h]);h>n;)t[h]=t[h-2],h--;t[n]=s,t[n+1]=c}}(t,c,n,s)),c}function Fa(t,n){const s=Ao(t,n);if(s>=0)return t[1|s]}function Ao(t,n){return function(t,n,s){let c=0,h=t.length>>s;for(;h!==c;){const _=c+(h-c>>1),T=t[_<<s];if(n===T)return _<<s;T>n?h=_:c=_+1}return~(h<<s)}(t,n,1)}const vc={},j="__NG_DI_FLAG__",Z="ngTempTokenPath",Ge=/\n/gm,Lt="__source",nn=q({provide:String,useValue:q});let On;function Un(t){const n=On;return On=t,n}function Yr(t,n=Qt.Default){if(void 0===On)throw new Error("inject() must be called from an injection context");return null===On?Re(t,void 0,n):On.get(t,n&Qt.Optional?null:void 0,n)}function Ar(t,n=Qt.Default){return(Yn||Yr)(ae(t),n)}const Qs=Ar;function ss(t){const n=[];for(let s=0;s<t.length;s++){const c=ae(t[s]);if(Array.isArray(c)){if(0===c.length)throw new Error("Arguments array must have arguments.");let h,_=Qt.Default;for(let T=0;T<c.length;T++){const P=c[T],U=vl(P);"number"==typeof U?-1===U?h=P.token:_|=U:h=P}n.push(Ar(h,_))}else n.push(Ar(c))}return n}function Bo(t,n){return t[j]=n,t.prototype[j]=n,t}function vl(t){return t[j]}const Ns=Bo(di("Inject",t=>({token:t})),-1),sa=Bo(di("Optional"),8),ca=Bo(di("SkipSelf"),4);let bc;function ba(t){var n;return(null===(n=function(){if(void 0===bc&&(bc=null,fn.trustedTypes))try{bc=fn.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(t){}return bc}())||void 0===n?void 0:n.createHTML(t))||t}class wa{constructor(n){this.changingThisBreaksApplicationSecurity=n}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class pd extends wa{getTypeName(){return"HTML"}}class Ic extends wa{getTypeName(){return"Style"}}class Hs extends wa{getTypeName(){return"Script"}}class Xa extends wa{getTypeName(){return"URL"}}class nu extends wa{getTypeName(){return"ResourceURL"}}function da(t){return t instanceof wa?t.changingThisBreaksApplicationSecurity:t}function el(t,n){const s=ru(t);if(null!=s&&s!==n){if("ResourceURL"===s&&"URL"===n)return!0;throw new Error(`Required a safe ${n}, got a ${s} (see https://g.co/ng/security#xss)`)}return s===n}function ru(t){return t instanceof wa&&t.getTypeName()||null}function Dc(t){return new pd(t)}function Gu(t){return new Ic(t)}function Ua(t){return new Hs(t)}function ja(t){return new Xa(t)}function ah(t){return new nu(t)}class lh{constructor(n){this.inertDocumentHelper=n}getInertBodyElement(n){n="<body><remove></remove>"+n;try{const s=(new window.DOMParser).parseFromString(ba(n),"text/html").body;return null===s?this.inertDocumentHelper.getInertBodyElement(n):(s.removeChild(s.firstChild),s)}catch(s){return null}}}class iu{constructor(n){if(this.defaultDoc=n,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const s=this.inertDocument.createElement("html");this.inertDocument.appendChild(s);const c=this.inertDocument.createElement("body");s.appendChild(c)}}getInertBodyElement(n){const s=this.inertDocument.createElement("template");if("content"in s)return s.innerHTML=ba(n),s;const c=this.inertDocument.createElement("body");return c.innerHTML=ba(n),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(c),c}stripCustomNsAttrs(n){const s=n.attributes;for(let h=s.length-1;0<h;h--){const T=s.item(h).name;("xmlns:ns1"===T||0===T.indexOf("ns1:"))&&n.removeAttribute(T)}let c=n.firstChild;for(;c;)c.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(c),c=c.nextSibling}}const md=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Hr=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Zl(t){return(t=String(t)).match(md)||t.match(Hr)?t:"unsafe:"+t}function xi(t){const n={};for(const s of t.split(","))n[s]=!0;return n}function tl(...t){const n={};for(const s of t)for(const c in s)s.hasOwnProperty(c)&&(n[c]=!0);return n}const Gs=xi("area,br,col,hr,img,wbr"),Wi=xi("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),su=xi("rp,rt"),Tl=tl(Gs,tl(Wi,xi("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),tl(su,xi("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),tl(su,Wi)),vd=xi("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),nl=xi("srcset"),Tc=tl(vd,nl,xi("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),xi("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Sl=xi("script,style,template");class ou{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(n){let s=n.firstChild,c=!0;for(;s;)if(s.nodeType===Node.ELEMENT_NODE?c=this.startElement(s):s.nodeType===Node.TEXT_NODE?this.chars(s.nodeValue):this.sanitizedSomething=!0,c&&s.firstChild)s=s.firstChild;else for(;s;){s.nodeType===Node.ELEMENT_NODE&&this.endElement(s);let h=this.checkClobberedElement(s,s.nextSibling);if(h){s=h;break}s=this.checkClobberedElement(s,s.parentNode)}return this.buf.join("")}startElement(n){const s=n.nodeName.toLowerCase();if(!Tl.hasOwnProperty(s))return this.sanitizedSomething=!0,!Sl.hasOwnProperty(s);this.buf.push("<"),this.buf.push(s);const c=n.attributes;for(let h=0;h<c.length;h++){const _=c.item(h),T=_.name,P=T.toLowerCase();if(!Tc.hasOwnProperty(P)){this.sanitizedSomething=!0;continue}let U=_.value;vd[P]&&(U=Zl(U)),nl[P]&&(t=U,U=(t=String(t)).split(",").map(n=>Zl(n.trim())).join(", ")),this.buf.push(" ",T,'="',lu(U),'"')}var t;return this.buf.push(">"),!0}endElement(n){const s=n.nodeName.toLowerCase();Tl.hasOwnProperty(s)&&!Gs.hasOwnProperty(s)&&(this.buf.push("</"),this.buf.push(s),this.buf.push(">"))}chars(n){this.buf.push(lu(n))}checkClobberedElement(n,s){if(s&&(n.compareDocumentPosition(s)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${n.outerHTML}`);return s}}const Sc=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,au=/([^\#-~ |!])/g;function lu(t){return t.replace(/&/g,"&amp;").replace(Sc,function(n){return"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";"}).replace(au,function(n){return"&#"+n.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Al;function $u(t,n){let s=null;try{Al=Al||function(t){const n=new iu(t);return function(){try{return!!(new window.DOMParser).parseFromString(ba(""),"text/html")}catch(t){return!1}}()?new lh(n):n}(t);let c=n?String(n):"";s=Al.getInertBodyElement(c);let h=5,_=c;do{if(0===h)throw new Error("Failed to sanitize html because the input is unstable");h--,c=_,_=s.innerHTML,s=Al.getInertBodyElement(c)}while(c!==_);return ba((new ou).sanitizeChildren(uh(s)||s))}finally{if(s){const c=uh(s)||s;for(;c.firstChild;)c.removeChild(c.firstChild)}}}function uh(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var oi=(()=>((oi=oi||{})[oi.NONE=0]="NONE",oi[oi.HTML=1]="HTML",oi[oi.STYLE=2]="STYLE",oi[oi.SCRIPT=3]="SCRIPT",oi[oi.URL=4]="URL",oi[oi.RESOURCE_URL=5]="RESOURCE_URL",oi))();function Wu(t){const n=function(){const t=en();return t&&t[12]}();return n?n.sanitize(oi.URL,t)||"":el(t,"URL")?da(t):Zl(Te(t))}const du="__ngContext__";function Js(t,n){t[du]=n}function Cd(t){const n=function(t){return t[du]||null}(t);return n?Array.isArray(n)?n:n.lView:null}function Sd(t){return t.ngOriginalError}function Ad(t,...n){t.error(...n)}class Jl{constructor(){this._console=console}handleError(n){const s=this._findOriginalError(n),c=(t=n)&&t.ngErrorLogger||Ad;var t;c(this._console,"ERROR",n),s&&c(this._console,"ORIGINAL ERROR",s)}_findOriginalError(n){let s=n&&Sd(n);for(;s&&Sd(s);)s=Sd(s);return s||null}}const Ku=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(fn))();function fs(t){return t instanceof Function?t():t}var Da=(()=>((Da=Da||{})[Da.Important=1]="Important",Da[Da.DashCase=2]="DashCase",Da))();function Nc(t,n){return undefined(t,n)}function as(t){const n=t[3];return _i(n)?n[3]:n}function Xs(t){return Wa(t[13])}function yu(t){return Wa(t[4])}function Wa(t){for(;null!==t&&!_i(t);)t=t[4];return t}function Xl(t,n,s,c,h){if(null!=c){let _,T=!1;_i(c)?_=c:Hi(c)&&(T=!0,c=c[0]);const P=G(c);0===t&&null!==s?null==h?Zu(n,s,P):Sa(n,s,P,h||null,!0):1===t&&null!==s?Sa(n,s,P,h||null,!0):2===t?function(t,n,s){const c=ec(t,n);c&&function(t,n,s,c){_r(t)?t.removeChild(n,s,c):n.removeChild(s)}(t,c,n,s)}(n,P,T):3===t&&n.destroyNode(P),null!=_&&function(t,n,s,c,h){const _=s[7];_!==G(s)&&Xl(n,t,c,_,h);for(let P=10;P<s.length;P++){const U=s[P];qu(U[1],U,t,n,c,_)}}(n,t,_,s,h)}}function b(t,n,s){return _r(t)?t.createElement(n,s):null===s?t.createElement(n):t.createElementNS(s,n)}function Tt(t,n){const s=t[9],c=s.indexOf(n),h=n[3];1024&n[2]&&(n[2]&=-1025,xr(h,-1)),s.splice(c,1)}function gn(t,n){if(t.length<=10)return;const s=10+n,c=t[s];if(c){const h=c[17];null!==h&&h!==t&&Tt(h,c),n>0&&(t[s-1][4]=c[4]);const _=Na(t,10+n);!function(t,n){qu(t,n,n[11],2,null,null),n[0]=null,n[6]=null}(c[1],c);const T=_[19];null!==T&&T.detachView(_[1]),c[3]=null,c[4]=null,c[2]&=-129}return c}function ln(t,n){if(!(256&n[2])){const s=n[11];_r(s)&&s.destroyNode&&qu(t,n,s,3,null,null),function(t){let n=t[13];if(!n)return jn(t[1],t);for(;n;){let s=null;if(Hi(n))s=n[13];else{const c=n[10];c&&(s=c)}if(!s){for(;n&&!n[4]&&n!==t;)Hi(n)&&jn(n[1],n),n=n[3];null===n&&(n=t),Hi(n)&&jn(n[1],n),s=n&&n[4]}n=s}}(n)}}function jn(t,n){if(!(256&n[2])){n[2]&=-129,n[2]|=256,function(t,n){let s;if(null!=t&&null!=(s=t.destroyHooks))for(let c=0;c<s.length;c+=2){const h=n[s[c]];if(!(h instanceof oo)){const _=s[c+1];if(Array.isArray(_))for(let T=0;T<_.length;T+=2){const P=h[_[T]],U=_[T+1];try{U.call(P)}finally{}}else try{_.call(h)}finally{}}}}(t,n),function(t,n){const s=t.cleanup,c=n[7];let h=-1;if(null!==s)for(let _=0;_<s.length-1;_+=2)if("string"==typeof s[_]){const T=s[_+1],P="function"==typeof T?T(n):G(n[T]),U=c[h=s[_+2]],te=s[_+3];"boolean"==typeof te?P.removeEventListener(s[_],U,te):te>=0?c[h=te]():c[h=-te].unsubscribe(),_+=2}else{const T=c[h=s[_+1]];s[_].call(T)}if(null!==c){for(let _=h+1;_<c.length;_++)c[_]();n[7]=null}}(t,n),1===n[1].type&&_r(n[11])&&n[11].destroy();const s=n[17];if(null!==s&&_i(n[3])){s!==n[3]&&Tt(s,n);const c=n[19];null!==c&&c.detachView(t)}}}function Ci(t,n,s){return function(t,n,s){let c=n;for(;null!==c&&40&c.type;)c=(n=c).parent;if(null===c)return s[0];if(2&c.flags){const h=t.data[c.directiveStart].encapsulation;if(h===Ie.None||h===Ie.Emulated)return null}return H(c,s)}(t,n.parent,s)}function Sa(t,n,s,c,h){_r(t)?t.insertBefore(n,s,c,h):n.insertBefore(s,c,h)}function Zu(t,n,s){_r(t)?t.appendChild(n,s):n.appendChild(s)}function Eu(t,n,s,c,h){null!==c?Sa(t,n,s,c,h):Zu(t,n,s)}function ec(t,n){return _r(t)?t.parentNode(n):n.parentNode}function xo(t,n,s){return Fc(t,n,s)}let Fc=function(t,n,s){return 40&t.type?H(t,s):null};function Aa(t,n,s,c){const h=Ci(t,c,n),_=n[11],P=xo(c.parent||n[6],c,n);if(null!=h)if(Array.isArray(s))for(let U=0;U<s.length;U++)Eu(_,h,s[U],P,!1);else Eu(_,h,s,P,!1)}function tc(t,n){if(null!==n){const s=n.type;if(3&s)return H(n,t);if(4&s)return nc(-1,t[n.index]);if(8&s){const c=n.child;if(null!==c)return tc(t,c);{const h=t[n.index];return _i(h)?nc(-1,h):G(h)}}if(32&s)return Nc(n,t)()||G(t[n.index]);{const c=jh(t,n);return null!==c?Array.isArray(c)?c[0]:tc(as(t[16]),c):tc(t,n.next)}}return null}function jh(t,n){return null!==n?t[16][6].projection[n.projection]:null}function nc(t,n){const s=10+t+1;if(s<n.length){const c=n[s],h=c[1].firstChild;if(null!==h)return tc(c,h)}return n[7]}function Lc(t,n,s,c,h,_,T){for(;null!=s;){const P=c[s.index],U=s.type;if(T&&0===n&&(P&&Js(G(P),c),s.flags|=4),64!=(64&s.flags))if(8&U)Lc(t,n,s.child,c,h,_,!1),Xl(n,t,h,P,_);else if(32&U){const te=Nc(s,c);let fe;for(;fe=te();)Xl(n,t,h,fe,_);Xl(n,t,h,P,_)}else 16&U?Vc(t,n,c,s,h,_):Xl(n,t,h,P,_);s=T?s.projectionNext:s.next}}function qu(t,n,s,c,h,_){Lc(s,c,t.firstChild,n,h,_,!1)}function Vc(t,n,s,c,h,_){const T=s[16],U=T[6].projection[c.projection];if(Array.isArray(U))for(let te=0;te<U.length;te++)Xl(n,t,h,U[te],_);else Lc(t,n,U,T[3],h,_,!0)}function Mf(t,n,s){_r(t)?t.setAttribute(n,"style",s):n.style.cssText=s}function Od(t,n,s){_r(t)?""===s?t.removeAttribute(n,"class"):t.setAttribute(n,"class",s):n.className=s}function Gh(t,n,s){let c=t.length;for(;;){const h=t.indexOf(n,s);if(-1===h)return h;if(0===h||t.charCodeAt(h-1)<=32){const _=n.length;if(h+_===c||t.charCodeAt(h+_)<=32)return h}s=h+1}}const Qu="ng-template";function Ju(t,n,s){let c=0;for(;c<t.length;){let h=t[c++];if(s&&"class"===h){if(h=t[c],-1!==Gh(h.toLowerCase(),n,0))return!0}else if(1===h){for(;c<t.length&&"string"==typeof(h=t[c++]);)if(h.toLowerCase()===n)return!0;return!1}}return!1}function $h(t){return 4===t.type&&t.value!==Qu}function Rp(t,n,s){return n===(4!==t.type||s?t.value:Qu)}function Pp(t,n,s){let c=4;const h=t.attrs||[],_=function(t){for(let n=0;n<t.length;n++)if(pc(t[n]))return n;return t.length}(h);let T=!1;for(let P=0;P<n.length;P++){const U=n[P];if("number"!=typeof U){if(!T)if(4&c){if(c=2|1&c,""!==U&&!Rp(t,U,s)||""===U&&1===n.length){if(sl(c))return!1;T=!0}}else{const te=8&c?U:n[++P];if(8&c&&null!==t.attrs){if(!Ju(t.attrs,te,s)){if(sl(c))return!1;T=!0}continue}const Ne=Uc(8&c?"class":U,h,$h(t),s);if(-1===Ne){if(sl(c))return!1;T=!0;continue}if(""!==te){let ct;ct=Ne>_?"":h[Ne+1].toLowerCase();const Dt=8&c?ct:null;if(Dt&&-1!==Gh(Dt,te,0)||2&c&&te!==ct){if(sl(c))return!1;T=!0}}}}else{if(!T&&!sl(c)&&!sl(U))return!1;if(T&&sl(U))continue;T=!1,c=U|1&c}}return sl(c)||T}function sl(t){return 0==(1&t)}function Uc(t,n,s,c){if(null===n)return-1;let h=0;if(c||!s){let _=!1;for(;h<n.length;){const T=n[h];if(T===t)return h;if(3===T||6===T)_=!0;else{if(1===T||2===T){let P=n[++h];for(;"string"==typeof P;)P=n[++h];continue}if(4===T)break;if(0===T){h+=4;continue}}h+=_?1:2}return-1}return function(t,n){let s=t.indexOf(4);if(s>-1)for(s++;s<t.length;){const c=t[s];if("number"==typeof c)return-1;if(c===n)return s;s++}return-1}(n,t)}function Rd(t,n,s=!1){for(let c=0;c<n.length;c++)if(Pp(t,n[c],s))return!0;return!1}function zh(t,n){e:for(let s=0;s<n.length;s++){const c=n[s];if(t.length===c.length){for(let h=0;h<t.length;h++)if(t[h]!==c[h])continue e;return!0}}return!1}function Xu(t,n){return t?":not("+n.trim()+")":n}function ph(t){let n=t[0],s=1,c=2,h="",_=!1;for(;s<t.length;){let T=t[s];if("string"==typeof T)if(2&c){const P=t[++s];h+="["+T+(P.length>0?'="'+P+'"':"")+"]"}else 8&c?h+="."+T:4&c&&(h+=" "+T);else""!==h&&!sl(T)&&(n+=Xu(_,h),h=""),c=T,_=_||!sl(c);s++}return""!==h&&(n+=Xu(_,h)),n}const Or={};function Yh(t){Zh(Ir(),en(),xn()+t,Ft())}function Zh(t,n,s,c){if(!c)if(3==(3&n[2])){const _=t.preOrderCheckHooks;null!==_&&ys(n,_,s)}else{const _=t.preOrderHooks;null!==_&&vs(n,_,0,s)}vn(s)}function Pd(t,n){return t<<17|n<<2}function Ma(t){return t>>17&32767}function mh(t){return 2|t}function rc(t){return(131068&t)>>2}function ol(t,n){return-131069&t|n<<2}function mo(t){return 1|t}function Gf(t,n){const s=t.contentQueries;if(null!==s)for(let c=0;c<s.length;c+=2){const h=s[c],_=s[c+1];if(-1!==_){const T=t.data[_];Li(h),T.contentQueries(2,n[_],_)}}}function td(t,n,s,c,h,_,T,P,U,te){const fe=n.blueprint.slice();return fe[0]=h,fe[2]=140|c,Ur(fe),fe[3]=fe[15]=t,fe[8]=s,fe[10]=T||t&&t[10],fe[11]=P||t&&t[11],fe[12]=U||t&&t[12]||null,fe[9]=te||t&&t[9]||null,fe[6]=_,fe[16]=2==n.type?t[16]:fe,fe}function Fl(t,n,s,c,h){let _=t.data[n];if(null===_)_=function(t,n,s,c,h){const _=D(),T=me(),U=t.data[n]=function(t,n,s,c,h,_){return{type:s,index:c,insertBeforeIndex:null,injectorIndex:n?n.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:_,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:n,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,T?_:_&&_.parent,s,n,c,h);return null===t.firstChild&&(t.firstChild=U),null!==_&&(T?null==_.child&&null!==U.parent&&(_.child=U):null===_.next&&(_.next=U)),U}(t,n,s,c,h),Tn.lFrame.inI18n&&(_.flags|=64);else if(64&_.type){_.type=s,_.value=c,_.attrs=h;const T=function(){const t=Tn.lFrame,n=t.currentTNode;return t.isParent?n:n.parent}();_.injectorIndex=null===T?-1:T.injectorIndex}return re(_,!0),_}function al(t,n,s,c){if(0===s)return-1;const h=n.length;for(let _=0;_<s;_++)n.push(c),t.blueprint.push(c),t.data.push(null);return h}function sc(t,n,s){ns(n);try{const c=t.viewQuery;null!==c&&zp(1,c,s);const h=t.template;null!==h&&Ll(t,n,h,1,s),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Gf(t,n),t.staticViewQueries&&zp(2,t.viewQuery,s);const _=t.components;null!==_&&function(t,n){for(let s=0;s<n.length;s++)cr(t,n[s])}(n,_)}catch(c){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),c}finally{n[2]&=-5,so()}}function Hc(t,n,s,c){const h=n[2];if(256==(256&h))return;ns(n);const _=Ft();try{Ur(n),function(t){Tn.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==s&&Ll(t,n,s,2,c);const T=3==(3&h);if(!_)if(T){const te=t.preOrderCheckHooks;null!==te&&ys(n,te,null)}else{const te=t.preOrderHooks;null!==te&&vs(n,te,0,null),Jo(n,0)}if(function(t){for(let n=Xs(t);null!==n;n=yu(n)){if(!n[2])continue;const s=n[9];for(let c=0;c<s.length;c++){const h=s[c],_=h[3];0==(1024&h[2])&&xr(_,1),h[2]|=1024}}}(n),function(t){for(let n=Xs(t);null!==n;n=yu(n))for(let s=10;s<n.length;s++){const c=n[s],h=c[1];Sn(c)&&Hc(h,c,h.template,c[8])}}(n),null!==t.contentQueries&&Gf(t,n),!_)if(T){const te=t.contentCheckHooks;null!==te&&ys(n,te)}else{const te=t.contentHooks;null!==te&&vs(n,te,1),Jo(n,1)}!function(t,n){const s=t.hostBindingOpCodes;if(null!==s)try{for(let c=0;c<s.length;c++){const h=s[c];if(h<0)vn(~h);else{const _=h,T=s[++c],P=s[++c];zr(T,_),P(2,n[_])}}}finally{vn(-1)}}(t,n);const P=t.components;null!==P&&function(t,n){for(let s=0;s<n.length;s++)Xt(t,n[s])}(n,P);const U=t.viewQuery;if(null!==U&&zp(2,U,c),!_)if(T){const te=t.viewCheckHooks;null!==te&&ys(n,te)}else{const te=t.viewHooks;null!==te&&vs(n,te,2),Jo(n,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),_||(n[2]&=-73),1024&n[2]&&(n[2]&=-1025,xr(n[3],-1))}finally{so()}}function $f(t,n,s,c){const h=n[10],_=!Ft(),T=Gn(n);try{_&&!T&&h.begin&&h.begin(),T&&sc(t,n,c),Hc(t,n,s,c)}finally{_&&!T&&h.end&&h.end()}}function Ll(t,n,s,c,h){const _=xn(),T=2&c;try{vn(-1),T&&n.length>20&&Zh(t,n,20,Ft()),s(c,h)}finally{vn(_)}}function jd(t,n,s){if(qr(n)){const h=n.directiveEnd;for(let _=n.directiveStart;_<h;_++){const T=t.data[_];T.contentQueries&&T.contentQueries(1,s[_],_)}}}function Bl(t,n,s){!To()||(function(t,n,s,c){const h=s.directiveStart,_=s.directiveEnd;t.firstCreatePass||W(s,n),Js(c,n);const T=s.initialInputs;for(let P=h;P<_;P++){const U=t.data[P],te=Ti(U);te&&p(n,s,U);const fe=ds(n,t,P,s);Js(fe,n),null!==T&&K(0,P-h,fe,U,0,T),te&&(Pn(s.index,n)[8]=fe)}}(t,n,s,H(s,n)),128==(128&s.flags)&&function(t,n,s){const c=s.directiveStart,h=s.directiveEnd,T=s.index,P=Tn.lFrame.currentDirectiveIndex;try{vn(T);for(let U=c;U<h;U++){const te=t.data[U],fe=n[U];bi(U),(null!==te.hostBindings||0!==te.hostVars||null!==te.hostAttrs)&&Th(te,fe)}}finally{vn(-1),bi(P)}}(t,n,s))}function rf(t,n,s=H){const c=n.localNames;if(null!==c){let h=n.index+1;for(let _=0;_<c.length;_+=2){const T=c[_+1],P=-1===T?s(n,t):t[T];t[h++]=P}}}function Wf(t){const n=t.tView;return null===n||n.incompleteFirstPass?t.tView=Hd(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):n}function Hd(t,n,s,c,h,_,T,P,U,te){const fe=20+c,Ne=fe+h,ct=function(t,n){const s=[];for(let c=0;c<n;c++)s.push(c<t?null:Or);return s}(fe,Ne),Dt="function"==typeof te?te():te;return ct[1]={type:t,blueprint:ct,template:s,queries:null,viewQuery:P,declTNode:n,data:ct.slice().fill(null,fe),bindingStartIndex:fe,expandoStartIndex:Ne,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof _?_():_,pipeRegistry:"function"==typeof T?T():T,firstChild:null,schemas:U,consts:Dt,incompleteFirstPass:!1}}function Gd(t,n,s,c){const h=Qf(n);null===s?h.push(c):(h.push(s),t.firstCreatePass&&nm(t).push(c,h.length-1))}function zf(t,n,s){for(let c in t)if(t.hasOwnProperty(c)){const h=t[c];(s=null===s?{}:s).hasOwnProperty(c)?s[c].push(n,h):s[c]=[n,h]}return s}function Ka(t,n,s,c,h,_,T,P){const U=H(n,s);let fe,te=n.inputs;!P&&null!=te&&(fe=te[c])?(Xf(t,s,fe,c,h),Ri(n)&&function(t,n){const s=Pn(n,t);16&s[2]||(s[2]|=64)}(s,n.index)):3&n.type&&(c=function(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(c),h=null!=T?T(h,n.value||"",c):h,_r(_)?_.setProperty(U,c,h):Vs(c)||(U.setProperty?U.setProperty(c,h):U[c]=h))}function Zf(t,n,s,c){let h=!1;if(To()){const _=function(t,n,s){const c=t.directiveRegistry;let h=null;if(c)for(let _=0;_<c.length;_++){const T=c[_];Rd(s,T.selectors,!1)&&(h||(h=[]),ht(W(s,n),t,T.type),Ti(T)?(oc(t,s),h.unshift(T)):h.push(T))}return h}(t,n,s),T=null===c?null:{"":-1};if(null!==_){h=!0,l(s,t.data.length,_.length);for(let fe=0;fe<_.length;fe++){const Ne=_[fe];Ne.providersResolver&&Ne.providersResolver(Ne)}let P=!1,U=!1,te=al(t,n,_.length,null);for(let fe=0;fe<_.length;fe++){const Ne=_[fe];s.mergedAttrs=ma(s.mergedAttrs,Ne.hostAttrs),a(t,s,n,te,Ne),u(te,Ne,T),null!==Ne.contentQueries&&(s.flags|=8),(null!==Ne.hostBindings||null!==Ne.hostAttrs||0!==Ne.hostVars)&&(s.flags|=128);const ct=Ne.type.prototype;!P&&(ct.ngOnChanges||ct.ngOnInit||ct.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(s.index),P=!0),!U&&(ct.ngOnChanges||ct.ngDoCheck)&&((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(s.index),U=!0),te++}!function(t,n){const c=n.directiveEnd,h=t.data,_=n.attrs,T=[];let P=null,U=null;for(let te=n.directiveStart;te<c;te++){const fe=h[te],Ne=fe.inputs,ct=null===_||$h(n)?null:_e(Ne,_);T.push(ct),P=zf(Ne,te,P),U=zf(fe.outputs,te,U)}null!==P&&(P.hasOwnProperty("class")&&(n.flags|=16),P.hasOwnProperty("style")&&(n.flags|=32)),n.initialInputs=T,n.inputs=P,n.outputs=U}(t,s)}T&&function(t,n,s){if(n){const c=t.localNames=[];for(let h=0;h<n.length;h+=2){const _=s[n[h+1]];if(null==_)throw new xe("301",`Export of name '${n[h+1]}' not found!`);c.push(n[h],_)}}}(s,c,T)}return s.mergedAttrs=ma(s.mergedAttrs,s.attrs),h}function af(t,n,s,c,h,_){const T=_.hostBindings;if(T){let P=t.hostBindingOpCodes;null===P&&(P=t.hostBindingOpCodes=[]);const U=~n.index;(function(t){let n=t.length;for(;n>0;){const s=t[--n];if("number"==typeof s&&s<0)return s}return 0})(P)!=U&&P.push(U),P.push(c,h,T)}}function Th(t,n){null!==t.hostBindings&&t.hostBindings(1,n)}function oc(t,n){n.flags|=2,(t.components||(t.components=[])).push(n.index)}function u(t,n,s){if(s){if(n.exportAs)for(let c=0;c<n.exportAs.length;c++)s[n.exportAs[c]]=t;Ti(n)&&(s[""]=t)}}function l(t,n,s){t.flags|=1,t.directiveStart=n,t.directiveEnd=n+s,t.providerIndexes=n}function a(t,n,s,c,h){t.data[c]=h;const _=h.factory||(h.factory=es(h.type)),T=new oo(_,Ti(h),null);t.blueprint[c]=T,s[c]=T,af(t,n,0,c,al(t,s,h.hostVars,Or),h)}function p(t,n,s){const c=H(n,t),h=Wf(s),_=t[10],T=eo(t,td(t,h,null,s.onPush?64:16,c,n,_,_.createRenderer(c,s),null,null));t[n.index]=T}function I(t,n,s,c,h,_){const T=H(t,n);!function(t,n,s,c,h,_,T){if(null==_)_r(t)?t.removeAttribute(n,h,s):n.removeAttribute(h);else{const P=null==T?Te(_):T(_,c||"",h);_r(t)?t.setAttribute(n,h,P,s):s?n.setAttributeNS(s,h,P):n.setAttribute(h,P)}}(n[11],T,_,t.value,s,c,h)}function K(t,n,s,c,h,_){const T=_[n];if(null!==T){const P=c.setInput;for(let U=0;U<T.length;){const te=T[U++],fe=T[U++],Ne=T[U++];null!==P?c.setInput(s,Ne,te,fe):s[fe]=Ne}}}function _e(t,n){let s=null,c=0;for(;c<n.length;){const h=n[c];if(0!==h)if(5!==h){if("number"==typeof h)break;t.hasOwnProperty(h)&&(null===s&&(s=[]),s.push(h,t[h],n[c+1])),c+=2}else c+=2;else c+=4}return s}function Je(t,n,s,c){return new Array(t,!0,!1,n,null,0,c,s,null,null)}function Xt(t,n){const s=Pn(n,t);if(Sn(s)){const c=s[1];80&s[2]?Hc(c,s,c.template,s[8]):s[5]>0&&Hn(s)}}function Hn(t){for(let c=Xs(t);null!==c;c=yu(c))for(let h=10;h<c.length;h++){const _=c[h];if(1024&_[2]){const T=_[1];Hc(T,_,T.template,_[8])}else _[5]>0&&Hn(_)}const s=t[1].components;if(null!==s)for(let c=0;c<s.length;c++){const h=Pn(s[c],t);Sn(h)&&h[5]>0&&Hn(h)}}function cr(t,n){const s=Pn(n,t),c=s[1];(function(t,n){for(let s=n.length;s<t.blueprint.length;s++)n.push(t.blueprint[s])})(c,s),sc(c,s,s[8])}function eo(t,n){return t[13]?t[14][4]=n:t[13]=n,t[14]=n,n}function Vl(t){for(;t;){t[2]|=64;const n=as(t);if(ps(t)&&!n)return t;t=n}return null}function Sh(t,n,s){const c=n[10];c.begin&&c.begin();try{Hc(t,n,t.template,s)}catch(h){throw rm(n,h),h}finally{c.end&&c.end()}}function em(t){!function(t){for(let n=0;n<t.components.length;n++){const s=t.components[n],c=Cd(s),h=c[1];$f(h,c,h.template,s)}}(t[8])}function zp(t,n,s){Li(0),n(t,s)}const Kp=(()=>Promise.resolve(null))();function Qf(t){return t[7]||(t[7]=[])}function nm(t){return t.cleanup||(t.cleanup=[])}function rm(t,n){const s=t[9],c=s?s.get(Jl,null):null;c&&c.handleError(n)}function Xf(t,n,s,c,h){for(let _=0;_<s.length;){const T=s[_++],P=s[_++],U=n[T],te=t.data[T];null!==te.setInput?te.setInput(U,h,c,P):U[P]=h}}function Gc(t,n,s){const c=C(n,t);!function(t,n,s){_r(t)?t.setValue(n,s):n.textContent=s}(t[11],c,s)}function Ah(t,n,s){let c=s?t.styles:null,h=s?t.classes:null,_=0;if(null!==n)for(let T=0;T<n.length;T++){const P=n[T];"number"==typeof P?_=P:1==_?h=ie(h,P):2==_&&(c=ie(c,P+": "+n[++T]+";"))}s?t.styles=c:t.stylesWithoutHost=c,s?t.classes=h:t.classesWithoutHost=h}const Yp=new jr("INJECTOR",-1);class ep{get(n,s=vc){if(s===vc){const c=new Error(`NullInjectorError: No provider for ${X(n)}!`);throw c.name="NullInjectorError",c}return s}}const Zp=new jr("Set Injector scope."),Wd={},C_={};let uf;function tp(){return void 0===uf&&(uf=new ep),uf}function np(t,n=null,s=null,c){const h=zd(t,n,s,c);return h._resolveInjectorDefTypes(),h}function zd(t,n=null,s=null,c){return new om(t,s,n||tp(),c)}class om{constructor(n,s,c,h=null){this.parent=c,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const _=[];s&&qs(s,P=>this.processProvider(P,n,s)),qs([n],P=>this.processInjectorType(P,[],_)),this.records.set(Yp,rd(void 0,this));const T=this.records.get(Zp);this.scope=null!=T?T.value:null,this.source=h||("object"==typeof n?null:X(n))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(n=>n.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(n,s=vc,c=Qt.Default){this.assertNotDestroyed();const h=Un(this),_=hr(void 0);try{if(!(c&Qt.SkipSelf)){let P=this.records.get(n);if(void 0===P){const U=("function"==typeof(t=n)||"object"==typeof t&&t instanceof jr)&&Nt(n);P=U&&this.injectableDefInScope(U)?rd(df(n),Wd):null,this.records.set(n,P)}if(null!=P)return this.hydrate(n,P)}return(c&Qt.Self?tp():this.parent).get(n,s=c&Qt.Optional&&s===vc?null:s)}catch(T){if("NullInjectorError"===T.name){if((T[Z]=T[Z]||[]).unshift(X(n)),h)throw T;return function(t,n,s,c){const h=t[Z];throw n[Lt]&&h.unshift(n[Lt]),t.message=function(t,n,s,c=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let h=X(n);if(Array.isArray(n))h=n.map(X).join(" -> ");else if("object"==typeof n){let _=[];for(let T in n)if(n.hasOwnProperty(T)){let P=n[T];_.push(T+":"+("string"==typeof P?JSON.stringify(P):X(P)))}h=`{${_.join(", ")}}`}return`${s}${c?"("+c+")":""}[${h}]: ${t.replace(Ge,"\n  ")}`}("\n"+t.message,h,s,c),t.ngTokenPath=h,t[Z]=null,t}(T,n,"R3InjectorError",this.source)}throw T}finally{hr(_),Un(h)}var t}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(n=>this.get(n))}toString(){const n=[];return this.records.forEach((c,h)=>n.push(X(h))),`R3Injector[${n.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(n,s,c){if(!(n=ae(n)))return!1;let h=bn(n);const _=null==h&&n.ngModule||void 0,T=void 0===_?n:_,P=-1!==c.indexOf(T);if(void 0!==_&&(h=bn(_)),null==h)return!1;if(null!=h.imports&&!P){let fe;c.push(T);try{qs(h.imports,Ne=>{this.processInjectorType(Ne,s,c)&&(void 0===fe&&(fe=[]),fe.push(Ne))})}finally{}if(void 0!==fe)for(let Ne=0;Ne<fe.length;Ne++){const{ngModule:ct,providers:Dt}=fe[Ne];qs(Dt,Yt=>this.processProvider(Yt,ct,Dt||Le))}}this.injectorDefTypes.add(T);const U=es(T)||(()=>new T);this.records.set(T,rd(U,Wd));const te=h.providers;if(null!=te&&!P){const fe=n;qs(te,Ne=>this.processProvider(Ne,fe,te))}return void 0!==_&&void 0!==n.providers}processProvider(n,s,c){let h=Mh(n=ae(n))?n:ae(n&&n.provide);const _=(t=n,am(t)?rd(void 0,t.useValue):rd($c(t),Wd));var t;if(Mh(n)||!0!==n.multi)this.records.get(h);else{let T=this.records.get(h);T||(T=rd(void 0,Wd,!0),T.factory=()=>ss(T.multi),this.records.set(h,T)),h=n,T.multi.push(n)}this.records.set(h,_)}hydrate(n,s){return s.value===Wd&&(s.value=C_,s.value=s.factory()),"object"==typeof s.value&&s.value&&null!==(t=s.value)&&"object"==typeof t&&"function"==typeof t.ngOnDestroy&&this.onDestroy.add(s.value),s.value;var t}injectableDefInScope(n){if(!n.providedIn)return!1;const s=ae(n.providedIn);return"string"==typeof s?"any"===s||s===this.scope:this.injectorDefTypes.has(s)}}function df(t){const n=Nt(t),s=null!==n?n.factory:es(t);if(null!==s)return s;if(t instanceof jr)throw new Error(`Token ${X(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const n=t.length;if(n>0){const c=Vn(n,"?");throw new Error(`Can't resolve all parameters for ${X(t)}: (${c.join(", ")}).`)}const s=function(t){const n=t&&(t[mn]||t[br]);if(n){const s=function(t){if(t.hasOwnProperty("name"))return t.name;const n=(""+t).match(/^function\s*([^\s(]+)/);return null===n?"":n[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${s}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${s}" class.`),n}return null}(t);return null!==s?()=>s.factory(t):()=>new t}(t);throw new Error("unreachable")}function $c(t,n,s){let c;if(Mh(t)){const h=ae(t);return es(h)||df(h)}if(am(t))c=()=>ae(t.useValue);else if(function(t){return!(!t||!t.useFactory)}(t))c=()=>t.useFactory(...ss(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))c=()=>Ar(ae(t.useExisting));else{const h=ae(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return es(h)||df(h);c=()=>new h(...ss(t.deps))}return c}function rd(t,n,s=!1){return{factory:t,value:n,multi:s?[]:void 0}}function am(t){return null!==t&&"object"==typeof t&&nn in t}function Mh(t){return"function"==typeof t}let Ya=(()=>{class t{static create(s,c){var h;if(Array.isArray(s))return np({name:""},c,s,"");{const _=null!==(h=s.name)&&void 0!==h?h:"";return np({name:_},s.parent,s.providers,_)}}}return t.THROW_IF_NOT_FOUND=vc,t.NULL=new ep,t.\u0275prov=Ct({token:t,providedIn:"any",factory:()=>Ar(Yp)}),t.__NG_ELEMENT_ID__=-1,t})();function sg(t,n){Ai(Cd(t)[1],w())}function gf(t){let n=function(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),s=!0;const c=[t];for(;n;){let h;if(Ti(t))h=n.\u0275cmp||n.\u0275dir;else{if(n.\u0275cmp)throw new Error("Directives cannot inherit Components");h=n.\u0275dir}if(h){if(s){c.push(h);const T=t;T.inputs=mf(t.inputs),T.declaredInputs=mf(t.declaredInputs),T.outputs=mf(t.outputs);const P=h.hostBindings;P&&xh(t,P);const U=h.viewQuery,te=h.contentQueries;if(U&&pm(t,U),te&&og(t,te),se(t.inputs,h.inputs),se(t.declaredInputs,h.declaredInputs),se(t.outputs,h.outputs),Ti(h)&&h.data.animation){const fe=t.data;fe.animation=(fe.animation||[]).concat(h.data.animation)}}const _=h.features;if(_)for(let T=0;T<_.length;T++){const P=_[T];P&&P.ngInherit&&P(t),P===gf&&(s=!1)}}n=Object.getPrototypeOf(n)}!function(t){let n=0,s=null;for(let c=t.length-1;c>=0;c--){const h=t[c];h.hostVars=n+=h.hostVars,h.hostAttrs=ma(h.hostAttrs,s=ma(s,h.hostAttrs))}}(c)}function mf(t){return t===Fe?{}:t===Le?[]:t}function pm(t,n){const s=t.viewQuery;t.viewQuery=s?(c,h)=>{n(c,h),s(c,h)}:n}function og(t,n){const s=t.contentQueries;t.contentQueries=s?(c,h,_)=>{n(c,h,_),s(c,h,_)}:n}function xh(t,n){const s=t.hostBindings;t.hostBindings=s?(c,h)=>{n(c,h),s(c,h)}:n}let cp=null;function Kd(){if(!cp){const t=fn.Symbol;if(t&&t.iterator)cp=t.iterator;else{const n=Object.getOwnPropertyNames(Map.prototype);for(let s=0;s<n.length;++s){const c=n[s];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(cp=c)}}}return cp}function Oh(t){return!!lg(t)&&(Array.isArray(t)||!(t instanceof Map)&&Kd()in t)}function lg(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Wc(t,n,s){return t[n]=s}function Co(t,n,s){return!Object.is(t[n],s)&&(t[n]=s,!0)}function id(t,n,s,c){const h=Co(t,n,s);return Co(t,n+1,c)||h}function up(t,n,s,c){const h=en();return Co(h,Ln(),n)&&(Ir(),I(vr(),h,t,n,s,c)),up}function $r(t,n,s,c,h,_){const P=id(t,Tn.lFrame.bindingIndex,s,h);return zn(2),P?n+Te(s)+c+Te(h)+_:Or}function Ws(t,n,s,c,h,_,T,P){const U=en(),te=Ir(),fe=t+20,Ne=te.firstCreatePass?function(t,n,s,c,h,_,T,P,U){const te=n.consts,fe=Fl(n,t,4,T||null,Wr(te,P));Zf(n,s,fe,Wr(te,U)),Ai(n,fe);const Ne=fe.tViews=Hd(2,fe,c,h,_,n.directiveRegistry,n.pipeRegistry,null,n.schemas,te);return null!==n.queries&&(n.queries.template(n,fe),Ne.queries=n.queries.embeddedTView(fe)),fe}(fe,te,U,n,s,c,h,_,T):te.data[fe];re(Ne,!1);const ct=U[11].createComment("");Aa(te,U,ct,Ne),Js(ct,U),eo(U,U[fe]=Je(ct,U,ct,Ne)),Pi(Ne)&&Bl(te,U,Ne),null!=T&&rf(U,Ne,P)}function U_(t){return hn(Tn.lFrame.contextLView,20+t)}function ld(t,n=Qt.Default){const s=en();return null===s?Ar(t,n):Et(w(),s,ae(t),n)}function yg(){throw new Error("invalid")}function eh(t,n,s){const c=en();return Co(c,Ln(),n)&&Ka(Ir(),vr(),c,t,n,c[11],s,!1),eh}function vg(t,n,s,c,h){const T=h?"class":"style";Xf(t,s,n.inputs[T],T,c)}function Su(t,n,s,c){const h=en(),_=Ir(),T=20+t,P=h[11],U=h[T]=b(P,n,Tn.lFrame.currentNamespace),te=_.firstCreatePass?function(t,n,s,c,h,_,T){const P=n.consts,te=Fl(n,t,2,h,Wr(P,_));return Zf(n,s,te,Wr(P,T)),null!==te.attrs&&Ah(te,te.attrs,!1),null!==te.mergedAttrs&&Ah(te,te.mergedAttrs,!0),null!==n.queries&&n.queries.elementStart(n,te),te}(T,_,h,0,n,s,c):_.data[T];re(te,!0);const fe=te.mergedAttrs;null!==fe&&ea(P,U,fe);const Ne=te.classes;null!==Ne&&Od(P,U,Ne);const ct=te.styles;null!==ct&&Mf(P,U,ct),64!=(64&te.flags)&&Aa(_,h,U,te),0===Tn.lFrame.elementDepthCount&&Js(U,h),Tn.lFrame.elementDepthCount++,Pi(te)&&(Bl(_,h,te),jd(_,te,h)),null!==c&&rf(h,te)}function uc(){let t=w();me()?We():(t=t.parent,re(t,!1));const n=t;Tn.lFrame.elementDepthCount--;const s=Ir();s.firstCreatePass&&(Ai(s,t),qr(t)&&s.queries.elementEnd(t)),null!=n.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(n)&&vg(s,n,en(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(n)&&vg(s,n,en(),n.stylesWithoutHost,!1)}function kh(t,n,s,c){Su(t,n,s,c),uc()}function gp(t,n,s){const c=en(),h=Ir(),_=t+20,T=h.firstCreatePass?function(t,n,s,c,h){const _=n.consts,T=Wr(_,c),P=Fl(n,t,8,"ng-container",T);return null!==T&&Ah(P,T,!0),Zf(n,s,P,Wr(_,h)),null!==n.queries&&n.queries.elementStart(n,P),P}(_,h,c,n,s):h.data[_];re(T,!0);const P=c[_]=c[11].createComment("");Aa(h,c,P,T),Js(P,c),Pi(T)&&(Bl(h,c,T),jd(h,T,c)),null!=s&&rf(c,T)}function mp(){let t=w();const n=Ir();me()?We():(t=t.parent,re(t,!1)),n.firstCreatePass&&(Ai(n,t),qr(t)&&n.queries.elementEnd(t))}function Nh(t,n,s){gp(t,n,s),mp()}function Au(){return en()}function Eg(t){return!!t&&"function"==typeof t.then}function Sm(t){return!!t&&"function"==typeof t.subscribe}const Am=Sm;function bg(t,n,s,c){const h=en(),_=Ir(),T=w();return function(t,n,s,c,h,_,T,P){const U=Pi(c),fe=t.firstCreatePass&&nm(t),Ne=n[8],ct=Qf(n);let Dt=!0;if(3&c.type||P){const Rn=H(c,n),nr=P?P(Rn):Rn,an=ct.length,Er=P?ai=>P(G(ai[c.index])):c.index;if(_r(s)){let ai=null;if(!P&&U&&(ai=function(t,n,s,c){const h=t.cleanup;if(null!=h)for(let _=0;_<h.length-1;_+=2){const T=h[_];if(T===s&&h[_+1]===c){const P=n[7],U=h[_+2];return P.length>U?P[U]:null}"string"==typeof T&&(_+=2)}return null}(t,n,h,c.index)),null!==ai)(ai.__ngLastListenerFn__||ai).__ngNextListenerFn__=_,ai.__ngLastListenerFn__=_,Dt=!1;else{_=Ig(c,n,Ne,_,!1);const ls=s.listen(nr,h,_);ct.push(_,ls),fe&&fe.push(h,Er,an,an+1)}}else _=Ig(c,n,Ne,_,!0),nr.addEventListener(h,_,T),ct.push(_),fe&&fe.push(h,Er,an,T)}else _=Ig(c,n,Ne,_,!1);const Yt=c.outputs;let Cn;if(Dt&&null!==Yt&&(Cn=Yt[h])){const Rn=Cn.length;if(Rn)for(let nr=0;nr<Rn;nr+=2){const fc=n[Cn[nr]][Cn[nr+1]].subscribe(_),Sf=ct.length;ct.push(_,fc),fe&&fe.push(h,c.index,Sf,-(Sf+1))}}}(_,h,h[11],T,t,n,!!s,c),bg}function Cg(t,n,s,c){try{return!1!==s(c)}catch(h){return rm(t,h),!1}}function Ig(t,n,s,c,h){return function _(T){if(T===Function)return c;const P=2&t.flags?Pn(t.index,n):n;0==(32&n[2])&&Vl(P);let U=Cg(n,0,c,T),te=_.__ngNextListenerFn__;for(;te;)U=Cg(n,0,te,T)&&U,te=te.__ngNextListenerFn__;return h&&!1===U&&(T.preventDefault(),T.returnValue=!1),U}}function xm(t=1){return function(t){return(Tn.lFrame.contextLView=function(t,n){for(;t>0;)n=n[15],t--;return n}(t,Tn.lFrame.contextLView))[8]}(t)}function Om(t,n){let s=null;const c=function(t){const n=t.attrs;if(null!=n){const s=n.indexOf(5);if(0==(1&s))return n[s+1]}return null}(t);for(let h=0;h<n.length;h++){const _=n[h];if("*"!==_){if(null===c?Rd(t,_,!0):zh(c,_))return h}else s=h}return s}function Rm(t){const n=en()[16][6];if(!n.projection){const c=n.projection=Vn(t?t.length:1,null),h=c.slice();let _=n.child;for(;null!==_;){const T=t?Om(_,t):0;null!==T&&(h[T]?h[T].projectionNext=_:c[T]=_,h[T]=_),_=_.next}}}function Pm(t,n=0,s){const c=en(),h=Ir(),_=Fl(h,20+t,16,null,s||null);null===_.projection&&(_.projection=n),We(),64!=(64&_.flags)&&function(t,n,s){Vc(n[11],0,n,s,Ci(t,s,n),xo(s.parent||n[6],s,n))}(h,c,_)}function Fm(t,n,s,c,h){const _=t[s+1],T=null===n;let P=c?Ma(_):rc(_),U=!1;for(;0!==P&&(!1===U||T);){const fe=t[P+1];ey(t[P],n)&&(U=!0,t[P+1]=c?mo(fe):mh(fe)),P=c?Ma(fe):rc(fe)}U&&(t[s+1]=c?mh(_):mo(_))}function ey(t,n){return null===t||null==n||(Array.isArray(t)?t[1]:t)===n||!(!Array.isArray(t)||"string"!=typeof n)&&Ao(t,n)>=0}const Ho={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function Mg(t){return t.substring(Ho.key,Ho.keyEnd)}function Bm(t,n){const s=Ho.textEnd;return s===n?-1:(n=Ho.keyEnd=function(t,n,s){for(;n<s&&t.charCodeAt(n)>32;)n++;return n}(t,Ho.key=n,s),cd(t,n,s))}function cd(t,n,s){for(;n<s&&t.charCodeAt(n)<=32;)n++;return n}function xg(t,n,s){return jl(t,n,s,!1),xg}function Gm(t,n){return jl(t,n,null,!0),Gm}function vp(t){!function(t,n,s,c){const h=Ir(),_=zn(2);h.firstUpdatePass&&$m(h,null,_,c);const T=en();if(s!==Or&&Co(T,_,s)){const P=h.data[xn()];if(pa(P,c)&&!Ep(h,_)){let U=c?P.classesWithoutHost:P.stylesWithoutHost;null!==U&&(s=ie(U,s||"")),vg(h,P,T,s,c)}else!function(t,n,s,c,h,_,T,P){h===Or&&(h=Le);let U=0,te=0,fe=0<h.length?h[0]:null,Ne=0<_.length?_[0]:null;for(;null!==fe||null!==Ne;){const ct=U<h.length?h[U+1]:void 0,Dt=te<_.length?_[te+1]:void 0;let Cn,Yt=null;fe===Ne?(U+=2,te+=2,ct!==Dt&&(Yt=Ne,Cn=Dt)):null===Ne||null!==fe&&fe<Ne?(U+=2,Yt=fe):(te+=2,Yt=Ne,Cn=Dt),null!==Yt&&Og(t,n,s,c,Yt,Cn,T,P),fe=U<h.length?h[U]:null,Ne=te<_.length?_[te]:null}}(h,P,T,T[11],T[_+1],T[_+1]=function(t,n,s){if(null==s||""===s)return Le;const c=[],h=da(s);if(Array.isArray(h))for(let _=0;_<h.length;_++)t(c,h[_],!0);else if("object"==typeof h)for(const _ in h)h.hasOwnProperty(_)&&t(c,_,h[_]);else"string"==typeof h&&n(c,h);return c}(t,n,s),c,_)}}(js,dc,t,!0)}function dc(t,n){for(let s=function(t){return function(t){Ho.key=0,Ho.keyEnd=0,Ho.value=0,Ho.valueEnd=0,Ho.textEnd=t.length}(t),Bm(t,cd(t,0,Ho.textEnd))}(n);s>=0;s=Bm(n,s))js(t,Mg(n),!0)}function jl(t,n,s,c){const h=en(),_=Ir(),T=zn(2);_.firstUpdatePass&&$m(_,t,T,c),n!==Or&&Co(h,T,n)&&Og(_,_.data[xn()],h,h[11],t,h[T+1]=function(t,n){return null==t||("string"==typeof n?t+=n:"object"==typeof t&&(t=X(da(t)))),t}(n,s),c,T)}function Ep(t,n){return n>=t.expandoStartIndex}function $m(t,n,s,c){const h=t.data;if(null===h[s+1]){const _=h[xn()],T=Ep(t,s);pa(_,c)&&null===n&&!T&&(n=!1),n=function(t,n,s,c){const h=function(t){const n=Tn.lFrame.currentDirectiveIndex;return-1===n?null:t[n]}(t);let _=c?n.residualClasses:n.residualStyles;if(null===h)0===(c?n.classBindings:n.styleBindings)&&(s=Lh(s=wp(null,t,n,s,c),n.attrs,c),_=null);else{const T=n.directiveStylingLast;if(-1===T||t[T]!==h)if(s=wp(h,t,n,s,c),null===_){let U=function(t,n,s){const c=s?n.classBindings:n.styleBindings;if(0!==rc(c))return t[Ma(c)]}(t,n,c);void 0!==U&&Array.isArray(U)&&(U=wp(null,t,n,U[1],c),U=Lh(U,n.attrs,c),function(t,n,s,c){t[Ma(s?n.classBindings:n.styleBindings)]=c}(t,n,c,U))}else _=function(t,n,s){let c;const h=n.directiveEnd;for(let _=1+n.directiveStylingLast;_<h;_++)c=Lh(c,t[_].hostAttrs,s);return Lh(c,n.attrs,s)}(t,n,c)}return void 0!==_&&(c?n.residualClasses=_:n.residualStyles=_),s}(h,_,n,c),function(t,n,s,c,h,_){let T=_?n.classBindings:n.styleBindings,P=Ma(T),U=rc(T);t[c]=s;let fe,te=!1;if(Array.isArray(s)){const Ne=s;fe=Ne[1],(null===fe||Ao(Ne,fe)>0)&&(te=!0)}else fe=s;if(h)if(0!==U){const ct=Ma(t[P+1]);t[c+1]=Pd(ct,P),0!==ct&&(t[ct+1]=ol(t[ct+1],c)),t[P+1]=function(t,n){return 131071&t|n<<17}(t[P+1],c)}else t[c+1]=Pd(P,0),0!==P&&(t[P+1]=ol(t[P+1],c)),P=c;else t[c+1]=Pd(U,0),0===P?P=c:t[U+1]=ol(t[U+1],c),U=c;te&&(t[c+1]=mh(t[c+1])),Fm(t,fe,c,!0),Fm(t,fe,c,!1),function(t,n,s,c,h){const _=h?t.residualClasses:t.residualStyles;null!=_&&"string"==typeof n&&Ao(_,n)>=0&&(s[c+1]=mo(s[c+1]))}(n,fe,t,c,_),T=Pd(P,U),_?n.classBindings=T:n.styleBindings=T}(h,_,n,s,T,c)}}function wp(t,n,s,c,h){let _=null;const T=s.directiveEnd;let P=s.directiveStylingLast;for(-1===P?P=s.directiveStart:P++;P<T&&(_=n[P],c=Lh(c,_.hostAttrs,h),_!==t);)P++;return null!==t&&(s.directiveStylingLast=P),c}function Lh(t,n,s){const c=s?1:2;let h=-1;if(null!==n)for(let _=0;_<n.length;_++){const T=n[_];"number"==typeof T?h=T:h===c&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),js(t,T,!!s||n[++_]))}return void 0===t?null:t}function Og(t,n,s,c,h,_,T,P){if(!(3&n.type))return;const U=t.data,te=U[P+1];ud(function(t){return 1==(1&t)}(te)?Rg(U,n,s,h,rc(te),T):void 0)||(ud(_)||function(t){return 2==(2&t)}(te)&&(_=Rg(U,null,s,h,P,T)),function(t,n,s,c,h){const _=_r(t);if(n)h?_?t.addClass(s,c):s.classList.add(c):_?t.removeClass(s,c):s.classList.remove(c);else{let T=-1===c.indexOf("-")?void 0:Da.DashCase;if(null==h)_?t.removeStyle(s,c,T):s.style.removeProperty(c);else{const P="string"==typeof h&&h.endsWith("!important");P&&(h=h.slice(0,-10),T|=Da.Important),_?t.setStyle(s,c,h,T):s.style.setProperty(c,h,P?"important":"")}}}(c,T,C(xn(),s),h,_))}function Rg(t,n,s,c,h,_){const T=null===n;let P;for(;h>0;){const U=t[h],te=Array.isArray(U),fe=te?U[1]:U,Ne=null===fe;let ct=s[h+1];ct===Or&&(ct=Ne?Le:void 0);let Dt=Ne?Fa(ct,c):fe===c?ct:void 0;if(te&&!ud(Dt)&&(Dt=Fa(U,c)),ud(Dt)&&(P=Dt,T))return P;const Yt=t[h+1];h=T?Ma(Yt):rc(Yt)}if(null!==n){let U=_?n.residualClasses:n.residualStyles;null!=U&&(P=Fa(U,c))}return P}function ud(t){return void 0!==t}function pa(t,n){return 0!=(t.flags&(n?16:32))}function zm(t,n=""){const s=en(),c=Ir(),h=t+20,_=c.firstCreatePass?Fl(c,h,1,n,null):c.data[h],T=s[h]=function(t,n){return _r(t)?t.createText(n):t.createTextNode(n)}(s[11],n);Aa(c,s,T,_),re(_,!1)}function Df(t){return xu("",t,""),Df}function xu(t,n,s){const c=en(),h=function(t,n,s,c){return Co(t,Ln(),s)?n+Te(s)+c:Or}(c,t,n,s);return h!==Or&&Gc(c,xn(),h),xu}function Ou(t,n,s,c,h){const _=en(),T=$r(_,t,n,s,c,h);return T!==Or&&Gc(_,xn(),T),Ou}function O(t,n,s){const c=en();return Co(c,Ln(),n)&&Ka(Ir(),vr(),c,t,n,c[11],s,!0),O}const ue=void 0;var Ze=["en",[["a","p"],["AM","PM"],ue],[["AM","PM"],ue,ue],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ue,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ue,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ue,"{1} 'at' {0}",ue],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){const s=Math.floor(Math.abs(t)),c=t.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===c?1:5}];let dt={};function on(t){const n=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let s=kr(n);if(s)return s;const c=n.split("-")[0];if(s=kr(c),s)return s;if("en"===c)return Ze;throw new Error(`Missing locale data for the locale "${t}".`)}function lr(t){return on(t)[qn.PluralCase]}function kr(t){return t in dt||(dt[t]=fn.ng&&fn.ng.common&&fn.ng.common.locales&&fn.ng.common.locales[t]),dt[t]}var qn=(()=>((qn=qn||{})[qn.LocaleId=0]="LocaleId",qn[qn.DayPeriodsFormat=1]="DayPeriodsFormat",qn[qn.DayPeriodsStandalone=2]="DayPeriodsStandalone",qn[qn.DaysFormat=3]="DaysFormat",qn[qn.DaysStandalone=4]="DaysStandalone",qn[qn.MonthsFormat=5]="MonthsFormat",qn[qn.MonthsStandalone=6]="MonthsStandalone",qn[qn.Eras=7]="Eras",qn[qn.FirstDayOfWeek=8]="FirstDayOfWeek",qn[qn.WeekendRange=9]="WeekendRange",qn[qn.DateFormat=10]="DateFormat",qn[qn.TimeFormat=11]="TimeFormat",qn[qn.DateTimeFormat=12]="DateTimeFormat",qn[qn.NumberSymbols=13]="NumberSymbols",qn[qn.NumberFormats=14]="NumberFormats",qn[qn.CurrencyCode=15]="CurrencyCode",qn[qn.CurrencySymbol=16]="CurrencySymbol",qn[qn.CurrencyName=17]="CurrencyName",qn[qn.Currencies=18]="Currencies",qn[qn.Directionality=19]="Directionality",qn[qn.PluralCase=20]="PluralCase",qn[qn.ExtraData=21]="ExtraData",qn))();const Bh="en-US";let gv=Bh;function Ey(t,n,s,c,h){if(t=ae(t),Array.isArray(t))for(let _=0;_<t.length;_++)Ey(t[_],n,s,c,h);else{const _=Ir(),T=en();let P=Mh(t)?t:ae(t.provide),U=$c(t);const te=w(),fe=1048575&te.providerIndexes,Ne=te.directiveStart,ct=te.providerIndexes>>20;if(Mh(t)||!t.multi){const Dt=new oo(U,h,ld),Yt=wy(P,n,h?fe:fe+ct,Ne);-1===Yt?(ht(W(te,T),_,P),by(_,t,n.length),n.push(P),te.directiveStart++,te.directiveEnd++,h&&(te.providerIndexes+=1048576),s.push(Dt),T.push(Dt)):(s[Yt]=Dt,T[Yt]=Dt)}else{const Dt=wy(P,n,fe+ct,Ne),Yt=wy(P,n,fe,fe+ct),Cn=Dt>=0&&s[Dt],Rn=Yt>=0&&s[Yt];if(h&&!Rn||!h&&!Cn){ht(W(te,T),_,P);const nr=function(t,n,s,c,h){const _=new oo(t,s,ld);return _.multi=[],_.index=n,_.componentProviders=0,Vv(_,h,c&&!s),_}(h?a0:o0,s.length,h,c,U);!h&&Rn&&(s[Yt].providerFactory=nr),by(_,t,n.length,0),n.push(P),te.directiveStart++,te.directiveEnd++,h&&(te.providerIndexes+=1048576),s.push(nr),T.push(nr)}else by(_,t,Dt>-1?Dt:Yt,Vv(s[h?Yt:Dt],U,!h&&c));!h&&c&&Rn&&s[Yt].componentProviders++}}}function by(t,n,s,c){const h=Mh(n),_=function(t){return!!t.useClass}(n);if(h||_){const U=(_?ae(n.useClass):n).prototype.ngOnDestroy;if(U){const te=t.destroyHooks||(t.destroyHooks=[]);if(!h&&n.multi){const fe=te.indexOf(s);-1===fe?te.push(s,[c,U]):te[fe+1].push(c,U)}else te.push(s,U)}}}function Vv(t,n,s){return s&&t.componentProviders++,t.multi.push(n)-1}function wy(t,n,s,c){for(let h=s;h<c;h++)if(n[h]===t)return h;return-1}function o0(t,n,s,c){return Cy(this.multi,[])}function a0(t,n,s,c){const h=this.multi;let _;if(this.providerFactory){const T=this.providerFactory.componentProviders,P=ds(s,s[1],this.providerFactory.index,c);_=P.slice(0,T),Cy(h,_);for(let U=T;U<P.length;U++)_.push(P[U])}else _=[],Cy(h,_);return _}function Cy(t,n){for(let s=0;s<t.length;s++)n.push((0,t[s])());return n}function Uv(t,n=[]){return s=>{s.providersResolver=(c,h)=>function(t,n,s){const c=Ir();if(c.firstCreatePass){const h=Ti(t);Ey(s,c.data,c.blueprint,h,!0),Ey(n,c.data,c.blueprint,h,!1)}}(c,h?h(t):t,n)}}class jv{}class d0{resolveComponentFactory(n){throw function(t){const n=Error(`No component factory found for ${X(t)}. Did you add it to @NgModule.entryComponents?`);return n.ngComponent=t,n}(n)}}let Ug=(()=>{class t{}return t.NULL=new d0,t})();function h0(){return Sp(w(),en())}function Sp(t,n){return new jg(H(t,n))}let jg=(()=>{class t{constructor(s){this.nativeElement=s}}return t.__NG_ELEMENT_ID__=h0,t})();function f0(t){return t instanceof jg?t.nativeElement:t}class Gv{}let p0=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>function(){const t=en(),s=Pn(w().index,t);return function(t){return t[11]}(Hi(s)?s:t)}(),t})(),_0=(()=>{class t{}return t.\u0275prov=Ct({token:t,providedIn:"root",factory:()=>null}),t})();class $v{constructor(n){this.full=n,this.major=n.split(".")[0],this.minor=n.split(".")[1],this.patch=n.split(".").slice(2).join(".")}}const Wv=new $v("13.1.0"),Iy={};function a_(t,n,s,c,h=!1){for(;null!==s;){const _=n[s.index];if(null!==_&&c.push(G(_)),_i(_))for(let P=10;P<_.length;P++){const U=_[P],te=U[1].firstChild;null!==te&&a_(U[1],U,te,c)}const T=s.type;if(8&T)a_(t,n,s.child,c);else if(32&T){const P=Nc(s,n);let U;for(;U=P();)c.push(U)}else if(16&T){const P=jh(n,s);if(Array.isArray(P))c.push(...P);else{const U=as(n[16]);a_(U[1],U,P,c,!0)}}s=h?s.projectionNext:s.next}return c}class Hg{constructor(n,s){this._lView=n,this._cdRefInjectingView=s,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const n=this._lView,s=n[1];return a_(s,n,s.firstChild,[])}get context(){return this._lView[8]}set context(n){this._lView[8]=n}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const n=this._lView[3];if(_i(n)){const s=n[8],c=s?s.indexOf(this):-1;c>-1&&(gn(n,c),Na(s,c))}this._attachedToViewContainer=!1}ln(this._lView[1],this._lView)}onDestroy(n){Gd(this._lView[1],this._lView,null,n)}markForCheck(){Vl(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Sh(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,n,s){un(!0);try{Sh(t,n,s)}finally{un(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var n;this._appRef=null,qu(this._lView[1],n=this._lView,n[11],2,null,null)}attachToAppRef(n){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=n}}class y0 extends Hg{constructor(n){super(n),this._view=n}detectChanges(){em(this._view)}checkNoChanges(){!function(t){un(!0);try{em(t)}finally{un(!1)}}(this._view)}get context(){return null}}class zv extends Ug{constructor(n){super(),this.ngModule=n}resolveComponentFactory(n){const s=St(n);return new Dy(s,this.ngModule)}}function Kv(t){const n=[];for(let s in t)t.hasOwnProperty(s)&&n.push({propName:t[s],templateName:s});return n}const E0=new jr("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Ku});class Dy extends jv{constructor(n,s){super(),this.componentDef=n,this.ngModule=s,this.componentType=n.type,this.selector=n.selectors.map(ph).join(","),this.ngContentSelectors=n.ngContentSelectors?n.ngContentSelectors:[],this.isBoundToModule=!!s}get inputs(){return Kv(this.componentDef.inputs)}get outputs(){return Kv(this.componentDef.outputs)}create(n,s,c,h){const _=(h=h||this.ngModule)?function(t,n){return{get:(s,c,h)=>{const _=t.get(s,Iy,h);return _!==Iy||c===Iy?_:n.get(s,c,h)}}}(n,h.injector):n,T=_.get(Gv,ko),P=_.get(_0,null),U=T.createRenderer(null,this.componentDef),te=this.componentDef.selectors[0][0]||"div",fe=c?function(t,n,s){if(_r(t))return t.selectRootElement(n,s===Ie.ShadowDom);let c="string"==typeof n?t.querySelector(n):n;return c.textContent="",c}(U,c,this.componentDef.encapsulation):b(T.createRenderer(null,this.componentDef),te,function(t){const n=t.toLowerCase();return"svg"===n?As:"math"===n?"http://www.w3.org/1998/MathML/":null}(te)),Ne=this.componentDef.onPush?576:528,ct=function(t,n){return{components:[],scheduler:t||Ku,clean:Kp,playerHandler:n||null,flags:0}}(),Dt=Hd(0,null,null,1,0,null,null,null,null,null),Yt=td(null,Dt,ct,Ne,null,null,T,U,P,_);let Cn,Rn;ns(Yt);try{const nr=function(t,n,s,c,h,_){const T=s[1];s[20]=t;const U=Fl(T,20,2,"#host",null),te=U.mergedAttrs=n.hostAttrs;null!==te&&(Ah(U,te,!0),null!==t&&(ea(h,t,te),null!==U.classes&&Od(h,t,U.classes),null!==U.styles&&Mf(h,t,U.styles)));const fe=c.createRenderer(t,n),Ne=td(s,Wf(n),null,n.onPush?64:16,s[20],U,c,fe,_||null,null);return T.firstCreatePass&&(ht(W(U,s),T,n.type),oc(T,U),l(U,s.length,1)),eo(s,Ne),s[20]=Ne}(fe,this.componentDef,Yt,T,U);if(fe)if(c)ea(U,fe,["ng-version",Wv.full]);else{const{attrs:an,classes:Er}=function(t){const n=[],s=[];let c=1,h=2;for(;c<t.length;){let _=t[c];if("string"==typeof _)2===h?""!==_&&n.push(_,t[++c]):8===h&&s.push(_);else{if(!sl(h))break;h=_}c++}return{attrs:n,classes:s}}(this.componentDef.selectors[0]);an&&ea(U,fe,an),Er&&Er.length>0&&Od(U,fe,Er.join(" "))}if(Rn=wt(Dt,20),void 0!==s){const an=Rn.projection=[];for(let Er=0;Er<this.ngContentSelectors.length;Er++){const ai=s[Er];an.push(null!=ai?Array.from(ai):null)}}Cn=function(t,n,s,c,h){const _=s[1],T=function(t,n,s){const c=w();t.firstCreatePass&&(s.providersResolver&&s.providersResolver(s),a(t,c,n,al(t,n,1,null),s));const h=ds(n,t,c.directiveStart,c);Js(h,n);const _=H(c,n);return _&&Js(_,n),h}(_,s,n);if(c.components.push(T),t[8]=T,h&&h.forEach(U=>U(T,n)),n.contentQueries){const U=w();n.contentQueries(1,T,U.directiveStart)}const P=w();return!_.firstCreatePass||null===n.hostBindings&&null===n.hostAttrs||(vn(P.index),af(s[1],P,0,P.directiveStart,P.directiveEnd,n),Th(n,T)),T}(nr,this.componentDef,Yt,ct,[sg]),sc(Dt,Yt,null)}finally{so()}return new C0(this.componentType,Cn,Sp(Rn,Yt),Yt,Rn)}}class C0 extends class{}{constructor(n,s,c,h,_){super(),this.location=c,this._rootLView=h,this._tNode=_,this.instance=s,this.hostView=this.changeDetectorRef=new y0(h),this.componentType=n}get injector(){return new ti(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(n){this.hostView.onDestroy(n)}}class Ap{}class Yv{}const Mp=new Map;class Qv extends Ap{constructor(n,s){super(),this._parent=s,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new zv(this);const c=fr(n);this._bootstrapComponents=fs(c.bootstrap),this._r3Injector=zd(n,s,[{provide:Ap,useValue:this},{provide:Ug,useValue:this.componentFactoryResolver}],X(n)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(n)}get(n,s=Ya.THROW_IF_NOT_FOUND,c=Qt.Default){return n===Ya||n===Ap||n===Yp?this:this._r3Injector.get(n,s,c)}destroy(){const n=this._r3Injector;!n.destroyed&&n.destroy(),this.destroyCbs.forEach(s=>s()),this.destroyCbs=null}onDestroy(n){this.destroyCbs.push(n)}}class Ty extends Yv{constructor(n){super(),this.moduleType=n,null!==fr(n)&&function(t){const n=new Set;!function s(c){const h=fr(c,!0),_=h.id;null!==_&&(function(t,n,s){if(n&&n!==s)throw new Error(`Duplicate module registered for ${t} - ${X(n)} vs ${X(n.name)}`)}(_,Mp.get(_),c),Mp.set(_,c));const T=fs(h.imports);for(const P of T)n.has(P)||(n.add(P),s(P))}(t)}(n)}create(n){return new Qv(this.moduleType,n)}}function Jv(t,n,s){const c=_n()+t,h=en();return h[c]===Or?Wc(h,c,s?n.call(s):n()):function(t,n){return t[n]}(h,c)}function Xv(t,n,s,c){return eE(en(),_n(),t,n,s,c)}function Gg(t,n){const s=t[n];return s===Or?void 0:s}function eE(t,n,s,c,h,_){const T=n+s;return Co(t,T,h)?Wc(t,T+1,_?c.call(_,h):c(h)):Gg(t,T+1)}function sE(t,n){const s=Ir();let c;const h=t+20;s.firstCreatePass?(c=function(t,n){if(n)for(let s=n.length-1;s>=0;s--){const c=n[s];if(t===c.name)return c}}(n,s.pipeRegistry),s.data[h]=c,c.onDestroy&&(s.destroyHooks||(s.destroyHooks=[])).push(h,c.onDestroy)):c=s.data[h];const _=c.factory||(c.factory=es(c.type)),T=hr(ld);try{const P=Wo(!1),U=_();return Wo(P),function(t,n,s,c){s>=t.data.length&&(t.data[s]=null,t.blueprint[s]=null),n[s]=c}(s,en(),h,U),U}finally{hr(T)}}function oE(t,n,s){const c=t+20,h=en(),_=hn(h,c);return $g(h,c)?eE(h,_n(),n,_.transform,s,_):_.transform(s)}function aE(t,n,s,c){const h=t+20,_=en(),T=hn(_,h);return $g(_,h)?function(t,n,s,c,h,_,T){const P=n+s;return id(t,P,h,_)?Wc(t,P+2,T?c.call(T,h,_):c(h,_)):Gg(t,P+2)}(_,_n(),n,T.transform,s,c,T):T.transform(s,c)}function $g(t,n){return t[1].data[n].pure}function Sy(t){return n=>{setTimeout(t,void 0,n)}}const hd=class extends g.xQ{constructor(n=!1){super(),this.__isAsync=n}emit(n){super.next(n)}subscribe(n,s,c){var h,_,T;let P=n,U=s||(()=>null),te=c;if(n&&"object"==typeof n){const Ne=n;P=null===(h=Ne.next)||void 0===h?void 0:h.bind(Ne),U=null===(_=Ne.error)||void 0===_?void 0:_.bind(Ne),te=null===(T=Ne.complete)||void 0===T?void 0:T.bind(Ne)}this.__isAsync&&(U=Sy(U),P&&(P=Sy(P)),te&&(te=Sy(te)));const fe=super.subscribe({next:P,error:U,complete:te});return n instanceof E.w&&n.add(fe),fe}};function V0(){return this._results[Kd()]()}class l_{constructor(n=!1){this._emitDistinctChangesOnly=n,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const s=Kd(),c=l_.prototype;c[s]||(c[s]=V0)}get changes(){return this._changes||(this._changes=new hd)}get(n){return this._results[n]}map(n){return this._results.map(n)}filter(n){return this._results.filter(n)}find(n){return this._results.find(n)}reduce(n,s){return this._results.reduce(n,s)}forEach(n){this._results.forEach(n)}some(n){return this._results.some(n)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(n,s){const c=this;c.dirty=!1;const h=Us(n);(this._changesDetected=!function(t,n,s){if(t.length!==n.length)return!1;for(let c=0;c<t.length;c++){let h=t[c],_=n[c];if(s&&(h=s(h),_=s(_)),_!==h)return!1}return!0}(c._results,h,s))&&(c._results=h,c.length=h.length,c.last=h[this.length-1],c.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Wg=(()=>{class t{}return t.__NG_ELEMENT_ID__=H0,t})();const U0=Wg,j0=class extends U0{constructor(n,s,c){super(),this._declarationLView=n,this._declarationTContainer=s,this.elementRef=c}createEmbeddedView(n){const s=this._declarationTContainer.tViews,c=td(this._declarationLView,s,n,16,null,s.declTNode,null,null,null,null);c[17]=this._declarationLView[this._declarationTContainer.index];const _=this._declarationLView[19];return null!==_&&(c[19]=_.createEmbeddedView(s)),sc(s,c,n),new Hg(c)}};function H0(){return c_(w(),en())}function c_(t,n){return 4&t.type?new j0(n,t,Sp(t,n)):null}let u_=(()=>{class t{}return t.__NG_ELEMENT_ID__=G0,t})();function G0(){return uE(w(),en())}const $0=u_,lE=class extends $0{constructor(n,s,c){super(),this._lContainer=n,this._hostTNode=s,this._hostLView=c}get element(){return Sp(this._hostTNode,this._hostLView)}get injector(){return new ti(this._hostTNode,this._hostLView)}get parentInjector(){const n=st(this._hostTNode,this._hostLView);if(Hl(n)){const s=na(n,this._hostLView),c=ta(n);return new ti(s[1].data[c+8],s)}return new ti(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(n){const s=cE(this._lContainer);return null!==s&&s[n]||null}get length(){return this._lContainer.length-10}createEmbeddedView(n,s,c){const h=n.createEmbeddedView(s||{});return this.insert(h,c),h}createComponent(n,s,c,h,_){const T=n&&!("function"==typeof n);let P;if(T)P=s;else{const Ne=s||{};P=Ne.index,c=Ne.injector,h=Ne.projectableNodes,_=Ne.ngModuleRef}const U=T?n:new Dy(St(n)),te=c||this.parentInjector;if(!_&&null==U.ngModule&&te){const Ne=te.get(Ap,null);Ne&&(_=Ne)}const fe=U.create(te,h,void 0,_);return this.insert(fe.hostView,P),fe}insert(n,s){const c=n._lView,h=c[1];if(_i(c[3])){const fe=this.indexOf(n);if(-1!==fe)this.detach(fe);else{const Ne=c[3],ct=new lE(Ne,Ne[6],Ne[3]);ct.detach(ct.indexOf(n))}}const _=this._adjustIndex(s),T=this._lContainer;!function(t,n,s,c){const h=10+c,_=s.length;c>0&&(s[h-1][4]=n),c<_-10?(n[4]=s[h],ka(s,10+c,n)):(s.push(n),n[4]=null),n[3]=s;const T=n[17];null!==T&&s!==T&&function(t,n){const s=t[9];n[16]!==n[3][3][16]&&(t[2]=!0),null===s?t[9]=[n]:s.push(n)}(T,n);const P=n[19];null!==P&&P.insertView(t),n[2]|=128}(h,c,T,_);const P=nc(_,T),U=c[11],te=ec(U,T[7]);return null!==te&&function(t,n,s,c,h,_){c[0]=h,c[6]=n,qu(t,c,s,1,h,_)}(h,T[6],U,c,te,P),n.attachToViewContainerRef(),ka(Ay(T),_,n),n}move(n,s){return this.insert(n,s)}indexOf(n){const s=cE(this._lContainer);return null!==s?s.indexOf(n):-1}remove(n){const s=this._adjustIndex(n,-1),c=gn(this._lContainer,s);c&&(Na(Ay(this._lContainer),s),ln(c[1],c))}detach(n){const s=this._adjustIndex(n,-1),c=gn(this._lContainer,s);return c&&null!=Na(Ay(this._lContainer),s)?new Hg(c):null}_adjustIndex(n,s=0){return null==n?this.length+s:n}};function cE(t){return t[8]}function Ay(t){return t[8]||(t[8]=[])}function uE(t,n){let s;const c=n[t.index];if(_i(c))s=c;else{let h;if(8&t.type)h=G(c);else{const _=n[11];h=_.createComment("");const T=H(t,n);Sa(_,ec(_,T),h,function(t,n){return _r(t)?t.nextSibling(n):n.nextSibling}(_,T),!1)}n[t.index]=s=Je(c,n,h,t),eo(n,s)}return new lE(s,t,n)}class My{constructor(n){this.queryList=n,this.matches=null}clone(){return new My(this.queryList)}setDirty(){this.queryList.setDirty()}}class xy{constructor(n=[]){this.queries=n}createEmbeddedView(n){const s=n.queries;if(null!==s){const c=null!==n.contentQueries?n.contentQueries[0]:s.length,h=[];for(let _=0;_<c;_++){const T=s.getByIndex(_);h.push(this.queries[T.indexInDeclarationView].clone())}return new xy(h)}return null}insertView(n){this.dirtyQueriesWithMatches(n)}detachView(n){this.dirtyQueriesWithMatches(n)}dirtyQueriesWithMatches(n){for(let s=0;s<this.queries.length;s++)null!==vE(n,s).matches&&this.queries[s].setDirty()}}class dE{constructor(n,s,c=null){this.predicate=n,this.flags=s,this.read=c}}class Oy{constructor(n=[]){this.queries=n}elementStart(n,s){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(n,s)}elementEnd(n){for(let s=0;s<this.queries.length;s++)this.queries[s].elementEnd(n)}embeddedTView(n){let s=null;for(let c=0;c<this.length;c++){const h=null!==s?s.length:0,_=this.getByIndex(c).embeddedTView(n,h);_&&(_.indexInDeclarationView=c,null!==s?s.push(_):s=[_])}return null!==s?new Oy(s):null}template(n,s){for(let c=0;c<this.queries.length;c++)this.queries[c].template(n,s)}getByIndex(n){return this.queries[n]}get length(){return this.queries.length}track(n){this.queries.push(n)}}class Ry{constructor(n,s=-1){this.metadata=n,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=s}elementStart(n,s){this.isApplyingToNode(s)&&this.matchTNode(n,s)}elementEnd(n){this._declarationNodeIndex===n.index&&(this._appliesToNextNode=!1)}template(n,s){this.elementStart(n,s)}embeddedTView(n,s){return this.isApplyingToNode(n)?(this.crossesNgTemplate=!0,this.addMatch(-n.index,s),new Ry(this.metadata)):null}isApplyingToNode(n){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const s=this._declarationNodeIndex;let c=n.parent;for(;null!==c&&8&c.type&&c.index!==s;)c=c.parent;return s===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(n,s){const c=this.metadata.predicate;if(Array.isArray(c))for(let h=0;h<c.length;h++){const _=c[h];this.matchTNodeWithReadOption(n,s,K0(s,_)),this.matchTNodeWithReadOption(n,s,ei(s,n,_,!1,!1))}else c===Wg?4&s.type&&this.matchTNodeWithReadOption(n,s,-1):this.matchTNodeWithReadOption(n,s,ei(s,n,c,!1,!1))}matchTNodeWithReadOption(n,s,c){if(null!==c){const h=this.metadata.read;if(null!==h)if(h===jg||h===u_||h===Wg&&4&s.type)this.addMatch(s.index,-2);else{const _=ei(s,n,h,!1,!1);null!==_&&this.addMatch(s.index,_)}else this.addMatch(s.index,c)}}addMatch(n,s){null===this.matches?this.matches=[n,s]:this.matches.push(n,s)}}function K0(t,n){const s=t.localNames;if(null!==s)for(let c=0;c<s.length;c+=2)if(s[c]===n)return s[c+1];return null}function Z0(t,n,s,c){return-1===s?function(t,n){return 11&t.type?Sp(t,n):4&t.type?c_(t,n):null}(n,t):-2===s?function(t,n,s){return s===jg?Sp(n,t):s===Wg?c_(n,t):s===u_?uE(n,t):void 0}(t,n,c):ds(t,t[1],s,n)}function hE(t,n,s,c){const h=n[19].queries[c];if(null===h.matches){const _=t.data,T=s.matches,P=[];for(let U=0;U<T.length;U+=2){const te=T[U];P.push(te<0?null:Z0(n,_[te],T[U+1],s.metadata.read))}h.matches=P}return h.matches}function Py(t,n,s,c){const h=t.queries.getByIndex(s),_=h.matches;if(null!==_){const T=hE(t,n,h,s);for(let P=0;P<_.length;P+=2){const U=_[P];if(U>0)c.push(T[P/2]);else{const te=_[P+1],fe=n[-U];for(let Ne=10;Ne<fe.length;Ne++){const ct=fe[Ne];ct[17]===ct[3]&&Py(ct[1],ct,te,c)}if(null!==fe[9]){const Ne=fe[9];for(let ct=0;ct<Ne.length;ct++){const Dt=Ne[ct];Py(Dt[1],Dt,te,c)}}}}}return c}function fE(t){const n=en(),s=Ir(),c=Bs();Li(c+1);const h=vE(s,c);if(t.dirty&&Gn(n)===(2==(2&h.metadata.flags))){if(null===h.matches)t.reset([]);else{const _=h.crossesNgTemplate?Py(s,n,c,[]):hE(s,n,h,c);t.reset(_,f0),t.notifyOnChanges()}return!0}return!1}function pE(t,n,s){const c=Ir();c.firstCreatePass&&(yE(c,new dE(t,n,s),-1),2==(2&n)&&(c.staticViewQueries=!0)),_E(c,en(),n)}function gE(t,n,s,c){const h=Ir();if(h.firstCreatePass){const _=w();yE(h,new dE(n,s,c),_.index),function(t,n){const s=t.contentQueries||(t.contentQueries=[]);n!==(s.length?s[s.length-1]:-1)&&s.push(t.queries.length-1,n)}(h,t),2==(2&s)&&(h.staticContentQueries=!0)}_E(h,en(),s)}function mE(){return t=en(),n=Bs(),t[19].queries[n].queryList;var t,n}function _E(t,n,s){const c=new l_(4==(4&s));Gd(t,n,c,c.destroy),null===n[19]&&(n[19]=new xy),n[19].queries.push(new My(c))}function yE(t,n,s){null===t.queries&&(t.queries=new Oy),t.queries.track(new Ry(n,s))}function vE(t,n){return t.queries.getByIndex(n)}function EE(t,n){return c_(t,n)}function f_(...t){}const Vy=new jr("Application Initializer");let Op=(()=>{class t{constructor(s){this.appInits=s,this.resolve=f_,this.reject=f_,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,h)=>{this.resolve=c,this.reject=h})}runInitializers(){if(this.initialized)return;const s=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const _=this.appInits[h]();if(Eg(_))s.push(_);else if(Am(_)){const T=new Promise((P,U)=>{_.subscribe({complete:P,error:U})});s.push(T)}}Promise.all(s).then(()=>{c()}).catch(h=>{this.reject(h)}),0===s.length&&c(),this.initialized=!0}}return t.\u0275fac=function(s){return new(s||t)(Ar(Vy,8))},t.\u0275prov=Ct({token:t,factory:t.\u0275fac}),t})();const LE=new jr("AppId"),mw={provide:LE,useFactory:function(){return`${Uy()}${Uy()}${Uy()}`},deps:[]};function Uy(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const BE=new jr("Platform Initializer"),VE=new jr("Platform ID"),UE=new jr("appBootstrapListener");let jE=(()=>{class t{log(s){console.log(s)}warn(s){console.warn(s)}}return t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=Ct({token:t,factory:t.\u0275fac}),t})();const p_=new jr("LocaleId"),HE=new jr("DefaultCurrencyCode");class _w{constructor(n,s){this.ngModuleFactory=n,this.componentFactories=s}}let jy=(()=>{class t{compileModuleSync(s){return new Ty(s)}compileModuleAsync(s){return Promise.resolve(this.compileModuleSync(s))}compileModuleAndAllComponentsSync(s){const c=this.compileModuleSync(s),_=fs(fr(s).declarations).reduce((T,P)=>{const U=St(P);return U&&T.push(new Dy(U)),T},[]);return new _w(c,_)}compileModuleAndAllComponentsAsync(s){return Promise.resolve(this.compileModuleAndAllComponentsSync(s))}clearCache(){}clearCacheFor(s){}getModuleId(s){}}return t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=Ct({token:t,factory:t.\u0275fac}),t})();const vw=(()=>Promise.resolve(0))();function Hy(t){"undefined"==typeof Zone?vw.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class hc{constructor({enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:s=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new hd(!1),this.onMicrotaskEmpty=new hd(!1),this.onStable=new hd(!1),this.onError=new hd(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const h=this;h._nesting=0,h._outer=h._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!c&&s,h.shouldCoalesceRunChangeDetection=c,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function(){let t=fn.requestAnimationFrame,n=fn.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&n){const s=t[Zone.__symbol__("OriginalDelegate")];s&&(t=s);const c=n[Zone.__symbol__("OriginalDelegate")];c&&(n=c)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:n}}().nativeRequestAnimationFrame,function(t){const n=()=>{!function(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(fn,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,$y(t),t.isCheckStableRunning=!0,Gy(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),$y(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(s,c,h,_,T,P)=>{try{return GE(t),s.invokeTask(h,_,T,P)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===_.type||t.shouldCoalesceRunChangeDetection)&&n(),$E(t)}},onInvoke:(s,c,h,_,T,P,U)=>{try{return GE(t),s.invoke(h,_,T,P,U)}finally{t.shouldCoalesceRunChangeDetection&&n(),$E(t)}},onHasTask:(s,c,h,_)=>{s.hasTask(h,_),c===h&&("microTask"==_.change?(t._hasPendingMicrotasks=_.microTask,$y(t),Gy(t)):"macroTask"==_.change&&(t.hasPendingMacrotasks=_.macroTask))},onHandleError:(s,c,h,_)=>(s.handleError(h,_),t.runOutsideAngular(()=>t.onError.emit(_)),!1)})}(h)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!hc.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(hc.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(n,s,c){return this._inner.run(n,s,c)}runTask(n,s,c,h){const _=this._inner,T=_.scheduleEventTask("NgZoneEvent: "+h,n,bw,f_,f_);try{return _.runTask(T,s,c)}finally{_.cancelTask(T)}}runGuarded(n,s,c){return this._inner.runGuarded(n,s,c)}runOutsideAngular(n){return this._outer.run(n)}}const bw={};function Gy(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function $y(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function GE(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function $E(t){t._nesting--,Gy(t)}class Iw{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new hd,this.onMicrotaskEmpty=new hd,this.onStable=new hd,this.onError=new hd}run(n,s,c){return n.apply(s,c)}runGuarded(n,s,c){return n.apply(s,c)}runOutsideAngular(n){return n()}runTask(n,s,c,h){return n.apply(s,c)}}let WE=(()=>{class t{constructor(s){this._ngZone=s,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),s.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{hc.assertNotInAngularZone(),Hy(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Hy(()=>{for(;0!==this._callbacks.length;){let s=this._callbacks.pop();clearTimeout(s.timeoutId),s.doneCb(this._didWork)}this._didWork=!1});else{let s=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(s)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(s=>({source:s.source,creationLocation:s.creationLocation,data:s.data})):[]}addCallback(s,c,h){let _=-1;c&&c>0&&(_=setTimeout(()=>{this._callbacks=this._callbacks.filter(T=>T.timeoutId!==_),s(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:s,timeoutId:_,updateCb:h})}whenStable(s,c,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(s,c,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(s,c,h){return[]}}return t.\u0275fac=function(s){return new(s||t)(Ar(hc))},t.\u0275prov=Ct({token:t,factory:t.\u0275fac}),t})(),zE=(()=>{class t{constructor(){this._applications=new Map,Wy.addToWindow(this)}registerApplication(s,c){this._applications.set(s,c)}unregisterApplication(s){this._applications.delete(s)}unregisterAllApplications(){this._applications.clear()}getTestability(s){return this._applications.get(s)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(s,c=!0){return Wy.findTestabilityInTree(this,s,c)}}return t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=Ct({token:t,factory:t.\u0275fac}),t})();class Dw{addToWindow(n){}findTestabilityInTree(n,s,c){return null}}function Tw(t){Wy=t}let ku,Wy=new Dw;const KE=new jr("AllowMultipleToken");class xw{constructor(n,s){this.name=n,this.token=s}}function YE(t,n,s=[]){const c=`Platform: ${n}`,h=new jr(c);return(_=[])=>{let T=ZE();if(!T||T.injector.get(KE,!1))if(t)t(s.concat(_).concat({provide:h,useValue:!0}));else{const P=s.concat(_).concat({provide:h,useValue:!0},{provide:Zp,useValue:"platform"});!function(t){if(ku&&!ku.destroyed&&!ku.injector.get(KE,!1))throw new xe("400","");ku=t.get(qE);const n=t.get(BE,null);n&&n.forEach(s=>s())}(Ya.create({providers:P,name:c}))}return function(t){const n=ZE();if(!n)throw new xe("401","");return n}()}}function ZE(){return ku&&!ku.destroyed?ku:null}let qE=(()=>{class t{constructor(s){this._injector=s,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(s,c){const P=function(t,n){let s;return s="noop"===t?new Iw:("zone.js"===t?void 0:t)||new hc({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==n?void 0:n.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==n?void 0:n.ngZoneRunCoalescing)}),s}(c?c.ngZone:void 0,{ngZoneEventCoalescing:c&&c.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:c&&c.ngZoneRunCoalescing||!1}),U=[{provide:hc,useValue:P}];return P.run(()=>{const te=Ya.create({providers:U,parent:this.injector,name:s.moduleType.name}),fe=s.create(te),Ne=fe.injector.get(Jl,null);if(!Ne)throw new xe("402","");return P.runOutsideAngular(()=>{const ct=P.onError.subscribe({next:Dt=>{Ne.handleError(Dt)}});fe.onDestroy(()=>{zy(this._modules,fe),ct.unsubscribe()})}),function(t,n,s){try{const c=s();return Eg(c)?c.catch(h=>{throw n.runOutsideAngular(()=>t.handleError(h)),h}):c}catch(c){throw n.runOutsideAngular(()=>t.handleError(c)),c}}(Ne,P,()=>{const ct=fe.injector.get(Op);return ct.runInitializers(),ct.donePromise.then(()=>(function(t){dn(t,"Expected localeId to be defined"),"string"==typeof t&&(gv=t.toLowerCase().replace(/_/g,"-"))}(fe.injector.get(p_,Bh)||Bh),this._moduleDoBootstrap(fe),fe))})})}bootstrapModule(s,c=[]){const h=QE({},c);return function(t,n,s){const c=new Ty(s);return Promise.resolve(c)}(0,0,s).then(_=>this.bootstrapModuleFactory(_,h))}_moduleDoBootstrap(s){const c=s.injector.get(Kg);if(s._bootstrapComponents.length>0)s._bootstrapComponents.forEach(h=>c.bootstrap(h));else{if(!s.instance.ngDoBootstrap)throw new xe("403","");s.instance.ngDoBootstrap(c)}this._modules.push(s)}onDestroy(s){this._destroyListeners.push(s)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new xe("404","");this._modules.slice().forEach(s=>s.destroy()),this._destroyListeners.forEach(s=>s()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(s){return new(s||t)(Ar(Ya))},t.\u0275prov=Ct({token:t,factory:t.\u0275fac}),t})();function QE(t,n){return Array.isArray(n)?n.reduce(QE,t):Object.assign(Object.assign({},t),n)}let Kg=(()=>{class t{constructor(s,c,h,_,T){this._zone=s,this._injector=c,this._exceptionHandler=h,this._componentFactoryResolver=_,this._initStatus=T,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const P=new B.y(te=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{te.next(this._stable),te.complete()})}),U=new B.y(te=>{let fe;this._zone.runOutsideAngular(()=>{fe=this._zone.onStable.subscribe(()=>{hc.assertNotInAngularZone(),Hy(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,te.next(!0))})})});const Ne=this._zone.onUnstable.subscribe(()=>{hc.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{te.next(!1)}))});return()=>{fe.unsubscribe(),Ne.unsubscribe()}});this.isStable=(0,ne.T)(P,U.pipe((0,he.B)()))}bootstrap(s,c){if(!this._initStatus.done)throw new xe("405","");let h;h=s instanceof jv?s:this._componentFactoryResolver.resolveComponentFactory(s),this.componentTypes.push(h.componentType);const _=function(t){return t.isBoundToModule}(h)?void 0:this._injector.get(Ap),P=h.create(Ya.NULL,[],c||h.selector,_),U=P.location.nativeElement,te=P.injector.get(WE,null),fe=te&&P.injector.get(zE);return te&&fe&&fe.registerApplication(U,te),P.onDestroy(()=>{this.detachView(P.hostView),zy(this.components,P),fe&&fe.unregisterApplication(U)}),this._loadComponent(P),P}tick(){if(this._runningTick)throw new xe("101","");try{this._runningTick=!0;for(let s of this._views)s.detectChanges()}catch(s){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(s))}finally{this._runningTick=!1}}attachView(s){const c=s;this._views.push(c),c.attachToAppRef(this)}detachView(s){const c=s;zy(this._views,c),c.detachFromAppRef()}_loadComponent(s){this.attachView(s.hostView),this.tick(),this.components.push(s),this._injector.get(UE,[]).concat(this._bootstrapListeners).forEach(h=>h(s))}ngOnDestroy(){this._views.slice().forEach(s=>s.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(s){return new(s||t)(Ar(hc),Ar(Ya),Ar(Jl),Ar(Ug),Ar(Op))},t.\u0275prov=Ct({token:t,factory:t.\u0275fac}),t})();function zy(t,n){const s=t.indexOf(n);s>-1&&t.splice(s,1)}let XE=!0,eb=!1;function Fw(){return eb=!0,XE}function Lw(){if(eb)throw new Error("Cannot enable prod mode after platform setup.");XE=!1}let Bw=(()=>{class t{}return t.__NG_ELEMENT_ID__=Vw,t})();function Vw(t){return function(t,n,s){if(Ri(t)&&!s){const c=Pn(t.index,n);return new Hg(c,c)}return 47&t.type?new Hg(n[16],n):null}(w(),en(),16==(16&t))}class ob{constructor(){}supports(n){return Oh(n)}create(n){return new zw(n)}}const Ww=(t,n)=>n;class zw{constructor(n){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=n||Ww}forEachItem(n){let s;for(s=this._itHead;null!==s;s=s._next)n(s)}forEachOperation(n){let s=this._itHead,c=this._removalsHead,h=0,_=null;for(;s||c;){const T=!c||s&&s.currentIndex<lb(c,h,_)?s:c,P=lb(T,h,_),U=T.currentIndex;if(T===c)h--,c=c._nextRemoved;else if(s=s._next,null==T.previousIndex)h++;else{_||(_=[]);const te=P-h,fe=U-h;if(te!=fe){for(let ct=0;ct<te;ct++){const Dt=ct<_.length?_[ct]:_[ct]=0,Yt=Dt+ct;fe<=Yt&&Yt<te&&(_[ct]=Dt+1)}_[T.previousIndex]=fe-te}}P!==U&&n(T,P,U)}}forEachPreviousItem(n){let s;for(s=this._previousItHead;null!==s;s=s._nextPrevious)n(s)}forEachAddedItem(n){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)n(s)}forEachMovedItem(n){let s;for(s=this._movesHead;null!==s;s=s._nextMoved)n(s)}forEachRemovedItem(n){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)n(s)}forEachIdentityChange(n){let s;for(s=this._identityChangesHead;null!==s;s=s._nextIdentityChange)n(s)}diff(n){if(null==n&&(n=[]),!Oh(n))throw new Error(`Error trying to diff '${X(n)}'. Only arrays and iterables are allowed`);return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let h,_,T,s=this._itHead,c=!1;if(Array.isArray(n)){this.length=n.length;for(let P=0;P<this.length;P++)_=n[P],T=this._trackByFn(P,_),null!==s&&Object.is(s.trackById,T)?(c&&(s=this._verifyReinsertion(s,_,T,P)),Object.is(s.item,_)||this._addIdentityChange(s,_)):(s=this._mismatch(s,_,T,P),c=!0),s=s._next}else h=0,function(t,n){if(Array.isArray(t))for(let s=0;s<t.length;s++)n(t[s]);else{const s=t[Kd()]();let c;for(;!(c=s.next()).done;)n(c.value)}}(n,P=>{T=this._trackByFn(h,P),null!==s&&Object.is(s.trackById,T)?(c&&(s=this._verifyReinsertion(s,P,T,h)),Object.is(s.item,P)||this._addIdentityChange(s,P)):(s=this._mismatch(s,P,T,h),c=!0),s=s._next,h++}),this.length=h;return this._truncate(s),this.collection=n,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let n;for(n=this._previousItHead=this._itHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._additionsHead;null!==n;n=n._nextAdded)n.previousIndex=n.currentIndex;for(this._additionsHead=this._additionsTail=null,n=this._movesHead;null!==n;n=n._nextMoved)n.previousIndex=n.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(n,s,c,h){let _;return null===n?_=this._itTail:(_=n._prev,this._remove(n)),null!==(n=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(n.item,s)||this._addIdentityChange(n,s),this._reinsertAfter(n,_,h)):null!==(n=null===this._linkedRecords?null:this._linkedRecords.get(c,h))?(Object.is(n.item,s)||this._addIdentityChange(n,s),this._moveAfter(n,_,h)):n=this._addAfter(new Kw(s,c),_,h),n}_verifyReinsertion(n,s,c,h){let _=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==_?n=this._reinsertAfter(_,n._prev,h):n.currentIndex!=h&&(n.currentIndex=h,this._addToMoves(n,h)),n}_truncate(n){for(;null!==n;){const s=n._next;this._addToRemovals(this._unlink(n)),n=s}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(n,s,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(n);const h=n._prevRemoved,_=n._nextRemoved;return null===h?this._removalsHead=_:h._nextRemoved=_,null===_?this._removalsTail=h:_._prevRemoved=h,this._insertAfter(n,s,c),this._addToMoves(n,c),n}_moveAfter(n,s,c){return this._unlink(n),this._insertAfter(n,s,c),this._addToMoves(n,c),n}_addAfter(n,s,c){return this._insertAfter(n,s,c),this._additionsTail=null===this._additionsTail?this._additionsHead=n:this._additionsTail._nextAdded=n,n}_insertAfter(n,s,c){const h=null===s?this._itHead:s._next;return n._next=h,n._prev=s,null===h?this._itTail=n:h._prev=n,null===s?this._itHead=n:s._next=n,null===this._linkedRecords&&(this._linkedRecords=new ab),this._linkedRecords.put(n),n.currentIndex=c,n}_remove(n){return this._addToRemovals(this._unlink(n))}_unlink(n){null!==this._linkedRecords&&this._linkedRecords.remove(n);const s=n._prev,c=n._next;return null===s?this._itHead=c:s._next=c,null===c?this._itTail=s:c._prev=s,n}_addToMoves(n,s){return n.previousIndex===s||(this._movesTail=null===this._movesTail?this._movesHead=n:this._movesTail._nextMoved=n),n}_addToRemovals(n){return null===this._unlinkedRecords&&(this._unlinkedRecords=new ab),this._unlinkedRecords.put(n),n.currentIndex=null,n._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=n,n._prevRemoved=null):(n._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=n),n}_addIdentityChange(n,s){return n.item=s,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=n:this._identityChangesTail._nextIdentityChange=n,n}}class Kw{constructor(n,s){this.item=n,this.trackById=s,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Yw{constructor(){this._head=null,this._tail=null}add(n){null===this._head?(this._head=this._tail=n,n._nextDup=null,n._prevDup=null):(this._tail._nextDup=n,n._prevDup=this._tail,n._nextDup=null,this._tail=n)}get(n,s){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===s||s<=c.currentIndex)&&Object.is(c.trackById,n))return c;return null}remove(n){const s=n._prevDup,c=n._nextDup;return null===s?this._head=c:s._nextDup=c,null===c?this._tail=s:c._prevDup=s,null===this._head}}class ab{constructor(){this.map=new Map}put(n){const s=n.trackById;let c=this.map.get(s);c||(c=new Yw,this.map.set(s,c)),c.add(n)}get(n,s){const h=this.map.get(n);return h?h.get(n,s):null}remove(n){const s=n.trackById;return this.map.get(s).remove(n)&&this.map.delete(s),n}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function lb(t,n,s){const c=t.previousIndex;if(null===c)return c;let h=0;return s&&c<s.length&&(h=s[c]),c+n+h}class cb{constructor(){}supports(n){return n instanceof Map||lg(n)}create(){return new Zw}}class Zw{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(n){let s;for(s=this._mapHead;null!==s;s=s._next)n(s)}forEachPreviousItem(n){let s;for(s=this._previousMapHead;null!==s;s=s._nextPrevious)n(s)}forEachChangedItem(n){let s;for(s=this._changesHead;null!==s;s=s._nextChanged)n(s)}forEachAddedItem(n){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)n(s)}forEachRemovedItem(n){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)n(s)}diff(n){if(n){if(!(n instanceof Map||lg(n)))throw new Error(`Error trying to diff '${X(n)}'. Only maps and objects are allowed`)}else n=new Map;return this.check(n)?this:null}onDestroy(){}check(n){this._reset();let s=this._mapHead;if(this._appendAfter=null,this._forEach(n,(c,h)=>{if(s&&s.key===h)this._maybeAddToChanges(s,c),this._appendAfter=s,s=s._next;else{const _=this._getOrCreateRecordForKey(h,c);s=this._insertBeforeOrAppend(s,_)}}),s){s._prev&&(s._prev._next=null),this._removalsHead=s;for(let c=s;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(n,s){if(n){const c=n._prev;return s._next=n,s._prev=c,n._prev=s,c&&(c._next=s),n===this._mapHead&&(this._mapHead=s),this._appendAfter=n,n}return this._appendAfter?(this._appendAfter._next=s,s._prev=this._appendAfter):this._mapHead=s,this._appendAfter=s,null}_getOrCreateRecordForKey(n,s){if(this._records.has(n)){const h=this._records.get(n);this._maybeAddToChanges(h,s);const _=h._prev,T=h._next;return _&&(_._next=T),T&&(T._prev=_),h._next=null,h._prev=null,h}const c=new qw(n);return this._records.set(n,c),c.currentValue=s,this._addToAdditions(c),c}_reset(){if(this.isDirty){let n;for(this._previousMapHead=this._mapHead,n=this._previousMapHead;null!==n;n=n._next)n._nextPrevious=n._next;for(n=this._changesHead;null!==n;n=n._nextChanged)n.previousValue=n.currentValue;for(n=this._additionsHead;null!=n;n=n._nextAdded)n.previousValue=n.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(n,s){Object.is(s,n.currentValue)||(n.previousValue=n.currentValue,n.currentValue=s,this._addToChanges(n))}_addToAdditions(n){null===this._additionsHead?this._additionsHead=this._additionsTail=n:(this._additionsTail._nextAdded=n,this._additionsTail=n)}_addToChanges(n){null===this._changesHead?this._changesHead=this._changesTail=n:(this._changesTail._nextChanged=n,this._changesTail=n)}_forEach(n,s){n instanceof Map?n.forEach(s):Object.keys(n).forEach(c=>s(n[c],c))}}class qw{constructor(n){this.key=n,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function ub(){return new m_([new ob])}let m_=(()=>{class t{constructor(s){this.factories=s}static create(s,c){if(null!=c){const h=c.factories.slice();s=s.concat(h)}return new t(s)}static extend(s){return{provide:t,useFactory:c=>t.create(s,c||ub()),deps:[[t,new ca,new sa]]}}find(s){const c=this.factories.find(h=>h.supports(s));if(null!=c)return c;throw new Error(`Cannot find a differ supporting object '${s}' of type '${function(t){return t.name||typeof t}(s)}'`)}}return t.\u0275prov=Ct({token:t,providedIn:"root",factory:ub}),t})();function db(){return new __([new cb])}let __=(()=>{class t{constructor(s){this.factories=s}static create(s,c){if(c){const h=c.factories.slice();s=s.concat(h)}return new t(s)}static extend(s){return{provide:t,useFactory:c=>t.create(s,c||db()),deps:[[t,new ca,new sa]]}}find(s){const c=this.factories.find(h=>h.supports(s));if(c)return c;throw new Error(`Cannot find a differ supporting object '${s}'`)}}return t.\u0275prov=Ct({token:t,providedIn:"root",factory:db}),t})();const Jw=[new cb],eC=new m_([new ob]),tC=new __(Jw),nC=YE(null,"core",[{provide:VE,useValue:"unknown"},{provide:qE,deps:[Ya]},{provide:zE,deps:[]},{provide:jE,deps:[]}]),aC=[{provide:Kg,useClass:Kg,deps:[hc,Ya,Jl,Ug,Op]},{provide:E0,deps:[hc],useFactory:function(t){let n=[];return t.onStable.subscribe(()=>{for(;n.length;)n.pop()()}),function(s){n.push(s)}}},{provide:Op,useClass:Op,deps:[[new sa,Vy]]},{provide:jy,useClass:jy,deps:[]},mw,{provide:m_,useFactory:function(){return eC},deps:[]},{provide:__,useFactory:function(){return tC},deps:[]},{provide:p_,useFactory:function(t){return t||"undefined"!=typeof $localize&&$localize.locale||Bh},deps:[[new Ns(p_),new sa,new ca]]},{provide:HE,useValue:"USD"}];let cC=(()=>{class t{constructor(s){}}return t.\u0275fac=function(s){return new(s||t)(Ar(Kg))},t.\u0275mod=bt({type:t}),t.\u0275inj=mt({providers:aC}),t})()},3075:($t,$e,x)=>{"use strict";x.d($e,{Zs:()=>Zi,Fj:()=>Ve,NI:()=>Mr,u:()=>lt,cw:()=>or,sg:()=>Pi,u5:()=>Fi,wO:()=>vi,Cf:()=>ee,JU:()=>X,a5:()=>En,JJ:()=>gr,JL:()=>Qt,F:()=>Kn,On:()=>li,UX:()=>_r,Q7:()=>Yi,_Y:()=>Di});var g=x(5e3),E=x(9808),B=x(5254),ne=x(567),he=x(4850);let q=(()=>{class S{constructor(C,H){this._renderer=C,this._elementRef=H,this.onChange=je=>{},this.onTouched=()=>{}}setProperty(C,H){this._renderer.setProperty(this._elementRef.nativeElement,C,H)}registerOnTouched(C){this.onTouched=C}registerOnChange(C){this.onChange=C}setDisabledState(C){this.setProperty("disabled",C)}}return S.\u0275fac=function(C){return new(C||S)(g.Y36(g.Qsj),g.Y36(g.SBq))},S.\u0275dir=g.lG2({type:S}),S})(),se=(()=>{class S extends q{}return S.\u0275fac=function(){let y;return function(H){return(y||(y=g.n5z(S)))(H||S)}}(),S.\u0275dir=g.lG2({type:S,features:[g.qOj]}),S})();const X=new g.OlP("NgValueAccessor"),oe={provide:X,useExisting:(0,g.Gpc)(()=>Ve),multi:!0},Me=new g.OlP("CompositionEventMode");let Ve=(()=>{class S extends q{constructor(C,H,je){super(C,H),this._compositionMode=je,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const S=(0,E.q)()?(0,E.q)().getUserAgent():"";return/android (\d+)/.test(S.toLowerCase())}())}writeValue(C){this.setProperty("value",null==C?"":C)}_handleInput(C){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(C)}_compositionStart(){this._composing=!0}_compositionEnd(C){this._composing=!1,this._compositionMode&&this.onChange(C)}}return S.\u0275fac=function(C){return new(C||S)(g.Y36(g.Qsj),g.Y36(g.SBq),g.Y36(Me,8))},S.\u0275dir=g.lG2({type:S,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(C,H){1&C&&g.NdJ("input",function(wt){return H._handleInput(wt.target.value)})("blur",function(){return H.onTouched()})("compositionstart",function(){return H._compositionStart()})("compositionend",function(wt){return H._compositionEnd(wt.target.value)})},features:[g._Bn([oe]),g.qOj]}),S})();function xe(S){return null==S||0===S.length}const ee=new g.OlP("NgValidators"),Te=new g.OlP("NgAsyncValidators");function Zt(S){return null}function jt(S){return null!=S}function tn(S){const y=(0,g.QGY)(S)?(0,B.D)(S):S;return(0,g.CqO)(y),y}function qt(S){let y={};return S.forEach(C=>{y=null!=C?Object.assign(Object.assign({},y),C):y}),0===Object.keys(y).length?null:y}function wr(S,y){return y.map(C=>C(S))}function Nn(S){return S.map(y=>function(S){return!S.validate}(y)?y:C=>y.validate(C))}function dn(S){return null!=S?function(S){if(!S)return null;const y=S.filter(jt);return 0==y.length?null:function(C){return qt(wr(C,y))}}(Nn(S)):null}function kn(S){return null!=S?function(S){if(!S)return null;const y=S.filter(jt);return 0==y.length?null:function(C){const H=wr(C,y).map(tn);return(0,ne.D)(H).pipe((0,he.U)(qt))}}(Nn(S)):null}function gt(S,y){return null===S?[y]:Array.isArray(S)?[...S,y]:[S,y]}function Ye(S){return S._rawValidators}function Ct(S){return S._rawAsyncValidators}function Ee(S){return S?Array.isArray(S)?S:[S]:[]}function mt(S,y){return Array.isArray(S)?S.includes(y):S===y}function Nt(S,y){const C=Ee(y);return Ee(S).forEach(je=>{mt(C,je)||C.push(je)}),C}function Mt(S,y){return Ee(y).filter(C=>!mt(S,C))}class rn{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(y){this._rawValidators=y||[],this._composedValidatorFn=dn(this._rawValidators)}_setAsyncValidators(y){this._rawAsyncValidators=y||[],this._composedAsyncValidatorFn=kn(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(y){this._onDestroyCallbacks.push(y)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(y=>y()),this._onDestroyCallbacks=[]}reset(y){this.control&&this.control.reset(y)}hasError(y,C){return!!this.control&&this.control.hasError(y,C)}getError(y,C){return this.control?this.control.getError(y,C):null}}class En extends rn{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class bn extends rn{get formDirective(){return null}get path(){return null}}class mn{constructor(y){this._cd=y}is(y){var C,H,je;return"submitted"===y?!!(null===(C=this._cd)||void 0===C?void 0:C.submitted):!!(null===(je=null===(H=this._cd)||void 0===H?void 0:H.control)||void 0===je?void 0:je[y])}}let gr=(()=>{class S extends mn{constructor(C){super(C)}}return S.\u0275fac=function(C){return new(C||S)(g.Y36(En,2))},S.\u0275dir=g.lG2({type:S,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(C,H){2&C&&g.ekj("ng-untouched",H.is("untouched"))("ng-touched",H.is("touched"))("ng-pristine",H.is("pristine"))("ng-dirty",H.is("dirty"))("ng-valid",H.is("valid"))("ng-invalid",H.is("invalid"))("ng-pending",H.is("pending"))},features:[g.qOj]}),S})(),Qt=(()=>{class S extends mn{constructor(C){super(C)}}return S.\u0275fac=function(C){return new(C||S)(g.Y36(bn,10))},S.\u0275dir=g.lG2({type:S,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(C,H){2&C&&g.ekj("ng-untouched",H.is("untouched"))("ng-touched",H.is("touched"))("ng-pristine",H.is("pristine"))("ng-dirty",H.is("dirty"))("ng-valid",H.is("valid"))("ng-invalid",H.is("invalid"))("ng-pending",H.is("pending"))("ng-submitted",H.is("submitted"))},features:[g.qOj]}),S})();function zt(S,y){return[...y.path,S]}function sn(S,y){Fe(S,y),y.valueAccessor.writeValue(S.value),function(S,y){y.valueAccessor.registerOnChange(C=>{S._pendingValue=C,S._pendingChange=!0,S._pendingDirty=!0,"change"===S.updateOn&&pt(S,y)})}(S,y),function(S,y){const C=(H,je)=>{y.valueAccessor.writeValue(H),je&&y.viewToModelUpdate(H)};S.registerOnChange(C),y._registerOnDestroy(()=>{S._unregisterOnChange(C)})}(S,y),function(S,y){y.valueAccessor.registerOnTouched(()=>{S._pendingTouched=!0,"blur"===S.updateOn&&S._pendingChange&&pt(S,y),"submit"!==S.updateOn&&S.markAsTouched()})}(S,y),function(S,y){if(y.valueAccessor.setDisabledState){const C=H=>{y.valueAccessor.setDisabledState(H)};S.registerOnDisabledChange(C),y._registerOnDestroy(()=>{S._unregisterOnDisabledChange(C)})}}(S,y)}function fn(S,y,C=!0){const H=()=>{};y.valueAccessor&&(y.valueAccessor.registerOnChange(H),y.valueAccessor.registerOnTouched(H)),Le(S,y),S&&(y._invokeOnDestroyCallbacks(),S._registerOnCollectionChange(()=>{}))}function Jn(S,y){S.forEach(C=>{C.registerOnValidatorChange&&C.registerOnValidatorChange(y)})}function Fe(S,y){const C=Ye(S);null!==y.validator?S.setValidators(gt(C,y.validator)):"function"==typeof C&&S.setValidators([C]);const H=Ct(S);null!==y.asyncValidator?S.setAsyncValidators(gt(H,y.asyncValidator)):"function"==typeof H&&S.setAsyncValidators([H]);const je=()=>S.updateValueAndValidity();Jn(y._rawValidators,je),Jn(y._rawAsyncValidators,je)}function Le(S,y){let C=!1;if(null!==S){if(null!==y.validator){const je=Ye(S);if(Array.isArray(je)&&je.length>0){const wt=je.filter(hn=>hn!==y.validator);wt.length!==je.length&&(C=!0,S.setValidators(wt))}}if(null!==y.asyncValidator){const je=Ct(S);if(Array.isArray(je)&&je.length>0){const wt=je.filter(hn=>hn!==y.asyncValidator);wt.length!==je.length&&(C=!0,S.setAsyncValidators(wt))}}}const H=()=>{};return Jn(y._rawValidators,H),Jn(y._rawAsyncValidators,H),C}function pt(S,y){S._pendingDirty&&S.markAsDirty(),S.setValue(S._pendingValue,{emitModelToViewChange:!1}),y.viewToModelUpdate(S._pendingValue),S._pendingChange=!1}function In(S,y){Fe(S,y)}function ve(S,y){if(!S.hasOwnProperty("model"))return!1;const C=S.model;return!!C.isFirstChange()||!Object.is(y,C.currentValue)}function ye(S,y){S._syncPendingControls(),y.forEach(C=>{const H=C.control;"submit"===H.updateOn&&H._pendingChange&&(C.viewToModelUpdate(H._pendingValue),H._pendingChange=!1)})}function Ke(S,y){if(!y)return null;let C,H,je;return Array.isArray(y),y.forEach(wt=>{wt.constructor===Ve?C=wt:function(S){return Object.getPrototypeOf(S.constructor)===se}(wt)?H=wt:je=wt}),je||H||C||null}function bt(S,y){const C=S.indexOf(y);C>-1&&S.splice(C,1)}const Ue="VALID",Se="INVALID",ut="PENDING",St="DISABLED";function Wn(S){return(si(S)?S.validators:S)||null}function fr(S){return Array.isArray(S)?dn(S):S||null}function Zr(S,y){return(si(y)?y.asyncValidators:S)||null}function Sr(S){return Array.isArray(S)?kn(S):S||null}function si(S){return null!=S&&!Array.isArray(S)&&"object"==typeof S}class ws{constructor(y,C){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=y,this._rawAsyncValidators=C,this._composedValidatorFn=fr(this._rawValidators),this._composedAsyncValidatorFn=Sr(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(y){this._rawValidators=this._composedValidatorFn=y}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(y){this._rawAsyncValidators=this._composedAsyncValidatorFn=y}get parent(){return this._parent}get valid(){return this.status===Ue}get invalid(){return this.status===Se}get pending(){return this.status==ut}get disabled(){return this.status===St}get enabled(){return this.status!==St}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(y){this._rawValidators=y,this._composedValidatorFn=fr(y)}setAsyncValidators(y){this._rawAsyncValidators=y,this._composedAsyncValidatorFn=Sr(y)}addValidators(y){this.setValidators(Nt(y,this._rawValidators))}addAsyncValidators(y){this.setAsyncValidators(Nt(y,this._rawAsyncValidators))}removeValidators(y){this.setValidators(Mt(y,this._rawValidators))}removeAsyncValidators(y){this.setAsyncValidators(Mt(y,this._rawAsyncValidators))}hasValidator(y){return mt(this._rawValidators,y)}hasAsyncValidator(y){return mt(this._rawAsyncValidators,y)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(y={}){this.touched=!0,this._parent&&!y.onlySelf&&this._parent.markAsTouched(y)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(y=>y.markAllAsTouched())}markAsUntouched(y={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(C=>{C.markAsUntouched({onlySelf:!0})}),this._parent&&!y.onlySelf&&this._parent._updateTouched(y)}markAsDirty(y={}){this.pristine=!1,this._parent&&!y.onlySelf&&this._parent.markAsDirty(y)}markAsPristine(y={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(C=>{C.markAsPristine({onlySelf:!0})}),this._parent&&!y.onlySelf&&this._parent._updatePristine(y)}markAsPending(y={}){this.status=ut,!1!==y.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!y.onlySelf&&this._parent.markAsPending(y)}disable(y={}){const C=this._parentMarkedDirty(y.onlySelf);this.status=St,this.errors=null,this._forEachChild(H=>{H.disable(Object.assign(Object.assign({},y),{onlySelf:!0}))}),this._updateValue(),!1!==y.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},y),{skipPristineCheck:C})),this._onDisabledChange.forEach(H=>H(!0))}enable(y={}){const C=this._parentMarkedDirty(y.onlySelf);this.status=Ue,this._forEachChild(H=>{H.enable(Object.assign(Object.assign({},y),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:y.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},y),{skipPristineCheck:C})),this._onDisabledChange.forEach(H=>H(!1))}_updateAncestors(y){this._parent&&!y.onlySelf&&(this._parent.updateValueAndValidity(y),y.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(y){this._parent=y}updateValueAndValidity(y={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ue||this.status===ut)&&this._runAsyncValidator(y.emitEvent)),!1!==y.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!y.onlySelf&&this._parent.updateValueAndValidity(y)}_updateTreeValidity(y={emitEvent:!0}){this._forEachChild(C=>C._updateTreeValidity(y)),this.updateValueAndValidity({onlySelf:!0,emitEvent:y.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?St:Ue}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(y){if(this.asyncValidator){this.status=ut,this._hasOwnPendingAsyncValidator=!0;const C=tn(this.asyncValidator(this));this._asyncValidationSubscription=C.subscribe(H=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(H,{emitEvent:y})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(y,C={}){this.errors=y,this._updateControlsErrors(!1!==C.emitEvent)}get(y){return function(S,y,C){if(null==y||(Array.isArray(y)||(y=y.split(".")),Array.isArray(y)&&0===y.length))return null;let H=S;return y.forEach(je=>{H=H instanceof or?H.controls.hasOwnProperty(je)?H.controls[je]:null:H instanceof to&&H.at(je)||null}),H}(this,y)}getError(y,C){const H=C?this.get(C):this;return H&&H.errors?H.errors[y]:null}hasError(y,C){return!!this.getError(y,C)}get root(){let y=this;for(;y._parent;)y=y._parent;return y}_updateControlsErrors(y){this.status=this._calculateStatus(),y&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(y)}_initObservables(){this.valueChanges=new g.vpe,this.statusChanges=new g.vpe}_calculateStatus(){return this._allControlsDisabled()?St:this.errors?Se:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ut)?ut:this._anyControlsHaveStatus(Se)?Se:Ue}_anyControlsHaveStatus(y){return this._anyControls(C=>C.status===y)}_anyControlsDirty(){return this._anyControls(y=>y.dirty)}_anyControlsTouched(){return this._anyControls(y=>y.touched)}_updatePristine(y={}){this.pristine=!this._anyControlsDirty(),this._parent&&!y.onlySelf&&this._parent._updatePristine(y)}_updateTouched(y={}){this.touched=this._anyControlsTouched(),this._parent&&!y.onlySelf&&this._parent._updateTouched(y)}_isBoxedValue(y){return"object"==typeof y&&null!==y&&2===Object.keys(y).length&&"value"in y&&"disabled"in y}_registerOnCollectionChange(y){this._onCollectionChange=y}_setUpdateStrategy(y){si(y)&&null!=y.updateOn&&(this._updateOn=y.updateOn)}_parentMarkedDirty(y){return!y&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Mr extends ws{constructor(y=null,C,H){super(Wn(C),Zr(H,C)),this._onChange=[],this._applyFormState(y),this._setUpdateStrategy(C),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(y,C={}){this.value=this._pendingValue=y,this._onChange.length&&!1!==C.emitModelToViewChange&&this._onChange.forEach(H=>H(this.value,!1!==C.emitViewToModelChange)),this.updateValueAndValidity(C)}patchValue(y,C={}){this.setValue(y,C)}reset(y=null,C={}){this._applyFormState(y),this.markAsPristine(C),this.markAsUntouched(C),this.setValue(this.value,C),this._pendingChange=!1}_updateValue(){}_anyControls(y){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(y){this._onChange.push(y)}_unregisterOnChange(y){bt(this._onChange,y)}registerOnDisabledChange(y){this._onDisabledChange.push(y)}_unregisterOnDisabledChange(y){bt(this._onDisabledChange,y)}_forEachChild(y){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(y){this._isBoxedValue(y)?(this.value=this._pendingValue=y.value,y.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=y}}class or extends ws{constructor(y,C,H){super(Wn(C),Zr(H,C)),this.controls=y,this._initObservables(),this._setUpdateStrategy(C),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(y,C){return this.controls[y]?this.controls[y]:(this.controls[y]=C,C.setParent(this),C._registerOnCollectionChange(this._onCollectionChange),C)}addControl(y,C,H={}){this.registerControl(y,C),this.updateValueAndValidity({emitEvent:H.emitEvent}),this._onCollectionChange()}removeControl(y,C={}){this.controls[y]&&this.controls[y]._registerOnCollectionChange(()=>{}),delete this.controls[y],this.updateValueAndValidity({emitEvent:C.emitEvent}),this._onCollectionChange()}setControl(y,C,H={}){this.controls[y]&&this.controls[y]._registerOnCollectionChange(()=>{}),delete this.controls[y],C&&this.registerControl(y,C),this.updateValueAndValidity({emitEvent:H.emitEvent}),this._onCollectionChange()}contains(y){return this.controls.hasOwnProperty(y)&&this.controls[y].enabled}setValue(y,C={}){this._checkAllValuesPresent(y),Object.keys(y).forEach(H=>{this._throwIfControlMissing(H),this.controls[H].setValue(y[H],{onlySelf:!0,emitEvent:C.emitEvent})}),this.updateValueAndValidity(C)}patchValue(y,C={}){null!=y&&(Object.keys(y).forEach(H=>{this.controls[H]&&this.controls[H].patchValue(y[H],{onlySelf:!0,emitEvent:C.emitEvent})}),this.updateValueAndValidity(C))}reset(y={},C={}){this._forEachChild((H,je)=>{H.reset(y[je],{onlySelf:!0,emitEvent:C.emitEvent})}),this._updatePristine(C),this._updateTouched(C),this.updateValueAndValidity(C)}getRawValue(){return this._reduceChildren({},(y,C,H)=>(y[H]=C instanceof Mr?C.value:C.getRawValue(),y))}_syncPendingControls(){let y=this._reduceChildren(!1,(C,H)=>!!H._syncPendingControls()||C);return y&&this.updateValueAndValidity({onlySelf:!0}),y}_throwIfControlMissing(y){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[y])throw new Error(`Cannot find form control with name: ${y}.`)}_forEachChild(y){Object.keys(this.controls).forEach(C=>{const H=this.controls[C];H&&y(H,C)})}_setUpControls(){this._forEachChild(y=>{y.setParent(this),y._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(y){for(const C of Object.keys(this.controls)){const H=this.controls[C];if(this.contains(C)&&y(H))return!0}return!1}_reduceValue(){return this._reduceChildren({},(y,C,H)=>((C.enabled||this.disabled)&&(y[H]=C.value),y))}_reduceChildren(y,C){let H=y;return this._forEachChild((je,wt)=>{H=C(H,je,wt)}),H}_allControlsDisabled(){for(const y of Object.keys(this.controls))if(this.controls[y].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(y){this._forEachChild((C,H)=>{if(void 0===y[H])throw new Error(`Must supply a value for form control with name: '${H}'.`)})}}class to extends ws{constructor(y,C,H){super(Wn(C),Zr(H,C)),this.controls=y,this._initObservables(),this._setUpdateStrategy(C),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(y){return this.controls[y]}push(y,C={}){this.controls.push(y),this._registerControl(y),this.updateValueAndValidity({emitEvent:C.emitEvent}),this._onCollectionChange()}insert(y,C,H={}){this.controls.splice(y,0,C),this._registerControl(C),this.updateValueAndValidity({emitEvent:H.emitEvent})}removeAt(y,C={}){this.controls[y]&&this.controls[y]._registerOnCollectionChange(()=>{}),this.controls.splice(y,1),this.updateValueAndValidity({emitEvent:C.emitEvent})}setControl(y,C,H={}){this.controls[y]&&this.controls[y]._registerOnCollectionChange(()=>{}),this.controls.splice(y,1),C&&(this.controls.splice(y,0,C),this._registerControl(C)),this.updateValueAndValidity({emitEvent:H.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(y,C={}){this._checkAllValuesPresent(y),y.forEach((H,je)=>{this._throwIfControlMissing(je),this.at(je).setValue(H,{onlySelf:!0,emitEvent:C.emitEvent})}),this.updateValueAndValidity(C)}patchValue(y,C={}){null!=y&&(y.forEach((H,je)=>{this.at(je)&&this.at(je).patchValue(H,{onlySelf:!0,emitEvent:C.emitEvent})}),this.updateValueAndValidity(C))}reset(y=[],C={}){this._forEachChild((H,je)=>{H.reset(y[je],{onlySelf:!0,emitEvent:C.emitEvent})}),this._updatePristine(C),this._updateTouched(C),this.updateValueAndValidity(C)}getRawValue(){return this.controls.map(y=>y instanceof Mr?y.value:y.getRawValue())}clear(y={}){this.controls.length<1||(this._forEachChild(C=>C._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:y.emitEvent}))}_syncPendingControls(){let y=this.controls.reduce((C,H)=>!!H._syncPendingControls()||C,!1);return y&&this.updateValueAndValidity({onlySelf:!0}),y}_throwIfControlMissing(y){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(y))throw new Error(`Cannot find form control at index ${y}`)}_forEachChild(y){this.controls.forEach((C,H)=>{y(C,H)})}_updateValue(){this.value=this.controls.filter(y=>y.enabled||this.disabled).map(y=>y.value)}_anyControls(y){return this.controls.some(C=>C.enabled&&y(C))}_setUpControls(){this._forEachChild(y=>this._registerControl(y))}_checkAllValuesPresent(y){this._forEachChild((C,H)=>{if(void 0===y[H])throw new Error(`Must supply a value for form control at index: ${H}.`)})}_allControlsDisabled(){for(const y of this.controls)if(y.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(y){y.setParent(this),y._registerOnCollectionChange(this._onCollectionChange)}}const pi={provide:bn,useExisting:(0,g.Gpc)(()=>Kn)},yn=(()=>Promise.resolve(null))();let Kn=(()=>{class S extends bn{constructor(C,H){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new g.vpe,this.form=new or({},dn(C),kn(H))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(C){yn.then(()=>{const H=this._findContainer(C.path);C.control=H.registerControl(C.name,C.control),sn(C.control,C),C.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(C)})}getControl(C){return this.form.get(C.path)}removeControl(C){yn.then(()=>{const H=this._findContainer(C.path);H&&H.removeControl(C.name),bt(this._directives,C)})}addFormGroup(C){yn.then(()=>{const H=this._findContainer(C.path),je=new or({});In(je,C),H.registerControl(C.name,je),je.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(C){yn.then(()=>{const H=this._findContainer(C.path);H&&H.removeControl(C.name)})}getFormGroup(C){return this.form.get(C.path)}updateModel(C,H){yn.then(()=>{this.form.get(C.path).setValue(H)})}setValue(C){this.control.setValue(C)}onSubmit(C){return this.submitted=!0,ye(this.form,this._directives),this.ngSubmit.emit(C),!1}onReset(){this.resetForm()}resetForm(C){this.form.reset(C),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(C){return C.pop(),C.length?this.form.get(C):this.form}}return S.\u0275fac=function(C){return new(C||S)(g.Y36(ee,10),g.Y36(Te,10))},S.\u0275dir=g.lG2({type:S,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(C,H){1&C&&g.NdJ("submit",function(wt){return H.onSubmit(wt)})("reset",function(){return H.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[g._Bn([pi]),g.qOj]}),S})();const Cs={provide:En,useExisting:(0,g.Gpc)(()=>li)},er=(()=>Promise.resolve(null))();let li=(()=>{class S extends En{constructor(C,H,je,wt){super(),this.control=new Mr,this._registered=!1,this.update=new g.vpe,this._parent=C,this._setValidators(H),this._setAsyncValidators(je),this.valueAccessor=Ke(0,wt)}ngOnChanges(C){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in C&&this._updateDisabled(C),ve(C,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?zt(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(C){this.viewModel=C,this.update.emit(C)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){sn(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(C){er.then(()=>{this.control.setValue(C,{emitViewToModelChange:!1})})}_updateDisabled(C){const H=C.isDisabled.currentValue,je=""===H||H&&"false"!==H;er.then(()=>{je&&!this.control.disabled?this.control.disable():!je&&this.control.disabled&&this.control.enable()})}}return S.\u0275fac=function(C){return new(C||S)(g.Y36(bn,9),g.Y36(ee,10),g.Y36(Te,10),g.Y36(X,10))},S.\u0275dir=g.lG2({type:S,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[g._Bn([Cs]),g.qOj,g.TTD]}),S})(),Di=(()=>{class S{}return S.\u0275fac=function(C){return new(C||S)},S.\u0275dir=g.lG2({type:S,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),S})(),mi=(()=>{class S{}return S.\u0275fac=function(C){return new(C||S)},S.\u0275mod=g.oAB({type:S}),S.\u0275inj=g.cJS({}),S})();const Hi=new g.OlP("NgModelWithFormControlWarning"),Ri={provide:bn,useExisting:(0,g.Gpc)(()=>Pi)};let Pi=(()=>{class S extends bn{constructor(C,H){super(),this.validators=C,this.asyncValidators=H,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new g.vpe,this._setValidators(C),this._setAsyncValidators(H)}ngOnChanges(C){this._checkFormPresent(),C.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Le(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(C){const H=this.form.get(C.path);return sn(H,C),H.updateValueAndValidity({emitEvent:!1}),this.directives.push(C),H}getControl(C){return this.form.get(C.path)}removeControl(C){fn(C.control||null,C,!1),bt(this.directives,C)}addFormGroup(C){this._setUpFormContainer(C)}removeFormGroup(C){this._cleanUpFormContainer(C)}getFormGroup(C){return this.form.get(C.path)}addFormArray(C){this._setUpFormContainer(C)}removeFormArray(C){this._cleanUpFormContainer(C)}getFormArray(C){return this.form.get(C.path)}updateModel(C,H){this.form.get(C.path).setValue(H)}onSubmit(C){return this.submitted=!0,ye(this.form,this.directives),this.ngSubmit.emit(C),!1}onReset(){this.resetForm()}resetForm(C){this.form.reset(C),this.submitted=!1}_updateDomValue(){this.directives.forEach(C=>{const H=C.control,je=this.form.get(C.path);H!==je&&(fn(H||null,C),je instanceof Mr&&(sn(je,C),C.control=je))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(C){const H=this.form.get(C.path);In(H,C),H.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(C){if(this.form){const H=this.form.get(C.path);H&&function(S,y){return Le(S,y)}(H,C)&&H.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Fe(this.form,this),this._oldForm&&Le(this._oldForm,this)}_checkFormPresent(){}}return S.\u0275fac=function(C){return new(C||S)(g.Y36(ee,10),g.Y36(Te,10))},S.\u0275dir=g.lG2({type:S,selectors:[["","formGroup",""]],hostBindings:function(C,H){1&C&&g.NdJ("submit",function(wt){return H.onSubmit(wt)})("reset",function(){return H.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[g._Bn([Ri]),g.qOj,g.TTD]}),S})();const Si={provide:En,useExisting:(0,g.Gpc)(()=>lt)};let lt=(()=>{class S extends En{constructor(C,H,je,wt,hn){super(),this._ngModelWarningConfig=hn,this._added=!1,this.update=new g.vpe,this._ngModelWarningSent=!1,this._parent=C,this._setValidators(H),this._setAsyncValidators(je),this.valueAccessor=Ke(0,wt)}set isDisabled(C){}ngOnChanges(C){this._added||this._setUpControl(),ve(C,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(C){this.viewModel=C,this.update.emit(C)}get path(){return zt(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return S._ngModelWarningSentOnce=!1,S.\u0275fac=function(C){return new(C||S)(g.Y36(bn,13),g.Y36(ee,10),g.Y36(Te,10),g.Y36(X,10),g.Y36(Hi,8))},S.\u0275dir=g.lG2({type:S,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[g._Bn([Si]),g.qOj,g.TTD]}),S})();let Ks=(()=>{class S{constructor(){this._validator=Zt}ngOnChanges(C){if(this.inputName in C){const H=this.normalizeInput(C[this.inputName].currentValue);this._validator=this.enabled()?this.createValidator(H):Zt,this._onChange&&this._onChange()}}validate(C){return this._validator(C)}registerOnValidatorChange(C){this._onChange=C}enabled(){return null!=this[this.inputName]}}return S.\u0275fac=function(C){return new(C||S)},S.\u0275dir=g.lG2({type:S,features:[g.TTD]}),S})();const Go={provide:ee,useExisting:(0,g.Gpc)(()=>Yi),multi:!0},ts={provide:ee,useExisting:(0,g.Gpc)(()=>Zi),multi:!0};let Yi=(()=>{class S{constructor(){this._required=!1}get required(){return this._required}set required(C){this._required=null!=C&&!1!==C&&"false"!=`${C}`,this._onChange&&this._onChange()}validate(C){return this.required?function(S){return xe(S.value)?{required:!0}:null}(C):null}registerOnValidatorChange(C){this._onChange=C}}return S.\u0275fac=function(C){return new(C||S)},S.\u0275dir=g.lG2({type:S,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(C,H){2&C&&g.uIk("required",H.required?"":null)},inputs:{required:"required"},features:[g._Bn([Go])]}),S})(),Zi=(()=>{class S extends Yi{validate(C){return this.required?function(S){return!0===S.value?null:{required:!0}}(C):null}}return S.\u0275fac=function(){let y;return function(H){return(y||(y=g.n5z(S)))(H||S)}}(),S.\u0275dir=g.lG2({type:S,selectors:[["input","type","checkbox","required","","formControlName",""],["input","type","checkbox","required","","formControl",""],["input","type","checkbox","required","","ngModel",""]],hostVars:1,hostBindings:function(C,H){2&C&&g.uIk("required",H.required?"":null)},features:[g._Bn([ts]),g.qOj]}),S})();const ui={provide:ee,useExisting:(0,g.Gpc)(()=>vi),multi:!0};let vi=(()=>{class S extends Ks{constructor(){super(...arguments),this.inputName="minlength",this.normalizeInput=C=>function(S){return"number"==typeof S?S:parseInt(S,10)}(C),this.createValidator=C=>function(S){return y=>xe(y.value)||!function(S){return null!=S&&"number"==typeof S.length}(y.value)?null:y.value.length<S?{minlength:{requiredLength:S,actualLength:y.value.length}}:null}(C)}}return S.\u0275fac=function(){let y;return function(H){return(y||(y=g.n5z(S)))(H||S)}}(),S.\u0275dir=g.lG2({type:S,selectors:[["","minlength","","formControlName",""],["","minlength","","formControl",""],["","minlength","","ngModel",""]],hostVars:1,hostBindings:function(C,H){2&C&&g.uIk("minlength",H.enabled()?H.minlength:null)},inputs:{minlength:"minlength"},features:[g._Bn([ui]),g.qOj]}),S})(),Ls=(()=>{class S{}return S.\u0275fac=function(C){return new(C||S)},S.\u0275mod=g.oAB({type:S}),S.\u0275inj=g.cJS({imports:[[mi]]}),S})(),Fi=(()=>{class S{}return S.\u0275fac=function(C){return new(C||S)},S.\u0275mod=g.oAB({type:S}),S.\u0275inj=g.cJS({imports:[Ls]}),S})(),_r=(()=>{class S{static withConfig(C){return{ngModule:S,providers:[{provide:Hi,useValue:C.warnOnNgModelWithFormControl}]}}}return S.\u0275fac=function(C){return new(C||S)},S.\u0275mod=g.oAB({type:S}),S.\u0275inj=g.cJS({imports:[Ls]}),S})()},6360:($t,$e,x)=>{"use strict";x.d($e,{Qb:()=>Ei,PW:()=>en});var g=x(5e3),E=x(2313),B=x(1777);function ne(){return"undefined"!=typeof window&&void 0!==window.document}function he(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function q(de){switch(de.length){case 0:return new B.ZN;case 1:return de[0];default:return new B.ZE(de)}}function se(de,w,D,V,re={},me={}){const We=[],nt=[];let vt=-1,Ft=null;if(V.forEach(un=>{const _n=un.offset,Xn=_n==vt,ir=Xn&&Ft||{};Object.keys(un).forEach(Ln=>{let zn=Ln,Dr=un[Ln];if("offset"!==Ln)switch(zn=w.normalizePropertyName(zn,We),Dr){case B.k1:Dr=re[Ln];break;case B.l3:Dr=me[Ln];break;default:Dr=w.normalizeStyleValue(Ln,zn,Dr,We)}ir[zn]=Dr}),Xn||nt.push(ir),Ft=ir,vt=_n}),We.length){const un="\n - ";throw new Error(`Unable to animate due to the following errors:${un}${We.join(un)}`)}return nt}function X(de,w,D,V){switch(w){case"start":de.onStart(()=>V(D&&ie(D,"start",de)));break;case"done":de.onDone(()=>V(D&&ie(D,"done",de)));break;case"destroy":de.onDestroy(()=>V(D&&ie(D,"destroy",de)))}}function ie(de,w,D){const V=D.totalTime,me=Q(de.element,de.triggerName,de.fromState,de.toState,w||de.phaseName,null==V?de.totalTime:V,!!D.disabled),We=de._data;return null!=We&&(me._data=We),me}function Q(de,w,D,V,re="",me=0,We){return{element:de,triggerName:w,fromState:D,toState:V,phaseName:re,totalTime:me,disabled:!!We}}function oe(de,w,D){let V;return de instanceof Map?(V=de.get(w),V||de.set(w,V=D)):(V=de[w],V||(V=de[w]=D)),V}function ae(de){const w=de.indexOf(":");return[de.substring(1,w),de.substr(w+1)]}let Me=(de,w)=>!1,Ve=(de,w,D)=>[];(he()||"undefined"!=typeof Element)&&(Me=ne()?(de,w)=>{for(;w&&w!==document.documentElement;){if(w===de)return!0;w=w.parentNode||w.host}return!1}:(de,w)=>de.contains(w),Ve=(de,w,D)=>{let V=[];if(D){const re=de.querySelectorAll(w);for(let me=0;me<re.length;me++)V.push(re[me])}else{const re=de.querySelector(w);re&&V.push(re)}return V});let ee=null,Te=!1;function He(de){ee||(ee=("undefined"!=typeof document?document.body:null)||{},Te=!!ee.style&&"WebkitAppearance"in ee.style);let w=!0;return ee.style&&!function(de){return"ebkit"==de.substring(1,6)}(de)&&(w=de in ee.style,!w&&Te&&(w="Webkit"+de.charAt(0).toUpperCase()+de.substr(1)in ee.style)),w}const rt=Me,ft=Ve;function we(de){const w={};return Object.keys(de).forEach(D=>{const V=D.replace(/([a-z])([A-Z])/g,"$1-$2");w[V]=de[D]}),w}let Pe=(()=>{class de{validateStyleProperty(D){return He(D)}matchesElement(D,V){return!1}containsElement(D,V){return rt(D,V)}query(D,V,re){return ft(D,V,re)}computeStyle(D,V,re){return re||""}animate(D,V,re,me,We,nt=[],vt){return new B.ZN(re,me)}}return de.\u0275fac=function(D){return new(D||de)},de.\u0275prov=g.Yz7({token:de,factory:de.\u0275fac}),de})(),qe=(()=>{class de{}return de.NOOP=new Pe,de})();const Zt="ng-enter",jt="ng-leave",wr="ng-trigger",ar=".ng-trigger",Nn="ng-animating",Qn=".ng-animating";function dn(de){if("number"==typeof de)return de;const w=de.match(/^(-?[\.\d]+)(m?s)/);return!w||w.length<2?0:Wt(parseFloat(w[1]),w[2])}function Wt(de,w){return"s"===w?1e3*de:de}function kn(de,w,D){return de.hasOwnProperty("duration")?de:function(de,w,D){let re,me=0,We="";if("string"==typeof de){const nt=de.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===nt)return w.push(`The provided timing value "${de}" is invalid.`),{duration:0,delay:0,easing:""};re=Wt(parseFloat(nt[1]),nt[2]);const vt=nt[3];null!=vt&&(me=Wt(parseFloat(vt),nt[4]));const Ft=nt[5];Ft&&(We=Ft)}else re=de;if(!D){let nt=!1,vt=w.length;re<0&&(w.push("Duration values below 0 are not allowed for this animation step."),nt=!0),me<0&&(w.push("Delay values below 0 are not allowed for this animation step."),nt=!0),nt&&w.splice(vt,0,`The provided timing value "${de}" is invalid.`)}return{duration:re,delay:me,easing:We}}(de,w,D)}function Ye(de,w={}){return Object.keys(de).forEach(D=>{w[D]=de[D]}),w}function Ee(de,w,D={}){if(w)for(let V in de)D[V]=de[V];else Ye(de,D);return D}function mt(de,w,D){return D?w+":"+D+";":""}function Nt(de){let w="";for(let D=0;D<de.style.length;D++){const V=de.style.item(D);w+=mt(0,V,de.style.getPropertyValue(V))}for(const D in de.style)de.style.hasOwnProperty(D)&&!D.startsWith("_")&&(w+=mt(0,yr(D),de.style[D]));de.setAttribute("style",w)}function Mt(de,w,D){de.style&&(Object.keys(w).forEach(V=>{const re=Yn(V);D&&!D.hasOwnProperty(V)&&(D[V]=de.style[re]),de.style[re]=w[V]}),he()&&Nt(de))}function rn(de,w){de.style&&(Object.keys(w).forEach(D=>{const V=Yn(D);de.style[V]=""}),he()&&Nt(de))}function En(de){return Array.isArray(de)?1==de.length?de[0]:(0,B.vP)(de):de}const mn=new RegExp("{{\\s*(.+?)\\s*}}","g");function Rt(de){let w=[];if("string"==typeof de){let D;for(;D=mn.exec(de);)w.push(D[1]);mn.lastIndex=0}return w}function br(de,w,D){const V=de.toString(),re=V.replace(mn,(me,We)=>{let nt=w[We];return w.hasOwnProperty(We)||(D.push(`Please provide a value for the animation param ${We}`),nt=""),nt.toString()});return re==V?de:re}function gr(de){const w=[];let D=de.next();for(;!D.done;)w.push(D.value),D=de.next();return w}const Qt=/-+([a-z0-9])/g;function Yn(de){return de.replace(Qt,(...w)=>w[1].toUpperCase())}function yr(de){return de.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function hr(de,w){return 0===de||0===w}function Re(de,w,D){const V=Object.keys(D);if(V.length&&w.length){let me=w[0],We=[];if(V.forEach(nt=>{me.hasOwnProperty(nt)||We.push(nt),me[nt]=D[nt]}),We.length)for(var re=1;re<w.length;re++){let nt=w[re];We.forEach(function(vt){nt[vt]=J(de,vt)})}}return w}function L(de,w,D){switch(w.type){case 7:return de.visitTrigger(w,D);case 0:return de.visitState(w,D);case 1:return de.visitTransition(w,D);case 2:return de.visitSequence(w,D);case 3:return de.visitGroup(w,D);case 4:return de.visitAnimate(w,D);case 5:return de.visitKeyframes(w,D);case 6:return de.visitStyle(w,D);case 8:return de.visitReference(w,D);case 9:return de.visitAnimateChild(w,D);case 10:return de.visitAnimateRef(w,D);case 11:return de.visitQuery(w,D);case 12:return de.visitStagger(w,D);default:throw new Error(`Unable to resolve animation metadata node #${w.type}`)}}function J(de,w){return window.getComputedStyle(de)[w]}function be(de,w){const D=[];return"string"==typeof de?de.split(/\s*,\s*/).forEach(V=>function(de,w,D){if(":"==de[0]){const vt=function(de,w){switch(de){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(D,V)=>parseFloat(V)>parseFloat(D);case":decrement":return(D,V)=>parseFloat(V)<parseFloat(D);default:return w.push(`The transition alias value "${de}" is not supported`),"* => *"}}(de,D);if("function"==typeof vt)return void w.push(vt);de=vt}const V=de.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==V||V.length<4)return D.push(`The provided transition expression "${de}" is not supported`),w;const re=V[1],me=V[2],We=V[3];w.push(zt(re,We));"<"==me[0]&&!("*"==re&&"*"==We)&&w.push(zt(We,re))}(V,D,w)):D.push(de),D}const at=new Set(["true","1"]),Pt=new Set(["false","0"]);function zt(de,w){const D=at.has(de)||Pt.has(de),V=at.has(w)||Pt.has(w);return(re,me)=>{let We="*"==de||de==re,nt="*"==w||w==me;return!We&&D&&"boolean"==typeof re&&(We=re?at.has(de):Pt.has(de)),!nt&&V&&"boolean"==typeof me&&(nt=me?at.has(w):Pt.has(w)),We&&nt}}const fn=new RegExp("s*:selfs*,?","g");function Jn(de,w,D){return new Fe(de).build(w,D)}class Fe{constructor(w){this._driver=w}build(w,D){const V=new xt(D);return this._resetContextStyleTimingState(V),L(this,En(w),V)}_resetContextStyleTimingState(w){w.currentQuerySelector="",w.collectedStyles={},w.collectedStyles[""]={},w.currentTime=0}visitTrigger(w,D){let V=D.queryCount=0,re=D.depCount=0;const me=[],We=[];return"@"==w.name.charAt(0)&&D.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),w.definitions.forEach(nt=>{if(this._resetContextStyleTimingState(D),0==nt.type){const vt=nt,Ft=vt.name;Ft.toString().split(/\s*,\s*/).forEach(un=>{vt.name=un,me.push(this.visitState(vt,D))}),vt.name=Ft}else if(1==nt.type){const vt=this.visitTransition(nt,D);V+=vt.queryCount,re+=vt.depCount,We.push(vt)}else D.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:w.name,states:me,transitions:We,queryCount:V,depCount:re,options:null}}visitState(w,D){const V=this.visitStyle(w.styles,D),re=w.options&&w.options.params||null;if(V.containsDynamicStyles){const me=new Set,We=re||{};if(V.styles.forEach(nt=>{if(pn(nt)){const vt=nt;Object.keys(vt).forEach(Ft=>{Rt(vt[Ft]).forEach(un=>{We.hasOwnProperty(un)||me.add(un)})})}}),me.size){const nt=gr(me.values());D.errors.push(`state("${w.name}", ...) must define default values for all the following style substitutions: ${nt.join(", ")}`)}}return{type:0,name:w.name,style:V,options:re?{params:re}:null}}visitTransition(w,D){D.queryCount=0,D.depCount=0;const V=L(this,En(w.animation),D);return{type:1,matchers:be(w.expr,D.errors),animation:V,queryCount:D.queryCount,depCount:D.depCount,options:it(w.options)}}visitSequence(w,D){return{type:2,steps:w.steps.map(V=>L(this,V,D)),options:it(w.options)}}visitGroup(w,D){const V=D.currentTime;let re=0;const me=w.steps.map(We=>{D.currentTime=V;const nt=L(this,We,D);return re=Math.max(re,D.currentTime),nt});return D.currentTime=re,{type:3,steps:me,options:it(w.options)}}visitAnimate(w,D){const V=function(de,w){let D=null;if(de.hasOwnProperty("duration"))D=de;else if("number"==typeof de)return Qe(kn(de,w).duration,0,"");const V=de;if(V.split(/\s+/).some(me=>"{"==me.charAt(0)&&"{"==me.charAt(1))){const me=Qe(0,0,"");return me.dynamic=!0,me.strValue=V,me}return D=D||kn(V,w),Qe(D.duration,D.delay,D.easing)}(w.timings,D.errors);D.currentAnimateTimings=V;let re,me=w.styles?w.styles:(0,B.oB)({});if(5==me.type)re=this.visitKeyframes(me,D);else{let We=w.styles,nt=!1;if(!We){nt=!0;const Ft={};V.easing&&(Ft.easing=V.easing),We=(0,B.oB)(Ft)}D.currentTime+=V.duration+V.delay;const vt=this.visitStyle(We,D);vt.isEmptyStep=nt,re=vt}return D.currentAnimateTimings=null,{type:4,timings:V,style:re,options:null}}visitStyle(w,D){const V=this._makeStyleAst(w,D);return this._validateStyleAst(V,D),V}_makeStyleAst(w,D){const V=[];Array.isArray(w.styles)?w.styles.forEach(We=>{"string"==typeof We?We==B.l3?V.push(We):D.errors.push(`The provided style string value ${We} is not allowed.`):V.push(We)}):V.push(w.styles);let re=!1,me=null;return V.forEach(We=>{if(pn(We)){const nt=We,vt=nt.easing;if(vt&&(me=vt,delete nt.easing),!re)for(let Ft in nt)if(nt[Ft].toString().indexOf("{{")>=0){re=!0;break}}}),{type:6,styles:V,easing:me,offset:w.offset,containsDynamicStyles:re,options:null}}_validateStyleAst(w,D){const V=D.currentAnimateTimings;let re=D.currentTime,me=D.currentTime;V&&me>0&&(me-=V.duration+V.delay),w.styles.forEach(We=>{"string"!=typeof We&&Object.keys(We).forEach(nt=>{if(!this._driver.validateStyleProperty(nt))return void D.errors.push(`The provided animation property "${nt}" is not a supported CSS property for animations`);const vt=D.collectedStyles[D.currentQuerySelector],Ft=vt[nt];let un=!0;Ft&&(me!=re&&me>=Ft.startTime&&re<=Ft.endTime&&(D.errors.push(`The CSS property "${nt}" that exists between the times of "${Ft.startTime}ms" and "${Ft.endTime}ms" is also being animated in a parallel animation between the times of "${me}ms" and "${re}ms"`),un=!1),me=Ft.startTime),un&&(vt[nt]={startTime:me,endTime:re}),D.options&&function(de,w,D){const V=w.params||{},re=Rt(de);re.length&&re.forEach(me=>{V.hasOwnProperty(me)||D.push(`Unable to resolve the local animation param ${me} in the given list of values`)})}(We[nt],D.options,D.errors)})})}visitKeyframes(w,D){const V={type:5,styles:[],options:null};if(!D.currentAnimateTimings)return D.errors.push("keyframes() must be placed inside of a call to animate()"),V;let me=0;const We=[];let nt=!1,vt=!1,Ft=0;const un=w.steps.map(dr=>{const zr=this._makeStyleAst(dr,D);let $i=null!=zr.offset?zr.offset:function(de){if("string"==typeof de)return null;let w=null;if(Array.isArray(de))de.forEach(D=>{if(pn(D)&&D.hasOwnProperty("offset")){const V=D;w=parseFloat(V.offset),delete V.offset}});else if(pn(de)&&de.hasOwnProperty("offset")){const D=de;w=parseFloat(D.offset),delete D.offset}return w}(zr.styles),bi=0;return null!=$i&&(me++,bi=zr.offset=$i),vt=vt||bi<0||bi>1,nt=nt||bi<Ft,Ft=bi,We.push(bi),zr});vt&&D.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),nt&&D.errors.push("Please ensure that all keyframe offsets are in order");const _n=w.steps.length;let Xn=0;me>0&&me<_n?D.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==me&&(Xn=1/(_n-1));const ir=_n-1,Ln=D.currentTime,zn=D.currentAnimateTimings,Dr=zn.duration;return un.forEach((dr,zr)=>{const $i=Xn>0?zr==ir?1:Xn*zr:We[zr],bi=$i*Dr;D.currentTime=Ln+zn.delay+bi,zn.duration=bi,this._validateStyleAst(dr,D),dr.offset=$i,V.styles.push(dr)}),V}visitReference(w,D){return{type:8,animation:L(this,En(w.animation),D),options:it(w.options)}}visitAnimateChild(w,D){return D.depCount++,{type:9,options:it(w.options)}}visitAnimateRef(w,D){return{type:10,animation:this.visitReference(w.animation,D),options:it(w.options)}}visitQuery(w,D){const V=D.currentQuerySelector,re=w.options||{};D.queryCount++,D.currentQuery=w;const[me,We]=function(de){const w=!!de.split(/\s*,\s*/).find(D=>":self"==D);return w&&(de=de.replace(fn,"")),de=de.replace(/@\*/g,ar).replace(/@\w+/g,D=>ar+"-"+D.substr(1)).replace(/:animating/g,Qn),[de,w]}(w.selector);D.currentQuerySelector=V.length?V+" "+me:me,oe(D.collectedStyles,D.currentQuerySelector,{});const nt=L(this,En(w.animation),D);return D.currentQuery=null,D.currentQuerySelector=V,{type:11,selector:me,limit:re.limit||0,optional:!!re.optional,includeSelf:We,animation:nt,originalSelector:w.selector,options:it(w.options)}}visitStagger(w,D){D.currentQuery||D.errors.push("stagger() can only be used inside of query()");const V="full"===w.timings?{duration:0,delay:0,easing:"full"}:kn(w.timings,D.errors,!0);return{type:12,animation:L(this,En(w.animation),D),timings:V,options:null}}}class xt{constructor(w){this.errors=w,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function pn(de){return!Array.isArray(de)&&"object"==typeof de}function it(de){return de?(de=Ye(de)).params&&(de.params=function(de){return de?Ye(de):null}(de.params)):de={},de}function Qe(de,w,D){return{duration:de,delay:w,easing:D}}function De(de,w,D,V,re,me,We=null,nt=!1){return{type:1,element:de,keyframes:w,preStyleProps:D,postStyleProps:V,duration:re,delay:me,totalTime:re+me,easing:We,subTimeline:nt}}class ve{constructor(){this._map=new Map}consume(w){let D=this._map.get(w);return D?this._map.delete(w):D=[],D}append(w,D){let V=this._map.get(w);V||this._map.set(w,V=[]),V.push(...D)}has(w){return this._map.has(w)}clear(){this._map.clear()}}const Ke=new RegExp(":enter","g"),ze=new RegExp(":leave","g");function Ue(de,w,D,V,re,me={},We={},nt,vt,Ft=[]){return(new Se).buildKeyframes(de,w,D,V,re,me,We,nt,vt,Ft)}class Se{buildKeyframes(w,D,V,re,me,We,nt,vt,Ft,un=[]){Ft=Ft||new ve;const _n=new St(w,D,Ft,re,me,un,[]);_n.options=vt,_n.currentTimeline.setStyles([We],null,_n.errors,vt),L(this,V,_n);const Xn=_n.timelines.filter(ir=>ir.containsAnimation());if(Xn.length&&Object.keys(nt).length){const ir=Xn[Xn.length-1];ir.allowOnlyTimelineStyles()||ir.setStyles([nt],null,_n.errors,vt)}return Xn.length?Xn.map(ir=>ir.buildKeyframes()):[De(D,[],[],[],0,0,"",!1)]}visitTrigger(w,D){}visitState(w,D){}visitTransition(w,D){}visitAnimateChild(w,D){const V=D.subInstructions.consume(D.element);if(V){const re=D.createSubContext(w.options),me=D.currentTimeline.currentTime,We=this._visitSubInstructions(V,re,re.options);me!=We&&D.transformIntoNewTimeline(We)}D.previousNode=w}visitAnimateRef(w,D){const V=D.createSubContext(w.options);V.transformIntoNewTimeline(),this.visitReference(w.animation,V),D.transformIntoNewTimeline(V.currentTimeline.currentTime),D.previousNode=w}_visitSubInstructions(w,D,V){let me=D.currentTimeline.currentTime;const We=null!=V.duration?dn(V.duration):null,nt=null!=V.delay?dn(V.delay):null;return 0!==We&&w.forEach(vt=>{const Ft=D.appendInstructionToTimeline(vt,We,nt);me=Math.max(me,Ft.duration+Ft.delay)}),me}visitReference(w,D){D.updateOptions(w.options,!0),L(this,w.animation,D),D.previousNode=w}visitSequence(w,D){const V=D.subContextCount;let re=D;const me=w.options;if(me&&(me.params||me.delay)&&(re=D.createSubContext(me),re.transformIntoNewTimeline(),null!=me.delay)){6==re.previousNode.type&&(re.currentTimeline.snapshotCurrentStyles(),re.previousNode=ut);const We=dn(me.delay);re.delayNextStep(We)}w.steps.length&&(w.steps.forEach(We=>L(this,We,re)),re.currentTimeline.applyStylesToKeyframe(),re.subContextCount>V&&re.transformIntoNewTimeline()),D.previousNode=w}visitGroup(w,D){const V=[];let re=D.currentTimeline.currentTime;const me=w.options&&w.options.delay?dn(w.options.delay):0;w.steps.forEach(We=>{const nt=D.createSubContext(w.options);me&&nt.delayNextStep(me),L(this,We,nt),re=Math.max(re,nt.currentTimeline.currentTime),V.push(nt.currentTimeline)}),V.forEach(We=>D.currentTimeline.mergeTimelineCollectedStyles(We)),D.transformIntoNewTimeline(re),D.previousNode=w}_visitTiming(w,D){if(w.dynamic){const V=w.strValue;return kn(D.params?br(V,D.params,D.errors):V,D.errors)}return{duration:w.duration,delay:w.delay,easing:w.easing}}visitAnimate(w,D){const V=D.currentAnimateTimings=this._visitTiming(w.timings,D),re=D.currentTimeline;V.delay&&(D.incrementTime(V.delay),re.snapshotCurrentStyles());const me=w.style;5==me.type?this.visitKeyframes(me,D):(D.incrementTime(V.duration),this.visitStyle(me,D),re.applyStylesToKeyframe()),D.currentAnimateTimings=null,D.previousNode=w}visitStyle(w,D){const V=D.currentTimeline,re=D.currentAnimateTimings;!re&&V.getCurrentStyleProperties().length&&V.forwardFrame();const me=re&&re.easing||w.easing;w.isEmptyStep?V.applyEmptyStep(me):V.setStyles(w.styles,me,D.errors,D.options),D.previousNode=w}visitKeyframes(w,D){const V=D.currentAnimateTimings,re=D.currentTimeline.duration,me=V.duration,nt=D.createSubContext().currentTimeline;nt.easing=V.easing,w.styles.forEach(vt=>{nt.forwardTime((vt.offset||0)*me),nt.setStyles(vt.styles,vt.easing,D.errors,D.options),nt.applyStylesToKeyframe()}),D.currentTimeline.mergeTimelineCollectedStyles(nt),D.transformIntoNewTimeline(re+me),D.previousNode=w}visitQuery(w,D){const V=D.currentTimeline.currentTime,re=w.options||{},me=re.delay?dn(re.delay):0;me&&(6===D.previousNode.type||0==V&&D.currentTimeline.getCurrentStyleProperties().length)&&(D.currentTimeline.snapshotCurrentStyles(),D.previousNode=ut);let We=V;const nt=D.invokeQuery(w.selector,w.originalSelector,w.limit,w.includeSelf,!!re.optional,D.errors);D.currentQueryTotal=nt.length;let vt=null;nt.forEach((Ft,un)=>{D.currentQueryIndex=un;const _n=D.createSubContext(w.options,Ft);me&&_n.delayNextStep(me),Ft===D.element&&(vt=_n.currentTimeline),L(this,w.animation,_n),_n.currentTimeline.applyStylesToKeyframe(),We=Math.max(We,_n.currentTimeline.currentTime)}),D.currentQueryIndex=0,D.currentQueryTotal=0,D.transformIntoNewTimeline(We),vt&&(D.currentTimeline.mergeTimelineCollectedStyles(vt),D.currentTimeline.snapshotCurrentStyles()),D.previousNode=w}visitStagger(w,D){const V=D.parentContext,re=D.currentTimeline,me=w.timings,We=Math.abs(me.duration),nt=We*(D.currentQueryTotal-1);let vt=We*D.currentQueryIndex;switch(me.duration<0?"reverse":me.easing){case"reverse":vt=nt-vt;break;case"full":vt=V.currentStaggerTime}const un=D.currentTimeline;vt&&un.delayNextStep(vt);const _n=un.currentTime;L(this,w.animation,D),D.previousNode=w,V.currentStaggerTime=re.currentTime-_n+(re.startTime-V.currentTimeline.startTime)}}const ut={};class St{constructor(w,D,V,re,me,We,nt,vt){this._driver=w,this.element=D,this.subInstructions=V,this._enterClassName=re,this._leaveClassName=me,this.errors=We,this.timelines=nt,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=ut,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=vt||new Dn(this._driver,D,0),nt.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(w,D){if(!w)return;const V=w;let re=this.options;null!=V.duration&&(re.duration=dn(V.duration)),null!=V.delay&&(re.delay=dn(V.delay));const me=V.params;if(me){let We=re.params;We||(We=this.options.params={}),Object.keys(me).forEach(nt=>{(!D||!We.hasOwnProperty(nt))&&(We[nt]=br(me[nt],We,this.errors))})}}_copyOptions(){const w={};if(this.options){const D=this.options.params;if(D){const V=w.params={};Object.keys(D).forEach(re=>{V[re]=D[re]})}}return w}createSubContext(w=null,D,V){const re=D||this.element,me=new St(this._driver,re,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(re,V||0));return me.previousNode=this.previousNode,me.currentAnimateTimings=this.currentAnimateTimings,me.options=this._copyOptions(),me.updateOptions(w),me.currentQueryIndex=this.currentQueryIndex,me.currentQueryTotal=this.currentQueryTotal,me.parentContext=this,this.subContextCount++,me}transformIntoNewTimeline(w){return this.previousNode=ut,this.currentTimeline=this.currentTimeline.fork(this.element,w),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(w,D,V){const re={duration:null!=D?D:w.duration,delay:this.currentTimeline.currentTime+(null!=V?V:0)+w.delay,easing:""},me=new Wn(this._driver,w.element,w.keyframes,w.preStyleProps,w.postStyleProps,re,w.stretchStartingKeyframe);return this.timelines.push(me),re}incrementTime(w){this.currentTimeline.forwardTime(this.currentTimeline.duration+w)}delayNextStep(w){w>0&&this.currentTimeline.delayNextStep(w)}invokeQuery(w,D,V,re,me,We){let nt=[];if(re&&nt.push(this.element),w.length>0){w=(w=w.replace(Ke,"."+this._enterClassName)).replace(ze,"."+this._leaveClassName);let Ft=this._driver.query(this.element,w,1!=V);0!==V&&(Ft=V<0?Ft.slice(Ft.length+V,Ft.length):Ft.slice(0,V)),nt.push(...Ft)}return!me&&0==nt.length&&We.push(`\`query("${D}")\` returned zero elements. (Use \`query("${D}", { optional: true })\` if you wish to allow this.)`),nt}}class Dn{constructor(w,D,V,re){this._driver=w,this.element=D,this.startTime=V,this._elementTimelineStylesLookup=re,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(D),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(D,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(w){const D=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||D?(this.forwardTime(this.currentTime+w),D&&this.snapshotCurrentStyles()):this.startTime+=w}fork(w,D){return this.applyStylesToKeyframe(),new Dn(this._driver,w,D||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(w){this.applyStylesToKeyframe(),this.duration=w,this._loadKeyframe()}_updateStyle(w,D){this._localTimelineStyles[w]=D,this._globalTimelineStyles[w]=D,this._styleSummary[w]={time:this.currentTime,value:D}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(w){w&&(this._previousKeyframe.easing=w),Object.keys(this._globalTimelineStyles).forEach(D=>{this._backFill[D]=this._globalTimelineStyles[D]||B.l3,this._currentKeyframe[D]=B.l3}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(w,D,V,re){D&&(this._previousKeyframe.easing=D);const me=re&&re.params||{},We=function(de,w){const D={};let V;return de.forEach(re=>{"*"===re?(V=V||Object.keys(w),V.forEach(me=>{D[me]=B.l3})):Ee(re,!1,D)}),D}(w,this._globalTimelineStyles);Object.keys(We).forEach(nt=>{const vt=br(We[nt],me,V);this._pendingStyles[nt]=vt,this._localTimelineStyles.hasOwnProperty(nt)||(this._backFill[nt]=this._globalTimelineStyles.hasOwnProperty(nt)?this._globalTimelineStyles[nt]:B.l3),this._updateStyle(nt,vt)})}applyStylesToKeyframe(){const w=this._pendingStyles,D=Object.keys(w);0!=D.length&&(this._pendingStyles={},D.forEach(V=>{this._currentKeyframe[V]=w[V]}),Object.keys(this._localTimelineStyles).forEach(V=>{this._currentKeyframe.hasOwnProperty(V)||(this._currentKeyframe[V]=this._localTimelineStyles[V])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(w=>{const D=this._localTimelineStyles[w];this._pendingStyles[w]=D,this._updateStyle(w,D)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const w=[];for(let D in this._currentKeyframe)w.push(D);return w}mergeTimelineCollectedStyles(w){Object.keys(w._styleSummary).forEach(D=>{const V=this._styleSummary[D],re=w._styleSummary[D];(!V||re.time>V.time)&&this._updateStyle(D,re.value)})}buildKeyframes(){this.applyStylesToKeyframe();const w=new Set,D=new Set,V=1===this._keyframes.size&&0===this.duration;let re=[];this._keyframes.forEach((nt,vt)=>{const Ft=Ee(nt,!0);Object.keys(Ft).forEach(un=>{const _n=Ft[un];_n==B.k1?w.add(un):_n==B.l3&&D.add(un)}),V||(Ft.offset=vt/this.duration),re.push(Ft)});const me=w.size?gr(w.values()):[],We=D.size?gr(D.values()):[];if(V){const nt=re[0],vt=Ye(nt);nt.offset=0,vt.offset=1,re=[nt,vt]}return De(this.element,re,me,We,this.duration,this.startTime,this.easing,!1)}}class Wn extends Dn{constructor(w,D,V,re,me,We,nt=!1){super(w,D,We.delay),this.keyframes=V,this.preStyleProps=re,this.postStyleProps=me,this._stretchStartingKeyframe=nt,this.timings={duration:We.duration,delay:We.delay,easing:We.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let w=this.keyframes,{delay:D,duration:V,easing:re}=this.timings;if(this._stretchStartingKeyframe&&D){const me=[],We=V+D,nt=D/We,vt=Ee(w[0],!1);vt.offset=0,me.push(vt);const Ft=Ee(w[0],!1);Ft.offset=fr(nt),me.push(Ft);const un=w.length-1;for(let _n=1;_n<=un;_n++){let Xn=Ee(w[_n],!1);Xn.offset=fr((D+Xn.offset*V)/We),me.push(Xn)}V=We,D=0,re="",w=me}return De(this.element,w,this.preStyleProps,this.postStyleProps,V,D,re,!0)}}function fr(de,w=3){const D=Math.pow(10,w-1);return Math.round(de*D)/D}class si{}class Mr extends si{normalizePropertyName(w,D){return Yn(w)}normalizeStyleValue(w,D,V,re){let me="";const We=V.toString().trim();if(or[D]&&0!==V&&"0"!==V)if("number"==typeof V)me="px";else{const nt=V.match(/^[+-]?[\d\.]+([a-z]*)$/);nt&&0==nt[1].length&&re.push(`Please provide a CSS unit value for ${w}:${V}`)}return We+me}}const or=(()=>function(de){const w={};return de.forEach(D=>w[D]=!0),w}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function pi(de,w,D,V,re,me,We,nt,vt,Ft,un,_n,Xn){return{type:0,element:de,triggerName:w,isRemovalTransition:re,fromState:D,fromStyles:me,toState:V,toStyles:We,timelines:nt,queriedElements:vt,preStyleProps:Ft,postStyleProps:un,totalTime:_n,errors:Xn}}const yn={};class Kn{constructor(w,D,V){this._triggerName=w,this.ast=D,this._stateStyles=V}match(w,D,V,re){return function(de,w,D,V,re){return de.some(me=>me(w,D,V,re))}(this.ast.matchers,w,D,V,re)}buildStyles(w,D,V){const re=this._stateStyles["*"],me=this._stateStyles[w],We=re?re.buildStyles(D,V):{};return me?me.buildStyles(D,V):We}build(w,D,V,re,me,We,nt,vt,Ft,un){const _n=[],Xn=this.ast.options&&this.ast.options.params||yn,Ln=this.buildStyles(V,nt&&nt.params||yn,_n),zn=vt&&vt.params||yn,Dr=this.buildStyles(re,zn,_n),dr=new Set,zr=new Map,$i=new Map,bi="void"===re,_s={params:Object.assign(Object.assign({},Xn),zn)},Bs=un?[]:Ue(w,D,this.ast.animation,me,We,Ln,Dr,_s,Ft,_n);let Li=0;if(Bs.forEach(Zs=>{Li=Math.max(Zs.duration+Zs.delay,Li)}),_n.length)return pi(D,this._triggerName,V,re,bi,Ln,Dr,[],[],zr,$i,Li,_n);Bs.forEach(Zs=>{const ns=Zs.element,Fr=oe(zr,ns,{});Zs.preStyleProps.forEach(io=>Fr[io]=!0);const Rs=oe($i,ns,{});Zs.postStyleProps.forEach(io=>Rs[io]=!0),ns!==D&&dr.add(ns)});const ro=gr(dr.values());return pi(D,this._triggerName,V,re,bi,Ln,Dr,Bs,ro,zr,$i,Li)}}class Gr{constructor(w,D,V){this.styles=w,this.defaultParams=D,this.normalizer=V}buildStyles(w,D){const V={},re=Ye(this.defaultParams);return Object.keys(w).forEach(me=>{const We=w[me];null!=We&&(re[me]=We)}),this.styles.styles.forEach(me=>{if("string"!=typeof me){const We=me;Object.keys(We).forEach(nt=>{let vt=We[nt];vt.length>1&&(vt=br(vt,re,D));const Ft=this.normalizer.normalizePropertyName(nt,D);vt=this.normalizer.normalizeStyleValue(nt,Ft,vt,D),V[Ft]=vt})}}),V}}class Rr{constructor(w,D,V){this.name=w,this.ast=D,this._normalizer=V,this.transitionFactories=[],this.states={},D.states.forEach(re=>{this.states[re.name]=new Gr(re.style,re.options&&re.options.params||{},V)}),mr(this.states,"true","1"),mr(this.states,"false","0"),D.transitions.forEach(re=>{this.transitionFactories.push(new Kn(w,re,this.states))}),this.fallbackTransition=function(de,w,D){return new Kn(de,{type:1,animation:{type:2,steps:[],options:null},matchers:[(We,nt)=>!0],options:null,queryCount:0,depCount:0},w)}(w,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(w,D,V,re){return this.transitionFactories.find(We=>We.match(w,D,V,re))||null}matchStyles(w,D,V){return this.fallbackTransition.buildStyles(w,D,V)}}function mr(de,w,D){de.hasOwnProperty(w)?de.hasOwnProperty(D)||(de[D]=de[w]):de.hasOwnProperty(D)&&(de[w]=de[D])}const Vr=new ve;class Cs{constructor(w,D,V){this.bodyNode=w,this._driver=D,this._normalizer=V,this._animations={},this._playersById={},this.players=[]}register(w,D){const V=[],re=Jn(this._driver,D,V);if(V.length)throw new Error(`Unable to build the animation due to the following errors: ${V.join("\n")}`);this._animations[w]=re}_buildPlayer(w,D,V){const re=w.element,me=se(0,this._normalizer,0,w.keyframes,D,V);return this._driver.animate(re,me,w.duration,w.delay,w.easing,[],!0)}create(w,D,V={}){const re=[],me=this._animations[w];let We;const nt=new Map;if(me?(We=Ue(this._driver,D,me,Zt,jt,{},{},V,Vr,re),We.forEach(un=>{const _n=oe(nt,un.element,{});un.postStyleProps.forEach(Xn=>_n[Xn]=null)})):(re.push("The requested animation doesn't exist or has already been destroyed"),We=[]),re.length)throw new Error(`Unable to create the animation due to the following errors: ${re.join("\n")}`);nt.forEach((un,_n)=>{Object.keys(un).forEach(Xn=>{un[Xn]=this._driver.computeStyle(_n,Xn,B.l3)})});const Ft=q(We.map(un=>{const _n=nt.get(un.element);return this._buildPlayer(un,{},_n)}));return this._playersById[w]=Ft,Ft.onDestroy(()=>this.destroy(w)),this.players.push(Ft),Ft}destroy(w){const D=this._getPlayer(w);D.destroy(),delete this._playersById[w];const V=this.players.indexOf(D);V>=0&&this.players.splice(V,1)}_getPlayer(w){const D=this._playersById[w];if(!D)throw new Error(`Unable to find the timeline player referenced by ${w}`);return D}listen(w,D,V,re){const me=Q(D,"","","");return X(this._getPlayer(w),V,me,re),()=>{}}command(w,D,V,re){if("register"==V)return void this.register(w,re[0]);if("create"==V)return void this.create(w,D,re[0]||{});const me=this._getPlayer(w);switch(V){case"play":me.play();break;case"pause":me.pause();break;case"reset":me.reset();break;case"restart":me.restart();break;case"finish":me.finish();break;case"init":me.init();break;case"setPosition":me.setPosition(parseFloat(re[0]));break;case"destroy":this.destroy(w)}}}const er="ng-animate-queued",Di="ng-animate-disabled",ni=[],mi={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},ri={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},tr="__ng_removed";class Xi{constructor(w,D=""){this.namespaceId=D;const V=w&&w.hasOwnProperty("value");if(this.value=null!=(de=V?w.value:w)?de:null,V){const me=Ye(w);delete me.value,this.options=me}else this.options={};var de;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(w){const D=w.params;if(D){const V=this.options.params;Object.keys(D).forEach(re=>{null==V[re]&&(V[re]=D[re])})}}}const Ki="void",Hi=new Xi(Ki);class _i{constructor(w,D,V){this.id=w,this.hostElement=D,this._engine=V,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+w,lt(D,this._hostClassName)}listen(w,D,V,re){if(!this._triggers.hasOwnProperty(D))throw new Error(`Unable to listen on the animation trigger event "${V}" because the animation trigger "${D}" doesn't exist!`);if(null==V||0==V.length)throw new Error(`Unable to listen on the animation trigger "${D}" because the provided event is undefined!`);if("start"!=(de=V)&&"done"!=de)throw new Error(`The provided animation trigger event "${V}" for the animation trigger "${D}" is not supported!`);var de;const me=oe(this._elementListeners,w,[]),We={name:D,phase:V,callback:re};me.push(We);const nt=oe(this._engine.statesByElement,w,{});return nt.hasOwnProperty(D)||(lt(w,wr),lt(w,wr+"-"+D),nt[D]=Hi),()=>{this._engine.afterFlush(()=>{const vt=me.indexOf(We);vt>=0&&me.splice(vt,1),this._triggers[D]||delete nt[D]})}}register(w,D){return!this._triggers[w]&&(this._triggers[w]=D,!0)}_getTrigger(w){const D=this._triggers[w];if(!D)throw new Error(`The provided animation trigger "${w}" has not been registered!`);return D}trigger(w,D,V,re=!0){const me=this._getTrigger(D),We=new Ri(this.id,D,w);let nt=this._engine.statesByElement.get(w);nt||(lt(w,wr),lt(w,wr+"-"+D),this._engine.statesByElement.set(w,nt={}));let vt=nt[D];const Ft=new Xi(V,this.id);if(!(V&&V.hasOwnProperty("value"))&&vt&&Ft.absorbOptions(vt.options),nt[D]=Ft,vt||(vt=Hi),Ft.value!==Ki&&vt.value===Ft.value){if(!function(de,w){const D=Object.keys(de),V=Object.keys(w);if(D.length!=V.length)return!1;for(let re=0;re<D.length;re++){const me=D[re];if(!w.hasOwnProperty(me)||de[me]!==w[me])return!1}return!0}(vt.params,Ft.params)){const zn=[],Dr=me.matchStyles(vt.value,vt.params,zn),dr=me.matchStyles(Ft.value,Ft.params,zn);zn.length?this._engine.reportError(zn):this._engine.afterFlush(()=>{rn(w,Dr),Mt(w,dr)})}return}const Xn=oe(this._engine.playersByElement,w,[]);Xn.forEach(zn=>{zn.namespaceId==this.id&&zn.triggerName==D&&zn.queued&&zn.destroy()});let ir=me.matchTransition(vt.value,Ft.value,w,Ft.params),Ln=!1;if(!ir){if(!re)return;ir=me.fallbackTransition,Ln=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:w,triggerName:D,transition:ir,fromState:vt,toState:Ft,player:We,isFallbackTransition:Ln}),Ln||(lt(w,er),We.onStart(()=>{ot(w,er)})),We.onDone(()=>{let zn=this.players.indexOf(We);zn>=0&&this.players.splice(zn,1);const Dr=this._engine.playersByElement.get(w);if(Dr){let dr=Dr.indexOf(We);dr>=0&&Dr.splice(dr,1)}}),this.players.push(We),Xn.push(We),We}deregister(w){delete this._triggers[w],this._engine.statesByElement.forEach((D,V)=>{delete D[w]}),this._elementListeners.forEach((D,V)=>{this._elementListeners.set(V,D.filter(re=>re.name!=w))})}clearElementCache(w){this._engine.statesByElement.delete(w),this._elementListeners.delete(w);const D=this._engine.playersByElement.get(w);D&&(D.forEach(V=>V.destroy()),this._engine.playersByElement.delete(w))}_signalRemovalForInnerTriggers(w,D){const V=this._engine.driver.query(w,ar,!0);V.forEach(re=>{if(re[tr])return;const me=this._engine.fetchNamespacesByElement(re);me.size?me.forEach(We=>We.triggerLeaveAnimation(re,D,!1,!0)):this.clearElementCache(re)}),this._engine.afterFlushAnimationsDone(()=>V.forEach(re=>this.clearElementCache(re)))}triggerLeaveAnimation(w,D,V,re){const me=this._engine.statesByElement.get(w);if(me){const We=[];if(Object.keys(me).forEach(nt=>{if(this._triggers[nt]){const vt=this.trigger(w,nt,Ki,re);vt&&We.push(vt)}}),We.length)return this._engine.markElementAsRemoved(this.id,w,!0,D),V&&q(We).onDone(()=>this._engine.processLeaveNode(w)),!0}return!1}prepareLeaveAnimationListeners(w){const D=this._elementListeners.get(w),V=this._engine.statesByElement.get(w);if(D&&V){const re=new Set;D.forEach(me=>{const We=me.name;if(re.has(We))return;re.add(We);const vt=this._triggers[We].fallbackTransition,Ft=V[We]||Hi,un=new Xi(Ki),_n=new Ri(this.id,We,w);this._engine.totalQueuedPlayers++,this._queue.push({element:w,triggerName:We,transition:vt,fromState:Ft,toState:un,player:_n,isFallbackTransition:!0})})}}removeNode(w,D){const V=this._engine;if(w.childElementCount&&this._signalRemovalForInnerTriggers(w,D),this.triggerLeaveAnimation(w,D,!0))return;let re=!1;if(V.totalAnimations){const me=V.players.length?V.playersByQueriedElement.get(w):[];if(me&&me.length)re=!0;else{let We=w;for(;We=We.parentNode;)if(V.statesByElement.get(We)){re=!0;break}}}if(this.prepareLeaveAnimationListeners(w),re)V.markElementAsRemoved(this.id,w,!1,D);else{const me=w[tr];(!me||me===mi)&&(V.afterFlush(()=>this.clearElementCache(w)),V.destroyInnerAnimations(w),V._onRemovalComplete(w,D))}}insertNode(w,D){lt(w,this._hostClassName)}drainQueuedTransitions(w){const D=[];return this._queue.forEach(V=>{const re=V.player;if(re.destroyed)return;const me=V.element,We=this._elementListeners.get(me);We&&We.forEach(nt=>{if(nt.name==V.triggerName){const vt=Q(me,V.triggerName,V.fromState.value,V.toState.value);vt._data=w,X(V.player,nt.phase,vt,nt.callback)}}),re.markedForDestroy?this._engine.afterFlush(()=>{re.destroy()}):D.push(V)}),this._queue=[],D.sort((V,re)=>{const me=V.transition.ast.depCount,We=re.transition.ast.depCount;return 0==me||0==We?me-We:this._engine.driver.containsElement(V.element,re.element)?1:-1})}destroy(w){this.players.forEach(D=>D.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,w)}elementContainsData(w){let D=!1;return this._elementListeners.has(w)&&(D=!0),D=!!this._queue.find(V=>V.element===w)||D,D}}class qr{constructor(w,D,V){this.bodyNode=w,this.driver=D,this._normalizer=V,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(re,me)=>{}}_onRemovalComplete(w,D){this.onRemovalComplete(w,D)}get queuedPlayers(){const w=[];return this._namespaceList.forEach(D=>{D.players.forEach(V=>{V.queued&&w.push(V)})}),w}createNamespace(w,D){const V=new _i(w,D,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,D)?this._balanceNamespaceList(V,D):(this.newHostElements.set(D,V),this.collectEnterElement(D)),this._namespaceLookup[w]=V}_balanceNamespaceList(w,D){const V=this._namespaceList.length-1;if(V>=0){let re=!1;for(let me=V;me>=0;me--)if(this.driver.containsElement(this._namespaceList[me].hostElement,D)){this._namespaceList.splice(me+1,0,w),re=!0;break}re||this._namespaceList.splice(0,0,w)}else this._namespaceList.push(w);return this.namespacesByHostElement.set(D,w),w}register(w,D){let V=this._namespaceLookup[w];return V||(V=this.createNamespace(w,D)),V}registerTrigger(w,D,V){let re=this._namespaceLookup[w];re&&re.register(D,V)&&this.totalAnimations++}destroy(w,D){if(!w)return;const V=this._fetchNamespace(w);this.afterFlush(()=>{this.namespacesByHostElement.delete(V.hostElement),delete this._namespaceLookup[w];const re=this._namespaceList.indexOf(V);re>=0&&this._namespaceList.splice(re,1)}),this.afterFlushAnimationsDone(()=>V.destroy(D))}_fetchNamespace(w){return this._namespaceLookup[w]}fetchNamespacesByElement(w){const D=new Set,V=this.statesByElement.get(w);if(V){const re=Object.keys(V);for(let me=0;me<re.length;me++){const We=V[re[me]].namespaceId;if(We){const nt=this._fetchNamespace(We);nt&&D.add(nt)}}}return D}trigger(w,D,V,re){if(ps(D)){const me=this._fetchNamespace(w);if(me)return me.trigger(D,V,re),!0}return!1}insertNode(w,D,V,re){if(!ps(D))return;const me=D[tr];if(me&&me.setForRemoval){me.setForRemoval=!1,me.setForMove=!0;const We=this.collectedLeaveElements.indexOf(D);We>=0&&this.collectedLeaveElements.splice(We,1)}if(w){const We=this._fetchNamespace(w);We&&We.insertNode(D,V)}re&&this.collectEnterElement(D)}collectEnterElement(w){this.collectedEnterElements.push(w)}markElementAsDisabled(w,D){D?this.disabledNodes.has(w)||(this.disabledNodes.add(w),lt(w,Di)):this.disabledNodes.has(w)&&(this.disabledNodes.delete(w),ot(w,Di))}removeNode(w,D,V,re){if(ps(D)){const me=w?this._fetchNamespace(w):null;if(me?me.removeNode(D,re):this.markElementAsRemoved(w,D,!1,re),V){const We=this.namespacesByHostElement.get(D);We&&We.id!==w&&We.removeNode(D,re)}}else this._onRemovalComplete(D,re)}markElementAsRemoved(w,D,V,re){this.collectedLeaveElements.push(D),D[tr]={namespaceId:w,setForRemoval:re,hasAnimation:V,removedBeforeQueried:!1}}listen(w,D,V,re,me){return ps(D)?this._fetchNamespace(w).listen(D,V,re,me):()=>{}}_buildInstruction(w,D,V,re,me){return w.transition.build(this.driver,w.element,w.fromState.value,w.toState.value,V,re,w.fromState.options,w.toState.options,D,me)}destroyInnerAnimations(w){let D=this.driver.query(w,ar,!0);D.forEach(V=>this.destroyActiveAnimationsForElement(V)),0!=this.playersByQueriedElement.size&&(D=this.driver.query(w,Qn,!0),D.forEach(V=>this.finishActiveQueriedAnimationOnElement(V)))}destroyActiveAnimationsForElement(w){const D=this.playersByElement.get(w);D&&D.forEach(V=>{V.queued?V.markedForDestroy=!0:V.destroy()})}finishActiveQueriedAnimationOnElement(w){const D=this.playersByQueriedElement.get(w);D&&D.forEach(V=>V.finish())}whenRenderingDone(){return new Promise(w=>{if(this.players.length)return q(this.players).onDone(()=>w());w()})}processLeaveNode(w){var D;const V=w[tr];if(V&&V.setForRemoval){if(w[tr]=mi,V.namespaceId){this.destroyInnerAnimations(w);const re=this._fetchNamespace(V.namespaceId);re&&re.clearElementCache(w)}this._onRemovalComplete(w,V.setForRemoval)}(null===(D=w.classList)||void 0===D?void 0:D.contains(Di))&&this.markElementAsDisabled(w,!1),this.driver.query(w,".ng-animate-disabled",!0).forEach(re=>{this.markElementAsDisabled(re,!1)})}flush(w=-1){let D=[];if(this.newHostElements.size&&(this.newHostElements.forEach((V,re)=>this._balanceNamespaceList(V,re)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let V=0;V<this.collectedEnterElements.length;V++)lt(this.collectedEnterElements[V],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const V=[];try{D=this._flushAnimations(V,w)}finally{for(let re=0;re<V.length;re++)V[re]()}}else for(let V=0;V<this.collectedLeaveElements.length;V++)this.processLeaveNode(this.collectedLeaveElements[V]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(V=>V()),this._flushFns=[],this._whenQuietFns.length){const V=this._whenQuietFns;this._whenQuietFns=[],D.length?q(D).onDone(()=>{V.forEach(re=>re())}):V.forEach(re=>re())}}reportError(w){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${w.join("\n")}`)}_flushAnimations(w,D){const V=new ve,re=[],me=new Map,We=[],nt=new Map,vt=new Map,Ft=new Map,un=new Set;this.disabledNodes.forEach(An=>{un.add(An);const Bn=this.driver.query(An,".ng-animate-queued",!0);for(let xn=0;xn<Bn.length;xn++)un.add(Bn[xn])});const _n=this.bodyNode,Xn=Array.from(this.statesByElement.keys()),ir=Si(Xn,this.collectedEnterElements),Ln=new Map;let zn=0;ir.forEach((An,Bn)=>{const xn=Zt+zn++;Ln.set(Bn,xn),An.forEach(vn=>lt(vn,xn))});const Dr=[],dr=new Set,zr=new Set;for(let An=0;An<this.collectedLeaveElements.length;An++){const Bn=this.collectedLeaveElements[An],xn=Bn[tr];xn&&xn.setForRemoval&&(Dr.push(Bn),dr.add(Bn),xn.hasAnimation?this.driver.query(Bn,".ng-star-inserted",!0).forEach(vn=>dr.add(vn)):zr.add(Bn))}const $i=new Map,bi=Si(Xn,Array.from(dr));bi.forEach((An,Bn)=>{const xn=jt+zn++;$i.set(Bn,xn),An.forEach(vn=>lt(vn,xn))}),w.push(()=>{ir.forEach((An,Bn)=>{const xn=Ln.get(Bn);An.forEach(vn=>ot(vn,xn))}),bi.forEach((An,Bn)=>{const xn=$i.get(Bn);An.forEach(vn=>ot(vn,xn))}),Dr.forEach(An=>{this.processLeaveNode(An)})});const _s=[],Bs=[];for(let An=this._namespaceList.length-1;An>=0;An--)this._namespaceList[An].drainQueuedTransitions(D).forEach(xn=>{const vn=xn.player,vr=xn.element;if(_s.push(vn),this.collectedEnterElements.length){const ks=vr[tr];if(ks&&ks.setForMove)return void vn.destroy()}const qi=!_n||!this.driver.containsElement(_n,vr),Ps=$i.get(vr),pr=Ln.get(vr),Qr=this._buildInstruction(xn,V,pr,Ps,qi);if(Qr.errors&&Qr.errors.length)Bs.push(Qr);else{if(qi)return vn.onStart(()=>rn(vr,Qr.fromStyles)),vn.onDestroy(()=>Mt(vr,Qr.toStyles)),void re.push(vn);if(xn.isFallbackTransition)return vn.onStart(()=>rn(vr,Qr.fromStyles)),vn.onDestroy(()=>Mt(vr,Qr.toStyles)),void re.push(vn);Qr.timelines.forEach(ks=>ks.stretchStartingKeyframe=!0),V.append(vr,Qr.timelines),We.push({instruction:Qr,player:vn,element:vr}),Qr.queriedElements.forEach(ks=>oe(nt,ks,[]).push(vn)),Qr.preStyleProps.forEach((ks,Ai)=>{const ys=Object.keys(ks);if(ys.length){let vs=vt.get(Ai);vs||vt.set(Ai,vs=new Set),ys.forEach(Jo=>vs.add(Jo))}}),Qr.postStyleProps.forEach((ks,Ai)=>{const ys=Object.keys(ks);let vs=Ft.get(Ai);vs||Ft.set(Ai,vs=new Set),ys.forEach(Jo=>vs.add(Jo))})}});if(Bs.length){const An=[];Bs.forEach(Bn=>{An.push(`@${Bn.triggerName} has failed due to:\n`),Bn.errors.forEach(xn=>An.push(`- ${xn}\n`))}),_s.forEach(Bn=>Bn.destroy()),this.reportError(An)}const Li=new Map,ro=new Map;We.forEach(An=>{const Bn=An.element;V.has(Bn)&&(ro.set(Bn,Bn),this._beforeAnimationBuild(An.player.namespaceId,An.instruction,Li))}),re.forEach(An=>{const Bn=An.element;this._getPreviousPlayers(Bn,!1,An.namespaceId,An.triggerName,null).forEach(vn=>{oe(Li,Bn,[]).push(vn),vn.destroy()})});const Zs=Dr.filter(An=>Nr(An,vt,Ft)),ns=new Map;gs(ns,this.driver,zr,Ft,B.l3).forEach(An=>{Nr(An,vt,Ft)&&Zs.push(An)});const Rs=new Map;ir.forEach((An,Bn)=>{gs(Rs,this.driver,new Set(An),vt,B.k1)}),Zs.forEach(An=>{const Bn=ns.get(An),xn=Rs.get(An);ns.set(An,Object.assign(Object.assign({},Bn),xn))});const io=[],$o=[],so={};We.forEach(An=>{const{element:Bn,player:xn,instruction:vn}=An;if(V.has(Bn)){if(un.has(Bn))return xn.onDestroy(()=>Mt(Bn,vn.toStyles)),xn.disabled=!0,xn.overrideTotalTime(vn.totalTime),void re.push(xn);let vr=so;if(ro.size>1){let Ps=Bn;const pr=[];for(;Ps=Ps.parentNode;){const Qr=ro.get(Ps);if(Qr){vr=Qr;break}pr.push(Ps)}pr.forEach(Qr=>ro.set(Qr,vr))}const qi=this._buildAnimation(xn.namespaceId,vn,Li,me,Rs,ns);if(xn.setRealPlayer(qi),vr===so)io.push(xn);else{const Ps=this.playersByElement.get(vr);Ps&&Ps.length&&(xn.parentPlayer=q(Ps)),re.push(xn)}}else rn(Bn,vn.fromStyles),xn.onDestroy(()=>Mt(Bn,vn.toStyles)),$o.push(xn),un.has(Bn)&&re.push(xn)}),$o.forEach(An=>{const Bn=me.get(An.element);if(Bn&&Bn.length){const xn=q(Bn);An.setRealPlayer(xn)}}),re.forEach(An=>{An.parentPlayer?An.syncPlayerEvents(An.parentPlayer):An.destroy()});for(let An=0;An<Dr.length;An++){const Bn=Dr[An],xn=Bn[tr];if(ot(Bn,jt),xn&&xn.hasAnimation)continue;let vn=[];if(nt.size){let qi=nt.get(Bn);qi&&qi.length&&vn.push(...qi);let Ps=this.driver.query(Bn,Qn,!0);for(let pr=0;pr<Ps.length;pr++){let Qr=nt.get(Ps[pr]);Qr&&Qr.length&&vn.push(...Qr)}}const vr=vn.filter(qi=>!qi.destroyed);vr.length?It(this,Bn,vr):this.processLeaveNode(Bn)}return Dr.length=0,io.forEach(An=>{this.players.push(An),An.onDone(()=>{An.destroy();const Bn=this.players.indexOf(An);this.players.splice(Bn,1)}),An.play()}),io}elementContainsData(w,D){let V=!1;const re=D[tr];return re&&re.setForRemoval&&(V=!0),this.playersByElement.has(D)&&(V=!0),this.playersByQueriedElement.has(D)&&(V=!0),this.statesByElement.has(D)&&(V=!0),this._fetchNamespace(w).elementContainsData(D)||V}afterFlush(w){this._flushFns.push(w)}afterFlushAnimationsDone(w){this._whenQuietFns.push(w)}_getPreviousPlayers(w,D,V,re,me){let We=[];if(D){const nt=this.playersByQueriedElement.get(w);nt&&(We=nt)}else{const nt=this.playersByElement.get(w);if(nt){const vt=!me||me==Ki;nt.forEach(Ft=>{Ft.queued||!vt&&Ft.triggerName!=re||We.push(Ft)})}}return(V||re)&&(We=We.filter(nt=>!(V&&V!=nt.namespaceId||re&&re!=nt.triggerName))),We}_beforeAnimationBuild(w,D,V){const me=D.element,We=D.isRemovalTransition?void 0:w,nt=D.isRemovalTransition?void 0:D.triggerName;for(const vt of D.timelines){const Ft=vt.element,un=Ft!==me,_n=oe(V,Ft,[]);this._getPreviousPlayers(Ft,un,We,nt,D.toState).forEach(ir=>{const Ln=ir.getRealPlayer();Ln.beforeDestroy&&Ln.beforeDestroy(),ir.destroy(),_n.push(ir)})}rn(me,D.fromStyles)}_buildAnimation(w,D,V,re,me,We){const nt=D.triggerName,vt=D.element,Ft=[],un=new Set,_n=new Set,Xn=D.timelines.map(Ln=>{const zn=Ln.element;un.add(zn);const Dr=zn[tr];if(Dr&&Dr.removedBeforeQueried)return new B.ZN(Ln.duration,Ln.delay);const dr=zn!==vt,zr=function(de){const w=[];return cn(de,w),w}((V.get(zn)||ni).map(Li=>Li.getRealPlayer())).filter(Li=>!!Li.element&&Li.element===zn),$i=me.get(zn),bi=We.get(zn),_s=se(0,this._normalizer,0,Ln.keyframes,$i,bi),Bs=this._buildPlayer(Ln,_s,zr);if(Ln.subTimeline&&re&&_n.add(zn),dr){const Li=new Ri(w,nt,zn);Li.setRealPlayer(Bs),Ft.push(Li)}return Bs});Ft.forEach(Ln=>{oe(this.playersByQueriedElement,Ln.element,[]).push(Ln),Ln.onDone(()=>function(de,w,D){let V;if(de instanceof Map){if(V=de.get(w),V){if(V.length){const re=V.indexOf(D);V.splice(re,1)}0==V.length&&de.delete(w)}}else if(V=de[w],V){if(V.length){const re=V.indexOf(D);V.splice(re,1)}0==V.length&&delete de[w]}return V}(this.playersByQueriedElement,Ln.element,Ln))}),un.forEach(Ln=>lt(Ln,Nn));const ir=q(Xn);return ir.onDestroy(()=>{un.forEach(Ln=>ot(Ln,Nn)),Mt(vt,D.toStyles)}),_n.forEach(Ln=>{oe(re,Ln,[]).push(ir)}),ir}_buildPlayer(w,D,V){return D.length>0?this.driver.animate(w.element,D,w.duration,w.delay,w.easing,V):new B.ZN(w.duration,w.delay)}}class Ri{constructor(w,D,V){this.namespaceId=w,this.triggerName=D,this.element=V,this._player=new B.ZN,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(w){this._containsRealPlayer||(this._player=w,Object.keys(this._queuedCallbacks).forEach(D=>{this._queuedCallbacks[D].forEach(V=>X(w,D,void 0,V))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(w.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(w){this.totalTime=w}syncPlayerEvents(w){const D=this._player;D.triggerCallback&&w.onStart(()=>D.triggerCallback("start")),w.onDone(()=>this.finish()),w.onDestroy(()=>this.destroy())}_queueEvent(w,D){oe(this._queuedCallbacks,w,[]).push(D)}onDone(w){this.queued&&this._queueEvent("done",w),this._player.onDone(w)}onStart(w){this.queued&&this._queueEvent("start",w),this._player.onStart(w)}onDestroy(w){this.queued&&this._queueEvent("destroy",w),this._player.onDestroy(w)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(w){this.queued||this._player.setPosition(w)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(w){const D=this._player;D.triggerCallback&&D.triggerCallback(w)}}function ps(de){return de&&1===de.nodeType}function yi(de,w){const D=de.style.display;return de.style.display=null!=w?w:"none",D}function gs(de,w,D,V,re){const me=[];D.forEach(vt=>me.push(yi(vt)));const We=[];V.forEach((vt,Ft)=>{const un={};vt.forEach(_n=>{const Xn=un[_n]=w.computeStyle(Ft,_n,re);(!Xn||0==Xn.length)&&(Ft[tr]=ri,We.push(Ft))}),de.set(Ft,un)});let nt=0;return D.forEach(vt=>yi(vt,me[nt++])),We}function Si(de,w){const D=new Map;if(de.forEach(nt=>D.set(nt,[])),0==w.length)return D;const re=new Set(w),me=new Map;function We(nt){if(!nt)return 1;let vt=me.get(nt);if(vt)return vt;const Ft=nt.parentNode;return vt=D.has(Ft)?Ft:re.has(Ft)?1:We(Ft),me.set(nt,vt),vt}return w.forEach(nt=>{const vt=We(nt);1!==vt&&D.get(vt).push(nt)}),D}function lt(de,w){var D;null===(D=de.classList)||void 0===D||D.add(w)}function ot(de,w){var D;null===(D=de.classList)||void 0===D||D.remove(w)}function It(de,w,D){q(D).onDone(()=>de.processLeaveNode(w))}function cn(de,w){for(let D=0;D<de.length;D++){const V=de[D];V instanceof B.ZE?cn(V.players,w):w.push(V)}}function Nr(de,w,D){const V=D.get(de);if(!V)return!1;let re=w.get(de);return re?V.forEach(me=>re.add(me)):w.set(de,V),D.delete(de),!0}class Pr{constructor(w,D,V){this.bodyNode=w,this._driver=D,this._normalizer=V,this._triggerCache={},this.onRemovalComplete=(re,me)=>{},this._transitionEngine=new qr(w,D,V),this._timelineEngine=new Cs(w,D,V),this._transitionEngine.onRemovalComplete=(re,me)=>this.onRemovalComplete(re,me)}registerTrigger(w,D,V,re,me){const We=w+"-"+re;let nt=this._triggerCache[We];if(!nt){const vt=[],Ft=Jn(this._driver,me,vt);if(vt.length)throw new Error(`The animation trigger "${re}" has failed to build due to the following errors:\n - ${vt.join("\n - ")}`);nt=function(de,w,D){return new Rr(de,w,D)}(re,Ft,this._normalizer),this._triggerCache[We]=nt}this._transitionEngine.registerTrigger(D,re,nt)}register(w,D){this._transitionEngine.register(w,D)}destroy(w,D){this._transitionEngine.destroy(w,D)}onInsert(w,D,V,re){this._transitionEngine.insertNode(w,D,V,re)}onRemove(w,D,V,re){this._transitionEngine.removeNode(w,D,re||!1,V)}disableAnimations(w,D){this._transitionEngine.markElementAsDisabled(w,D)}process(w,D,V,re){if("@"==V.charAt(0)){const[me,We]=ae(V);this._timelineEngine.command(me,D,We,re)}else this._transitionEngine.trigger(w,D,V,re)}listen(w,D,V,re,me){if("@"==V.charAt(0)){const[We,nt]=ae(V);return this._timelineEngine.listen(We,D,nt,me)}return this._transitionEngine.listen(w,D,V,re,me)}flush(w=-1){this._transitionEngine.flush(w)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function Cr(de,w){let D=null,V=null;return Array.isArray(w)&&w.length?(D=Is(w[0]),w.length>1&&(V=Is(w[w.length-1]))):w&&(D=Is(w)),D||V?new zs(de,D,V):null}let zs=(()=>{class de{constructor(D,V,re){this._element=D,this._startStyles=V,this._endStyles=re,this._state=0;let me=de.initialStylesByElement.get(D);me||de.initialStylesByElement.set(D,me={}),this._initialStyles=me}start(){this._state<1&&(this._startStyles&&Mt(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Mt(this._element,this._initialStyles),this._endStyles&&(Mt(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(de.initialStylesByElement.delete(this._element),this._startStyles&&(rn(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(rn(this._element,this._endStyles),this._endStyles=null),Mt(this._element,this._initialStyles),this._state=3)}}return de.initialStylesByElement=new WeakMap,de})();function Is(de){let w=null;const D=Object.keys(de);for(let V=0;V<D.length;V++){const re=D[V];yo(re)&&(w=w||{},w[re]=de[re])}return w}function yo(de){return"display"===de||"position"===de}const Gi="animation",Ks="animationend";class Ts{constructor(w,D,V,re,me,We,nt){this._element=w,this._name=D,this._duration=V,this._delay=re,this._easing=me,this._fillMode=We,this._onDoneFn=nt,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=vt=>this._handleCallback(vt)}apply(){(function(de,w){const D=Ss(de,"").trim();let V=0;D.length&&(function(de,w){let D=0;for(let V=0;V<de.length;V++)","===de.charAt(V)&&D++;return D}(D)+1,w=`${D}, ${w}`),us(de,"",w)})(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),Zi(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){vo(this._element,this._name,"paused")}resume(){vo(this._element,this._name,"running")}setPosition(w){const D=ts(this._element,this._name);this._position=w*this._duration,us(this._element,"Delay",`-${this._position}ms`,D)}getPosition(){return this._position}_handleCallback(w){const D=w._ngTestManualTimestamp||Date.now(),V=1e3*parseFloat(w.elapsedTime.toFixed(3));w.animationName==this._name&&Math.max(D-this._startTime,0)>=this._delay&&V>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),Zi(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(de,w){const V=Ss(de,"").split(","),re=Yi(V,w);re>=0&&(V.splice(re,1),us(de,"",V.join(",")))}(this._element,this._name))}}function vo(de,w,D){us(de,"PlayState",D,ts(de,w))}function ts(de,w){const D=Ss(de,"");return D.indexOf(",")>0?Yi(D.split(","),w):Yi([D],w)}function Yi(de,w){for(let D=0;D<de.length;D++)if(de[D].indexOf(w)>=0)return D;return-1}function Zi(de,w,D){D?de.removeEventListener(Ks,w):de.addEventListener(Ks,w)}function us(de,w,D,V){const re=Gi+w;if(null!=V){const me=de.style[re];if(me.length){const We=me.split(",");We[V]=D,D=We.join(",")}}de.style[re]=D}function Ss(de,w){return de.style[Gi+w]||""}class Do{constructor(w,D,V,re,me,We,nt,vt){this.element=w,this.keyframes=D,this.animationName=V,this._duration=re,this._delay=me,this._finalStyles=nt,this._specialStyles=vt,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=We||"linear",this.totalTime=re+me,this._buildStyler()}onStart(w){this._onStartFns.push(w)}onDone(w){this._onDoneFns.push(w)}onDestroy(w){this._onDestroyFns.push(w)}destroy(){this.init(),!(this._state>=4)&&(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(w=>w()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(w=>w()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(w=>w()),this._onStartFns=[]}finish(){this.init(),!(this._state>=3)&&(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(w){this._styler.setPosition(w)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new Ts(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(w){const D="start"==w?this._onStartFns:this._onDoneFns;D.forEach(V=>V()),D.length=0}beforeDestroy(){this.init();const w={};if(this.hasStarted()){const D=this._state>=3;Object.keys(this._finalStyles).forEach(V=>{"offset"!=V&&(w[V]=D?this._finalStyles[V]:J(this.element,V))})}this.currentSnapshot=w}}class ki extends B.ZN{constructor(w,D){super(),this.element=w,this._startingStyles={},this.__initialized=!1,this._styles=we(D)}init(){this.__initialized||!this._startingStyles||(this.__initialized=!0,Object.keys(this._styles).forEach(w=>{this._startingStyles[w]=this.element.style[w]}),super.init())}play(){!this._startingStyles||(this.init(),Object.keys(this._styles).forEach(w=>this.element.style.setProperty(w,this._styles[w])),super.play())}destroy(){!this._startingStyles||(Object.keys(this._startingStyles).forEach(w=>{const D=this._startingStyles[w];D?this.element.style.setProperty(w,D):this.element.style.removeProperty(w)}),this._startingStyles=null,super.destroy())}}class Ms{constructor(){this._count=0}validateStyleProperty(w){return He(w)}matchesElement(w,D){return!1}containsElement(w,D){return rt(w,D)}query(w,D,V){return ft(w,D,V)}computeStyle(w,D,V){return window.getComputedStyle(w)[D]}buildKeyframeElement(w,D,V){V=V.map(nt=>we(nt));let re=`@keyframes ${D} {\n`,me="";V.forEach(nt=>{me=" ";const vt=parseFloat(nt.offset);re+=`${me}${100*vt}% {\n`,me+=" ",Object.keys(nt).forEach(Ft=>{const un=nt[Ft];switch(Ft){case"offset":return;case"easing":return void(un&&(re+=`${me}animation-timing-function: ${un};\n`));default:return void(re+=`${me}${Ft}: ${un};\n`)}}),re+=`${me}}\n`}),re+="}\n";const We=document.createElement("style");return We.textContent=re,We}animate(w,D,V,re,me,We=[],nt){const vt=We.filter(Dr=>Dr instanceof Do),Ft={};hr(V,re)&&vt.forEach(Dr=>{let dr=Dr.currentSnapshot;Object.keys(dr).forEach(zr=>Ft[zr]=dr[zr])});const un=function(de){let w={};return de&&(Array.isArray(de)?de:[de]).forEach(V=>{Object.keys(V).forEach(re=>{"offset"==re||"easing"==re||(w[re]=V[re])})}),w}(D=Re(w,D,Ft));if(0==V)return new ki(w,un);const _n="gen_css_kf_"+this._count++,Xn=this.buildKeyframeElement(w,_n,D);(function(de){var w;const D=null===(w=de.getRootNode)||void 0===w?void 0:w.call(de);return"undefined"!=typeof ShadowRoot&&D instanceof ShadowRoot?D:document.head})(w).appendChild(Xn);const Ln=Cr(w,D),zn=new Do(w,D,_n,V,re,me,un,Ln);return zn.onDestroy(()=>{var de;(de=Xn).parentNode.removeChild(de)}),zn}}class xs{constructor(w,D,V,re){this.element=w,this.keyframes=D,this.options=V,this._specialStyles=re,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=V.duration,this._delay=V.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(w=>w()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const w=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,w,this.options),this._finalKeyframe=w.length?w[w.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(w,D,V){return w.animate(D,V)}onStart(w){this._onStartFns.push(w)}onDone(w){this._onDoneFns.push(w)}onDestroy(w){this._onDestroyFns.push(w)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(w=>w()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(w=>w()),this._onDestroyFns=[])}setPosition(w){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=w*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const w={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(D=>{"offset"!=D&&(w[D]=this._finished?this._finalKeyframe[D]:J(this.element,D))}),this.currentSnapshot=w}triggerCallback(w){const D="start"==w?this._onStartFns:this._onDoneFns;D.forEach(V=>V()),D.length=0}}class G{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(y().toString()),this._cssKeyframesDriver=new Ms}validateStyleProperty(w){return He(w)}matchesElement(w,D){return!1}containsElement(w,D){return rt(w,D)}query(w,D,V){return ft(w,D,V)}computeStyle(w,D,V){return window.getComputedStyle(w)[D]}overrideWebAnimationsSupport(w){this._isNativeImpl=w}animate(w,D,V,re,me,We=[],nt){if(!nt&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(w,D,V,re,me,We);const un={duration:V,delay:re,fill:0==re?"both":"forwards"};me&&(un.easing=me);const _n={},Xn=We.filter(Ln=>Ln instanceof xs);hr(V,re)&&Xn.forEach(Ln=>{let zn=Ln.currentSnapshot;Object.keys(zn).forEach(Dr=>_n[Dr]=zn[Dr])});const ir=Cr(w,D=Re(w,D=D.map(Ln=>Ee(Ln,!1)),_n));return new xs(w,D,un,ir)}}function y(){return ne()&&Element.prototype.animate||{}}var C=x(9808);let H=(()=>{class de extends B._j{constructor(D,V){super(),this._nextAnimationId=0,this._renderer=D.createRenderer(V.body,{id:"0",encapsulation:g.ifc.None,styles:[],data:{animation:[]}})}build(D){const V=this._nextAnimationId.toString();this._nextAnimationId++;const re=Array.isArray(D)?(0,B.vP)(D):D;return hn(this._renderer,null,V,"register",[re]),new je(V,this._renderer)}}return de.\u0275fac=function(D){return new(D||de)(g.LFG(g.FYo),g.LFG(C.K0))},de.\u0275prov=g.Yz7({token:de,factory:de.\u0275fac}),de})();class je extends B.LC{constructor(w,D){super(),this._id=w,this._renderer=D}create(w,D){return new wt(this._id,w,D||{},this._renderer)}}class wt{constructor(w,D,V,re){this.id=w,this.element=D,this._renderer=re,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",V)}_listen(w,D){return this._renderer.listen(this.element,`@@${this.id}:${w}`,D)}_command(w,...D){return hn(this._renderer,this.element,this.id,w,D)}onDone(w){this._listen("done",w)}onStart(w){this._listen("start",w)}onDestroy(w){this._listen("destroy",w)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(w){this._command("setPosition",w)}getPosition(){var w,D;return null!==(D=null===(w=this._renderer.engine.players[+this.id])||void 0===w?void 0:w.getPosition())&&void 0!==D?D:0}}function hn(de,w,D,V,re){return de.setProperty(w,`@@${D}:${V}`,re)}const Gn="@.disabled";let Sn=(()=>{class de{constructor(D,V,re){this.delegate=D,this.engine=V,this._zone=re,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),V.onRemovalComplete=(me,We)=>{const nt=null==We?void 0:We.parentNode(me);nt&&We.removeChild(nt,me)}}createRenderer(D,V){const me=this.delegate.createRenderer(D,V);if(!(D&&V&&V.data&&V.data.animation)){let un=this._rendererCache.get(me);return un||(un=new rr("",me,this.engine),this._rendererCache.set(me,un)),un}const We=V.id,nt=V.id+"-"+this._currentId;this._currentId++,this.engine.register(nt,D);const vt=un=>{Array.isArray(un)?un.forEach(vt):this.engine.registerTrigger(We,nt,D,un.name,un)};return V.data.animation.forEach(vt),new Wr(this,nt,me,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(D,V,re){D>=0&&D<this._microtaskId?this._zone.run(()=>V(re)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(me=>{const[We,nt]=me;We(nt)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([V,re]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return de.\u0275fac=function(D){return new(D||de)(g.LFG(g.FYo),g.LFG(Pr),g.LFG(g.R0b))},de.\u0275prov=g.Yz7({token:de,factory:de.\u0275fac}),de})();class rr{constructor(w,D,V){this.namespaceId=w,this.delegate=D,this.engine=V,this.destroyNode=this.delegate.destroyNode?re=>D.destroyNode(re):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(w,D){return this.delegate.createElement(w,D)}createComment(w){return this.delegate.createComment(w)}createText(w){return this.delegate.createText(w)}appendChild(w,D){this.delegate.appendChild(w,D),this.engine.onInsert(this.namespaceId,D,w,!1)}insertBefore(w,D,V,re=!0){this.delegate.insertBefore(w,D,V),this.engine.onInsert(this.namespaceId,D,w,re)}removeChild(w,D,V){this.engine.onRemove(this.namespaceId,D,this.delegate,V)}selectRootElement(w,D){return this.delegate.selectRootElement(w,D)}parentNode(w){return this.delegate.parentNode(w)}nextSibling(w){return this.delegate.nextSibling(w)}setAttribute(w,D,V,re){this.delegate.setAttribute(w,D,V,re)}removeAttribute(w,D,V){this.delegate.removeAttribute(w,D,V)}addClass(w,D){this.delegate.addClass(w,D)}removeClass(w,D){this.delegate.removeClass(w,D)}setStyle(w,D,V,re){this.delegate.setStyle(w,D,V,re)}removeStyle(w,D,V){this.delegate.removeStyle(w,D,V)}setProperty(w,D,V){"@"==D.charAt(0)&&D==Gn?this.disableAnimations(w,!!V):this.delegate.setProperty(w,D,V)}setValue(w,D){this.delegate.setValue(w,D)}listen(w,D,V){return this.delegate.listen(w,D,V)}disableAnimations(w,D){this.engine.disableAnimations(w,D)}}class Wr extends rr{constructor(w,D,V,re){super(D,V,re),this.factory=w,this.namespaceId=D}setProperty(w,D,V){"@"==D.charAt(0)?"."==D.charAt(1)&&D==Gn?this.disableAnimations(w,V=void 0===V||!!V):this.engine.process(this.namespaceId,w,D.substr(1),V):this.delegate.setProperty(w,D,V)}listen(w,D,V){if("@"==D.charAt(0)){const re=function(de){switch(de){case"body":return document.body;case"document":return document;case"window":return window;default:return de}}(w);let me=D.substr(1),We="";return"@"!=me.charAt(0)&&([me,We]=function(de){const w=de.indexOf(".");return[de.substring(0,w),de.substr(w+1)]}(me)),this.engine.listen(this.namespaceId,re,me,We,nt=>{this.factory.scheduleListenerCallback(nt._data||-1,V,nt)})}return this.delegate.listen(w,D,V)}}let Tn=(()=>{class de extends Pr{constructor(D,V,re){super(D.body,V,re)}ngOnDestroy(){this.flush()}}return de.\u0275fac=function(D){return new(D||de)(g.LFG(C.K0),g.LFG(qe),g.LFG(si))},de.\u0275prov=g.Yz7({token:de,factory:de.\u0275fac}),de})();const Ei=new g.OlP("AnimationModuleType"),To=[{provide:B._j,useClass:H},{provide:si,useFactory:function(){return new Mr}},{provide:Pr,useClass:Tn},{provide:g.FYo,useFactory:function(de,w,D){return new Sn(de,w,D)},deps:[E.se,Pr,g.R0b]}],ms=[{provide:qe,useFactory:function(){return"function"==typeof y()?new G:new Ms}},{provide:Ei,useValue:"BrowserAnimations"},...To],Za=[{provide:qe,useClass:Pe},{provide:Ei,useValue:"NoopAnimations"},...To];let en=(()=>{class de{static withConfig(D){return{ngModule:de,providers:D.disableAnimations?Za:ms}}}return de.\u0275fac=function(D){return new(D||de)},de.\u0275mod=g.oAB({type:de}),de.\u0275inj=g.cJS({providers:ms,imports:[E.b2]}),de})()},2313:($t,$e,x)=>{"use strict";x.d($e,{b2:()=>Rt,H7:()=>Ce,q6:()=>bn,se:()=>tn});var g=x(9808),E=x(5e3);class B extends g.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class ne extends B{static makeCurrent(){(0,g.HT)(new ne)}onAndCancel(Ue,Se,ut){return Ue.addEventListener(Se,ut,!1),()=>{Ue.removeEventListener(Se,ut,!1)}}dispatchEvent(Ue,Se){Ue.dispatchEvent(Se)}remove(Ue){Ue.parentNode&&Ue.parentNode.removeChild(Ue)}createElement(Ue,Se){return(Se=Se||this.getDefaultDocument()).createElement(Ue)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(Ue){return Ue.nodeType===Node.ELEMENT_NODE}isShadowRoot(Ue){return Ue instanceof DocumentFragment}getGlobalEventTarget(Ue,Se){return"window"===Se?window:"document"===Se?Ue:"body"===Se?Ue.body:null}getBaseHref(Ue){const Se=(he=he||document.querySelector("base"),he?he.getAttribute("href"):null);return null==Se?null:function(ze){se=se||document.createElement("a"),se.setAttribute("href",ze);const Ue=se.pathname;return"/"===Ue.charAt(0)?Ue:`/${Ue}`}(Se)}resetBaseElement(){he=null}getUserAgent(){return window.navigator.userAgent}getCookie(Ue){return(0,g.Mx)(document.cookie,Ue)}}let se,he=null;const ie=new E.OlP("TRANSITION_ID"),oe=[{provide:E.ip1,useFactory:function(ze,Ue,Se){return()=>{Se.get(E.CZH).donePromise.then(()=>{const ut=(0,g.q)(),St=Ue.querySelectorAll(`style[ng-transition="${ze}"]`);for(let Dn=0;Dn<St.length;Dn++)ut.remove(St[Dn])})}},deps:[ie,g.K0,E.zs3],multi:!0}];class ae{static init(){(0,E.VLi)(new ae)}addToWindow(Ue){E.dqk.getAngularTestability=(ut,St=!0)=>{const Dn=Ue.findTestabilityInTree(ut,St);if(null==Dn)throw new Error("Could not find testability for element.");return Dn},E.dqk.getAllAngularTestabilities=()=>Ue.getAllTestabilities(),E.dqk.getAllAngularRootElements=()=>Ue.getAllRootElements(),E.dqk.frameworkStabilizers||(E.dqk.frameworkStabilizers=[]),E.dqk.frameworkStabilizers.push(ut=>{const St=E.dqk.getAllAngularTestabilities();let Dn=St.length,Wn=!1;const fr=function(Zr){Wn=Wn||Zr,Dn--,0==Dn&&ut(Wn)};St.forEach(function(Zr){Zr.whenStable(fr)})})}findTestabilityInTree(Ue,Se,ut){if(null==Se)return null;const St=Ue.getTestability(Se);return null!=St?St:ut?(0,g.q)().isShadowRoot(Se)?this.findTestabilityInTree(Ue,Se.host,!0):this.findTestabilityInTree(Ue,Se.parentElement,!0):null}}let Me=(()=>{class ze{build(){return new XMLHttpRequest}}return ze.\u0275fac=function(Se){return new(Se||ze)},ze.\u0275prov=E.Yz7({token:ze,factory:ze.\u0275fac}),ze})();const Ve=new E.OlP("EventManagerPlugins");let xe=(()=>{class ze{constructor(Se,ut){this._zone=ut,this._eventNameToPlugin=new Map,Se.forEach(St=>St.manager=this),this._plugins=Se.slice().reverse()}addEventListener(Se,ut,St){return this._findPluginFor(ut).addEventListener(Se,ut,St)}addGlobalEventListener(Se,ut,St){return this._findPluginFor(ut).addGlobalEventListener(Se,ut,St)}getZone(){return this._zone}_findPluginFor(Se){const ut=this._eventNameToPlugin.get(Se);if(ut)return ut;const St=this._plugins;for(let Dn=0;Dn<St.length;Dn++){const Wn=St[Dn];if(Wn.supports(Se))return this._eventNameToPlugin.set(Se,Wn),Wn}throw new Error(`No event manager plugin found for event ${Se}`)}}return ze.\u0275fac=function(Se){return new(Se||ze)(E.LFG(Ve),E.LFG(E.R0b))},ze.\u0275prov=E.Yz7({token:ze,factory:ze.\u0275fac}),ze})();class Oe{constructor(Ue){this._doc=Ue}addGlobalEventListener(Ue,Se,ut){const St=(0,g.q)().getGlobalEventTarget(this._doc,Ue);if(!St)throw new Error(`Unsupported event target ${St} for event ${Se}`);return this.addEventListener(St,Se,ut)}}let ee=(()=>{class ze{constructor(){this._stylesSet=new Set}addStyles(Se){const ut=new Set;Se.forEach(St=>{this._stylesSet.has(St)||(this._stylesSet.add(St),ut.add(St))}),this.onStylesAdded(ut)}onStylesAdded(Se){}getAllStyles(){return Array.from(this._stylesSet)}}return ze.\u0275fac=function(Se){return new(Se||ze)},ze.\u0275prov=E.Yz7({token:ze,factory:ze.\u0275fac}),ze})(),Te=(()=>{class ze extends ee{constructor(Se){super(),this._doc=Se,this._hostNodes=new Map,this._hostNodes.set(Se.head,[])}_addStylesToHost(Se,ut,St){Se.forEach(Dn=>{const Wn=this._doc.createElement("style");Wn.textContent=Dn,St.push(ut.appendChild(Wn))})}addHost(Se){const ut=[];this._addStylesToHost(this._stylesSet,Se,ut),this._hostNodes.set(Se,ut)}removeHost(Se){const ut=this._hostNodes.get(Se);ut&&ut.forEach(He),this._hostNodes.delete(Se)}onStylesAdded(Se){this._hostNodes.forEach((ut,St)=>{this._addStylesToHost(Se,St,ut)})}ngOnDestroy(){this._hostNodes.forEach(Se=>Se.forEach(He))}}return ze.\u0275fac=function(Se){return new(Se||ze)(E.LFG(g.K0))},ze.\u0275prov=E.Yz7({token:ze,factory:ze.\u0275fac}),ze})();function He(ze){(0,g.q)().remove(ze)}const yt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},rt=/%COMP%/g;function Ut(ze,Ue,Se){for(let ut=0;ut<Ue.length;ut++){let St=Ue[ut];Array.isArray(St)?Ut(ze,St,Se):(St=St.replace(rt,ze),Se.push(St))}return Se}function Zt(ze){return Ue=>{if("__ngUnwrap__"===Ue)return ze;!1===ze(Ue)&&(Ue.preventDefault(),Ue.returnValue=!1)}}let tn=(()=>{class ze{constructor(Se,ut,St){this.eventManager=Se,this.sharedStylesHost=ut,this.appId=St,this.rendererByCompId=new Map,this.defaultRenderer=new qt(Se)}createRenderer(Se,ut){if(!Se||!ut)return this.defaultRenderer;switch(ut.encapsulation){case E.ifc.Emulated:{let St=this.rendererByCompId.get(ut.id);return St||(St=new Nn(this.eventManager,this.sharedStylesHost,ut,this.appId),this.rendererByCompId.set(ut.id,St)),St.applyToHost(Se),St}case 1:case E.ifc.ShadowDom:return new Qn(this.eventManager,this.sharedStylesHost,Se,ut);default:if(!this.rendererByCompId.has(ut.id)){const St=Ut(ut.id,ut.styles,[]);this.sharedStylesHost.addStyles(St),this.rendererByCompId.set(ut.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return ze.\u0275fac=function(Se){return new(Se||ze)(E.LFG(xe),E.LFG(Te),E.LFG(E.AFp))},ze.\u0275prov=E.Yz7({token:ze,factory:ze.\u0275fac}),ze})();class qt{constructor(Ue){this.eventManager=Ue,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(Ue,Se){return Se?document.createElementNS(yt[Se]||Se,Ue):document.createElement(Ue)}createComment(Ue){return document.createComment(Ue)}createText(Ue){return document.createTextNode(Ue)}appendChild(Ue,Se){Ue.appendChild(Se)}insertBefore(Ue,Se,ut){Ue&&Ue.insertBefore(Se,ut)}removeChild(Ue,Se){Ue&&Ue.removeChild(Se)}selectRootElement(Ue,Se){let ut="string"==typeof Ue?document.querySelector(Ue):Ue;if(!ut)throw new Error(`The selector "${Ue}" did not match any elements`);return Se||(ut.textContent=""),ut}parentNode(Ue){return Ue.parentNode}nextSibling(Ue){return Ue.nextSibling}setAttribute(Ue,Se,ut,St){if(St){Se=St+":"+Se;const Dn=yt[St];Dn?Ue.setAttributeNS(Dn,Se,ut):Ue.setAttribute(Se,ut)}else Ue.setAttribute(Se,ut)}removeAttribute(Ue,Se,ut){if(ut){const St=yt[ut];St?Ue.removeAttributeNS(St,Se):Ue.removeAttribute(`${ut}:${Se}`)}else Ue.removeAttribute(Se)}addClass(Ue,Se){Ue.classList.add(Se)}removeClass(Ue,Se){Ue.classList.remove(Se)}setStyle(Ue,Se,ut,St){St&(E.JOm.DashCase|E.JOm.Important)?Ue.style.setProperty(Se,ut,St&E.JOm.Important?"important":""):Ue.style[Se]=ut}removeStyle(Ue,Se,ut){ut&E.JOm.DashCase?Ue.style.removeProperty(Se):Ue.style[Se]=""}setProperty(Ue,Se,ut){Ue[Se]=ut}setValue(Ue,Se){Ue.nodeValue=Se}listen(Ue,Se,ut){return"string"==typeof Ue?this.eventManager.addGlobalEventListener(Ue,Se,Zt(ut)):this.eventManager.addEventListener(Ue,Se,Zt(ut))}}class Nn extends qt{constructor(Ue,Se,ut,St){super(Ue),this.component=ut;const Dn=Ut(St+"-"+ut.id,ut.styles,[]);Se.addStyles(Dn),this.contentAttr="_ngcontent-%COMP%".replace(rt,St+"-"+ut.id),this.hostAttr="_nghost-%COMP%".replace(rt,St+"-"+ut.id)}applyToHost(Ue){super.setAttribute(Ue,this.hostAttr,"")}createElement(Ue,Se){const ut=super.createElement(Ue,Se);return super.setAttribute(ut,this.contentAttr,""),ut}}class Qn extends qt{constructor(Ue,Se,ut,St){super(Ue),this.sharedStylesHost=Se,this.hostEl=ut,this.shadowRoot=ut.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Dn=Ut(St.id,St.styles,[]);for(let Wn=0;Wn<Dn.length;Wn++){const fr=document.createElement("style");fr.textContent=Dn[Wn],this.shadowRoot.appendChild(fr)}}nodeOrShadowRoot(Ue){return Ue===this.hostEl?this.shadowRoot:Ue}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(Ue,Se){return super.appendChild(this.nodeOrShadowRoot(Ue),Se)}insertBefore(Ue,Se,ut){return super.insertBefore(this.nodeOrShadowRoot(Ue),Se,ut)}removeChild(Ue,Se){return super.removeChild(this.nodeOrShadowRoot(Ue),Se)}parentNode(Ue){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(Ue)))}}let dn=(()=>{class ze extends Oe{constructor(Se){super(Se)}supports(Se){return!0}addEventListener(Se,ut,St){return Se.addEventListener(ut,St,!1),()=>this.removeEventListener(Se,ut,St)}removeEventListener(Se,ut,St){return Se.removeEventListener(ut,St)}}return ze.\u0275fac=function(Se){return new(Se||ze)(E.LFG(g.K0))},ze.\u0275prov=E.Yz7({token:ze,factory:ze.\u0275fac}),ze})();const Wt=["alt","control","meta","shift"],gt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ye={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Ct={alt:ze=>ze.altKey,control:ze=>ze.ctrlKey,meta:ze=>ze.metaKey,shift:ze=>ze.shiftKey};let Ee=(()=>{class ze extends Oe{constructor(Se){super(Se)}supports(Se){return null!=ze.parseEventName(Se)}addEventListener(Se,ut,St){const Dn=ze.parseEventName(ut),Wn=ze.eventCallback(Dn.fullKey,St,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,g.q)().onAndCancel(Se,Dn.domEventName,Wn))}static parseEventName(Se){const ut=Se.toLowerCase().split("."),St=ut.shift();if(0===ut.length||"keydown"!==St&&"keyup"!==St)return null;const Dn=ze._normalizeKey(ut.pop());let Wn="";if(Wt.forEach(Zr=>{const Sr=ut.indexOf(Zr);Sr>-1&&(ut.splice(Sr,1),Wn+=Zr+".")}),Wn+=Dn,0!=ut.length||0===Dn.length)return null;const fr={};return fr.domEventName=St,fr.fullKey=Wn,fr}static getEventFullKey(Se){let ut="",St=function(ze){let Ue=ze.key;if(null==Ue){if(Ue=ze.keyIdentifier,null==Ue)return"Unidentified";Ue.startsWith("U+")&&(Ue=String.fromCharCode(parseInt(Ue.substring(2),16)),3===ze.location&&Ye.hasOwnProperty(Ue)&&(Ue=Ye[Ue]))}return gt[Ue]||Ue}(Se);return St=St.toLowerCase()," "===St?St="space":"."===St&&(St="dot"),Wt.forEach(Dn=>{Dn!=St&&Ct[Dn](Se)&&(ut+=Dn+".")}),ut+=St,ut}static eventCallback(Se,ut,St){return Dn=>{ze.getEventFullKey(Dn)===Se&&St.runGuarded(()=>ut(Dn))}}static _normalizeKey(Se){return"esc"===Se?"escape":Se}}return ze.\u0275fac=function(Se){return new(Se||ze)(E.LFG(g.K0))},ze.\u0275prov=E.Yz7({token:ze,factory:ze.\u0275fac}),ze})();const bn=(0,E.eFA)(E._c5,"browser",[{provide:E.Lbi,useValue:g.bD},{provide:E.g9A,useValue:function(){ne.makeCurrent(),ae.init()},multi:!0},{provide:g.K0,useFactory:function(){return(0,E.RDi)(document),document},deps:[]}]),mn=[{provide:E.zSh,useValue:"root"},{provide:E.qLn,useFactory:function(){return new E.qLn},deps:[]},{provide:Ve,useClass:dn,multi:!0,deps:[g.K0,E.R0b,E.Lbi]},{provide:Ve,useClass:Ee,multi:!0,deps:[g.K0]},{provide:tn,useClass:tn,deps:[xe,Te,E.AFp]},{provide:E.FYo,useExisting:tn},{provide:ee,useExisting:Te},{provide:Te,useClass:Te,deps:[g.K0]},{provide:E.dDg,useClass:E.dDg,deps:[E.R0b]},{provide:xe,useClass:xe,deps:[Ve,E.R0b]},{provide:g.JF,useClass:Me,deps:[]}];let Rt=(()=>{class ze{constructor(Se){if(Se)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(Se){return{ngModule:ze,providers:[{provide:E.AFp,useValue:Se.appId},{provide:ie,useExisting:E.AFp},oe]}}}return ze.\u0275fac=function(Se){return new(Se||ze)(E.LFG(ze,12))},ze.\u0275mod=E.oAB({type:ze}),ze.\u0275inj=E.cJS({providers:mn,imports:[g.ez,E.hGG]}),ze})();"undefined"!=typeof window&&window;let Ce=(()=>{class ze{}return ze.\u0275fac=function(Se){return new(Se||ze)},ze.\u0275prov=E.Yz7({token:ze,factory:function(Se){let ut=null;return ut=Se?new(Se||ze):E.LFG(Ke),ut},providedIn:"root"}),ze})(),Ke=(()=>{class ze extends Ce{constructor(Se){super(),this._doc=Se}sanitize(Se,ut){if(null==ut)return null;switch(Se){case E.q3G.NONE:return ut;case E.q3G.HTML:return(0,E.qzn)(ut,"HTML")?(0,E.z3N)(ut):(0,E.EiD)(this._doc,String(ut)).toString();case E.q3G.STYLE:return(0,E.qzn)(ut,"Style")?(0,E.z3N)(ut):ut;case E.q3G.SCRIPT:if((0,E.qzn)(ut,"Script"))return(0,E.z3N)(ut);throw new Error("unsafe value used in a script context");case E.q3G.URL:return(0,E.yhl)(ut),(0,E.qzn)(ut,"URL")?(0,E.z3N)(ut):(0,E.mCW)(String(ut));case E.q3G.RESOURCE_URL:if((0,E.qzn)(ut,"ResourceURL"))return(0,E.z3N)(ut);throw new Error("unsafe value used in a resource URL context (see https://g.co/ng/security#xss)");default:throw new Error(`Unexpected SecurityContext ${Se} (see https://g.co/ng/security#xss)`)}}bypassSecurityTrustHtml(Se){return(0,E.JVY)(Se)}bypassSecurityTrustStyle(Se){return(0,E.L6k)(Se)}bypassSecurityTrustScript(Se){return(0,E.eBb)(Se)}bypassSecurityTrustUrl(Se){return(0,E.LAX)(Se)}bypassSecurityTrustResourceUrl(Se){return(0,E.pB0)(Se)}}return ze.\u0275fac=function(Se){return new(Se||ze)(E.LFG(g.K0))},ze.\u0275prov=E.Yz7({token:ze,factory:function(Se){let ut=null;return ut=Se?new Se:function(ze){return new Ke(ze.get(g.K0))}(E.LFG(E.zs3)),ut},providedIn:"root"}),ze})()},7587:($t,$e,x)=>{"use strict";x.d($e,{gz:()=>li,m2:()=>kn,F0:()=>pr,rH:()=>ks,Od:()=>vs,yS:()=>Ai,Bz:()=>qc,lC:()=>Ss});var g=x(5e3),E=x(2916),B=x(5254),ne=x(8896);function he(F){return new E.y(R=>{let M;try{M=F()}catch(W){return void R.error(W)}return(M?(0,B.D)(M):(0,ne.c)()).subscribe(R)})}var q=x(1086),se=x(591),X=x(6053),ie=x(4450),Q=x(1221),oe=x(1762),ae=x(8929),Me=x(2198),Ve=x(3489),xe=x(4231);function Oe(F){return function(M){return 0===F?(0,ne.c)():M.lift(new ee(F))}}class ee{constructor(R){if(this.total=R,this.total<0)throw new xe.W}call(R,M){return M.subscribe(new Te(R,this.total))}}class Te extends Ve.L{constructor(R,M){super(R),this.total=M,this.ring=new Array,this.count=0}_next(R){const M=this.ring,z=this.total,W=this.count++;M.length<z?M.push(R):M[W%z]=R}_complete(){const R=this.destination;let M=this.count;if(M>0){const z=this.count>=this.total?this.total:this.count,W=this.ring;for(let pe=0;pe<z;pe++){const Be=M++%z;R.next(W[Be])}}R.complete()}}var He=x(4907),yt=x(7314),rt=x(5379),we=x(4850),Pe=x(7545),qe=x(2986),et=x(1059),At=x(2014),Ut=x(7221),Zt=x(1406),jt=x(7224),tn=x(1709),qt=x(2868),wr=x(4327),ar=x(537),Nn=x(9146),Qn=x(9808);class dn{constructor(R,M){this.id=R,this.url=M}}class Wt extends dn{constructor(R,M,z="imperative",W=null){super(R,M),this.navigationTrigger=z,this.restoredState=W}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class kn extends dn{constructor(R,M,z){super(R,M),this.urlAfterRedirects=z}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class gt extends dn{constructor(R,M,z){super(R,M),this.reason=z}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ye extends dn{constructor(R,M,z){super(R,M),this.error=z}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ct extends dn{constructor(R,M,z,W){super(R,M),this.urlAfterRedirects=z,this.state=W}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ee extends dn{constructor(R,M,z,W){super(R,M),this.urlAfterRedirects=z,this.state=W}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class mt extends dn{constructor(R,M,z,W,pe){super(R,M),this.urlAfterRedirects=z,this.state=W,this.shouldActivate=pe}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Nt extends dn{constructor(R,M,z,W){super(R,M),this.urlAfterRedirects=z,this.state=W}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Mt extends dn{constructor(R,M,z,W){super(R,M),this.urlAfterRedirects=z,this.state=W}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class rn{constructor(R){this.route=R}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class En{constructor(R){this.route=R}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class bn{constructor(R){this.snapshot=R}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class mn{constructor(R){this.snapshot=R}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Rt{constructor(R){this.snapshot=R}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class br{constructor(R){this.snapshot=R}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class gr{constructor(R,M,z){this.routerEvent=R,this.position=M,this.anchor=z}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Qt="primary";class Yn{constructor(R){this.params=R||{}}has(R){return Object.prototype.hasOwnProperty.call(this.params,R)}get(R){if(this.has(R)){const M=this.params[R];return Array.isArray(M)?M[0]:M}return null}getAll(R){if(this.has(R)){const M=this.params[R];return Array.isArray(M)?M:[M]}return[]}get keys(){return Object.keys(this.params)}}function yr(F){return new Yn(F)}const hr="ngNavigationCancelingError";function Re(F){const R=Error("NavigationCancelingError: "+F);return R[hr]=!0,R}function J(F,R,M){const z=M.path.split("/");if(z.length>F.length||"full"===M.pathMatch&&(R.hasChildren()||z.length<F.length))return null;const W={};for(let pe=0;pe<z.length;pe++){const Be=z[pe],st=F[pe];if(Be.startsWith(":"))W[Be.substring(1)]=st;else if(Be!==st.path)return null}return{consumed:F.slice(0,z.length),posParams:W}}function be(F,R){const M=F?Object.keys(F):void 0,z=R?Object.keys(R):void 0;if(!M||!z||M.length!=z.length)return!1;let W;for(let pe=0;pe<M.length;pe++)if(W=M[pe],!N(F[W],R[W]))return!1;return!0}function N(F,R){if(Array.isArray(F)&&Array.isArray(R)){if(F.length!==R.length)return!1;const M=[...F].sort(),z=[...R].sort();return M.every((W,pe)=>z[pe]===W)}return F===R}function Ie(F){return Array.prototype.concat.apply([],F)}function at(F){return F.length>0?F[F.length-1]:null}function zt(F,R){for(const M in F)F.hasOwnProperty(M)&&R(F[M],M)}function sn(F){return(0,g.CqO)(F)?F:(0,g.QGY)(F)?(0,B.D)(Promise.resolve(F)):(0,q.of)(F)}const Jn={exact:function Xe(F,R,M){if(!Ce(F.segments,R.segments)||!In(F.segments,R.segments,M)||F.numberOfChildren!==R.numberOfChildren)return!1;for(const z in R.children)if(!F.children[z]||!Xe(F.children[z],R.children[z],M))return!1;return!0},subset:pt},Fn={exact:function(F,R){return be(F,R)},subset:function(F,R){return Object.keys(R).length<=Object.keys(F).length&&Object.keys(R).every(M=>N(F[M],R[M]))},ignored:()=>!0};function Fe(F,R,M){return Jn[M.paths](F.root,R.root,M.matrixParams)&&Fn[M.queryParams](F.queryParams,R.queryParams)&&!("exact"===M.fragment&&F.fragment!==R.fragment)}function pt(F,R,M){return pn(F,R,R.segments,M)}function pn(F,R,M,z){if(F.segments.length>M.length){const W=F.segments.slice(0,M.length);return!(!Ce(W,M)||R.hasChildren()||!In(W,M,z))}if(F.segments.length===M.length){if(!Ce(F.segments,M)||!In(F.segments,M,z))return!1;for(const W in R.children)if(!F.children[W]||!pt(F.children[W],R.children[W],z))return!1;return!0}{const W=M.slice(0,F.segments.length),pe=M.slice(F.segments.length);return!!(Ce(F.segments,W)&&In(F.segments,W,z)&&F.children[Qt])&&pn(F.children[Qt],R,pe,z)}}function In(F,R,M){return R.every((z,W)=>Fn[M](F[W].parameters,z.parameters))}class it{constructor(R,M,z){this.root=R,this.queryParams=M,this.fragment=z}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=yr(this.queryParams)),this._queryParamMap}toString(){return ze.serialize(this)}}class Qe{constructor(R,M){this.segments=R,this.children=M,this.parent=null,zt(M,(z,W)=>z.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ue(this)}}class De{constructor(R,M){this.path=R,this.parameters=M}get parameterMap(){return this._parameterMap||(this._parameterMap=yr(this.parameters)),this._parameterMap}toString(){return Sr(this)}}function Ce(F,R){return F.length===R.length&&F.every((M,z)=>M.path===R[z].path)}class Ke{}class bt{parse(R){const M=new ur(R);return new it(M.parseRootSegment(),M.parseQueryParams(),M.parseFragment())}serialize(R){const M=`/${Se(R.root,!0)}`,z=function(F){const R=Object.keys(F).map(M=>{const z=F[M];return Array.isArray(z)?z.map(W=>`${St(M)}=${St(W)}`).join("&"):`${St(M)}=${St(z)}`}).filter(M=>!!M);return R.length?`?${R.join("&")}`:""}(R.queryParams);var F;return`${M}${z}${"string"==typeof R.fragment?`#${F=R.fragment,encodeURI(F)}`:""}`}}const ze=new bt;function Ue(F){return F.segments.map(R=>Sr(R)).join("/")}function Se(F,R){if(!F.hasChildren())return Ue(F);if(R){const M=F.children[Qt]?Se(F.children[Qt],!1):"",z=[];return zt(F.children,(W,pe)=>{pe!==Qt&&z.push(`${pe}:${Se(W,!1)}`)}),z.length>0?`${M}(${z.join("//")})`:M}{const M=function(F,R){let M=[];return zt(F.children,(z,W)=>{W===Qt&&(M=M.concat(R(z,W)))}),zt(F.children,(z,W)=>{W!==Qt&&(M=M.concat(R(z,W)))}),M}(F,(z,W)=>W===Qt?[Se(F.children[Qt],!1)]:[`${W}:${Se(z,!1)}`]);return 1===Object.keys(F.children).length&&null!=F.children[Qt]?`${Ue(F)}/${M[0]}`:`${Ue(F)}/(${M.join("//")})`}}function ut(F){return encodeURIComponent(F).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function St(F){return ut(F).replace(/%3B/gi,";")}function Wn(F){return ut(F).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function fr(F){return decodeURIComponent(F)}function Zr(F){return fr(F.replace(/\+/g,"%20"))}function Sr(F){return`${Wn(F.path)}${function(F){return Object.keys(F).map(R=>`;${Wn(R)}=${Wn(F[R])}`).join("")}(F.parameters)}`}const Mr=/^[^\/()?;=#]+/;function or(F){const R=F.match(Mr);return R?R[0]:""}const to=/^[^=?&#]+/,yn=/^[^&#]+/;class ur{constructor(R){this.url=R,this.remaining=R}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Qe([],{}):new Qe([],this.parseChildren())}parseQueryParams(){const R={};if(this.consumeOptional("?"))do{this.parseQueryParam(R)}while(this.consumeOptional("&"));return R}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const R=[];for(this.peekStartsWith("(")||R.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),R.push(this.parseSegment());let M={};this.peekStartsWith("/(")&&(this.capture("/"),M=this.parseParens(!0));let z={};return this.peekStartsWith("(")&&(z=this.parseParens(!1)),(R.length>0||Object.keys(M).length>0)&&(z[Qt]=new Qe(R,M)),z}parseSegment(){const R=or(this.remaining);if(""===R&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(R),new De(fr(R),this.parseMatrixParams())}parseMatrixParams(){const R={};for(;this.consumeOptional(";");)this.parseParam(R);return R}parseParam(R){const M=or(this.remaining);if(!M)return;this.capture(M);let z="";if(this.consumeOptional("=")){const W=or(this.remaining);W&&(z=W,this.capture(z))}R[fr(M)]=fr(z)}parseQueryParam(R){const M=function(F){const R=F.match(to);return R?R[0]:""}(this.remaining);if(!M)return;this.capture(M);let z="";if(this.consumeOptional("=")){const Be=function(F){const R=F.match(yn);return R?R[0]:""}(this.remaining);Be&&(z=Be,this.capture(z))}const W=Zr(M),pe=Zr(z);if(R.hasOwnProperty(W)){let Be=R[W];Array.isArray(Be)||(Be=[Be],R[W]=Be),Be.push(pe)}else R[W]=pe}parseParens(R){const M={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const z=or(this.remaining),W=this.remaining[z.length];if("/"!==W&&")"!==W&&";"!==W)throw new Error(`Cannot parse url '${this.url}'`);let pe;z.indexOf(":")>-1?(pe=z.substr(0,z.indexOf(":")),this.capture(pe),this.capture(":")):R&&(pe=Qt);const Be=this.parseChildren();M[pe]=1===Object.keys(Be).length?Be[Qt]:new Qe([],Be),this.consumeOptional("//")}return M}peekStartsWith(R){return this.remaining.startsWith(R)}consumeOptional(R){return!!this.peekStartsWith(R)&&(this.remaining=this.remaining.substring(R.length),!0)}capture(R){if(!this.consumeOptional(R))throw new Error(`Expected "${R}".`)}}class Gr{constructor(R){this._root=R}get root(){return this._root.value}parent(R){const M=this.pathFromRoot(R);return M.length>1?M[M.length-2]:null}children(R){const M=ji(R,this._root);return M?M.children.map(z=>z.value):[]}firstChild(R){const M=ji(R,this._root);return M&&M.children.length>0?M.children[0].value:null}siblings(R){const M=Rr(R,this._root);return M.length<2?[]:M[M.length-2].children.map(W=>W.value).filter(W=>W!==R)}pathFromRoot(R){return Rr(R,this._root).map(M=>M.value)}}function ji(F,R){if(F===R.value)return R;for(const M of R.children){const z=ji(F,M);if(z)return z}return null}function Rr(F,R){if(F===R.value)return[R];for(const M of R.children){const z=Rr(F,M);if(z.length)return z.unshift(R),z}return[]}class Br{constructor(R,M){this.value=R,this.children=M}toString(){return`TreeNode(${this.value})`}}function mr(F){const R={};return F&&F.children.forEach(M=>R[M.value.outlet]=M),R}class Vr extends Gr{constructor(R,M){super(R),this.snapshot=M,ni(this,R)}toString(){return this.snapshot.toString()}}function Cs(F,R){const M=function(F,R){const Be=new gi([],{},{},"",{},Qt,R,null,F.root,-1,{});return new ci("",new Br(Be,[]))}(F,R),z=new se.X([new De("",{})]),W=new se.X({}),pe=new se.X({}),Be=new se.X({}),st=new se.X(""),ht=new li(z,W,Be,st,pe,Qt,R,M.root);return ht.snapshot=M.root,new Vr(new Br(ht,[]),M)}class li{constructor(R,M,z,W,pe,Be,st,ht){this.url=R,this.params=M,this.queryParams=z,this.fragment=W,this.data=pe,this.outlet=Be,this.component=st,this._futureSnapshot=ht}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,we.U)(R=>yr(R)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,we.U)(R=>yr(R)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Di(F,R="emptyOnly"){const M=F.pathFromRoot;let z=0;if("always"!==R)for(z=M.length-1;z>=1;){const W=M[z],pe=M[z-1];if(W.routeConfig&&""===W.routeConfig.path)z--;else{if(pe.component)break;z--}}return function(F){return F.reduce((R,M)=>({params:Object.assign(Object.assign({},R.params),M.params),data:Object.assign(Object.assign({},R.data),M.data),resolve:Object.assign(Object.assign({},R.resolve),M._resolvedData)}),{params:{},data:{},resolve:{}})}(M.slice(z))}class gi{constructor(R,M,z,W,pe,Be,st,ht,Jt,sr,Vt){this.url=R,this.params=M,this.queryParams=z,this.fragment=W,this.data=pe,this.outlet=Be,this.component=st,this.routeConfig=ht,this._urlSegment=Jt,this._lastPathIndex=sr,this._resolve=Vt}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=yr(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=yr(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(z=>z.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ci extends Gr{constructor(R,M){super(M),this.url=R,ni(this,M)}toString(){return mi(this._root)}}function ni(F,R){R.value._routerState=F,R.children.forEach(M=>ni(F,M))}function mi(F){const R=F.children.length>0?` { ${F.children.map(mi).join(", ")} } `:"";return`${F.value}${R}`}function ri(F){if(F.snapshot){const R=F.snapshot,M=F._futureSnapshot;F.snapshot=M,be(R.queryParams,M.queryParams)||F.queryParams.next(M.queryParams),R.fragment!==M.fragment&&F.fragment.next(M.fragment),be(R.params,M.params)||F.params.next(M.params),function(F,R){if(F.length!==R.length)return!1;for(let M=0;M<F.length;++M)if(!be(F[M],R[M]))return!1;return!0}(R.url,M.url)||F.url.next(M.url),be(R.data,M.data)||F.data.next(M.data)}else F.snapshot=F._futureSnapshot,F.data.next(F._futureSnapshot.data)}function tr(F,R){const M=be(F.params,R.params)&&function(F,R){return Ce(F,R)&&F.every((M,z)=>be(M.parameters,R[z].parameters))}(F.url,R.url);return M&&!(!F.parent!=!R.parent)&&(!F.parent||tr(F.parent,R.parent))}function Ki(F,R,M){if(M&&F.shouldReuseRoute(R.value,M.value.snapshot)){const z=M.value;z._futureSnapshot=R.value;const W=function(F,R,M){return R.children.map(z=>{for(const W of M.children)if(F.shouldReuseRoute(z.value,W.value.snapshot))return Ki(F,z,W);return Ki(F,z)})}(F,R,M);return new Br(z,W)}{if(F.shouldAttach(R.value)){const pe=F.retrieve(R.value);if(null!==pe){const Be=pe.route;return Be.value._futureSnapshot=R.value,Be.children=R.children.map(st=>Ki(F,st)),Be}}const z=function(F){return new li(new se.X(F.url),new se.X(F.params),new se.X(F.queryParams),new se.X(F.fragment),new se.X(F.data),F.outlet,F.component,F)}(R.value),W=R.children.map(pe=>Ki(F,pe));return new Br(z,W)}}function Ri(F){return"object"==typeof F&&null!=F&&!F.outlets&&!F.segmentPath}function Pi(F){return"object"==typeof F&&null!=F&&F.outlets}function Ti(F,R,M,z,W){let pe={};return z&&zt(z,(Be,st)=>{pe[st]=Array.isArray(Be)?Be.map(ht=>`${ht}`):`${Be}`}),new it(M.root===F?R:ps(M.root,F,R),pe,W)}function ps(F,R,M){const z={};return zt(F.children,(W,pe)=>{z[pe]=W===R?M:ps(W,R,M)}),new Qe(F.segments,z)}class qo{constructor(R,M,z){if(this.isAbsolute=R,this.numberOfDoubleDots=M,this.commands=z,R&&z.length>0&&Ri(z[0]))throw new Error("Root segment cannot have matrix parameters");const W=z.find(Pi);if(W&&W!==at(z))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class gs{constructor(R,M,z){this.segmentGroup=R,this.processChildren=M,this.index=z}}function It(F,R,M){if(F||(F=new Qe([],{})),0===F.segments.length&&F.hasChildren())return Kt(F,R,M);const z=function(F,R,M){let z=0,W=R;const pe={match:!1,pathIndex:0,commandIndex:0};for(;W<F.segments.length;){if(z>=M.length)return pe;const Be=F.segments[W],st=M[z];if(Pi(st))break;const ht=`${st}`,Jt=z<M.length-1?M[z+1]:null;if(W>0&&void 0===ht)break;if(ht&&Jt&&"object"==typeof Jt&&void 0===Jt.outlets){if(!Cr(ht,Jt,Be))return pe;z+=2}else{if(!Cr(ht,{},Be))return pe;z++}W++}return{match:!0,pathIndex:W,commandIndex:z}}(F,R,M),W=M.slice(z.commandIndex);if(z.match&&z.pathIndex<F.segments.length){const pe=new Qe(F.segments.slice(0,z.pathIndex),{});return pe.children[Qt]=new Qe(F.segments.slice(z.pathIndex),F.children),Kt(pe,0,W)}return z.match&&0===W.length?new Qe(F.segments,{}):z.match&&!F.hasChildren()?Mn(F,R,M):z.match?Kt(F,0,W):Mn(F,R,M)}function Kt(F,R,M){if(0===M.length)return new Qe(F.segments,{});{const z=function(F){return Pi(F[0])?F[0].outlets:{[Qt]:F}}(M),W={};return zt(z,(pe,Be)=>{"string"==typeof pe&&(pe=[pe]),null!==pe&&(W[Be]=It(F.children[Be],R,pe))}),zt(F.children,(pe,Be)=>{void 0===z[Be]&&(W[Be]=pe)}),new Qe(F.segments,W)}}function Mn(F,R,M){const z=F.segments.slice(0,R);let W=0;for(;W<M.length;){const pe=M[W];if(Pi(pe)){const ht=Nr(pe.outlets);return new Qe(z,ht)}if(0===W&&Ri(M[0])){z.push(new De(F.segments[R].path,Pr(M[0]))),W++;continue}const Be=Pi(pe)?pe.outlets[Qt]:`${pe}`,st=W<M.length-1?M[W+1]:null;Be&&st&&Ri(st)?(z.push(new De(Be,Pr(st))),W+=2):(z.push(new De(Be,{})),W++)}return new Qe(z,{})}function Nr(F){const R={};return zt(F,(M,z)=>{"string"==typeof M&&(M=[M]),null!==M&&(R[z]=Mn(new Qe([],{}),0,M))}),R}function Pr(F){const R={};return zt(F,(M,z)=>R[z]=`${M}`),R}function Cr(F,R,M){return F==M.path&&be(R,M.parameters)}class Is{constructor(R,M,z,W){this.routeReuseStrategy=R,this.futureState=M,this.currState=z,this.forwardEvent=W}activate(R){const M=this.futureState._root,z=this.currState?this.currState._root:null;this.deactivateChildRoutes(M,z,R),ri(this.futureState.root),this.activateChildRoutes(M,z,R)}deactivateChildRoutes(R,M,z){const W=mr(M);R.children.forEach(pe=>{const Be=pe.value.outlet;this.deactivateRoutes(pe,W[Be],z),delete W[Be]}),zt(W,(pe,Be)=>{this.deactivateRouteAndItsChildren(pe,z)})}deactivateRoutes(R,M,z){const W=R.value,pe=M?M.value:null;if(W===pe)if(W.component){const Be=z.getContext(W.outlet);Be&&this.deactivateChildRoutes(R,M,Be.children)}else this.deactivateChildRoutes(R,M,z);else pe&&this.deactivateRouteAndItsChildren(M,z)}deactivateRouteAndItsChildren(R,M){R.value.component&&this.routeReuseStrategy.shouldDetach(R.value.snapshot)?this.detachAndStoreRouteSubtree(R,M):this.deactivateRouteAndOutlet(R,M)}detachAndStoreRouteSubtree(R,M){const z=M.getContext(R.value.outlet),W=z&&R.value.component?z.children:M,pe=mr(R);for(const Be of Object.keys(pe))this.deactivateRouteAndItsChildren(pe[Be],W);if(z&&z.outlet){const Be=z.outlet.detach(),st=z.children.onOutletDeactivated();this.routeReuseStrategy.store(R.value.snapshot,{componentRef:Be,route:R,contexts:st})}}deactivateRouteAndOutlet(R,M){const z=M.getContext(R.value.outlet),W=z&&R.value.component?z.children:M,pe=mr(R);for(const Be of Object.keys(pe))this.deactivateRouteAndItsChildren(pe[Be],W);z&&z.outlet&&(z.outlet.deactivate(),z.children.onOutletDeactivated(),z.attachRef=null,z.resolver=null,z.route=null)}activateChildRoutes(R,M,z){const W=mr(M);R.children.forEach(pe=>{this.activateRoutes(pe,W[pe.value.outlet],z),this.forwardEvent(new br(pe.value.snapshot))}),R.children.length&&this.forwardEvent(new mn(R.value.snapshot))}activateRoutes(R,M,z){const W=R.value,pe=M?M.value:null;if(ri(W),W===pe)if(W.component){const Be=z.getOrCreateContext(W.outlet);this.activateChildRoutes(R,M,Be.children)}else this.activateChildRoutes(R,M,z);else if(W.component){const Be=z.getOrCreateContext(W.outlet);if(this.routeReuseStrategy.shouldAttach(W.snapshot)){const st=this.routeReuseStrategy.retrieve(W.snapshot);this.routeReuseStrategy.store(W.snapshot,null),Be.children.onOutletReAttached(st.contexts),Be.attachRef=st.componentRef,Be.route=st.route.value,Be.outlet&&Be.outlet.attach(st.componentRef,st.route.value),ri(st.route.value),this.activateChildRoutes(R,null,Be.children)}else{const st=function(F){for(let R=F.parent;R;R=R.parent){const M=R.routeConfig;if(M&&M._loadedConfig)return M._loadedConfig;if(M&&M.component)return null}return null}(W.snapshot),ht=st?st.module.componentFactoryResolver:null;Be.attachRef=null,Be.route=W,Be.resolver=ht,Be.outlet&&Be.outlet.activateWith(W,ht),this.activateChildRoutes(R,null,Be.children)}}else this.activateChildRoutes(R,null,z)}}class cs{constructor(R,M){this.routes=R,this.module=M}}function Gi(F){return"function"==typeof F}function Ds(F){return F instanceof it}const ts=Symbol("INITIAL_VALUE");function Yi(){return(0,Pe.w)(F=>(0,X.aj)(F.map(R=>R.pipe((0,qe.q)(1),(0,et.O)(ts)))).pipe((0,At.R)((R,M)=>{let z=!1;return M.reduce((W,pe,Be)=>W!==ts?W:(pe===ts&&(z=!0),z||!1!==pe&&Be!==M.length-1&&!Ds(pe)?W:pe),R)},ts),(0,Me.h)(R=>R!==ts),(0,we.U)(R=>Ds(R)?R:!0===R),(0,qe.q)(1)))}class Zi{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new us,this.attachRef=null}}class us{constructor(){this.contexts=new Map}onChildOutletCreated(R,M){const z=this.getOrCreateContext(R);z.outlet=M,this.contexts.set(R,z)}onChildOutletDestroyed(R){const M=this.getContext(R);M&&(M.outlet=null,M.attachRef=null)}onOutletDeactivated(){const R=this.contexts;return this.contexts=new Map,R}onOutletReAttached(R){this.contexts=R}getOrCreateContext(R){let M=this.getContext(R);return M||(M=new Zi,this.contexts.set(R,M)),M}getContext(R){return this.contexts.get(R)||null}}let Ss=(()=>{class F{constructor(M,z,W,pe,Be){this.parentContexts=M,this.location=z,this.resolver=W,this.changeDetector=Be,this.activated=null,this._activatedRoute=null,this.activateEvents=new g.vpe,this.deactivateEvents=new g.vpe,this.attachEvents=new g.vpe,this.detachEvents=new g.vpe,this.name=pe||Qt,M.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const M=this.parentContexts.getContext(this.name);M&&M.route&&(M.attachRef?this.attach(M.attachRef,M.route):this.activateWith(M.route,M.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const M=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(M.instance),M}attach(M,z){this.activated=M,this._activatedRoute=z,this.location.insert(M.hostView),this.attachEvents.emit(M.instance)}deactivate(){if(this.activated){const M=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(M)}}activateWith(M,z){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=M;const Be=(z=z||this.resolver).resolveComponentFactory(M._futureSnapshot.routeConfig.component),st=this.parentContexts.getOrCreateContext(this.name).children,ht=new ui(M,st,this.location.injector);this.activated=this.location.createComponent(Be,this.location.length,ht),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return F.\u0275fac=function(M){return new(M||F)(g.Y36(us),g.Y36(g.s_b),g.Y36(g._Vd),g.$8M("name"),g.Y36(g.sBO))},F.\u0275dir=g.lG2({type:F,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),F})();class ui{constructor(R,M,z){this.route=R,this.childContexts=M,this.parent=z}get(R,M){return R===li?this.route:R===us?this.childContexts:this.parent.get(R,M)}}let vi=(()=>{class F{}return F.\u0275fac=function(M){return new(M||F)},F.\u0275cmp=g.Xpm({type:F,selectors:[["ng-component"]],decls:1,vars:0,template:function(M,z){1&M&&g._UZ(0,"router-outlet")},directives:[Ss],encapsulation:2}),F})();function no(F,R=""){for(let M=0;M<F.length;M++){const z=F[M];Do(z,ki(R,z))}}function Do(F,R){F.children&&no(F.children,R)}function ki(F,R){return R?F||R.path?F&&!R.path?`${F}/`:!F&&R.path?R.path:`${F}/${R.path}`:"":F}function As(F){const R=F.children&&F.children.map(As),M=R?Object.assign(Object.assign({},F),{children:R}):Object.assign({},F);return!M.component&&(R||M.loadChildren)&&M.outlet&&M.outlet!==Qt&&(M.component=vi),M}function Ni(F){return F.outlet||Qt}function Ms(F,R){const M=F.filter(z=>Ni(z)===R);return M.push(...F.filter(z=>Ni(z)!==R)),M}const Qo={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Ls(F,R,M){var z;if(""===R.path)return"full"===R.pathMatch&&(F.hasChildren()||M.length>0)?Object.assign({},Qo):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const pe=(R.matcher||J)(M,F,R);if(!pe)return Object.assign({},Qo);const Be={};zt(pe.posParams,(ht,Jt)=>{Be[Jt]=ht.path});const st=pe.consumed.length>0?Object.assign(Object.assign({},Be),pe.consumed[pe.consumed.length-1].parameters):Be;return{matched:!0,consumedSegments:pe.consumed,lastChild:pe.consumed.length,parameters:st,positionalParamSegments:null!==(z=pe.posParams)&&void 0!==z?z:{}}}function Fi(F,R,M,z,W="corrected"){if(M.length>0&&function(F,R,M){return M.some(z=>S(F,R,z)&&Ni(z)!==Qt)}(F,M,z)){const Be=new Qe(R,function(F,R,M,z){const W={};W[Qt]=z,z._sourceSegment=F,z._segmentIndexShift=R.length;for(const pe of M)if(""===pe.path&&Ni(pe)!==Qt){const Be=new Qe([],{});Be._sourceSegment=F,Be._segmentIndexShift=R.length,W[Ni(pe)]=Be}return W}(F,R,z,new Qe(M,F.children)));return Be._sourceSegment=F,Be._segmentIndexShift=R.length,{segmentGroup:Be,slicedSegments:[]}}if(0===M.length&&function(F,R,M){return M.some(z=>S(F,R,z))}(F,M,z)){const Be=new Qe(F.segments,function(F,R,M,z,W,pe){const Be={};for(const st of z)if(S(F,M,st)&&!W[Ni(st)]){const ht=new Qe([],{});ht._sourceSegment=F,ht._segmentIndexShift="legacy"===pe?F.segments.length:R.length,Be[Ni(st)]=ht}return Object.assign(Object.assign({},W),Be)}(F,R,M,z,F.children,W));return Be._sourceSegment=F,Be._segmentIndexShift=R.length,{segmentGroup:Be,slicedSegments:M}}const pe=new Qe(F.segments,F.children);return pe._sourceSegment=F,pe._segmentIndexShift=R.length,{segmentGroup:pe,slicedSegments:M}}function S(F,R,M){return(!(F.hasChildren()||R.length>0)||"full"!==M.pathMatch)&&""===M.path}function y(F,R,M,z){return!!(Ni(F)===z||z!==Qt&&S(R,M,F))&&("**"===F.path||Ls(R,F,M).matched)}function C(F,R,M){return 0===R.length&&!F.children[M]}class H{constructor(R){this.segmentGroup=R||null}}class je{constructor(R){this.urlTree=R}}function wt(F){return new E.y(R=>R.error(new H(F)))}function hn(F){return new E.y(R=>R.error(new je(F)))}function Pn(F){return new E.y(R=>R.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${F}'`)))}class rr{constructor(R,M,z,W,pe){this.configLoader=M,this.urlSerializer=z,this.urlTree=W,this.config=pe,this.allowRedirects=!0,this.ngModule=R.get(g.h0i)}apply(){const R=Fi(this.urlTree.root,[],[],this.config).segmentGroup,M=new Qe(R.segments,R.children);return this.expandSegmentGroup(this.ngModule,this.config,M,Qt).pipe((0,we.U)(pe=>this.createUrlTree(Ur(pe),this.urlTree.queryParams,this.urlTree.fragment))).pipe((0,Ut.K)(pe=>{if(pe instanceof je)return this.allowRedirects=!1,this.match(pe.urlTree);throw pe instanceof H?this.noMatchError(pe):pe}))}match(R){return this.expandSegmentGroup(this.ngModule,this.config,R.root,Qt).pipe((0,we.U)(W=>this.createUrlTree(Ur(W),R.queryParams,R.fragment))).pipe((0,Ut.K)(W=>{throw W instanceof H?this.noMatchError(W):W}))}noMatchError(R){return new Error(`Cannot match any routes. URL Segment: '${R.segmentGroup}'`)}createUrlTree(R,M,z){const W=R.segments.length>0?new Qe([],{[Qt]:R}):R;return new it(W,M,z)}expandSegmentGroup(R,M,z,W){return 0===z.segments.length&&z.hasChildren()?this.expandChildren(R,M,z).pipe((0,we.U)(pe=>new Qe([],pe))):this.expandSegment(R,z,M,z.segments,W,!0)}expandChildren(R,M,z){const W=[];for(const pe of Object.keys(z.children))"primary"===pe?W.unshift(pe):W.push(pe);return(0,B.D)(W).pipe((0,Zt.b)(pe=>{const Be=z.children[pe],st=Ms(M,pe);return this.expandSegmentGroup(R,st,Be,pe).pipe((0,we.U)(ht=>({segment:ht,outlet:pe})))}),(0,At.R)((pe,Be)=>(pe[Be.outlet]=Be.segment,pe),{}),function(F,R){const M=arguments.length>=2;return z=>z.pipe(F?(0,Me.h)((W,pe)=>F(W,pe,z)):rt.y,Oe(1),M?(0,yt.d)(R):(0,He.T)(()=>new ie.K))}())}expandSegment(R,M,z,W,pe,Be){return(0,B.D)(z).pipe((0,Zt.b)(st=>this.expandSegmentAgainstRoute(R,M,z,st,W,pe,Be).pipe((0,Ut.K)(Jt=>{if(Jt instanceof H)return(0,q.of)(null);throw Jt}))),(0,jt.P)(st=>!!st),(0,Ut.K)((st,ht)=>{if(st instanceof ie.K||"EmptyError"===st.name){if(C(M,W,pe))return(0,q.of)(new Qe([],{}));throw new H(M)}throw st}))}expandSegmentAgainstRoute(R,M,z,W,pe,Be,st){return y(W,M,pe,Be)?void 0===W.redirectTo?this.matchSegmentAgainstRoute(R,M,W,pe,Be):st&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(R,M,z,W,pe,Be):wt(M):wt(M)}expandSegmentAgainstRouteUsingRedirect(R,M,z,W,pe,Be){return"**"===W.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(R,z,W,Be):this.expandRegularSegmentAgainstRouteUsingRedirect(R,M,z,W,pe,Be)}expandWildCardWithParamsAgainstRouteUsingRedirect(R,M,z,W){const pe=this.applyRedirectCommands([],z.redirectTo,{});return z.redirectTo.startsWith("/")?hn(pe):this.lineralizeSegments(z,pe).pipe((0,tn.zg)(Be=>{const st=new Qe(Be,{});return this.expandSegment(R,st,M,Be,W,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(R,M,z,W,pe,Be){const{matched:st,consumedSegments:ht,lastChild:Jt,positionalParamSegments:sr}=Ls(M,W,pe);if(!st)return wt(M);const Vt=this.applyRedirectCommands(ht,W.redirectTo,sr);return W.redirectTo.startsWith("/")?hn(Vt):this.lineralizeSegments(W,Vt).pipe((0,tn.zg)(Et=>this.expandSegment(R,M,z,Et.concat(pe.slice(Jt)),Be,!1)))}matchSegmentAgainstRoute(R,M,z,W,pe){if("**"===z.path)return z.loadChildren?(z._loadedConfig?(0,q.of)(z._loadedConfig):this.configLoader.load(R.injector,z)).pipe((0,we.U)(Et=>(z._loadedConfig=Et,new Qe(W,{})))):(0,q.of)(new Qe(W,{}));const{matched:Be,consumedSegments:st,lastChild:ht}=Ls(M,z,W);if(!Be)return wt(M);const Jt=W.slice(ht);return this.getChildConfig(R,z,W).pipe((0,tn.zg)(Vt=>{const Et=Vt.module,Bt=Vt.routes,{segmentGroup:Xr,slicedSegments:ao}=Fi(M,st,Jt,Bt),ei=new Qe(Xr.segments,Xr.children);if(0===ao.length&&ei.hasChildren())return this.expandChildren(Et,Bt,ei).pipe((0,we.U)(_a=>new Qe(st,_a)));if(0===Bt.length&&0===ao.length)return(0,q.of)(new Qe(st,{}));const ds=Ni(z)===pe;return this.expandSegment(Et,ei,Bt,ao,ds?Qt:pe,!0).pipe((0,we.U)(lo=>new Qe(st.concat(lo.segments),lo.children)))}))}getChildConfig(R,M,z){return M.children?(0,q.of)(new cs(M.children,R)):M.loadChildren?void 0!==M._loadedConfig?(0,q.of)(M._loadedConfig):this.runCanLoadGuards(R.injector,M,z).pipe((0,tn.zg)(W=>{return W?this.configLoader.load(R.injector,M).pipe((0,we.U)(pe=>(M._loadedConfig=pe,pe))):(F=M,new E.y(R=>R.error(Re(`Cannot load children because the guard of the route "path: '${F.path}'" returned false`))));var F})):(0,q.of)(new cs([],R))}runCanLoadGuards(R,M,z){const W=M.canLoad;if(!W||0===W.length)return(0,q.of)(!0);const pe=W.map(Be=>{const st=R.get(Be);let ht;if((F=st)&&Gi(F.canLoad))ht=st.canLoad(M,z);else{if(!Gi(st))throw new Error("Invalid CanLoad guard");ht=st(M,z)}var F;return sn(ht)});return(0,q.of)(pe).pipe(Yi(),(0,qt.b)(Be=>{if(!Ds(Be))return;const st=Re(`Redirecting to "${this.urlSerializer.serialize(Be)}"`);throw st.url=Be,st}),(0,we.U)(Be=>!0===Be))}lineralizeSegments(R,M){let z=[],W=M.root;for(;;){if(z=z.concat(W.segments),0===W.numberOfChildren)return(0,q.of)(z);if(W.numberOfChildren>1||!W.children[Qt])return Pn(R.redirectTo);W=W.children[Qt]}}applyRedirectCommands(R,M,z){return this.applyRedirectCreatreUrlTree(M,this.urlSerializer.parse(M),R,z)}applyRedirectCreatreUrlTree(R,M,z,W){const pe=this.createSegmentGroup(R,M.root,z,W);return new it(pe,this.createQueryParams(M.queryParams,this.urlTree.queryParams),M.fragment)}createQueryParams(R,M){const z={};return zt(R,(W,pe)=>{if("string"==typeof W&&W.startsWith(":")){const st=W.substring(1);z[pe]=M[st]}else z[pe]=W}),z}createSegmentGroup(R,M,z,W){const pe=this.createSegments(R,M.segments,z,W);let Be={};return zt(M.children,(st,ht)=>{Be[ht]=this.createSegmentGroup(R,st,z,W)}),new Qe(pe,Be)}createSegments(R,M,z,W){return M.map(pe=>pe.path.startsWith(":")?this.findPosParam(R,pe,W):this.findOrReturn(pe,z))}findPosParam(R,M,z){const W=z[M.path.substring(1)];if(!W)throw new Error(`Cannot redirect to '${R}'. Cannot find '${M.path}'.`);return W}findOrReturn(R,M){let z=0;for(const W of M){if(W.path===R.path)return M.splice(z),W;z++}return R}}function Ur(F){const R={};for(const z of Object.keys(F.children)){const pe=Ur(F.children[z]);(pe.segments.length>0||pe.hasChildren())&&(R[z]=pe)}return function(F){if(1===F.numberOfChildren&&F.children[Qt]){const R=F.children[Qt];return new Qe(F.segments.concat(R.segments),R.children)}return F}(new Qe(F.segments,R))}class Tn{constructor(R){this.path=R,this.route=this.path[this.path.length-1]}}class Os{constructor(R,M){this.component=R,this.route=M}}function No(F,R,M){const z=F._root;return ms(z,R?R._root:null,M,[z.value])}function Ei(F,R,M){const z=function(F){if(!F)return null;for(let R=F.parent;R;R=R.parent){const M=R.routeConfig;if(M&&M._loadedConfig)return M._loadedConfig}return null}(R);return(z?z.module.injector:M).get(F)}function ms(F,R,M,z,W={canDeactivateChecks:[],canActivateChecks:[]}){const pe=mr(R);return F.children.forEach(Be=>{(function(F,R,M,z,W={canDeactivateChecks:[],canActivateChecks:[]}){const pe=F.value,Be=R?R.value:null,st=M?M.getContext(F.value.outlet):null;if(Be&&pe.routeConfig===Be.routeConfig){const ht=function(F,R,M){if("function"==typeof M)return M(F,R);switch(M){case"pathParamsChange":return!Ce(F.url,R.url);case"pathParamsOrQueryParamsChange":return!Ce(F.url,R.url)||!be(F.queryParams,R.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!tr(F,R)||!be(F.queryParams,R.queryParams);default:return!tr(F,R)}}(Be,pe,pe.routeConfig.runGuardsAndResolvers);ht?W.canActivateChecks.push(new Tn(z)):(pe.data=Be.data,pe._resolvedData=Be._resolvedData),ms(F,R,pe.component?st?st.children:null:M,z,W),ht&&st&&st.outlet&&st.outlet.isActivated&&W.canDeactivateChecks.push(new Os(st.outlet.component,Be))}else Be&&Ir(R,st,W),W.canActivateChecks.push(new Tn(z)),ms(F,null,pe.component?st?st.children:null:M,z,W)})(Be,pe[Be.value.outlet],M,z.concat([Be.value]),W),delete pe[Be.value.outlet]}),zt(pe,(Be,st)=>Ir(Be,M.getContext(st),W)),W}function Ir(F,R,M){const z=mr(F),W=F.value;zt(z,(pe,Be)=>{Ir(pe,W.component?R?R.children.getContext(Be):null:R,M)}),M.canDeactivateChecks.push(new Os(W.component&&R&&R.outlet&&R.outlet.isActivated?R.outlet.component:null,W))}class vt{}function Ft(F){return new E.y(R=>R.error(F))}class _n{constructor(R,M,z,W,pe,Be){this.rootComponentType=R,this.config=M,this.urlTree=z,this.url=W,this.paramsInheritanceStrategy=pe,this.relativeLinkResolution=Be}recognize(){const R=Fi(this.urlTree.root,[],[],this.config.filter(Be=>void 0===Be.redirectTo),this.relativeLinkResolution).segmentGroup,M=this.processSegmentGroup(this.config,R,Qt);if(null===M)return null;const z=new gi([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Qt,this.rootComponentType,null,this.urlTree.root,-1,{}),W=new Br(z,M),pe=new ci(this.url,W);return this.inheritParamsAndData(pe._root),pe}inheritParamsAndData(R){const M=R.value,z=Di(M,this.paramsInheritanceStrategy);M.params=Object.freeze(z.params),M.data=Object.freeze(z.data),R.children.forEach(W=>this.inheritParamsAndData(W))}processSegmentGroup(R,M,z){return 0===M.segments.length&&M.hasChildren()?this.processChildren(R,M):this.processSegment(R,M,M.segments,z)}processChildren(R,M){const z=[];for(const pe of Object.keys(M.children)){const Be=M.children[pe],st=Ms(R,pe),ht=this.processSegmentGroup(st,Be,pe);if(null===ht)return null;z.push(...ht)}const W=zn(z);return W.sort((R,M)=>R.value.outlet===Qt?-1:M.value.outlet===Qt?1:R.value.outlet.localeCompare(M.value.outlet)),W}processSegment(R,M,z,W){for(const pe of R){const Be=this.processSegmentAgainstRoute(pe,M,z,W);if(null!==Be)return Be}return C(M,z,W)?[]:null}processSegmentAgainstRoute(R,M,z,W){if(R.redirectTo||!y(R,M,z,W))return null;let pe,Be=[],st=[];if("**"===R.path){const Bt=z.length>0?at(z).parameters:{};pe=new gi(z,Bt,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,$i(R),Ni(R),R.component,R,dr(M),zr(M)+z.length,bi(R))}else{const Bt=Ls(M,R,z);if(!Bt.matched)return null;Be=Bt.consumedSegments,st=z.slice(Bt.lastChild),pe=new gi(Be,Bt.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,$i(R),Ni(R),R.component,R,dr(M),zr(M)+Be.length,bi(R))}const ht=(F=R).children?F.children:F.loadChildren?F._loadedConfig.routes:[],{segmentGroup:Jt,slicedSegments:sr}=Fi(M,Be,st,ht.filter(Bt=>void 0===Bt.redirectTo),this.relativeLinkResolution);var F;if(0===sr.length&&Jt.hasChildren()){const Bt=this.processChildren(ht,Jt);return null===Bt?null:[new Br(pe,Bt)]}if(0===ht.length&&0===sr.length)return[new Br(pe,[])];const Vt=Ni(R)===W,Et=this.processSegment(ht,Jt,sr,Vt?Qt:W);return null===Et?null:[new Br(pe,Et)]}}function Ln(F){const R=F.value.routeConfig;return R&&""===R.path&&void 0===R.redirectTo}function zn(F){const R=[],M=new Set;for(const z of F){if(!Ln(z)){R.push(z);continue}const W=R.find(pe=>z.value.routeConfig===pe.value.routeConfig);void 0!==W?(W.children.push(...z.children),M.add(W)):R.push(z)}for(const z of M){const W=zn(z.children);R.push(new Br(z.value,W))}return R.filter(z=>!M.has(z))}function dr(F){let R=F;for(;R._sourceSegment;)R=R._sourceSegment;return R}function zr(F){let R=F,M=R._segmentIndexShift?R._segmentIndexShift:0;for(;R._sourceSegment;)R=R._sourceSegment,M+=R._segmentIndexShift?R._segmentIndexShift:0;return M-1}function $i(F){return F.data||{}}function bi(F){return F.resolve||{}}function ns(F){return(0,Pe.w)(R=>{const M=F(R);return M?(0,B.D)(M).pipe((0,we.U)(()=>R)):(0,q.of)(R)})}class io extends class{shouldDetach(R){return!1}store(R,M){}shouldAttach(R){return!1}retrieve(R){return null}shouldReuseRoute(R,M){return R.routeConfig===M.routeConfig}}{}const $o=new g.OlP("ROUTES");class so{constructor(R,M,z,W){this.injector=R,this.compiler=M,this.onLoadStartListener=z,this.onLoadEndListener=W}load(R,M){if(M._loader$)return M._loader$;this.onLoadStartListener&&this.onLoadStartListener(M);const W=this.loadModuleFactory(M.loadChildren).pipe((0,we.U)(pe=>{this.onLoadEndListener&&this.onLoadEndListener(M);const Be=pe.create(R);return new cs(Ie(Be.injector.get($o,void 0,g.XFs.Self|g.XFs.Optional)).map(As),Be)}),(0,Ut.K)(pe=>{throw M._loader$=void 0,pe}));return M._loader$=new oe.c(W,()=>new ae.xQ).pipe((0,wr.x)()),M._loader$}loadModuleFactory(R){return sn(R()).pipe((0,tn.zg)(M=>M instanceof g.YKP?(0,q.of)(M):(0,B.D)(this.compiler.compileModuleAsync(M))))}}class Bn{shouldProcessUrl(R){return!0}extract(R){return R}merge(R,M){return R}}function xn(F){throw F}function vn(F,R,M){return R.parse("/")}function vr(F,R){return(0,q.of)(null)}const qi={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Ps={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let pr=(()=>{class F{constructor(M,z,W,pe,Be,st,ht){this.rootComponentType=M,this.urlSerializer=z,this.rootContexts=W,this.location=pe,this.config=ht,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new ae.xQ,this.errorHandler=xn,this.malformedUriErrorHandler=vn,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:vr,afterPreactivation:vr},this.urlHandlingStrategy=new Bn,this.routeReuseStrategy=new io,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=Be.get(g.h0i),this.console=Be.get(g.c2e);const Vt=Be.get(g.R0b);this.isNgZoneEnabled=Vt instanceof g.R0b&&g.R0b.isInAngularZone(),this.resetConfig(ht),this.currentUrlTree=new it(new Qe([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new so(Be,st,Et=>this.triggerEvent(new rn(Et)),Et=>this.triggerEvent(new En(Et))),this.routerState=Cs(this.currentUrlTree,this.rootComponentType),this.transitions=new se.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var M;return null===(M=this.location.getState())||void 0===M?void 0:M.\u0275routerPageId}setupNavigations(M){const z=this.events;return M.pipe((0,Me.h)(W=>0!==W.id),(0,we.U)(W=>Object.assign(Object.assign({},W),{extractedUrl:this.urlHandlingStrategy.extract(W.rawUrl)})),(0,Pe.w)(W=>{let pe=!1,Be=!1;return(0,q.of)(W).pipe((0,qt.b)(st=>{this.currentNavigation={id:st.id,initialUrl:st.currentRawUrl,extractedUrl:st.extractedUrl,trigger:st.source,extras:st.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,Pe.w)(st=>{const ht=this.browserUrlTree.toString(),Jt=!this.navigated||st.extractedUrl.toString()!==ht||ht!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||Jt)&&this.urlHandlingStrategy.shouldProcessUrl(st.rawUrl))return Fo(st.source)&&(this.browserUrlTree=st.extractedUrl),(0,q.of)(st).pipe((0,Pe.w)(Vt=>{const Et=this.transitions.getValue();return z.next(new Wt(Vt.id,this.serializeUrl(Vt.extractedUrl),Vt.source,Vt.restoredState)),Et!==this.transitions.getValue()?ne.E:Promise.resolve(Vt)}),function(F,R,M,z){return(0,Pe.w)(W=>function(F,R,M,z,W){return new rr(F,R,M,z,W).apply()}(F,R,M,W.extractedUrl,z).pipe((0,we.U)(pe=>Object.assign(Object.assign({},W),{urlAfterRedirects:pe}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,qt.b)(Vt=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:Vt.urlAfterRedirects})}),function(F,R,M,z,W){return(0,tn.zg)(pe=>function(F,R,M,z,W="emptyOnly",pe="legacy"){try{const Be=new _n(F,R,M,z,W,pe).recognize();return null===Be?Ft(new vt):(0,q.of)(Be)}catch(Be){return Ft(Be)}}(F,R,pe.urlAfterRedirects,M(pe.urlAfterRedirects),z,W).pipe((0,we.U)(Be=>Object.assign(Object.assign({},pe),{targetSnapshot:Be}))))}(this.rootComponentType,this.config,Vt=>this.serializeUrl(Vt),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,qt.b)(Vt=>{if("eager"===this.urlUpdateStrategy){if(!Vt.extras.skipLocationChange){const Bt=this.urlHandlingStrategy.merge(Vt.urlAfterRedirects,Vt.rawUrl);this.setBrowserUrl(Bt,Vt)}this.browserUrlTree=Vt.urlAfterRedirects}const Et=new Ct(Vt.id,this.serializeUrl(Vt.extractedUrl),this.serializeUrl(Vt.urlAfterRedirects),Vt.targetSnapshot);z.next(Et)}));if(Jt&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:Et,extractedUrl:Bt,source:Xr,restoredState:ao,extras:ei}=st,ds=new Wt(Et,this.serializeUrl(Bt),Xr,ao);z.next(ds);const zo=Cs(Bt,this.rootComponentType).snapshot;return(0,q.of)(Object.assign(Object.assign({},st),{targetSnapshot:zo,urlAfterRedirects:Bt,extras:Object.assign(Object.assign({},ei),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=st.rawUrl,st.resolve(null),ne.E}),ns(st=>{const{targetSnapshot:ht,id:Jt,extractedUrl:sr,rawUrl:Vt,extras:{skipLocationChange:Et,replaceUrl:Bt}}=st;return this.hooks.beforePreactivation(ht,{navigationId:Jt,appliedUrlTree:sr,rawUrlTree:Vt,skipLocationChange:!!Et,replaceUrl:!!Bt})}),(0,qt.b)(st=>{const ht=new Ee(st.id,this.serializeUrl(st.extractedUrl),this.serializeUrl(st.urlAfterRedirects),st.targetSnapshot);this.triggerEvent(ht)}),(0,we.U)(st=>Object.assign(Object.assign({},st),{guards:No(st.targetSnapshot,st.currentSnapshot,this.rootContexts)})),function(F,R){return(0,tn.zg)(M=>{const{targetSnapshot:z,currentSnapshot:W,guards:{canActivateChecks:pe,canDeactivateChecks:Be}}=M;return 0===Be.length&&0===pe.length?(0,q.of)(Object.assign(Object.assign({},M),{guardsResult:!0})):function(F,R,M,z){return(0,B.D)(F).pipe((0,tn.zg)(W=>function(F,R,M,z,W){const pe=R&&R.routeConfig?R.routeConfig.canDeactivate:null;if(!pe||0===pe.length)return(0,q.of)(!0);const Be=pe.map(st=>{const ht=Ei(st,R,W);let Jt;if(function(F){return F&&Gi(F.canDeactivate)}(ht))Jt=sn(ht.canDeactivate(F,R,M,z));else{if(!Gi(ht))throw new Error("Invalid CanDeactivate guard");Jt=sn(ht(F,R,M,z))}return Jt.pipe((0,jt.P)())});return(0,q.of)(Be).pipe(Yi())}(W.component,W.route,M,R,z)),(0,jt.P)(W=>!0!==W,!0))}(Be,z,W,F).pipe((0,tn.zg)(st=>st&&function(F){return"boolean"==typeof F}(st)?function(F,R,M,z){return(0,B.D)(R).pipe((0,Zt.b)(W=>(0,Q.z)(function(F,R){return null!==F&&R&&R(new bn(F)),(0,q.of)(!0)}(W.route.parent,z),function(F,R){return null!==F&&R&&R(new Rt(F)),(0,q.of)(!0)}(W.route,z),function(F,R,M){const z=R[R.length-1],pe=R.slice(0,R.length-1).reverse().map(Be=>function(F){const R=F.routeConfig?F.routeConfig.canActivateChild:null;return R&&0!==R.length?{node:F,guards:R}:null}(Be)).filter(Be=>null!==Be).map(Be=>he(()=>{const st=Be.guards.map(ht=>{const Jt=Ei(ht,Be.node,M);let sr;if(function(F){return F&&Gi(F.canActivateChild)}(Jt))sr=sn(Jt.canActivateChild(z,F));else{if(!Gi(Jt))throw new Error("Invalid CanActivateChild guard");sr=sn(Jt(z,F))}return sr.pipe((0,jt.P)())});return(0,q.of)(st).pipe(Yi())}));return(0,q.of)(pe).pipe(Yi())}(F,W.path,M),function(F,R,M){const z=R.routeConfig?R.routeConfig.canActivate:null;if(!z||0===z.length)return(0,q.of)(!0);const W=z.map(pe=>he(()=>{const Be=Ei(pe,R,M);let st;if(function(F){return F&&Gi(F.canActivate)}(Be))st=sn(Be.canActivate(R,F));else{if(!Gi(Be))throw new Error("Invalid CanActivate guard");st=sn(Be(R,F))}return st.pipe((0,jt.P)())}));return(0,q.of)(W).pipe(Yi())}(F,W.route,M))),(0,jt.P)(W=>!0!==W,!0))}(z,pe,F,R):(0,q.of)(st)),(0,we.U)(st=>Object.assign(Object.assign({},M),{guardsResult:st})))})}(this.ngModule.injector,st=>this.triggerEvent(st)),(0,qt.b)(st=>{if(Ds(st.guardsResult)){const Jt=Re(`Redirecting to "${this.serializeUrl(st.guardsResult)}"`);throw Jt.url=st.guardsResult,Jt}const ht=new mt(st.id,this.serializeUrl(st.extractedUrl),this.serializeUrl(st.urlAfterRedirects),st.targetSnapshot,!!st.guardsResult);this.triggerEvent(ht)}),(0,Me.h)(st=>!!st.guardsResult||(this.restoreHistory(st),this.cancelNavigationTransition(st,""),!1)),ns(st=>{if(st.guards.canActivateChecks.length)return(0,q.of)(st).pipe((0,qt.b)(ht=>{const Jt=new Nt(ht.id,this.serializeUrl(ht.extractedUrl),this.serializeUrl(ht.urlAfterRedirects),ht.targetSnapshot);this.triggerEvent(Jt)}),(0,Pe.w)(ht=>{let Jt=!1;return(0,q.of)(ht).pipe(function(F,R){return(0,tn.zg)(M=>{const{targetSnapshot:z,guards:{canActivateChecks:W}}=M;if(!W.length)return(0,q.of)(M);let pe=0;return(0,B.D)(W).pipe((0,Zt.b)(Be=>function(F,R,M,z){return function(F,R,M,z){const W=Object.keys(F);if(0===W.length)return(0,q.of)({});const pe={};return(0,B.D)(W).pipe((0,tn.zg)(Be=>function(F,R,M,z){const W=Ei(F,R,z);return sn(W.resolve?W.resolve(R,M):W(R,M))}(F[Be],R,M,z).pipe((0,qt.b)(st=>{pe[Be]=st}))),Oe(1),(0,tn.zg)(()=>Object.keys(pe).length===W.length?(0,q.of)(pe):ne.E))}(F._resolve,F,R,z).pipe((0,we.U)(pe=>(F._resolvedData=pe,F.data=Object.assign(Object.assign({},F.data),Di(F,M).resolve),null)))}(Be.route,z,F,R)),(0,qt.b)(()=>pe++),Oe(1),(0,tn.zg)(Be=>pe===W.length?(0,q.of)(M):ne.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,qt.b)({next:()=>Jt=!0,complete:()=>{Jt||(this.restoreHistory(ht),this.cancelNavigationTransition(ht,"At least one route resolver didn't emit any value."))}}))}),(0,qt.b)(ht=>{const Jt=new Mt(ht.id,this.serializeUrl(ht.extractedUrl),this.serializeUrl(ht.urlAfterRedirects),ht.targetSnapshot);this.triggerEvent(Jt)}))}),ns(st=>{const{targetSnapshot:ht,id:Jt,extractedUrl:sr,rawUrl:Vt,extras:{skipLocationChange:Et,replaceUrl:Bt}}=st;return this.hooks.afterPreactivation(ht,{navigationId:Jt,appliedUrlTree:sr,rawUrlTree:Vt,skipLocationChange:!!Et,replaceUrl:!!Bt})}),(0,we.U)(st=>{const ht=function(F,R,M){const z=Ki(F,R._root,M?M._root:void 0);return new Vr(z,R)}(this.routeReuseStrategy,st.targetSnapshot,st.currentRouterState);return Object.assign(Object.assign({},st),{targetRouterState:ht})}),(0,qt.b)(st=>{this.currentUrlTree=st.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(st.urlAfterRedirects,st.rawUrl),this.routerState=st.targetRouterState,"deferred"===this.urlUpdateStrategy&&(st.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,st),this.browserUrlTree=st.urlAfterRedirects)}),((F,R,M)=>(0,we.U)(z=>(new Is(R,z.targetRouterState,z.currentRouterState,M).activate(F),z)))(this.rootContexts,this.routeReuseStrategy,st=>this.triggerEvent(st)),(0,qt.b)({next(){pe=!0},complete(){pe=!0}}),(0,ar.x)(()=>{var st;pe||Be||this.cancelNavigationTransition(W,`Navigation ID ${W.id} is not equal to the current navigation id ${this.navigationId}`),(null===(st=this.currentNavigation)||void 0===st?void 0:st.id)===W.id&&(this.currentNavigation=null)}),(0,Ut.K)(st=>{if(Be=!0,function(F){return F&&F[hr]}(st)){const ht=Ds(st.url);ht||(this.navigated=!0,this.restoreHistory(W,!0));const Jt=new gt(W.id,this.serializeUrl(W.extractedUrl),st.message);z.next(Jt),ht?setTimeout(()=>{const sr=this.urlHandlingStrategy.merge(st.url,this.rawUrlTree),Vt={skipLocationChange:W.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Fo(W.source)};this.scheduleNavigation(sr,"imperative",null,Vt,{resolve:W.resolve,reject:W.reject,promise:W.promise})},0):W.resolve(!1)}else{this.restoreHistory(W,!0);const ht=new Ye(W.id,this.serializeUrl(W.extractedUrl),st);z.next(ht);try{W.resolve(this.errorHandler(st))}catch(Jt){W.reject(Jt)}}return ne.E}))}))}resetRootComponentType(M){this.rootComponentType=M,this.routerState.root.component=this.rootComponentType}setTransition(M){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),M))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(M=>{const z="popstate"===M.type?"popstate":"hashchange";"popstate"===z&&setTimeout(()=>{var W;const pe={replaceUrl:!0},Be=(null===(W=M.state)||void 0===W?void 0:W.navigationId)?M.state:null;if(Be){const ht=Object.assign({},Be);delete ht.navigationId,delete ht.\u0275routerPageId,0!==Object.keys(ht).length&&(pe.state=ht)}const st=this.parseUrl(M.url);this.scheduleNavigation(st,z,Be,pe)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(M){this.events.next(M)}resetConfig(M){no(M),this.config=M.map(As),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(M,z={}){const{relativeTo:W,queryParams:pe,fragment:Be,queryParamsHandling:st,preserveFragment:ht}=z,Jt=W||this.routerState.root,sr=ht?this.currentUrlTree.fragment:Be;let Vt=null;switch(st){case"merge":Vt=Object.assign(Object.assign({},this.currentUrlTree.queryParams),pe);break;case"preserve":Vt=this.currentUrlTree.queryParams;break;default:Vt=pe||null}return null!==Vt&&(Vt=this.removeEmptyProps(Vt)),function(F,R,M,z,W){if(0===M.length)return Ti(R.root,R.root,R,z,W);const pe=function(F){if("string"==typeof F[0]&&1===F.length&&"/"===F[0])return new qo(!0,0,F);let R=0,M=!1;const z=F.reduce((W,pe,Be)=>{if("object"==typeof pe&&null!=pe){if(pe.outlets){const st={};return zt(pe.outlets,(ht,Jt)=>{st[Jt]="string"==typeof ht?ht.split("/"):ht}),[...W,{outlets:st}]}if(pe.segmentPath)return[...W,pe.segmentPath]}return"string"!=typeof pe?[...W,pe]:0===Be?(pe.split("/").forEach((st,ht)=>{0==ht&&"."===st||(0==ht&&""===st?M=!0:".."===st?R++:""!=st&&W.push(st))}),W):[...W,pe]},[]);return new qo(M,R,z)}(M);if(pe.toRoot())return Ti(R.root,new Qe([],{}),R,z,W);const Be=function(F,R,M){if(F.isAbsolute)return new gs(R.root,!0,0);if(-1===M.snapshot._lastPathIndex){const pe=M.snapshot._urlSegment;return new gs(pe,pe===R.root,0)}const z=Ri(F.commands[0])?0:1;return function(F,R,M){let z=F,W=R,pe=M;for(;pe>W;){if(pe-=W,z=z.parent,!z)throw new Error("Invalid number of '../'");W=z.segments.length}return new gs(z,!1,W-pe)}(M.snapshot._urlSegment,M.snapshot._lastPathIndex+z,F.numberOfDoubleDots)}(pe,R,F),st=Be.processChildren?Kt(Be.segmentGroup,Be.index,pe.commands):It(Be.segmentGroup,Be.index,pe.commands);return Ti(Be.segmentGroup,st,R,z,W)}(Jt,this.currentUrlTree,M,Vt,null!=sr?sr:null)}navigateByUrl(M,z={skipLocationChange:!1}){const W=Ds(M)?M:this.parseUrl(M),pe=this.urlHandlingStrategy.merge(W,this.rawUrlTree);return this.scheduleNavigation(pe,"imperative",null,z)}navigate(M,z={skipLocationChange:!1}){return function(F){for(let R=0;R<F.length;R++){const M=F[R];if(null==M)throw new Error(`The requested path contains ${M} segment at index ${R}`)}}(M),this.navigateByUrl(this.createUrlTree(M,z),z)}serializeUrl(M){return this.urlSerializer.serialize(M)}parseUrl(M){let z;try{z=this.urlSerializer.parse(M)}catch(W){z=this.malformedUriErrorHandler(W,this.urlSerializer,M)}return z}isActive(M,z){let W;if(W=!0===z?Object.assign({},qi):!1===z?Object.assign({},Ps):z,Ds(M))return Fe(this.currentUrlTree,M,W);const pe=this.parseUrl(M);return Fe(this.currentUrlTree,pe,W)}removeEmptyProps(M){return Object.keys(M).reduce((z,W)=>{const pe=M[W];return null!=pe&&(z[W]=pe),z},{})}processNavigations(){this.navigations.subscribe(M=>{this.navigated=!0,this.lastSuccessfulId=M.id,this.currentPageId=M.targetPageId,this.events.next(new kn(M.id,this.serializeUrl(M.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,M.resolve(!0)},M=>{this.console.warn(`Unhandled Navigation Error: ${M}`)})}scheduleNavigation(M,z,W,pe,Be){var st,ht,Jt;if(this.disposed)return Promise.resolve(!1);const sr=this.transitions.value,Vt=Fo(z)&&sr&&!Fo(sr.source),Et=sr.rawUrl.toString()===M.toString(),Bt=sr.id===(null===(st=this.currentNavigation)||void 0===st?void 0:st.id);if(Vt&&Et&&Bt)return Promise.resolve(!0);let ao,ei,ds;Be?(ao=Be.resolve,ei=Be.reject,ds=Be.promise):ds=new Promise((_a,ti)=>{ao=_a,ei=ti});const zo=++this.navigationId;let lo;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(W=this.location.getState()),lo=W&&W.\u0275routerPageId?W.\u0275routerPageId:pe.replaceUrl||pe.skipLocationChange?null!==(ht=this.browserPageId)&&void 0!==ht?ht:0:(null!==(Jt=this.browserPageId)&&void 0!==Jt?Jt:0)+1):lo=0,this.setTransition({id:zo,targetPageId:lo,source:z,restoredState:W,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:M,extras:pe,resolve:ao,reject:ei,promise:ds,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),ds.catch(_a=>Promise.reject(_a))}setBrowserUrl(M,z){const W=this.urlSerializer.serialize(M),pe=Object.assign(Object.assign({},z.extras.state),this.generateNgRouterState(z.id,z.targetPageId));this.location.isCurrentPathEqualTo(W)||z.extras.replaceUrl?this.location.replaceState(W,"",pe):this.location.go(W,"",pe)}restoreHistory(M,z=!1){var W,pe;if("computed"===this.canceledNavigationResolution){const Be=this.currentPageId-M.targetPageId;"popstate"!==M.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(W=this.currentNavigation)||void 0===W?void 0:W.finalUrl)||0===Be?this.currentUrlTree===(null===(pe=this.currentNavigation)||void 0===pe?void 0:pe.finalUrl)&&0===Be&&(this.resetState(M),this.browserUrlTree=M.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(Be)}else"replace"===this.canceledNavigationResolution&&(z&&this.resetState(M),this.resetUrlToCurrentUrlTree())}resetState(M){this.routerState=M.currentRouterState,this.currentUrlTree=M.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,M.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(M,z){const W=new gt(M.id,this.serializeUrl(M.extractedUrl),z);this.triggerEvent(W),M.resolve(!1)}generateNgRouterState(M,z){return"computed"===this.canceledNavigationResolution?{navigationId:M,\u0275routerPageId:z}:{navigationId:M}}}return F.\u0275fac=function(M){g.$Z()},F.\u0275prov=g.Yz7({token:F,factory:F.\u0275fac}),F})();function Fo(F){return"imperative"!==F}let ks=(()=>{class F{constructor(M,z,W,pe,Be){this.router=M,this.route=z,this.tabIndexAttribute=W,this.renderer=pe,this.el=Be,this.commands=null,this.onChanges=new ae.xQ,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(M){if(null!=this.tabIndexAttribute)return;const z=this.renderer,W=this.el.nativeElement;null!==M?z.setAttribute(W,"tabindex",M):z.removeAttribute(W,"tabindex")}ngOnChanges(M){this.onChanges.next(this)}set routerLink(M){null!=M?(this.commands=Array.isArray(M)?M:[M],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const M={skipLocationChange:ys(this.skipLocationChange),replaceUrl:ys(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,M),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:ys(this.preserveFragment)})}}return F.\u0275fac=function(M){return new(M||F)(g.Y36(pr),g.Y36(li),g.$8M("tabindex"),g.Y36(g.Qsj),g.Y36(g.SBq))},F.\u0275dir=g.lG2({type:F,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(M,z){1&M&&g.NdJ("click",function(){return z.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[g.TTD]}),F})(),Ai=(()=>{class F{constructor(M,z,W){this.router=M,this.route=z,this.locationStrategy=W,this.commands=null,this.href=null,this.onChanges=new ae.xQ,this.subscription=M.events.subscribe(pe=>{pe instanceof kn&&this.updateTargetUrlAndHref()})}set routerLink(M){this.commands=null!=M?Array.isArray(M)?M:[M]:null}ngOnChanges(M){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(M,z,W,pe,Be){if(0!==M||z||W||pe||Be||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const st={skipLocationChange:ys(this.skipLocationChange),replaceUrl:ys(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,st),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:ys(this.preserveFragment)})}}return F.\u0275fac=function(M){return new(M||F)(g.Y36(pr),g.Y36(li),g.Y36(Qn.S$))},F.\u0275dir=g.lG2({type:F,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(M,z){1&M&&g.NdJ("click",function(pe){return z.onClick(pe.button,pe.ctrlKey,pe.shiftKey,pe.altKey,pe.metaKey)}),2&M&&g.uIk("target",z.target)("href",z.href,g.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[g.TTD]}),F})();function ys(F){return""===F||!!F}let vs=(()=>{class F{constructor(M,z,W,pe,Be,st){this.router=M,this.element=z,this.renderer=W,this.cdr=pe,this.link=Be,this.linkWithHref=st,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new g.vpe,this.routerEventsSubscription=M.events.subscribe(ht=>{ht instanceof kn&&this.update()})}ngAfterContentInit(){(0,q.of)(this.links.changes,this.linksWithHrefs.changes,(0,q.of)(null)).pipe((0,Nn.J)()).subscribe(M=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var M;null===(M=this.linkInputChangesSubscription)||void 0===M||M.unsubscribe();const z=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(W=>!!W).map(W=>W.onChanges);this.linkInputChangesSubscription=(0,B.D)(z).pipe((0,Nn.J)()).subscribe(W=>{this.isActive!==this.isLinkActive(this.router)(W)&&this.update()})}set routerLinkActive(M){const z=Array.isArray(M)?M:M.split(" ");this.classes=z.filter(W=>!!W)}ngOnChanges(M){this.update()}ngOnDestroy(){var M;this.routerEventsSubscription.unsubscribe(),null===(M=this.linkInputChangesSubscription)||void 0===M||M.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const M=this.hasActiveLinks();this.isActive!==M&&(this.isActive=M,this.cdr.markForCheck(),this.classes.forEach(z=>{M?this.renderer.addClass(this.element.nativeElement,z):this.renderer.removeClass(this.element.nativeElement,z)}),this.isActiveChange.emit(M))})}isLinkActive(M){const z=function(F){return!!F.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return W=>!!W.urlTree&&M.isActive(W.urlTree,z)}hasActiveLinks(){const M=this.isLinkActive(this.router);return this.link&&M(this.link)||this.linkWithHref&&M(this.linkWithHref)||this.links.some(M)||this.linksWithHrefs.some(M)}}return F.\u0275fac=function(M){return new(M||F)(g.Y36(pr),g.Y36(g.SBq),g.Y36(g.Qsj),g.Y36(g.sBO),g.Y36(ks,8),g.Y36(Ai,8))},F.\u0275dir=g.lG2({type:F,selectors:[["","routerLinkActive",""]],contentQueries:function(M,z,W){if(1&M&&(g.Suo(W,ks,5),g.Suo(W,Ai,5)),2&M){let pe;g.iGM(pe=g.CRH())&&(z.links=pe),g.iGM(pe=g.CRH())&&(z.linksWithHrefs=pe)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[g.TTD]}),F})();class oa{}class Jr{preload(R,M){return(0,q.of)(null)}}let oo=(()=>{class F{constructor(M,z,W,pe){this.router=M,this.injector=W,this.preloadingStrategy=pe,this.loader=new so(W,z,ht=>M.triggerEvent(new rn(ht)),ht=>M.triggerEvent(new En(ht)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,Me.h)(M=>M instanceof kn),(0,Zt.b)(()=>this.preload())).subscribe(()=>{})}preload(){const M=this.injector.get(g.h0i);return this.processRoutes(M,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(M,z){const W=[];for(const pe of z)if(pe.loadChildren&&!pe.canLoad&&pe._loadedConfig){const Be=pe._loadedConfig;W.push(this.processRoutes(Be.module,Be.routes))}else pe.loadChildren&&!pe.canLoad?W.push(this.preloadConfig(M,pe)):pe.children&&W.push(this.processRoutes(M,pe.children));return(0,B.D)(W).pipe((0,Nn.J)(),(0,we.U)(pe=>{}))}preloadConfig(M,z){return this.preloadingStrategy.preload(z,()=>(z._loadedConfig?(0,q.of)(z._loadedConfig):this.loader.load(M.injector,z)).pipe((0,tn.zg)(pe=>(z._loadedConfig=pe,this.processRoutes(pe.module,pe.routes)))))}}return F.\u0275fac=function(M){return new(M||F)(g.LFG(pr),g.LFG(g.Sil),g.LFG(g.zs3),g.LFG(oa))},F.\u0275prov=g.Yz7({token:F,factory:F.\u0275fac}),F})(),Xo=(()=>{class F{constructor(M,z,W={}){this.router=M,this.viewportScroller=z,this.options=W,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},W.scrollPositionRestoration=W.scrollPositionRestoration||"disabled",W.anchorScrolling=W.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(M=>{M instanceof Wt?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=M.navigationTrigger,this.restoredId=M.restoredState?M.restoredState.navigationId:0):M instanceof kn&&(this.lastId=M.id,this.scheduleScrollEvent(M,this.router.parseUrl(M.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(M=>{M instanceof gr&&(M.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(M.position):M.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(M.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(M,z){this.router.triggerEvent(new gr(M,"popstate"===this.lastSource?this.store[this.restoredId]:null,z))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return F.\u0275fac=function(M){g.$Z()},F.\u0275prov=g.Yz7({token:F,factory:F.\u0275fac}),F})();const Es=new g.OlP("ROUTER_CONFIGURATION"),ga=new g.OlP("ROUTER_FORROOT_GUARD"),Lo=[Qn.Ye,{provide:Ke,useClass:bt},{provide:pr,useFactory:function(F,R,M,z,W,pe,Be={},st,ht){const Jt=new pr(null,F,R,M,z,W,Ie(pe));return st&&(Jt.urlHandlingStrategy=st),ht&&(Jt.routeReuseStrategy=ht),function(F,R){F.errorHandler&&(R.errorHandler=F.errorHandler),F.malformedUriErrorHandler&&(R.malformedUriErrorHandler=F.malformedUriErrorHandler),F.onSameUrlNavigation&&(R.onSameUrlNavigation=F.onSameUrlNavigation),F.paramsInheritanceStrategy&&(R.paramsInheritanceStrategy=F.paramsInheritanceStrategy),F.relativeLinkResolution&&(R.relativeLinkResolution=F.relativeLinkResolution),F.urlUpdateStrategy&&(R.urlUpdateStrategy=F.urlUpdateStrategy),F.canceledNavigationResolution&&(R.canceledNavigationResolution=F.canceledNavigationResolution)}(Be,Jt),Be.enableTracing&&Jt.events.subscribe(sr=>{var Vt,Et;null===(Vt=console.group)||void 0===Vt||Vt.call(console,`Router Event: ${sr.constructor.name}`),console.log(sr.toString()),console.log(sr),null===(Et=console.groupEnd)||void 0===Et||Et.call(console)}),Jt},deps:[Ke,us,Qn.Ye,g.zs3,g.Sil,$o,Es,[class{},new g.FiY],[class{},new g.FiY]]},us,{provide:li,useFactory:function(F){return F.routerState.root},deps:[pr]},oo,Jr,class{preload(R,M){return M().pipe((0,Ut.K)(()=>(0,q.of)(null)))}},{provide:Es,useValue:{enableTracing:!1}}];function rs(){return new g.PXZ("Router",pr)}let qc=(()=>{class F{constructor(M,z){}static forRoot(M,z){return{ngModule:F,providers:[Lo,Vs(M),{provide:ga,useFactory:pc,deps:[[pr,new g.FiY,new g.tp0]]},{provide:Es,useValue:z||{}},{provide:Qn.S$,useFactory:ea,deps:[Qn.lw,[new g.tBr(Qn.mr),new g.FiY],Es]},{provide:Xo,useFactory:hl,deps:[pr,Qn.EM,Es]},{provide:oa,useExisting:z&&z.preloadingStrategy?z.preloadingStrategy:Jr},{provide:g.PXZ,multi:!0,useFactory:rs},[ta,{provide:g.ip1,multi:!0,useFactory:Gl,deps:[ta]},{provide:Pa,useFactory:na,deps:[ta]},{provide:g.tb,multi:!0,useExisting:Pa}]]}}static forChild(M){return{ngModule:F,providers:[Vs(M)]}}}return F.\u0275fac=function(M){return new(M||F)(g.LFG(ga,8),g.LFG(pr,8))},F.\u0275mod=g.oAB({type:F}),F.\u0275inj=g.cJS({}),F})();function hl(F,R,M){return M.scrollOffset&&R.setOffset(M.scrollOffset),new Xo(F,R,M)}function ea(F,R,M={}){return M.useHash?new Qn.Do(F,R):new Qn.b0(F,R)}function pc(F){return"guarded"}function Vs(F){return[{provide:g.deG,multi:!0,useValue:F},{provide:$o,multi:!0,useValue:F}]}let ta=(()=>{class F{constructor(M){this.injector=M,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new ae.xQ}appInitializer(){return this.injector.get(Qn.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let z=null;const W=new Promise(st=>z=st),pe=this.injector.get(pr),Be=this.injector.get(Es);return"disabled"===Be.initialNavigation?(pe.setUpLocationChangeListener(),z(!0)):"enabled"===Be.initialNavigation||"enabledBlocking"===Be.initialNavigation?(pe.hooks.afterPreactivation=()=>this.initNavigation?(0,q.of)(null):(this.initNavigation=!0,z(!0),this.resultOfPreactivationDone),pe.initialNavigation()):z(!0),W})}bootstrapListener(M){const z=this.injector.get(Es),W=this.injector.get(oo),pe=this.injector.get(Xo),Be=this.injector.get(pr),st=this.injector.get(g.z2F);M===st.components[0]&&(("enabledNonBlocking"===z.initialNavigation||void 0===z.initialNavigation)&&Be.initialNavigation(),W.setUpPreloading(),pe.init(),Be.resetRootComponentType(st.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return F.\u0275fac=function(M){return new(M||F)(g.LFG(g.zs3))},F.\u0275prov=g.Yz7({token:F,factory:F.\u0275fac}),F})();function Gl(F){return F.appInitializer.bind(F)}function na(F){return F.bootstrapListener.bind(F)}const Pa=new g.OlP("Router Initializer")},3942:($t,$e,x)=>{"use strict";x.d($e,{Z:()=>xe});var g=x(2090),E=x(4859),B=x(9681),ne=x(1877);class he{constructor(ee,Te){this._delegate=ee,this.firebase=Te,(0,B._addComponent)(ee,new E.wA("app-compat",()=>this,"PUBLIC")),this.container=ee.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ee){this._delegate.automaticDataCollectionEnabled=ee}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ee=>{this._delegate.checkDestroyed(),ee()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,B.deleteApp)(this._delegate)))}_getService(ee,Te=B._DEFAULT_ENTRY_NAME){var He;this._delegate.checkDestroyed();const yt=this._delegate.container.getProvider(ee);return!yt.isInitialized()&&"EXPLICIT"===(null===(He=yt.getComponent())||void 0===He?void 0:He.instantiationMode)&&yt.initialize(),yt.getImmediate({identifier:Te})}_removeServiceInstance(ee,Te=B._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ee).clearInstance(Te)}_addComponent(ee){(0,B._addComponent)(this._delegate,ee)}_addOrOverwriteComponent(ee){(0,B._addOrOverwriteComponent)(this._delegate,ee)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const se=new g.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),Q=function ie(){const Oe=function(Oe){const ee={},Te={__esModule:!0,initializeApp:function(qe,et={}){const At=B.initializeApp(qe,et);if((0,g.r3)(ee,At.name))return ee[At.name];const Ut=new Oe(At,Te);return ee[At.name]=Ut,Ut},app:yt,registerVersion:B.registerVersion,setLogLevel:B.setLogLevel,onLog:B.onLog,apps:null,SDK_VERSION:B.SDK_VERSION,INTERNAL:{registerComponent:function(qe){const et=qe.name,At=et.replace("-compat","");if(B._registerComponent(qe)&&"PUBLIC"===qe.type){const Ut=(Zt=yt())=>{if("function"!=typeof Zt[At])throw se.create("invalid-app-argument",{appName:et});return Zt[At]()};void 0!==qe.serviceProps&&(0,g.ZB)(Ut,qe.serviceProps),Te[At]=Ut,Oe.prototype[At]=function(...Zt){return this._getService.bind(this,et).apply(this,qe.multipleInstances?Zt:[])}}return"PUBLIC"===qe.type?Te[At]:null},removeApp:function(qe){delete ee[qe]},useAsService:function(qe,et){return"serverAuth"===et?null:et},modularAPIs:B}};function yt(qe){if(!(0,g.r3)(ee,qe=qe||B._DEFAULT_ENTRY_NAME))throw se.create("no-app",{appName:qe});return ee[qe]}return Te.default=Te,Object.defineProperty(Te,"apps",{get:function(){return Object.keys(ee).map(qe=>ee[qe])}}),yt.App=Oe,Te}(he);return Oe.INTERNAL=Object.assign(Object.assign({},Oe.INTERNAL),{createFirebaseNamespace:ie,extendNamespace:function(Te){(0,g.ZB)(Oe,Te)},createSubscribe:g.ne,ErrorFactory:g.LL,deepExtend:g.ZB}),Oe}(),oe=new ne.Yd("@firebase/app-compat");if((0,g.jU)()&&void 0!==self.firebase){oe.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Oe=self.firebase.SDK_VERSION;Oe&&Oe.indexOf("LITE")>=0&&oe.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const xe=Q;(0,B.registerVersion)("@firebase/app-compat","0.1.12",undefined)},9681:($t,$e,x)=>{"use strict";x.r($e),x.d($e,{FirebaseError:()=>ne.ZR,SDK_VERSION:()=>En,_DEFAULT_ENTRY_NAME:()=>Nn,_addComponent:()=>kn,_addOrOverwriteComponent:()=>gt,_apps:()=>dn,_clearComponents:()=>mt,_components:()=>Wt,_getProvider:()=>Ct,_registerComponent:()=>Ye,_removeServiceInstance:()=>Ee,deleteApp:()=>br,getApp:()=>mn,getApps:()=>Rt,initializeApp:()=>bn,onLog:()=>Yn,registerVersion:()=>Qt,setLogLevel:()=>yr});var g=x(5861),E=x(4859),B=x(1877),ne=x(2090);class he{constructor(L){this.container=L}getPlatformInfoString(){return this.container.getProviders().map(J=>{if(function(Re){const L=Re.getComponent();return"VERSION"===(null==L?void 0:L.type)}(J)){const ce=J.getImmediate();return`${ce.library}/${ce.version}`}return null}).filter(J=>J).join(" ")}}const se="@firebase/app",X="0.7.11",ie=new B.Yd("@firebase/app"),Nn="[DEFAULT]",Qn={[se]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},dn=new Map,Wt=new Map;function kn(Re,L){try{Re.container.addComponent(L)}catch(J){ie.debug(`Component ${L.name} failed to register with FirebaseApp ${Re.name}`,J)}}function gt(Re,L){Re.container.addOrOverwriteComponent(L)}function Ye(Re){const L=Re.name;if(Wt.has(L))return ie.debug(`There were multiple attempts to register component ${L}.`),!1;Wt.set(L,Re);for(const J of dn.values())kn(J,Re);return!0}function Ct(Re,L){return Re.container.getProvider(L)}function Ee(Re,L,J=Nn){Ct(Re,L).clearInstance(J)}function mt(){Wt.clear()}const Mt=new ne.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class rn{constructor(L,J,ce){this._isDeleted=!1,this._options=Object.assign({},L),this._config=Object.assign({},J),this._name=J.name,this._automaticDataCollectionEnabled=J.automaticDataCollectionEnabled,this._container=ce,this.container.addComponent(new E.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(L){this.checkDestroyed(),this._automaticDataCollectionEnabled=L}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(L){this._isDeleted=L}checkDestroyed(){if(this.isDeleted)throw Mt.create("app-deleted",{appName:this._name})}}const En="9.6.1";function bn(Re,L={}){"object"!=typeof L&&(L={name:L});const J=Object.assign({name:Nn,automaticDataCollectionEnabled:!1},L),ce=J.name;if("string"!=typeof ce||!ce)throw Mt.create("bad-app-name",{appName:String(ce)});const be=dn.get(ce);if(be){if((0,ne.vZ)(Re,be.options)&&(0,ne.vZ)(J,be.config))return be;throw Mt.create("duplicate-app",{appName:ce})}const N=new E.H0(ce);for(const at of Wt.values())N.addComponent(at);const Ie=new rn(Re,J,N);return dn.set(ce,Ie),Ie}function mn(Re=Nn){const L=dn.get(Re);if(!L)throw Mt.create("no-app",{appName:Re});return L}function Rt(){return Array.from(dn.values())}function br(Re){return gr.apply(this,arguments)}function gr(){return(gr=(0,g.Z)(function*(Re){const L=Re.name;dn.has(L)&&(dn.delete(L),yield Promise.all(Re.container.getProviders().map(J=>J.delete())),Re.isDeleted=!0)})).apply(this,arguments)}function Qt(Re,L,J){var ce;let be=null!==(ce=Qn[Re])&&void 0!==ce?ce:Re;J&&(be+=`-${J}`);const N=be.match(/\s|\//),Ie=L.match(/\s|\//);if(N||Ie){const at=[`Unable to register library "${be}" with version "${L}":`];return N&&at.push(`library name "${be}" contains illegal characters (whitespace or "/")`),N&&Ie&&at.push("and"),Ie&&at.push(`version name "${L}" contains illegal characters (whitespace or "/")`),void ie.warn(at.join(" "))}Ye(new E.wA(`${be}-version`,()=>({library:be,version:L}),"VERSION"))}function Yn(Re,L){if(null!==Re&&"function"!=typeof Re)throw Mt.create("invalid-log-argument");(0,B.Am)(Re,L)}function yr(Re){(0,B.Ub)(Re)}Ye(new E.wA("platform-logger",L=>new he(L),"PRIVATE")),Qt(se,X,""),Qt(se,X,"esm2017"),Qt("fire-js","")},4859:($t,$e,x)=>{"use strict";x.d($e,{wA:()=>B,H0:()=>X,zt:()=>he});var g=x(5861),E=x(2090);class B{constructor(Q,oe,ae){this.name=Q,this.instanceFactory=oe,this.type=ae,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(Q){return this.instantiationMode=Q,this}setMultipleInstances(Q){return this.multipleInstances=Q,this}setServiceProps(Q){return this.serviceProps=Q,this}setInstanceCreatedCallback(Q){return this.onInstanceCreated=Q,this}}const ne="[DEFAULT]";class he{constructor(Q,oe){this.name=Q,this.container=oe,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(Q){const oe=this.normalizeInstanceIdentifier(Q);if(!this.instancesDeferred.has(oe)){const ae=new E.BH;if(this.instancesDeferred.set(oe,ae),this.isInitialized(oe)||this.shouldAutoInitialize())try{const Me=this.getOrInitializeService({instanceIdentifier:oe});Me&&ae.resolve(Me)}catch(Me){}}return this.instancesDeferred.get(oe).promise}getImmediate(Q){var oe;const ae=this.normalizeInstanceIdentifier(null==Q?void 0:Q.identifier),Me=null!==(oe=null==Q?void 0:Q.optional)&&void 0!==oe&&oe;if(!this.isInitialized(ae)&&!this.shouldAutoInitialize()){if(Me)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ae})}catch(Ve){if(Me)return null;throw Ve}}getComponent(){return this.component}setComponent(Q){if(Q.name!==this.name)throw Error(`Mismatching Component ${Q.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=Q,this.shouldAutoInitialize()){if("EAGER"===Q.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:ne})}catch(oe){}for(const[oe,ae]of this.instancesDeferred.entries()){const Me=this.normalizeInstanceIdentifier(oe);try{const Ve=this.getOrInitializeService({instanceIdentifier:Me});ae.resolve(Ve)}catch(Ve){}}}}clearInstance(Q=ne){this.instancesDeferred.delete(Q),this.instancesOptions.delete(Q),this.instances.delete(Q)}delete(){var Q=this;return(0,g.Z)(function*(){const oe=Array.from(Q.instances.values());yield Promise.all([...oe.filter(ae=>"INTERNAL"in ae).map(ae=>ae.INTERNAL.delete()),...oe.filter(ae=>"_delete"in ae).map(ae=>ae._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(Q=ne){return this.instances.has(Q)}getOptions(Q=ne){return this.instancesOptions.get(Q)||{}}initialize(Q={}){const{options:oe={}}=Q,ae=this.normalizeInstanceIdentifier(Q.instanceIdentifier);if(this.isInitialized(ae))throw Error(`${this.name}(${ae}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Me=this.getOrInitializeService({instanceIdentifier:ae,options:oe});for(const[Ve,xe]of this.instancesDeferred.entries())ae===this.normalizeInstanceIdentifier(Ve)&&xe.resolve(Me);return Me}onInit(Q,oe){var ae;const Me=this.normalizeInstanceIdentifier(oe),Ve=null!==(ae=this.onInitCallbacks.get(Me))&&void 0!==ae?ae:new Set;Ve.add(Q),this.onInitCallbacks.set(Me,Ve);const xe=this.instances.get(Me);return xe&&Q(xe,Me),()=>{Ve.delete(Q)}}invokeOnInitCallbacks(Q,oe){const ae=this.onInitCallbacks.get(oe);if(ae)for(const Me of ae)try{Me(Q,oe)}catch(Ve){}}getOrInitializeService({instanceIdentifier:Q,options:oe={}}){let ae=this.instances.get(Q);if(!ae&&this.component&&(ae=this.component.instanceFactory(this.container,{instanceIdentifier:(ie=Q,ie===ne?void 0:ie),options:oe}),this.instances.set(Q,ae),this.instancesOptions.set(Q,oe),this.invokeOnInitCallbacks(ae,Q),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,Q,ae)}catch(Me){}var ie;return ae||null}normalizeInstanceIdentifier(Q=ne){return this.component?this.component.multipleInstances?Q:ne:Q}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class X{constructor(Q){this.name=Q,this.providers=new Map}addComponent(Q){const oe=this.getProvider(Q.name);if(oe.isComponentSet())throw new Error(`Component ${Q.name} has already been registered with ${this.name}`);oe.setComponent(Q)}addOrOverwriteComponent(Q){this.getProvider(Q.name).isComponentSet()&&this.providers.delete(Q.name),this.addComponent(Q)}getProvider(Q){if(this.providers.has(Q))return this.providers.get(Q);const oe=new he(Q,this);return this.providers.set(Q,oe),oe}getProviders(){return Array.from(this.providers.values())}}},1877:($t,$e,x)=>{"use strict";x.d($e,{in:()=>E,Yd:()=>se,Ub:()=>X,Am:()=>ie});const g=[];var E=(()=>{return(Q=E||(E={}))[Q.DEBUG=0]="DEBUG",Q[Q.VERBOSE=1]="VERBOSE",Q[Q.INFO=2]="INFO",Q[Q.WARN=3]="WARN",Q[Q.ERROR=4]="ERROR",Q[Q.SILENT=5]="SILENT",E;var Q})();const B={debug:E.DEBUG,verbose:E.VERBOSE,info:E.INFO,warn:E.WARN,error:E.ERROR,silent:E.SILENT},ne=E.INFO,he={[E.DEBUG]:"log",[E.VERBOSE]:"log",[E.INFO]:"info",[E.WARN]:"warn",[E.ERROR]:"error"},q=(Q,oe,...ae)=>{if(oe<Q.logLevel)return;const Me=(new Date).toISOString(),Ve=he[oe];if(!Ve)throw new Error(`Attempted to log a message with an invalid logType (value: ${oe})`);console[Ve](`[${Me}]  ${Q.name}:`,...ae)};class se{constructor(oe){this.name=oe,this._logLevel=ne,this._logHandler=q,this._userLogHandler=null,g.push(this)}get logLevel(){return this._logLevel}set logLevel(oe){if(!(oe in E))throw new TypeError(`Invalid value "${oe}" assigned to \`logLevel\``);this._logLevel=oe}setLogLevel(oe){this._logLevel="string"==typeof oe?B[oe]:oe}get logHandler(){return this._logHandler}set logHandler(oe){if("function"!=typeof oe)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=oe}get userLogHandler(){return this._userLogHandler}set userLogHandler(oe){this._userLogHandler=oe}debug(...oe){this._userLogHandler&&this._userLogHandler(this,E.DEBUG,...oe),this._logHandler(this,E.DEBUG,...oe)}log(...oe){this._userLogHandler&&this._userLogHandler(this,E.VERBOSE,...oe),this._logHandler(this,E.VERBOSE,...oe)}info(...oe){this._userLogHandler&&this._userLogHandler(this,E.INFO,...oe),this._logHandler(this,E.INFO,...oe)}warn(...oe){this._userLogHandler&&this._userLogHandler(this,E.WARN,...oe),this._logHandler(this,E.WARN,...oe)}error(...oe){this._userLogHandler&&this._userLogHandler(this,E.ERROR,...oe),this._logHandler(this,E.ERROR,...oe)}}function X(Q){g.forEach(oe=>{oe.setLogLevel(Q)})}function ie(Q,oe){for(const ae of g){let Me=null;oe&&oe.level&&(Me=B[oe.level]),ae.userLogHandler=null===Q?null:(Ve,xe,...Oe)=>{const ee=Oe.map(Te=>{if(null==Te)return null;if("string"==typeof Te)return Te;if("number"==typeof Te||"boolean"==typeof Te)return Te.toString();if(Te instanceof Error)return Te.message;try{return JSON.stringify(Te)}catch(He){return null}}).filter(Te=>Te).join(" ");xe>=(null!=Me?Me:Ve.logLevel)&&Q({level:E[xe].toLowerCase(),message:ee,args:Oe,type:Ve.name})}}}},5861:($t,$e,x)=>{"use strict";function g(B,ne,he,q,se,X,ie){try{var Q=B[X](ie),oe=Q.value}catch(ae){return void he(ae)}Q.done?ne(oe):Promise.resolve(oe).then(q,se)}function E(B){return function(){var ne=this,he=arguments;return new Promise(function(q,se){var X=B.apply(ne,he);function ie(oe){g(X,q,se,ie,Q,"next",oe)}function Q(oe){g(X,q,se,ie,Q,"throw",oe)}ie(void 0)})}}x.d($e,{Z:()=>E})}},$t=>{$t($t.s=6474)}]);